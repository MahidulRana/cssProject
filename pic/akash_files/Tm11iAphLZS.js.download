if (self.CavalryLogger) { CavalryLogger.start_js(["aQTIS"]); }

__d("AggregatedGroupStoryComposerTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:AggregatedGroupStoryComposerLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:AggregatedGroupStoryComposerLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:AggregatedGroupStoryComposerLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};return a}();c={event:!0};e.exports=a}),null);
__d("XPrivacyRemindersDismissController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/privacy/reminders/dismiss/",{type:{type:"String",required:!0},log_plite:{type:"Bool",defaultValue:!1}})}),null);
__d("XPrivacyRemindersImpressionLoggingController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/privacy/reminders/log_imp/",{type:{type:"String",required:!0}})}),null);
__d("ComposerXBootloadStatusAttachment",["csx","cx","fbt","AggregatedGroupStoryComposerTypedLogger","Arbiter","AsyncRequest","Bootloader","ComposerXAttachment","ComposerXAttachmentButtonBarState","ComposerXAttachmentPrefillMixin","ComposerXAttachmentUtils","ComposerXController","ComposerXDragDrop","ComposerXDragDropUtils","ComposerXMarauderLogger","ComposerXStore","CSS","DOM","DOMQuery","Event","Focus","requireWeak","PageTransitions","PagesComposerEntryLogger","Parent","FocusListener","PrivacyConst","SelectorDeprecated","SubscriptionsHandler","URI","XUIError","classWithMixins","createCancelableFunction","getActiveElement","mixin","requestAnimationFrame","XPrivacyRemindersDismissController","XPrivacyRemindersImpressionLoggingController","XReactComposerLoggingODSController"],(function(a,b,c,d,e,f,g,h,i){var j,k;b("requireWeak")("LitestandStoryInsertionStatus",function(a){k=a});var l={only_me:{PRIVACY_CONSTANT:[(a=b("PrivacyConst")).BaseValue.SELF],LOG_IMPRESSION:"only_me_impression",LOG_CONVERSION:"only_me_conversion",LOG_IMPRESSION_TO_DISMISS_ENDPOINT:!0},everyone:{PRIVACY_CONSTANT:[a.BaseValue.EVERYONE],LOG_IMPRESSION:"everyone_impression",LOG_CONVERSION:"everyone_conversion",LOG_IMPRESSION_TO_DISMISS_ENDPOINT:!0},everyone_tests:{PRIVACY_CONSTANT:[a.BaseValue.EVERYONE],LOG_IMPRESSION:"everyone_tests_impression",LOG_CONVERSION:"everyone_tests_conversion",LOG_IMPRESSION_TO_DISMISS_ENDPOINT:!0},public_posting_filter_nux:{PRIVACY_CONSTANT:[a.BaseValue.EVERYONE],LOG_IMPRESSION:"public_posting_filter_nux_impression",LOG_CONVERSION:"public_posting_filter_nux_conversion",LOG_IMPRESSION_TO_DISMISS_ENDPOINT:!0}},m={};c=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b,c){var d;d=a.call(this)||this;d._onSelectorChange=function(a,b){if(!d.getComponent("mainprivacywidget"))return;(d._newPrivacyWidgetInstance||b.selector===d._privacyWidgetElement.firstChild)&&setTimeout(function(){Object.keys(d._privacyReminders).forEach(d._showPrivacyReminder,babelHelpers.assertThisInitialized(d))})};d._root=b;d._config=c;d._privacyReminders={};k&&k.registerBlocker(function(){return d._isFocused()});return d}var d=c.prototype;d.getRoot=function(){return this._root};d.getPrivacyInstance=function(){return this._newPrivacyWidgetInstance};d._getTextArea=function(){return b("DOMQuery").find(this.getComponent("maininput").element,"textarea.input")};d.initWithComponents=function(a){m[this._composerID]=this;this._attachmentIsActive=!0;var c=this._getTextArea(),d=b("DOMQuery").scry(b("Parent").bySelector(this.getRoot(),"._119"),"li."+this.attachmentClassName)[0];this._focusListener=b("Event").listen(c,"focus",this._onFocus.bind(this,"area_focus"));this._config.prefill_text&&this._initPrefill(c,this._config.prefill_text);a&&this._config.targetIsPage&&(this._pagesComposerEntryLogger=new(b("PagesComposerEntryLogger"))(this._config.targetID),this._pagesComposerEntryLogger.registerForContentEntryEvents(c));this._fullVersion?this._fullInitWithComponents():this._bootloading||(this._isFocused()?this._onFocus("is_focused"):d&&(this._clickListener=b("Event").listen(d,"click",function(){b("Focus").set(c)}.bind(this))));this._dragEnterHandler=b("Arbiter").subscribe("dragenter",function(a,d){if(d.element==this._root){b("Arbiter").inform("composerprivacy/aborteducation");a=d.event.dataTransfer.items;var e;a&&(e=b("ComposerXDragDropUtils").filterImages(a));if(e&&e.length>0)b("Focus").set(c);else{d=b("Parent").byClass(this._root,"focus_target");b("FocusListener").expandInput(d);this._onFocus("drag_focus")}}}.bind(this));this.getComponent("maininput").instance.setPlaceholder(this._config.mentionsPlaceholder);a||b("Focus").set(c);this._dragdrop=new(b("ComposerXDragDrop"))(this._root,this._composerID,this._config.targetID);this._dragdrop.enableURLDropping();this._initPrivacyWidgetInstance();this._config.postActionsButton!=null&&this._config.postActionsButton.initHiddenInputs(this.getComponent("pabhiddeninputs").instance);b("PageTransitions").registerHandler(this.cleanup.bind(this))};d._initPrivacyWidgetInstance=function(){var a=this.getComponent("mainprivacywidget");if(!a)return;this._privacyWidgetElement=a.element;this._newPrivacyWidgetInstance=a.instance&&a.instance.getInstance().getInstance();if(this._newPrivacyWidgetInstance){a=this.getComponent("maininput").instance&&this.getComponent("maininput").instance.getMentions();var b=this.getComponent("tagExpansionButton");b&&b.instance&&b.instance.listenToPrivacy(this._newPrivacyWidgetInstance,a)}};d._fullInitWithComponents=function(a){this._bootloadCallback=b("createCancelableFunction")(this._bootloadModules.bind(this)),b("Bootloader").loadModules(["ComposerXPrivacyWidgetTags","URLScraper","SuggestionScraper"],this._bootloadCallback,"ComposerXBootloadStatusAttachment"),Object.keys(this._privacyReminders).forEach(this._showPrivacyReminder,this),this._setEveryonePrivacyImpression&&this._showPrivacyReminder("everyone"),this._newPrivacyWidgetInstance?this._newPrivacyWidgetInstance.subscribe("changed",this._onSelectorChange):b("SelectorDeprecated").subscribe("select",this._onSelectorChange),b("Arbiter").inform("ComposerXBootloadStatusAttachment/mutate")};d._bootloadModules=function(a,c,d){this._modulesAreBootloaded=!0;this._tagger.init(this);this._privacyWidgetTags=new a(this);b("ComposerXAttachmentButtonBarState").trackCityChanges(this);a=b("DOMQuery").find(this.getComponent("maininput").element,"textarea.input");this._scraper||(this._scraper=new c(a),this._scraper.subscribe("match",function(a,c){a=this._getScraperEndpoint();a.addQueryData({scrape_url:encodeURIComponent(c.url),remove_url:this._config.remove_url,attachment_class:this._config.classname});c=this._config.isCarouselComposer;b("ComposerXController").getAttachment(this._root,a.toString(),null,c)}.bind(this)));this._scraper.enable();this._scraper.check();c=b("DOM").scry(this._root,"._4-jj");a=this.getComposerID();this._config.stream_context==="home"&&c&&c.length&&this._tagger&&a&&(this._suggestionScraper||(this._suggestionScraper=new d(this._tagger,c[0],[4,2,5],a),this._suggestionScraper.setBootloadTriggerConfig("composerentrybootstrap")))};d._showPrivacyReminder=function(a){var c=this,d=this._privacyReminders[a],e=l[a],f;this._newPrivacyWidgetInstance?f=this._newPrivacyWidgetInstance.getSelectedBaseValue():f=parseInt(b("SelectorDeprecated").getValue(this._privacyWidgetElement),10);if(!d||!d.dialog||d.shown){f===b("PrivacyConst").BaseValue.EVERYONE&&this._setEveryonePrivacyImpression&&(this._sendSetEveryonePrivacyImpression(),this._setEveryonePrivacyImpression=!1);return}if(e.PRIVACY_CONSTANT.indexOf(f)===-1)return;d.dialog.setContext(this._privacyWidgetElement).show();d.shown=!0;this._privacyReminderShown=!0;if(e.LOG_IMPRESSION){f=b("XPrivacyRemindersImpressionLoggingController").getURIBuilder().setString("type",e.LOG_IMPRESSION).getURI();new(b("AsyncRequest"))(f).send()}if(e.LOG_IMPRESSION_TO_DISMISS_ENDPOINT)if(a==="only_me"){f=b("XPrivacyRemindersDismissController").getURIBuilder().setString("type",a).getURI();new(b("AsyncRequest"))(f).send()}else new(b("AsyncRequest"))("/ajax/privacy/reminders/dismiss").setData({type:a,dismiss_type:"impression"}).send();f=function(e){var f=this,g=b("CSS").hasClass(e.target,"layerConfirm")||b("DOMQuery").scry(e.target,"^.layerConfirm").length===1;e=b("CSS").hasClass(e.target,"layerButton")||b("DOMQuery").scry(e.target,"^.layerButton").length===1;if(g&&a!=="public_posting_filter_nux"){if(a==="only_me"){g=b("XPrivacyRemindersImpressionLoggingController").getURIBuilder().setString("type","delta_everyone_ok_button_clicked").getURI();new(b("AsyncRequest"))(g).send()}return}if(a==="only_me"){g=b("XPrivacyRemindersDismissController").getURIBuilder().setString("type",a).getURI();new(b("AsyncRequest"))(g).send()}else new(b("AsyncRequest"))("/ajax/privacy/reminders/dismiss").setData({type:a,hide:e}).send();d.events.forEach(function(a){a.remove()});d.events=[];d.dialog.hide();this._privacyReminderShown=!1;e&&b("requestAnimationFrame")(function(){f._newPrivacyWidgetInstance?f._newPrivacyWidgetInstance.openSelector():b("SelectorDeprecated").toggle(b("DOMQuery").scry(c.getComponent("mainprivacywidget").element,".uiSelector")[0])})}.bind(this);this._newPrivacyWidgetInstance?d.conversionListener=this._newPrivacyWidgetInstance.subscribe("changed",function(a,b){a=this._newPrivacyWidgetInstance.getSelectedBaseValue();this._logPrivacyReminderConversion(d,e,a)}.bind(this)):d.conversionListener=b("SelectorDeprecated").subscribe("select",function(a,c){if(c.selector==this._privacyWidgetElement.firstChild){a=parseInt(b("SelectorDeprecated").getValue(c.option),10);this._logPrivacyReminderConversion(d,e,a)}}.bind(this));d.events=[b("Event").listen(d.dialog.getContent(),"click",f),b("Event").listen(d.dialog.getContext(),"click",f)]};d._logPrivacyReminderConversion=function(a,c,d){if(c.PRIVACY_CONSTANT.indexOf(d)===-1){if(c.LOG_CONVERSION){d=b("XPrivacyRemindersImpressionLoggingController").getURIBuilder().setString("type",c.LOG_CONVERSION).getURI();new(b("AsyncRequest"))(d).send()}this._newPrivacyWidgetInstance?this._newPrivacyWidgetInstance.unsubscribe(a.conversionListener):b("SelectorDeprecated").unsubscribe(a.conversionListener);a.conversionListener=null}};d.cleanup=function(){var a=this;this._attachmentIsActive=!1;this._focusListener&&(this._focusListener.remove(),this._focusListener=null);this._clickListener&&(this._clickListener.remove(),this._clickListener=null);Object.keys(l).forEach(function(c){c=a._privacyReminders[c];c&&c.dialog&&c.shown&&(c.dialog.hide(),c.events.forEach(function(a){a.remove()}),c.events=[],c.conversionListener&&(a._newPrivacyWidgetInstance?a._newPrivacyWidgetInstance.unsubscribe(c.conversionListener):b("SelectorDeprecated").unsubscribe(c.conversionListener)),c.conversionListener=null)});this._dragdrop&&(this._dragdrop.deactivate(),this._dragdrop=null);this._modulesAreBootloaded&&(this._tagger.cleanup(),this._privacyWidgetTags&&(this._privacyWidgetTags.destroy(),this._privacyWidgetTags=null),this._scraper.disable());this._bootloadCallback&&(this._bootloadCallback.cancel(),this._bootloadCallback=null);this._dragEnterHandler&&(this._dragEnterHandler.unsubscribe(),this._dragEnterHandler=null);this._pagesComposerEntryLogger&&this._pagesComposerEntryLogger.unregister()};d.reset=function(){var a=b("Parent").bySelector(this._root,".child_was_focused");a&&b("CSS").removeClass(a,"child_was_focused");this._tagger&&this._tagger.reset();this._scraper&&this._scraper.reset();this._newPrivacyWidgetInstance&&this._newPrivacyWidgetInstance.informTagsChanged([]);this.getComponent("maininput").instance.setPlaceholder(this._config.mentionsPlaceholder);this._config.prefill_text&&this._resetPrefill()};d.canSwitchAway=function(){return!b("Parent").byClass(this._root,"async_saving")};d.bootloadAttachments=function(){if(this._bootloading)return;this._bootloading=!0;b("ComposerXController").getEndpoint(this._root,"/ajax/composerx/attachment/status/bootload/",!0)};d.setBootloadedContent=function(a){var c=this;this._bootloading=!1;this._setEveryonePrivacyImpression=!!a.set_everyone_privacy_impression;Object.keys(l).forEach(function(b){var d=a[b+"_privacy_reminder"];d&&(c._privacyReminders[b]={dialog:d})});if(a.markup.privacy_widget){var d=b("DOMQuery").find(this._root,"._etn");b("DOM").setContent(d,a.markup.privacy_widget);d=b("DOMQuery").find(this._root,"._1dwm");d&&(d.disabled=!1,b("CSS").removeClass(d,"_42fr"))}d=a.placeholders.map(function(a){return a.component_name});b("ComposerXStore").waitForComponents(this._composerID,d,function(){var c=b("DOMQuery").find(this._root,"._3-6"),d=b("DOMQuery").find(this._root,"._3-7");b("DOM").setContent(c,a.markup.tagger_content);b("DOM").setContent(d,a.markup.tagger_icons);a.markup.privacy_widget&&this._initPrivacyWidgetInstance();b("ComposerXController").addPlaceholders(this._root,this,a.placeholders);this._tagger=a.tagger;b("ComposerXAttachmentButtonBarState").updateMessageBoxBarState(this);this._fullVersion=!0;this._attachmentIsActive&&this._fullInitWithComponents(a);b("ComposerXAttachmentUtils").registerMentionsForComposerCancel(this.getComponent("maininput"),this.getComposerID())}.bind(this));d=b("XReactComposerLoggingODSController").getURIBuilder().setString("event","bootload_done").setEnum("composer_type","legacy_feed").getURI();new(b("AsyncRequest"))(d).send()};d._getScraperEndpoint=function(){return new(j||(j=b("URI")))("/ajax/composerx/attachment/link/scraper/")};d._isFocused=function(){return b("DOMQuery").contains(this._root,b("getActiveElement")())};d._isEditing=function(){return this._isFocused()||this.getComponent("maininput").instance.hasChanges()};d._onFocus=function(a){this._config.is_group_aggregated_story&&a==="area_focus"&&new(b("AggregatedGroupStoryComposerTypedLogger"))().setEvent("click").log();b("ComposerXMarauderLogger").logEntry(this._composerID);this._prefillOnFocus();if(this._fullVersion||this._bootloading)return;b("Arbiter").inform("composer/focus",this._composerID);b("Arbiter").inform("composer/render_pab_nux");this.bootloadAttachments()};d.allowOGTagPreview=function(){return!0};d._sendSetEveryonePrivacyImpression=function(){new(b("AsyncRequest"))("/ajax/privacy/reminders/set_everyone_privacy_impression").send()};d.onEmptyStatusCallback=function(){var a=this,c=this._getTextArea();b("Focus").set(c);b("XUIError").set({target:c,message:i._("This status update appears to be blank. Please write something or attach a link or photo to update your status."),position:"below",alignh:"left"});new(b("SubscriptionsHandler"))().addSubscriptions(b("Event").listen(this.getRoot(),"success",function(){b("XUIError").clear(a._getTextArea())}),b("Arbiter").subscribe("composer/publish",function(c,d){if(d.composer_id!=a.getComposerID())return;b("XUIError").clear(a._getTextArea())}))};c.setBootloadedContent=function(a,b){a=m[a];a&&a.setBootloadedContent.call(a,b)};c.onEmptyStatusListener=function(a){a=m[a];a&&a.onEmptyStatusCallback.call(a)};return c}(b("classWithMixins")(b("ComposerXAttachment"),b("mixin")(b("ComposerXAttachmentPrefillMixin"))));Object.assign(c.prototype,{_attachmentIsActive:!1,_bootloading:!1,_modulesAreBootloaded:!1,_fullVersion:!1,_focusListener:null,_privacyWidgetTags:null,_scraper:null,_dragdrop:null,_bootloadCallback:null,attachmentClassName:"_4j"});e.exports=c}),null);
__d("ComposerXOGTaggerIconReset",["cx","CSS"],(function(a,b,c,d,e,f,g){function a(a){b("CSS").removeClass(a.element,"_4-jh"),b("CSS").removeClass(a.element,"_509o")}e.exports=a}),null);
__d("ComposerXTaggerIconReset",["cx","CSS"],(function(a,b,c,d,e,f,g){function a(a){b("CSS").removeClass(a.element,"_1dsa"),b("CSS").removeClass(a.element,"_1dsb"),b("CSS").removeClass(a.element,"_509o")}e.exports=a}),null);