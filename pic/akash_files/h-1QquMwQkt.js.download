if (self.CavalryLogger) { CavalryLogger.start_js(["Rl9R+"]); }

__d("MercurySharePreview.react",["cx","invariant","AsyncRequest","LeftRight.react","MercuryFallbackShareAttachment.react","MercuryShareAttachmentRenderLocations","React","XShareScrapeAttachmentAsyncController","XUICloseButton.react","XUISpinner.react","prop-types","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=1337,c.$2=null,c.state={attachmentData:null,loading:!1},c.$11=function(){c.$5(),c.props.onClose&&c.props.onClose(c.props.threadID)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$3(this.props.share),this.$4(this.props.uri)};d.componentWillUnmount=function(){this.$5()};d.UNSAFE_componentWillReceiveProps=function(a){a.share&&a.uri&&h(0,3593),!a.share&&!a.uri&&this.$5(),this.$3(a.share),this.$4(a.uri)};d.$3=function(a){var b=this.state.attachmentData||this.state.loading;a&&!b&&this.$6(a)};d.$4=function(a){var b=this.state.attachmentData||this.state.loading;a&&!(b&&this.props.uri===a)&&this.$7(a)};d.getShareData=function(){return this.state.attachmentData&&this.state.attachmentData.share_data};d.isLoading=function(){return this.state.loading};d.$6=function(a){var c=this,d=b("XShareScrapeAttachmentAsyncController").getURIBuilder().getURI();this.$2=new(b("AsyncRequest"))().setURI(d).setData({image_height:this.props.imageSize.height,image_width:this.props.imageSize.width,share_params:a.params,share_type:a.type}).setHandler(this.$8.bind(this,this.$9()));b("setImmediate")(function(){c.props.onLoading&&c.props.onLoading(c.props.threadID)});this.$2&&this.$2.send();this.setState({loading:!0,attachmentData:null})};d.$7=function(a){var c=this;this.$2=new(b("AsyncRequest"))().setURI("/message_share_attachment/fromURI/").setData({image_height:this.props.imageSize.height,image_width:this.props.imageSize.width,uri:encodeURI(a)}).setHandler(this.$8.bind(this,this.$9()));b("setImmediate")(function(){c.props.onLoading&&c.props.onLoading(c.props.threadID)});this.$2&&this.$2.send();this.setState({loading:!0,attachmentData:null})};d.$9=function(){return++this.$1};d.$10=function(){return this.$1};d.$8=function(a,b){if(this.$10()!==a)return;a=b.payload;a?(this.props.onLoaded&&this.props.onLoaded(this.props.threadID,a),this.setState({loading:!1,attachmentData:a})):this.props.onClose&&this.props.onClose(this.props.threadID)};d.$5=function(){this.$9(),this.$2&&this.$2.abort(),this.$2=null,this.setState({loading:!1,attachmentData:null})};d.render=function(){var a="_tig _tih";if(this.state.loading)return i.jsxs(b("LeftRight.react"),{direction:b("LeftRight.react").DIRECTION.right,className:a,children:[i.jsx(b("XUISpinner.react"),{className:"_tii",size:"large",background:"light"}),i.jsx(b("XUICloseButton.react"),{className:"_tij",shade:"dark",size:"small",onClick:this.$11})]});a=this.state.attachmentData;return!a?i.jsx("div",{}):i.jsxs("div",{children:[i.jsx(b("MercuryFallbackShareAttachment.react"),{attachment:a,location:b("MercuryShareAttachmentRenderLocations").CHAT_PREVIEW}),i.jsx(b("XUICloseButton.react"),{className:"_tij",shade:"dark",size:"small",onClick:this.$11})]})};return c}(i.Component);a.propTypes={threadID:(c=b("prop-types")).string,imageSize:c.shape({width:c.number.isRequired,height:c.number.isRequired}).isRequired,location:c.oneOf(b("MercuryShareAttachmentRenderLocations").getValues()).isRequired,share:c.shape({params:c.array,type:c.number}),uri:c.string,onClose:c.func,onLoaded:c.func,onLoading:c.func};e.exports=a}),null);
__d("PhotoSnowliftViewableWithShieldIconOverlay",["cx","DOM"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a.classList.add("_3016","_ttr","_r1y"),a.appendChild(b("DOM").create("div",{"class":"_r1z"}))}e.exports={setupShieldIconOverlay:a}}),null);