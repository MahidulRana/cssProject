if (self.CavalryLogger) { CavalryLogger.start_js(["CVPSt"]); }

__d("AdsInstagramPreviewStrings",["cx","fbt","React"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a={VIEW_PRODUCTS:h._("View Products"),IN_THIS_PHOTO:h._("In This Photo"),MORE_FROM_MERCHANT:function(a){return h._("More from {merchantUsername}",[h._param("merchantUsername",a)])},VIEW_ALL_PRODUCTS:h._("View All Products")};c={PAID_PARTNERSHIP_WITH:function(a){return h._("Paid partnership with {=[sponsor name]}",[h._param("=[sponsor name]",i.jsx("div",{className:"_843s",children:h._("{sponsor name}",[h._param("sponsor name",a)])}))])}};d={SPONSORED:h._("Sponsored"),KEEP_WATCHING:h._("Keep Watching")};e.exports={BRANDED_CONTENT_AD_STRINGS:c,COMMON_STRINGS:d,SHOPPING_AD_STRINGS:a}}),null);
__d("AdsInstagramStoryProgressBar",["Event","Style","clearTimeout","setTimeout"],(function(a,b,c,d,e,f){"use strict";var g=5e3,h=25;a={init:function(a,c,d){var e,f=Date.now(),i=0,j,k=0,l=function a(){e&&(i=(Date.now()-f+i)%e,f=Date.now(),k=Math.max(0,i/e*100),b("Style").set(c,"width",k+"%")),j=b("setTimeout")(a,h)};if(a instanceof HTMLVideoElement){var m=a;d!=null&&typeof d==="number"&&d>0?e=d*1e3:m.readyState>=m.HAVE_METADATA?e=m.duration*1e3:b("Event").listen(m,"loadedmetadata",function(){e=m.duration*1e3});b("Event").listen(m,"timeupdate",function(){f=Date.now(),i=m.currentTime*1e3})}else e=g;j=b("setTimeout")(l,h);b("Event").listen(a,"DOMNodeRemoved",function(){return b("clearTimeout")(j)})}};e.exports=a}),null);
__d("AdsInstagramPreviewCommonUtils",["cx","fbt","invariant","AdsAPIAdgroupRecordUtils","AdsInstagramStoryProgressBar","DOM","DOMContainer.react","Image.react","Locale","React","UnicodeBidi","adsAccountGK"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=b("React");function a(){return j.jsx(b("Image.react"),{className:"_86t",src:"/images/instagram/ads/preview/story-close.png"})}function c(a){a=b("UnicodeBidi").isDirectionRTL(a);var c=b("Locale").isRTL(),d="";a&&!c?d="rtl":!a&&c&&(d="ltr");return d}function d(a){var c=b("DOM").create("div",{className:a.fillClass});b("AdsInstagramStoryProgressBar").init(a.media,c);c=j.jsx(b("DOMContainer.react"),{children:c});return j.jsxs("div",{className:a.barClass,children:[" ",c," "]})}function f(a){return j.jsxs("div",{className:"_6m_u",children:[j.jsx(b("Image.react"),{className:"_6m_v",src:a.profilePicUrl}),j.jsx("div",{className:"_6m_w",children:a.username}),j.jsx("div",{className:"_6m_x",children:h._("Sponsored")})]})}function k(a,b,c){var d=k.canvas=document.createElement("canvas");d=d.getContext("2d");d.font=b;b=c!=null?a.replace(" ","").length*c:0;c=d.measureText(a);return c.width+b}function g(a){var b,c=a.mediaDataCollection,d=a.adFormat==="single_media"?[a.mediaCard]:a.mediaCards,e=a.adFormat==="single_media"?void 0:a.carouselDeliveryMode;return{version:"v2",commonData:{adType:a.adFormat,apiAdFormat:"INSTAGRAM_STORY",storyPreviewType:a.storyPreviewType},identityData:{profileName:a.username,profilePictureUrl:a.profilePicUrl,brandedContentSponsorName:a.brandedContentSponsorName},textData:{primaryText:(b=a.caption)!=null?b:"",headlines:c.map(function(a){return(a=a.headline)!=null?a:""}),isAutotranslated:a.adFormat==="single_media"?a.isAutotranslated:void 0,descriptions:c.map(function(a){return(a=a.description)!=null?a:""}),authorizationDisclaimer:a.authorizationDisclaimer,portalData:d.map(function(a){return a.portalInfo})},mediaData:{mediaDataCells:c.map(function(a,b){var c;return{imageMediaData:{imageURL:a.image_url,height:void 0,width:void 0,cropType:(c=d[b].cropType)!=null?c:void 0},videoMediaData:{videoID:a.video_id,videoURL:a.video_url,videoSubtitleURL:a.video_subtitle_url,videoSubtitleOffset:a.video_subtitle_offset,isLongVideo:a.is_long_video,isLoopVideo:a.loop_video,height:void 0,width:void 0},interactiveComponents:d[b].interactiveComponents,overlay:d[b].overlay}})},callToActionData:{callToActionDataCells:d.map(function(a){return{cta:a.cta,callToActionType:a.ctaType,callToActionAppDestination:(a=a.ctaAppDestination)!=null?a:void 0}}),disclaimerCTAData:null},customizationData:{carouselDeliveryMode:e,dynamicStoryCaptionInfo:a.dynamicStoryCaptionInfos},error_message:void 0}}function i(a,c,d,e,f){return b("AdsAPIAdgroupRecordUtils").isExistingPostAd(a)?!1:f===!0||b("adsAccountGK")._(e,"2Aa8v5A2B")}e.exports={AdsInstagramCloseButton:a,AdsInstagramGetTextDirection:c,AdsInstagramProgressBar:d,AdsInstagramUserMetadata:f,getTextWidthForAdPreviewCaption:k,convertOldToNewAdPreviewProps:g,isIGFeedClientSidePreviewSupported:i}}),null);
__d("InstagramAdsPreview",["cssVar","csx","cx","CSS","DOMDimensions","DOMQuery","Event","Style"],(function(a,b,c,d,e,f,g,h,i){var j={truncateCaption:function(a,c,d,e,f){var g=[],h,i=!1;c=parseInt("15px",c);Array.from(a.children).forEach(function(a){Array.from(a.children).forEach(function(a){g.push(a)})});var j=g[g.length-1],k=-1,l=e!=void 0&&f!=void 0;for(var m=0;m<g.length-1;m++){b("CSS").removeClass(g[m],"_50f0");var n=g[m].textContent;if(l&&b("DOMDimensions").getElementDimensions(f).width>e&&n!=void 0){m>=2&&k<m-2&&(n="\n"+n);m<g.length-2&&(n+="\n");k=m;b("Style").set(g[m],"word-break","break-all");g[m].innerText=n;h=b("DOMDimensions").getElementDimensions(a).height;if(h/c>d){i=!0;b("CSS").removeClass(j,"_50f0");var o=n.length;while(h/c>d&&o>=0)g[m].textContent=n.substring(0,o),h=b("DOMDimensions").getElementDimensions(a).height,o--;break}}else{h=b("DOMDimensions").getElementDimensions(a).height;if(h/c>d){i=!0;b("CSS").removeClass(j,"_50f0");while(h/c>d&&m>=0)b("CSS").addClass(g[m],"_50f0"),h=b("DOMDimensions").getElementDimensions(a).height,m--;break}}}b("CSS").removeClass(a,"_50f1");return i},setDynamicTextSizeForCaption:function(a,b,c,d,e,f){while(e-f>1){var g=Math.floor(f+(e-f)/2);j.setTextFontSizeForCaption(a,g);j.didElementDimensionOverflow(a,b,c,d,parseFloat(window.getComputedStyle(a,null).getPropertyValue("line-height")))?e=g:f=g}j.setTextFontSizeForCaption(a,e);if(!j.didElementDimensionOverflow(a,b,c,d,parseFloat(window.getComputedStyle(a,null).getPropertyValue("line-height"))))return;j.setTextFontSizeForCaption(a,f)},setTextFontSizeForCaption:function(a,c){b("Style").set(a,"font-size",c+"px")},didElementDimensionOverflow:function(a,c,d,e,f){a=b("DOMDimensions").getElementDimensions(a);return a.height>c||a.width>d||a.height/f>e},subscribeFocusEvent:function(a,c){var d=b("DOMQuery").scry(a,"._2ru6");if(d.length!==1)return;d=d[0];var e=!1,f="_2ru4",g="_2ru5",h=b("DOMQuery").find(a,"._2ru5"),i=function(){if(e)return;var a=b("DOMQuery").find(h,"._2ru7");e=!0;b("CSS").removeClass(h,g);b("CSS").addClass(h,f);a.hasAttribute("src")&&a.setAttribute("src",c.focusImageSrc)},j=function(){if(!e)return;var a=b("DOMQuery").find(h,"._2ru7");e=!1;b("CSS").removeClass(h,f);b("CSS").addClass(h,g);a.hasAttribute("src")&&a.setAttribute("src",c.unfocusImageSrc)},k=function(a){return a instanceof HTMLVideoElement?!1:a instanceof HTMLImageElement};b("Event").listen(d,"click",function(a){k(a.srcElement)&&i()});b("Event").listen(document,"click",function(b){a.contains(b.target)||j()})},subscribeToggleEvent:function(a){var c=!1,d=b("DOMQuery").scry(a,".img");b("Event").listen(a,"click",function(a){c=!c;for(var a=0;a<d.length;a++)b("CSS").toggle(d[a])})},isDescendant:function(a,b,c){c=c||1;b=b.parentNode;while(c&&b){if(a==b)return!0;b=b.parentNode;c--}return!1},tokenizeCaption:function(a){a=a.split(l).filter(function(a){return a!=null&&a!==""});var b=[];a.forEach(function(a){if(!a.startsWith("@")&&!a.startsWith("#")){var c=a.split(k).filter(function(a){return a!=null&&a!==""});c.forEach(function(a){return b.push(a)})}else b.push(a)});return b}},k=/((?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C])+|(?:(?:[\u0E01-\u0E3A\u0E40-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u1000-\u109F\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u19E0-\u19FF\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u31F0-\u31FF\u32D0-\u32FE\u3300-\u3357\u3400-\u4DB5\u4E00-\u9FEF\uA9E0-\uA9FE\uAA60-\uAA7F\uF900-\uFA6D\uFA70-\uFAD9\uFF66-\uFF6F\uFF71-\uFF9D]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67]|\uD83C\uDE00|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27]|\uD804[\uDC00-\uDC02\uDC38-\uDC46\uDC7F-\uDC82\uDCB0-\uDCBA\uDD00-\uDD02\uDD27-\uDD34\uDD45\uDD46\uDD73\uDD80-\uDD82\uDDB3-\uDDC0\uDDC9-\uDDCC\uDE2C-\uDE37\uDE3E\uDEDF-\uDEEA\uDF00-\uDF03\uDF3B\uDF3C\uDF3E-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF57\uDF62\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC35-\uDC46\uDC5E\uDCB0-\uDCC3\uDDAF-\uDDB5\uDDB8-\uDDC0\uDDDC\uDDDD\uDE30-\uDE40\uDEAB-\uDEB7\uDF1D-\uDF2B]|\uD806[\uDC2C-\uDC3A\uDDD1-\uDDD7\uDDDA-\uDDE0\uDDE4\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE3E\uDE47\uDE51-\uDE5B\uDE8A-\uDE99]|\uD807[\uDC2F-\uDC36\uDC38-\uDC3F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD8A-\uDD8E\uDD90\uDD91\uDD93-\uDD97\uDEF3-\uDEF6]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF51-\uDF87]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uDB40[\uDD00-\uDDEF])*))/,l=/([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)|(\B@[0-9A-Z_a-z]+(?:\.(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])[0-9A-Z_a-z]+)*)|(&?#(?:\\w)+)/;e.exports=j}),null);
__d("AdsPreviewDynamicCaption",["cx","AdsInstagramPreviewCommonUtils","InstagramAdsPreview","React","useBoolean"],(function(a,b,c,d,e,f,g){var h=b("AdsInstagramPreviewCommonUtils").AdsInstagramGetTextDirection,i=b("AdsInstagramPreviewCommonUtils").getTextWidthForAdPreviewCaption,j=b("React"),k="... ",l=3e3,m="";function n(a,b,c,d){var e=0,f=a.length-1;while(e<=f){var g=Math.floor((e+f)/2),h=a.slice(0,g+1).join(m);i(h,b,c)<=d?e=g+1:f=g-1}return e}function o(a,b,c,d,e){var f=[],g=[],h=0,i=0;while(h<a.length||g.length>0){i++;if(i>l)throw new Error("something went wrong while rendering caption. please report this issue.");var j=void 0;g.length>0?j=g:j=a[h];if(j.length===0){f.push("");h++;continue}var k=h===0&&g.length===0&&e!=null?d-e:d;k=n(j,b,c,k);if(k===0){var o=j[0];f.push(o);g=j.slice(1,j.length)}else{o=j.slice(0,k).join(m);f.push(o);g=j.slice(k)}if(g.length>0)continue;h++}return f}function p(a){var b=a.inlineSentencesList[a.maxLines-1].split(m),c=i(k+a.ellipsis,a.font,a.letterSpacing);c=n(b,a.font,a.letterSpacing,a.maxWidth-c);b=b.slice(0,c).join(m);return j.jsxs("span",{className:"_8rs5",direction:a.textDirection,id:"inner-caption",children:[a.inlineSentencesList.slice(0,a.maxLines-1).map(function(a,b){return j.jsxs("span",{children:[a,j.jsx("br",{})]},b)}),j.jsxs("span",{direction:a.textDirection,children:[b,k,j.jsx("button",{className:"_8hfd",style:a.ellipsisStyle,onClick:a.isDynamicPlacement!==!0&&a.toggleShowMore,children:a.ellipsis})]},"lastCaption")]})}function a(a){var c=b("useBoolean")(!1),d=c.value;c=c.toggle;var e=a.text.split("\n").map(b("InstagramAdsPreview").tokenizeCaption);e=o(e,a.font,a.letterSpacing,a.maxWidth,a.offsetWidth);var f=h(e[0]);if(e.length>a.maxLines&&!d)return j.jsx(p,{ellipsis:a.ellipsis,ellipsisStyle:a.ellipsisStyle,font:a.font,inlineSentencesList:e,isDynamicPlacement:a.isDynamicPlacement,letterSpacing:a.letterSpacing,maxLines:a.maxLines,maxWidth:a.maxWidth,textDirection:f,toggleShowMore:c});var g=e.length;return j.jsx("span",{className:"_8rs5","data-ad-preview":"ig-message",direction:f,id:"inner-caption",children:e.map(function(a,b){return j.jsxs("span",{children:[a,b!==g-1&&j.jsx("br",{})]},b)})})}e.exports=a}),null);
__d("AdsInstagramPollingSticker.react",["cx","AdsInstagramInteractiveComponentConstants","EmojiRenderer","InstagramAdsPreview","React","Style"],(function(a,b,c,d,e,f,g){"use strict";var h=(c=b("AdsInstagramInteractiveComponentConstants")).DEFAULT_OPTION_TEXT_SIZE,i=c.MAX_OPTION_TEXT_LINE_COUNT,j=c.MAX_OPTION_TEXT_SIZE,k=c.MIN_OPTION_TEXT_SIZE,l=c.OPTION_BOX_TEXT_BLOCK_HEIGHT,m=c.OPTION_BOX_TEXT_BLOCK_WIDTH,n=b("React");d=b("React");var o=d.useEffect,p=d.useRef;function q(a){if(!a||!a.offsetHeight)return;b("InstagramAdsPreview").setDynamicTextSizeForCaption(a,l-1,m,i,j,k);var c=(l-a.offsetHeight)/2;if(a.offsetHeight>=l){var d=parseInt(window.getComputedStyle(a,null).getPropertyValue("line-height"),10);d=d*i;b("Style").set(a,"maxHeight",d+"px");c=(l-d)/2}b("Style").set(a,"bottom",c+"px")}function r(a){var c=b("EmojiRenderer").parse(a.text),d=[],e=0;c.map(function(b){e<b.offset&&d.push({isEmoji:!1,text:a.text.substr(e,b.offset-e)}),d.push({isEmoji:!0,text:b.emoji.join("")}),e=b.offset+b.length});e<a.text.length&&d.push({isEmoji:!1,text:a.text.substr(e,a.text.length-e)});return n.jsx("div",{children:d.map(function(a,b){return n.jsx("span",{className:a.isEmoji?"":"_6-0b",children:a.text},a.text+"_"+b)})})}function s(a){var b,c=p(null);o(function(){c.current&&c.current instanceof HTMLElement&&q(c.current)},[(b=a.poll_spec)==null?void 0:b.option_a_text,(b=a.poll_spec)==null?void 0:b.option_b_text,a.position_spec.height,a.position_spec.width]);return c}function a(a){var b,c=a.component,d=s(c),e=s(c);a=[(b=a.component.poll_spec)==null?void 0:b.option_a_text,(b=a.component.poll_spec)==null?void 0:b.option_b_text].map(function(a){return(a||"").toUpperCase()});b=a[0];a=a[1];return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"_6sfd",style:{fontFamily:"SFUIText-Heavy"},children:n.jsx("text",{children:(c=c.poll_spec)==null?void 0:c.question_text})}),n.jsxs("div",{className:"_9aks",children:[n.jsx("div",{className:"_9akt _9aku",children:n.jsx("div",{className:"_9akv",ref:d,style:{fontFamily:"aveny t reg",fontSize:h},children:n.jsx(r,{text:b})})}),n.jsx("div",{className:"_6sfc"}),n.jsx("div",{className:"_9akt _9akw",children:n.jsx("div",{className:"_9akv",ref:e,style:{fontFamily:"aveny t reg",fontSize:h},children:n.jsx(r,{text:a})})})]})]})}e.exports=a}),null);
__d("AdsInstagramStoryPreviewConstants",[],(function(a,b,c,d,e,f){"use strict";e.exports={BOTTOM_MARGIN_BASE:18,BOTTOM_MARGIN_BASE_V2:42,BOTTOM_MARGIN_HAS_CTA:63,BOTTOM_MARGIN_HAS_DISCLAIMER:86,BOTTOM_MARGIN_HAS_CTA_HAS_DISCLAIMER:107,CAPTION_MAX_WIDTH:282,CAROUSEL_DURATION_IN_MS:5e3,CAROUSEL_INITIAL_SPACE:4,CAROUSEL_NON_9_BY_16_MEDIA_HEIGHT:318,CAROUSEL_NON_9_BY_16_DYNAMIC_MEDIA_HEIGHT:342,CAROUSEL_PRE_OPT_IN_VIDEO_MAX_DURATION_IN_MS:15e3,CAROUSEL_SEGMENT_BAR_WIDTH:312,DEFAULT_MEDIA_DURATION_IN_MS:5e3,DYNAMIC_MEDIA_OFFSET_HEIGHT:68,DYNAMIC_MEDIA_OFFSET_HEIGHT_ONE_LINE:50,DYNAMIC_MEDIA_SCALED_OFFSET_HEIGHT:48,DYNAMIC_MEDIA_SCALED_OFFSET_HEIGHT_ONE_LINE:24,FORCE_DELIVERY_LIMIT:3,FRAME_HEIGHT:565,FRAME_WIDTH:318,HORIZONTAL_MARGIN_CAPTION:48,VERTICAL_MARGIN_CAPTION:48,LINE_HEIGHT:18,MAX_CAPTION_HEIGHT_WITH_FLAT_MEDIA:113,MAX_CAPTION_LINE_COUNT:6,MAX_FONT_SIZE:20,MIN_FONT_SIZE:13,MIN_SPACE:11,PROGRESS_BAR_ANIMATION_DURATION_IN_MS:250,TIMER_UPDATE_INTERVAL_IN_MS:250,TOP_MARGIN:44,UPDATE_TIMEOUT_IN_MS:25,VIDEO_STORY_TRUNCATION_LENGTH_IN_SEC:15,INITIAL_MEDIA_CARD_INDEX:0,OPT_IN_BUTTON_CLICK_ACTION:"OPT_IN_BUTTON_CLICK_ACTION",UPDATE_CAROUSEL_TYPE:"UPDATE_CAROUSEL_TYPE",MAX_IG_STORY_MEDIA_RATIO:.5625,MEDIA_ASPECT_RATIO_TOLERNACE:.01,SET_TIMER:"SET_TIMER"}}),null);
__d("AdsInstagramInteractiveComponentList.react",["cx","AdsInstagramPollingSticker.react","AdsIntagramInteractiveComponentWrappers","AdsInteractiveComponentPreviewContext","React","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=b("AdsIntagramInteractiveComponentWrappers").DraggableWrapper,i=b("AdsIntagramInteractiveComponentWrappers").NonDraggableWrapper,j=b("React");c=b("React");var k=c.useContext,l=c.useRef;function a(a){var c=l(null),d=k(b("AdsInteractiveComponentPreviewContext")),e=d.onEditInteractiveComponent;if(!a.components||a.components.length<1)return null;d=a.components.map(function(d,f){return d.type===1?b("gkx")("1648450")===!0&&e!=null?j.jsx(h,{component:d,containerRef:c,height:a.mediaHeight,width:a.mediaWidth,onEditInteractiveComponent:e,children:j.jsx(b("AdsInstagramPollingSticker.react"),{component:d})},"polling_sticker_"+f):j.jsx(i,{component:d,height:a.mediaHeight,width:a.mediaWidth,children:j.jsx(b("AdsInstagramPollingSticker.react"),{component:d})},"polling_sticker_"+f):null});return j.jsx("div",{className:"_6se1",ref:c,style:{height:a.mediaHeight,width:a.mediaWidth},children:d})}e.exports=a}),null);
__d("AdsInstagramMultiMediaProgressBar.react",["AdsInstagramStoryPreviewConstants","Event","React","clearInterval","setInterval"],(function(a,b,c,d,e,f){"use strict";var g=(a=b("AdsInstagramStoryPreviewConstants")).CAROUSEL_INITIAL_SPACE,h=a.CAROUSEL_SEGMENT_BAR_WIDTH,i=a.DEFAULT_MEDIA_DURATION_IN_MS,j=a.PROGRESS_BAR_ANIMATION_DURATION_IN_MS,k=a.UPDATE_TIMEOUT_IN_MS,l=b("React");c=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={progressStartTime:0,animationStartTime:0,progressPercent:0,animationRemainingPercent:0,maxTimeDurationMS:j},c.$4=function(){var a=c.$6(),b=c.$5();c.setState({progressPercent:a,animationRemainingPercent:b})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$1(),this.$2()};d.componentDidUpdate=function(a){this.props.firstFrame!==a.firstFrame&&this.setState({animationStartTime:Date.now(),animationRemainingPercent:100}),(this.props.mediaIndex!==a.mediaIndex||this.props.customMaxPlayDurationInMS!==a.customMaxPlayDurationInMS)&&this.$1(),this.props.mediaIndex!==a.mediaIndex&&this.$2()};d.componentWillUnmount=function(){b("clearInterval")(this.interval)};d.render=function(){var a=this,b=this.props,c=b.medias,d=b.mediaIndex,e=b.firstFrame,f=b.barClass,g=b.fillClass,h=this.state.progressPercent;return l.jsx("div",{"data-testid":void 0,children:c.map(function(b,i){b=c.length;if(b<1||e===!0&&i>0)return null;b=a.$3(i);var j=b.left;b=b.right;var k=(d-i)*100+h;k>100?k=100:k<0&&(k=0);return l.jsx("div",{className:f,style:{left:j,right:b},children:l.jsx("div",{className:g,style:{width:k+"%"}})},i)})})};d.$2=function(){this.setState({progressStartTime:Date.now()}),this.interval&&b("clearInterval")(this.interval),this.interval=b("setInterval")(this.$4,k)};d.$5=function(){var a=Date.now()-this.state.animationStartTime;a=(1-a/j)*100;return Math.max(0,a)};d.$6=function(){var a=this.state,b=a.maxTimeDurationMS;a=a.progressStartTime;var c=this.props.mediaRef.current!=null?this.props.mediaRef.current:this.props.medias[this.props.mediaIndex];c instanceof HTMLVideoElement?c=c.currentTime*1e3:c=(Date.now()-a)%b;return Math.max(0,c/b*100)};d.$1=function(){var a=this,c=this.props.mediaRef.current!=null?this.props.mediaRef.current:this.props.medias[this.props.mediaIndex],d=this.props.customMaxPlayDurationInMS,e=d!=null&&d>0?d:Infinity;c instanceof HTMLVideoElement?c.readyState>=c.HAVE_METADATA?this.setState({maxTimeDurationMS:Math.min(e,c.duration*1e3)}):b("Event").listen(c,"loadedmetadata",function(){a.setState({maxTimeDurationMS:Math.min(e,c.duration*1e3)})}):this.setState({maxTimeDurationMS:Math.min(e,i)})};d.$3=function(a){var b=this.state.animationRemainingPercent,c=this.props.firstFrame===!0?1:this.props.medias.length,d,e,f=Math.floor(h/c),i=f*c;i=h-i;var j=g+Math.floor(i/2);i=g+Math.ceil(i/2);if(b==0)d=j+f*a,e=i+f*(c-a-1);else{var k=f*((c-1)/c);k=k*(1-b/100);b=f-k;if(a==0)d=j,e=j+k;else{f=j+b;j=c-1;b=a-1;d=f+k/j*b;e=i+k/j*(j-b-1)}}return{left:d,right:e}};return c}(l.Component);e.exports=c}),null);
__d("AdsInstagramStoryPreviewDynamicCaption.react",["cx","fbt","AdsInstagramPreviewCommonUtils","AdsInstagramStoryPreviewConstants","AdsPreviewDynamicCaption","React"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("AdsInstagramPreviewCommonUtils").AdsInstagramGetTextDirection,j=b("AdsInstagramStoryPreviewConstants").LINE_HEIGHT,k=b("AdsInstagramStoryPreviewConstants").MAX_CAPTION_LINE_COUNT,l=b("React");c=b("React");var m=c.useRef,n="more",o=.5,p=16;function a(a){var c,d=m(null),e=m(null),f=a.dynamicStoryCaptionInfos[a.index];if(!f)return null;var g=f.caption;if(g==null||g=="")return null;var q=f.caption_coordinate.bottom_right_y_coordinate-f.caption_coordinate.upper_left_y_coordinate,r=f.caption_coordinate.bottom_right_x_coordinate-f.caption_coordinate.upper_left_x_coordinate;c=(c=f.caption_max_lines)!=null?c:Math.min(Math.floor(q/j),k);var s={backgroundColor:f.caption_background_color,color:f.caption_color,fontSize:f.text_size};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"_93i9",id:"non_9_x_16_story_caption_block",ref:d,style:{left:f.caption_coordinate.upper_left_x_coordinate+"px",width:r+"px",top:f.caption_coordinate.upper_left_y_coordinate+"px",height:q+"px"},children:l.jsx("span",{className:"_93ia",dir:i((d=g)!=null?d:""),id:"non_9_x_16_story_caption_text",ref:e,style:babelHelpers["extends"]({},s,{fontFamily:"Tahoma, Helvetica, Arial, sans-serif"}),children:l.jsx(b("AdsPreviewDynamicCaption"),{ellipsis:n,ellipsisStyle:s,font:f.text_size+"px Tahoma, Helvetica, Arial, sans-serif",isDynamicPlacement:!0,letterSpacing:o,maxLines:c,maxWidth:r-p,offsetWidth:0,text:g||""})})}),a.isAutotranslated===!0&&l.jsx("div",{className:"_8ckx",style:{color:f.caption_color},children:h._("Automatically Translated")})]})}e.exports=a}),null);
__d("SubRipText",[],(function(a,b,c,d,e,f){var g={size:"90%"};function h(a){var b=Number(a.substr(0,a.length-1)),c=a.substr(-1);switch(c){case"s":return b;case"m":return b*60;case"h":return b*3600}c=a.split(":");b=Number(c[c.length-1].replace(/,/,"."));c.length>1&&(b+=Number(c[c.length-2])*60);c.length>2&&(b+=Number(c[c.length-3])*3600);return b}function i(a){a=a.split(/\r\n|\r|\n/).map(function(a){return a.trim()});var b=[],c=0;do{var d=a.indexOf("",c);d<0&&(d=a.length);var e=k(a.slice(c,d));e&&b.push(e);c=d+1}while(c>0&&c<a.length);return b}function j(a){a=a.split("-->");if(a.length!=2)return null;var b=h(a[0].trim());a=h(a[1].trim());return Number.isNaN(a)||Number.isNaN(b)?null:{begin:b,end:a}}function k(a){if(a.length<3)return null;var b=l(a[0]),c=j(a[1]);return!c?null:{counter:b,begin:c.begin,end:c.end,text:a.slice(2,6)}}function l(a){return Number(a.trim())}function m(a){a=a.split(".");return a[0].length<2?"0"+a.join("."):a.join(".")}function n(a){var b=m(Math.floor(a/3600).toString()),c=m(Math.floor(a%3600/60).toString());a=m((a%60).toFixed(3));return b+":"+c+":"+a}function o(a,b,c){var d="";if(c)for(var e in c)d+=" "+e+":"+c[e];return n(a)+" --> "+n(b)+d}function p(a,b){return a.counter+"\n"+o(a.begin,a.end,b)+"\n"+a.text.join("\n")+"\n"}function q(a,b){return"WEBVTT\n\n"+a.map(function(a){return p(a,b)}).join("\n")}a=function(){function a(a){var b=this;this.$1=i(a);this.$1.sort(function(a,b){return a.counter-b.counter});this.$2=this.$1.map(function(a,b){return b}).sort(function(a,c){return b.$1[a].begin-b.$1[c].begin});this.invalidateCache();this.$6=g}var b=a.prototype;b.$7=function(a){return this.$1[this.$2[a]]};b.$8=function(a){var b=this.$3;while(b<this.$2.length){var c=this.$7(b);if(c.begin<=a)this.$4.push(c),b++;else break}this.$3=b};b.$9=function(a){this.$4=this.$4.filter(function(b){return b.end>a})};b.invalidateCache=function(){this.$5=0,this.$4=[],this.$3=0};b.setStyle=function(a){this.$6=a};b.getSubtitles=function(a){a<this.$5&&this.invalidateCache();this.$5=a;this.$8(a);this.$9(a);return this.$4.reduce(function(a,b){return a.concat(b.text)},[])};b.renderVTT=function(){return q(this.$1,this.$6)};return a}();e.exports=a}),null);
__d("AdsInstagramAdPreviewCustomHooks",["EventListener","React","SubRipText","XHRRequest","getCrossOriginTransport"],(function(a,b,c,d,e,f){"use strict";c=b("React");var g=c.useEffect,h=c.useRef;function i(a,c){if(a==null||c==null)return;var d=c.current;d instanceof HTMLVideoElement&&(Array.prototype.forEach.call(d.textTracks,function(a){return a.mode="hidden"}),b("EventListener").listen(d,"play",function(){Array.prototype.forEach.call(d.textTracks,function(b){b.mode="showing",a&&Array.prototype.forEach.call(b.cues,function(b){return b.line=a})})}))}function a(a,c,d){var e=h(null);g(function(){var f=e.current,g=new(b("XHRRequest"))(a);a!==null&&f&&f instanceof HTMLTrackElement&&(g.setTransportBuilder(b("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(a){a=new(b("SubRipText"))(a);a=new Blob([a.renderVTT()],{type:"text/vtt"});a=URL.createObjectURL(a);f.src=a;i(c,d)}),g.send());return function(){g.abort()}},[a,c,d]);return e}e.exports={useVideoSubtitleTrack:a}}),null);
__d("AdsInstagramStoryPreviewUtils",["cx","fbt","InstagramAdsPreview","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){if(a.cta==null)return null;var b=null;a.ctaAppDestination==="MESSENGER"||a.ctaType==="MESSAGE_PAGE"?b=i.jsx("div",{className:"_88h5"}):(a.ctaAppDestination==="WHATSAPP"||a.ctaType==="WHATSAPP_MESSAGE")&&(b=i.jsx("div",{className:"_8yp0"}));return i.jsxs("div",{className:"_4kom"+(a.authorizationDisclaimer!=null||a.disclaimerCTA!=null?" _4z29":""),children:[i.jsx("div",{className:"_3df2"}),b,a.cta]})}function c(a){var b;if(a.authorizationDisclaimer==null&&a.disclaimerCTA==null)return null;b=(b=a.authorizationDisclaimer)!=null?b:a.disclaimerCTA;return i.jsx("div",{className:"_4z2b",children:i.jsx("div",{className:"_6mb8",children:b})})}function d(a){return!a.isVisible?null:i.jsxs(b("ShimButton.react"),{style:{display:"inline-block",pointerEvents:"auto",cursor:"pointer"},onClick:a.onOptIn,children:[i.jsx("div",{className:"_6z3t"}),i.jsx("div",{className:"_6z3s"}),h._("Expand Story")]})}function j(a){a=[].concat(a.headline!=null&&a.headline!==""?b("InstagramAdsPreview").tokenizeCaption(a.headline).concat("\n"):[]).concat(a.caption!=null&&a.caption!==""?b("InstagramAdsPreview").tokenizeCaption(a.caption):[]);if(a.length===0)return null;a=a.map(function(a,b){return i.jsx("span",{className:(a.startsWith("@")||a.startsWith("#")?"_4mix":"")+" _50f0",children:a.indexOf("\n")!==-1?i.jsx("br",{}):a},b+":"+a)});return a}function f(a){return i.jsxs(i.Fragment,{children:[i.jsx(j,{caption:a.caption,headline:a.headline}),i.jsxs("span",{className:"_50f0",children:[i.jsx("span",{children:h._("...")})," ",i.jsx("span",{className:"_66xg",children:h._("more")})]})]})}e.exports={AdsInstagramStoryPreviewCTA:a,AdsInstagramStoryPreviewDisclaimer:c,AdsInstagramStoryPreviewCarouselOptInButton:d,AdsInstagramStoryPreviewCaptionBlock:f}}),null);
__d("AdsInstagramStoryPreviewCaption.react",["cx","fbt","AdsInstagramPreviewCommonUtils","AdsInstagramStoryPreviewConstants","AdsInstagramStoryPreviewUtils","InstagramAdsPreview","React","Style","nullthrows","requestAnimationFrame"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("AdsInstagramPreviewCommonUtils").AdsInstagramGetTextDirection,j=(c=b("AdsInstagramStoryPreviewConstants")).CAPTION_MAX_WIDTH,k=c.FRAME_WIDTH,l=c.HORIZONTAL_MARGIN_CAPTION,m=c.LINE_HEIGHT,n=c.MAX_CAPTION_LINE_COUNT,o=c.MAX_FONT_SIZE,p=c.MIN_FONT_SIZE,q=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewCaptionBlock,r=b("React");d=b("React");var s=d.useRef;function a(a){var c,d=s(null),e=s(null),f=a.portalInfo;function g(){e.current!=null&&e.current.offsetHeight>0?t(a,d.current,e.current):b("requestAnimationFrame")(g)}b("requestAnimationFrame")(g);return(a.caption==null||a.caption=="")&&(a.headline==null||a.headline=="")?null:r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"_7o7r",ref:d,style:{fontFamily:"Tahoma, Helvetica, Arial, sans-serif",color:f==null?void 0:f.primaryTextColor},children:r.jsx("span",{className:"_7o7s",dir:i((c=(c=a.caption)!=null?c:a.headline)!=null?c:""),id:"non_9_x_16_story_caption_text",ref:e,style:{backgroundColor:f==null?void 0:f.primaryTextBackgroundColor},children:r.jsx(q,{caption:a.caption,headline:a.headline})})}),a.isAutotranslated===!0&&r.jsx("div",{className:"_8ckx",style:{color:f==null?void 0:f.primaryTextColor},children:h._("Automatically Translated")})]})}function t(a,c,d){if(c==null||d==null)return;c=b("nullthrows")(c);d=b("nullthrows")(d);var e=Math.min(Math.floor(a.maxAvailableHeight/m),n),f=b("InstagramAdsPreview").truncateCaption(c,15,e,k,d);!f&&a.isFixedFontSize!==!0&&b("InstagramAdsPreview").setDynamicTextSizeForCaption(d,a.maxAvailableHeight,j,e,o,p);f=d.offsetWidth;a=(k-l-f)/2;b("Style").set(c,"left",a+"px");c.id="non_9_x_16_story_caption_block"}e.exports=a}),null);
__d("AdsInstagramStoryPreviewMediaCanvas.react",["cx","AdsInstagramAdPreviewCustomHooks","AdsInstagramStoryPreviewCaption.react","AdsInstagramStoryPreviewConstants","AdsInstagramStoryPreviewHeadline.react","LineClamp.react","React","isTruthy","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h=b("AdsInstagramAdPreviewCustomHooks").useVideoSubtitleTrack,i=(c=b("AdsInstagramStoryPreviewConstants")).BOTTOM_MARGIN_BASE,j=c.BOTTOM_MARGIN_BASE_V2,k=c.BOTTOM_MARGIN_HAS_CTA,l=c.BOTTOM_MARGIN_HAS_CTA_HAS_DISCLAIMER,m=c.BOTTOM_MARGIN_HAS_DISCLAIMER,n=c.DYNAMIC_MEDIA_OFFSET_HEIGHT,o=c.DYNAMIC_MEDIA_OFFSET_HEIGHT_ONE_LINE,p=c.DYNAMIC_MEDIA_SCALED_OFFSET_HEIGHT,q=c.DYNAMIC_MEDIA_SCALED_OFFSET_HEIGHT_ONE_LINE,r=c.FRAME_HEIGHT,s=c.FRAME_WIDTH,t=c.LINE_HEIGHT,u=c.MAX_CAPTION_HEIGHT_WITH_FLAT_MEDIA,v=c.MIN_SPACE,w=c.TOP_MARGIN,x=b("React"),y=15;function z(a){return x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"_8mae",style:{bottom:B(a.cta!=null,a.authorizationDisclaimer!=null)},children:a.dynamicStoryCaptionInfos?null:x.jsx(b("AdsInstagramStoryPreviewCaption.react"),{caption:a.caption,headline:a.headline,isAutotranslated:a.isAutotranslated,isFixedFontSize:!0,maxAvailableHeight:t*3,portalInfo:a.portalInfo})}),x.jsx("div",{className:"_7obv",children:x.jsx(A,babelHelpers["extends"]({},a))})]})}function A(a){var c=h(a.videoSubtitleUrl,a.videoSubtitleOffset,a.mediaRef);if(a.videoUrl!=null){var d,e=a.isLongVideo===!0?"#t=0,"+(y+1):"";return x.jsxs("video",{autoPlay:!0,className:"_7lg2",id:"instagram_story_preview_media",loop:a.loopVideo||a.isOptInStoriesCarousel,muted:!0,playendsec:a.isLongVideo===!0?y:null,poster:a.imageUrl,ref:a.mediaRef,subtitleoffset:a.videoSubtitleOffset,subtitlessrc:a.videoSubtitleUrl,children:[x.jsx("source",{id:"instagram_story_preview_media",src:""+((d=a.videoUrl)!=null?d:"")+e,type:"video/mp4"},"source_"+((d=a.videoUrl)!=null?d:"")),x.jsx("track",{"default":!0,kind:"captions",ref:c})]},"video_"+((e=a.videoUrl)!=null?e:""))}if(a.storyPreviewType==="dynamic_ad"){d=a.headline!=""?x.jsx("div",{className:"_8q6o",children:x.jsx(b("LineClamp.react"),{lines:2,children:a.headline})}):null;c=a.description!=""?x.jsx("div",{className:"_8q5w",children:a.description}):null;return x.jsx("div",{className:"_7lg2",children:x.jsxs("div",{className:"_7mt8",children:[x.jsxs("div",{className:"_7mt9",children:[d,c]}),x.jsx("img",{className:"_7mta",id:"instagram_story_preview_media",ref:a.mediaRef,src:a.imageUrl},a.imageUrl)]})})}return x.jsx("img",{className:"_7lg2",id:"instagram_story_preview_media",ref:a.mediaRef,src:a.imageUrl},a.imageUrl)}function a(a){var c,d;if(a.portalInfo==null&&a.cropType!=="saliency")return x.jsx("div",{className:"_7obv",children:x.jsx(A,babelHelpers["extends"]({},a))});if(a.cropType==="saliency")return x.jsx(z,babelHelpers["extends"]({},a));c=b("nullthrows")((c=a.portalInfo)==null?void 0:c.displayHeight);d=b("nullthrows")((d=a.portalInfo)==null?void 0:d.displayWidth);var e=E(a.storyPreviewType,a.headline,a.description),f=d/(c+e.offsetHeight);c=c*s/d+e.scaledOffsetHeight;d=D(a.cta!=null,a.authorizationDisclaimer!=null,c,f);e=a.showHeadlineInCaption&&f>=1?a.headline:void 0;e=(a.caption==null||a.caption=="")&&(!a.showHeadlineInCaption||a.headline==null||a.headline=="")?null:x.jsx(b("AdsInstagramStoryPreviewCaption.react"),{caption:a.caption,headline:e,isAutotranslated:a.isAutotranslated,maxAvailableHeight:d,portalInfo:a.portalInfo});if(f>=1||e==null){d=C(a.cta!=null,a.authorizationDisclaimer!=null);return x.jsxs("div",{className:"_7obw",style:{height:d+"px",top:w+"px"},children:[b("isTruthy")(a.useStoryHeadlineLayout)&&x.jsx(b("AdsInstagramStoryPreviewHeadline.react"),{headline:a.headline,isAutoTranslated:a.isAutotranslated,portalInfo:a.portalInfo}),x.jsx(A,babelHelpers["extends"]({},a)),e]})}else{f=C(a.cta!=null,a.authorizationDisclaimer!=null,c);return x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"_7sx_",children:x.jsx(A,babelHelpers["extends"]({},a))}),x.jsx("div",{className:"_7obw",style:{height:f+"px",top:w+v+c+"px"},children:e})]})}}function B(a,b){i;a?a=b?l:k:a=b?m:j;return a}function C(a,b,c){a=B(a,b);return c!=null?r-w-v-c-a:r-w-a}function D(a,b,c,d){a=B(a,b);a=r-w-a;a=a-c-3*v;d>=1&&(a=b?u/2:u);return a}function E(a,b,c){if(a==="dynamic_ad"){if(b!==null&&b!==""&&c!==null&&c!=="")return{offsetHeight:n,scaledOffsetHeight:p};return(b===null||b==="")&&(c===null||c==="")?{offsetHeight:0,scaledOffsetHeight:0}:{offsetHeight:o,scaledOffsetHeight:q}}return{offsetHeight:0,scaledOffsetHeight:0}}e.exports=a}),null);
__d("AdsInstagramStoryPreviewMediaOverlay.react",["AdsInstagramStoryPreviewConstants","React"],(function(a,b,c,d,e,f){"use strict";var g=b("AdsInstagramStoryPreviewConstants").FRAME_HEIGHT,h=b("AdsInstagramStoryPreviewConstants").FRAME_WIDTH,i=b("React");function a(a){return a.overlay==null?null:i.jsx("div",{style:{backgroundColor:a.overlay,width:h,height:g,position:"absolute",zIndex:1}})}e.exports=a}),null);
__d("AdsInstagramStorySingleFormatAdPreview.react",["cx","invariant","AdsInstagramInteractiveComponentList.react","AdsInstagramMultiMediaProgressBar.react","AdsInstagramPreviewStrings","AdsInstagramStoryPreviewConstants","AdsInstagramStoryPreviewDynamicCaption.react","AdsInstagramStoryPreviewMediaCanvas.react","AdsInstagramStoryPreviewMediaOverlay.react","AdsInstagramStoryPreviewUtils","Image.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("AdsInstagramPreviewStrings").BRANDED_CONTENT_AD_STRINGS,j=b("AdsInstagramPreviewStrings").COMMON_STRINGS,k=b("AdsInstagramStoryPreviewConstants").FRAME_HEIGHT,l=b("AdsInstagramStoryPreviewConstants").FRAME_WIDTH,m=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewCTA,n=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewDisclaimer,o=b("React");c=b("React");var p=c.useRef,q=function(a){var b=a.callToActionData,c=a.commonData,d=a.identityData,e=a.mediaData,f=a.textData;a=a.customizationData;c=c.storyPreviewType;var g=d.profilePictureUrl,i=d.brandedContentSponsorName;d=d.profileName;f!=null||h(0,23101);var j=f.authorizationDisclaimer,k=f.primaryText,l=f.isAutotranslated,m=f.descriptions,n=f.headlines;f=f.portalData;m=m!=null?m[0]:"";n=n!=null?n[0]:"";f=f!=null&&f[0]!==null?f[0]:null;a!=null||h(0,23102);var o=a.dynamicStoryCaptionInfo,p=b.callToActionDataCells[0],q=p.callToActionAppDestination,r=p.cta;p=p.callToActionType;b=b.disclaimerCTAData;var s=e.mediaDataCells[0].interactiveComponents;e=e.mediaDataCells[0];var t=e.imageMediaData,u=e.videoMediaData;e=e.overlay;var v=t==null?void 0:t.imageURL;t=t==null?void 0:t.cropType;var w=u==null?void 0:u.isLoopVideo,x=u==null?void 0:u.videoID,y=u==null?void 0:u.videoSubtitleOffset,z=u==null?void 0:u.videoSubtitleURL;u=u==null?void 0:u.videoURL;var A=c==="long_video";a=a.useStoryHeadlineLayout;return{authorizationDisclaimer:j,brandedContentSponsorName:i,caption:k,cropType:t,cta:r,ctaAppDestination:q,ctaType:p,disclaimerCTAData:b,description:m,dynamicStoryCaptionInfos:o,headline:n,imageUrl:v,interactiveComponents:s,isAutotranslated:l,loopVideo:w,overlay:e,portalInfo:f,profilePicUrl:g,storyPreviewType:c,username:d,useStoryHeadlineLayout:a,videoID:x,videoSubtitleOffset:y,videoSubtitleUrl:z,videoUrl:u,isLongVideo:A}};function a(a){var c=p(null),d=[c.current];a=q(a);var e=a.authorizationDisclaimer,f=a.brandedContentSponsorName,g=a.caption,h=a.cropType,r=a.cta,s=a.ctaAppDestination,t=a.ctaType,u=a.description,v=a.disclaimerCTAData,w=a.dynamicStoryCaptionInfos,x=a.headline,y=a.imageUrl,z=a.interactiveComponents,A=a.isAutotranslated,B=a.loopVideo,C=a.overlay,D=a.portalInfo,E=a.profilePicUrl,F=a.storyPreviewType,G=a.username,H=a.useStoryHeadlineLayout,I=a.videoID,J=a.videoSubtitleOffset,K=a.videoSubtitleUrl,L=a.videoUrl;a=a.isLongVideo;return o.jsx("div",{className:"_ogl",children:o.jsxs("div",{className:"_2qhi",id:"instagram_story_preview_frame",style:D&&{background:"linear-gradient("+D.topColor+", "+D.bottomColor+")"},children:[o.jsx(b("AdsInstagramStoryPreviewMediaOverlay.react"),{overlay:C}),o.jsx(b("AdsInstagramStoryPreviewMediaCanvas.react"),{authorizationDisclaimer:e,caption:g,cropType:h,cta:r,description:u,dynamicStoryCaptionInfos:w,headline:x,imageUrl:y,isAutotranslated:A,isLongVideo:a,loopVideo:B==!0,mediaRef:c,portalInfo:D,showHeadlineInCaption:F!=="dynamic_ad"&&H!==!0,storyPreviewType:F,useStoryHeadlineLayout:H,videoID:I,videoSubtitleOffset:J,videoSubtitleUrl:K,videoUrl:L}),w&&o.jsx(b("AdsInstagramStoryPreviewDynamicCaption.react"),{dynamicStoryCaptionInfos:w,index:0,isAutotranslated:A}),z&&o.jsx(b("AdsInstagramInteractiveComponentList.react"),{components:z,mediaHeight:k,mediaWidth:l}),o.jsx("div",{className:"_ogm"}),o.jsxs("div",{className:"_86n",children:[o.jsx(b("AdsInstagramMultiMediaProgressBar.react"),{barClass:"_3y97",customMaxPlayDurationInMS:a?b("AdsInstagramStoryPreviewConstants").VIDEO_STORY_TRUNCATION_LENGTH_IN_SEC*1e3:null,fillClass:"_3y9t",firstFrame:!0,mediaIndex:0,mediaRef:c,medias:d}),o.jsx(b("Image.react"),{className:"_ogn",src:E}),o.jsx("div",{className:"_86q",children:G}),o.jsxs("div",{className:"_4z2a",children:[j.SPONSORED,f!=null&&o.jsxs("div",{style:{display:"inline"},children:[o.jsx("div",{className:"_82gj"}),i.PAID_PARTNERSHIP_WITH(f)]}),a===!0&&o.jsxs("div",{style:{display:"inline-block"},children:[o.jsx("div",{className:"_6z3t"}),o.jsx("div",{className:"_6z3s"}),j.KEEP_WATCHING]})]}),o.jsx(b("Image.react"),{className:"_86t",src:"/images/instagram/ads/preview/story-close.png"})]}),o.jsx(m,{authorizationDisclaimer:e,cta:r,ctaAppDestination:s,ctaType:t,disclaimerCTA:v}),o.jsx(n,{authorizationDisclaimer:e,disclaimerCTA:v}),o.jsx(b("Image.react"),{className:"_86v"+(e?" _4z29":""),src:"/images/instagram/ads/preview/story-ellipsis.png"})]})})}e.exports=a}),null);
__d("AdsInstagramStoryCarouselPreviewFunctionalComponents",["cx","ix","Image.react","React","XUICarouselArrow.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");function a(a){if(a.isVisible!=null&&a.isVisible===!1)return i.jsx("div",{});var c=i.jsx(b("XUICarouselArrow.react"),{onClick:a.onClickLeft,children:i.jsx(b("Image.react"),{src:h("101565")})});a=i.jsx(b("XUICarouselArrow.react"),{onClick:a.onClickRight,children:i.jsx(b("Image.react"),{src:h("101566")})});return i.jsxs("div",{className:"_7mt7",children:[i.jsx("div",{className:"_3w7n _fy",children:c}),i.jsx("div",{className:"_3w7n _fx",children:a})]})}e.exports={AdsInstagramStoryCarouselArrows:a}}),null);
__d("AdsInstagramStoryPreviewCarouselVideoTimer.react",["cx","fbt","AdsInstagramStoryPreviewConstants","Event","React","clearInterval","formatDurationSeconds","setInterval"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("AdsInstagramStoryPreviewConstants").CAROUSEL_PRE_OPT_IN_VIDEO_MAX_DURATION_IN_MS,j=b("AdsInstagramStoryPreviewConstants").TIMER_UPDATE_INTERVAL_IN_MS,k=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={timeLeftInSec:-1},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this,c=this.props.video;c.readyState>=c.HAVE_METADATA?c.duration*1e3>i?this.interval=b("setInterval")(function(){return a.$1(c.duration)},j):this.setState({timeLeftInSec:-1}):b("Event").listen(c,"loadedmetadata",function(){c.duration*1e3>i?a.interval=b("setInterval")(function(){return a.$1(c.duration)},j):a.setState({timeLeftInSec:-1})})};d.componentWillUnmount=function(){this.interval&&b("clearInterval")(this.interval)};d.$1=function(a){var b=a-this.props.video.currentTime;this.setState(function(a){return{timeLeftInSec:b}})};d.render=function(){return k.jsx(k.Fragment,{children:this.state.timeLeftInSec>=0?k.jsxs("div",{style:{display:"inline-block"},children:[k.jsx("div",{className:"_6z3t"}),h._("{number of seconds}",[h._param("number of seconds",b("formatDurationSeconds")(Math.ceil(this.state.timeLeftInSec)))])]}):null})};return c}(k.Component);e.exports=a}),null);
__d("AdsInstagramStoryUnifiedCarouselUtils",["AdsInstagramStoryPreviewConstants","Event"],(function(a,b,c,d,e,f){"use strict";var g,h=(g=b("AdsInstagramStoryPreviewConstants")).CAROUSEL_DURATION_IN_MS,i=g.CAROUSEL_PRE_OPT_IN_VIDEO_MAX_DURATION_IN_MS,j=g.FORCE_DELIVERY_LIMIT,k=g.INITIAL_MEDIA_CARD_INDEX,l=g.MAX_IG_STORY_MEDIA_RATIO,m=g.MEDIA_ASPECT_RATIO_TOLERNACE,n=g.OPT_IN_BUTTON_CLICK_ACTION,o=g.SET_TIMER,p=g.UPDATE_CAROUSEL_TYPE;g=1;var q=-1,r=0,s=function(a,b,c){return(a+c+b)%b},t=function(a){return a!=null&&a instanceof HTMLVideoElement?Math.min(i,(a.duration-a.currentTime)*1e3):h},u=function(a){a=Date.now()-a;return h-a},v=function(a){if(a!=null&&a instanceof HTMLVideoElement)return a.duration*1e3;else return h},w=function(a){a!=null&&a instanceof HTMLVideoElement&&(a.currentTime=0,b("Event").listen(a,"canplay",function(){return a.play()}))};function a(){return{autoplayTimeoutID:null,autoplayTimeout:null,autoplayTimeoutSetTime:Date.now(),currentMediaCardIndex:k,carouselType:"SMART_OPT_IN",storiesExpanded:!1}}function c(a,b){var c;switch(b.type){case n:return babelHelpers["extends"]({},a,{storiesExpanded:!0});case p:return babelHelpers["extends"]({},a,{carouselType:b.payload.carouselType,storiesExpanded:b.payload.carouselType==="MPS"?!0:!1});case o:return babelHelpers["extends"]({},a,{currentMediaCardIndex:(c=b.payload.index)!=null?c:a.currentMediaCardIndex,autoplayTimeout:b.payload.autoplayTimeout,autoplayTimeoutID:b.payload.autoplayTimeoutID,autoplayTimeoutSetTime:b.payload.autoplayTimeoutSetTime});default:throw new Error()}}function d(a,b){a=1*a/(1*b);return Math.abs(a-l)<=m}function f(a,b,c){if(a==="FORCED_DELIVERY"&&b>j&&c===!1)return j;return a==="SMART_OPT_IN"&&c===!1?1:b}e.exports={init:a,stateReducer:c,resetMedia:w,getNextMediaCardIndex:s,isFullscreenMediaAspectRatio:d,getVisibleMediaLength:f,calculateRepeatMediaAutoplayTimeout:t,calculateNextCardAutoplayTimeout:v,calculateRemainingMediaAutoplayTimeout:u,NEXT_MEDIA_INDEX_CHANGE:g,PREV_MEDIA_INDEX_CHANGE:q,NO_MEDIA_INDEX_CHANGE:r}}),null);
__d("AdsInstagramStoryUnifiedCarouselAdPreview.react",["cx","invariant","AdsInstagramMultiMediaProgressBar.react","AdsInstagramPreviewStrings","AdsInstagramStoryCarouselPreviewFunctionalComponents","AdsInstagramStoryPreviewCarouselVideoTimer.react","AdsInstagramStoryPreviewConstants","AdsInstagramStoryPreviewDynamicCaption.react","AdsInstagramStoryPreviewMediaCanvas.react","AdsInstagramStoryPreviewMediaOverlay.react","AdsInstagramStoryPreviewUtils","AdsInstagramStoryUnifiedCarouselUtils","Event","Image.react","React","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("AdsInstagramPreviewStrings").BRANDED_CONTENT_AD_STRINGS,j=b("AdsInstagramPreviewStrings").COMMON_STRINGS,k=b("AdsInstagramStoryCarouselPreviewFunctionalComponents").AdsInstagramStoryCarouselArrows,l=(c=b("AdsInstagramStoryPreviewConstants")).CAROUSEL_PRE_OPT_IN_VIDEO_MAX_DURATION_IN_MS,m=c.FORCE_DELIVERY_LIMIT,n=c.INITIAL_MEDIA_CARD_INDEX,o=c.OPT_IN_BUTTON_CLICK_ACTION,p=c.SET_TIMER,q=c.UPDATE_CAROUSEL_TYPE,r=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewCarouselOptInButton,s=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewCTA,t=b("AdsInstagramStoryPreviewUtils").AdsInstagramStoryPreviewDisclaimer,u=(d=b("AdsInstagramStoryUnifiedCarouselUtils")).NEXT_MEDIA_INDEX_CHANGE,v=d.NO_MEDIA_INDEX_CHANGE,w=d.PREV_MEDIA_INDEX_CHANGE,aa=d.calculateNextCardAutoplayTimeout,ba=d.calculateRemainingMediaAutoplayTimeout,ca=d.calculateRepeatMediaAutoplayTimeout,da=d.getNextMediaCardIndex,ea=d.getVisibleMediaLength,fa=d.init,ga=d.isFullscreenMediaAspectRatio,x=d.resetMedia,ha=d.stateReducer,y=b("React");f=b("React");var z=f.useEffect,ia=f.useReducer,A=f.useRef;function ja(a,b,c,d){if(a==="SMART_OPT_IN"&&!b)return!0;return a==="FORCED_DELIVERY"&&c>m&&d===m-1&&!b?!0:!1}var B=function(a,b){var c=a.callToActionData,d=a.mediaData;a=a.textData;var e=c.callToActionDataCells[b];d=d.mediaDataCells[b];var f=d.imageMediaData,g=d.videoMediaData;a!=null||h(0,23101);var i=a.portalData?a.portalData[b]:void 0;return{cropType:f==null?void 0:f.cropType,cta:e.cta,ctaType:e.callToActionType,ctaAppDestination:e.callToActionAppDestination,disclaimerCTAData:c.disclaimerCTAData,overlay:d.overlay,portalInfo:i,description:a.descriptions!=null?a.descriptions[b]:null,headline:a.headlines?a.headlines[b]:null,image_url:f==null?void 0:f.imageURL,is_long_video:(e=g==null?void 0:g.isLongVideo)!=null?e:void 0,loop_video:g==null?void 0:g.isLoopVideo,video_id:g==null?void 0:g.videoID,video_subtitle_url:(c=g==null?void 0:g.videoSubtitleURL)!=null?c:void 0,video_subtitle_offset:(d=g==null?void 0:g.videoSubtitleOffset)!=null?d:void 0,video_url:g==null?void 0:g.videoURL}},ka=function(a){var b=a.commonData,c=a.customizationData,d=a.identityData,e=a.mediaData;a=a.textData;b=b.storyPreviewType;var f=d.profilePictureUrl,g=d.brandedContentSponsorName;d=d.profileName;a!=null||h(0,23101);var i=a.authorizationDisclaimer;a=a.primaryText;c!=null||h(0,23102);var j=c.dynamicStoryCaptionInfo;c=c.carouselDeliveryMode;e=e.mediaDataCells.length;return{authorizationDisclaimer:i,brandedContentSponsorName:g,caption:a,username:d,profilePicUrl:f,numMediaCards:e,carouselDeliveryMode:c,storyPreviewType:b,dynamicStoryCaptionInfos:j}};function a(a){var c=ka(a),d=c.authorizationDisclaimer,e=c.brandedContentSponsorName,f=c.caption,g=c.username,h=c.profilePicUrl,m=c.numMediaCards,C=c.carouselDeliveryMode,D=c.storyPreviewType;c=c.dynamicStoryCaptionInfos;var E=[A(null),A(null),A(null),A(null),A(null),A(null),A(null),A(null),A(null),A(null)],F=ia(ha,fa()),G=F[0],H=F[1];F=G.carouselType==="SMART_OPT_IN"&&!G.storiesExpanded;var I=G.autoplayTimeoutID!=null&&G.carouselType==="SMART_OPT_IN"&&G.storiesExpanded&&G.currentMediaCardIndex===0,J=E[G.currentMediaCardIndex],K=E[0],L=ea(G.carouselType,m,G.storiesExpanded),M=E.map(function(a){return(a=a.current)!=null?a:null}).filter(function(a){return a!=null}).filter(function(b,a){return a<L});z(function(){if((K==null?void 0:K.current)!==null&&K.current instanceof HTMLElement){if(C==="optimal_num_cards"||D==="dynamic_ad"){$("SMART_OPT_IN");return}else if(C==="fixed_num_cards"){$("FORCED_DELIVERY");return}C==null&&K.current instanceof HTMLElement&&K.current.addEventListener("load",function(){if(K.current!==null){var a=K.current.width,b=K.current.height;a=ga(a,b);a?$("MPS"):$("SMART_OPT_IN")}})}},[K,C,D]);z(function(){var a=E[0].current;a!==null&&a instanceof HTMLElement&&(G.carouselType==="SMART_OPT_IN"?X(a):Y(n,L,M,v));return function(){return window.clearTimeout(G.autoplayTimeoutID)}},[G.carouselType]);z(function(){var a=E[0].current;G.autoplayTimeoutID===0&&a!==null&&a instanceof HTMLElement&&(G.carouselType==="SMART_OPT_IN"&&!G.storiesExpanded?X(a):Y(G.currentMediaCardIndex,L,M,u));return function(){return window.clearTimeout(G.autoplayTimeoutID)}},[G.autoplayTimeoutID]);I=I&&J.current instanceof HTMLVideoElement?y.jsx(b("AdsInstagramStoryPreviewCarouselVideoTimer.react"),{video:J.current},G.currentMediaCardIndex):null;J=J.current!==null?y.jsx(b("AdsInstagramMultiMediaProgressBar.react"),{barClass:"_3y97",customMaxPlayDurationInMS:l,fillClass:"_3y9t",firstFrame:F,mediaIndex:G.currentMediaCardIndex,mediaRef:J,medias:M,storiesExpanded:G.storiesExpanded}):null;var N=[];for(var O=0;O<m;O++){var P=B(a,O),Q=P.cropType,R=P.cta,S=P.overlay,la=P.portalInfo,T=P.description,U=P.headline,V=P.image_url,ma=P.is_long_video,na=P.loop_video,oa=P.video_id,pa=P.video_subtitle_offset,qa=P.video_subtitle_url;P=P.video_url;N.push(y.jsxs("div",{style:{display:G.currentMediaCardIndex===O?"":"none",position:"relative",height:"100%"},children:[c&&y.jsx(b("AdsInstagramStoryPreviewDynamicCaption.react"),{dynamicStoryCaptionInfos:c,index:O,isAutotranslated:!1}),y.jsx(b("AdsInstagramStoryPreviewMediaOverlay.react"),{overlay:S}),y.jsx(b("AdsInstagramStoryPreviewMediaCanvas.react"),{authorizationDisclaimer:d,caption:f,cropType:Q,cta:R,description:T,dynamicStoryCaptionInfos:c,headline:U,imageUrl:V,isLongVideo:ma,isOptInStoriesCarousel:G.carouselType==="SMART_OPT_IN",loopVideo:na==!0,mediaRef:E[O],portalInfo:la,showHeadlineInCaption:D!=="dynamic_ad",storyPreviewType:D,useStoryHeadlineLayout:!1,videoID:oa,videoSubtitleOffset:pa,videoSubtitleUrl:qa,videoUrl:P},O)]},O))}S=B(a,G.currentMediaCardIndex);Q=S.portalInfo;R=S.cta;T=S.ctaAppDestination;U=S.ctaType;V=S.disclaimerCTAData;return y.jsx("div",{className:"_ogl",children:y.jsxs("div",{className:"_2qhi",id:"instagram_story_preview_frame",style:Q&&{background:"linear-gradient("+Q.topColor+", "+Q.bottomColor+")"},children:[y.jsx(k,{isVisible:!F,onClickLeft:function(){return Y(G.currentMediaCardIndex,L,M,w)},onClickRight:function(){return Y(G.currentMediaCardIndex,L,M,u)}}),J,N,y.jsx("div",{className:"_ogm"}),y.jsxs("div",{className:"_86n",children:[y.jsx(b("Image.react"),{className:"_ogn",src:h}),y.jsx("div",{className:"_86q",children:g}),y.jsxs("div",{className:"_4z2a",children:[j.SPONSORED,e!=null&&y.jsxs("div",{style:{display:"inline"},children:[y.jsx("div",{className:"_82gj"}),i.PAID_PARTNERSHIP_WITH(b("nullthrows")(e))]}),y.jsx(r,{isVisible:ja(G.carouselType,G.storiesExpanded,m,G.currentMediaCardIndex),onOptIn:function(){return ra(G.autoplayTimeoutSetTime)}}),I]}),y.jsx(b("Image.react"),{className:"_86t",src:"/images/instagram/ads/preview/story-close.png"})]}),y.jsx(s,{authorizationDisclaimer:d,cta:R,ctaAppDestination:T,ctaType:U,disclaimerCTA:V}),y.jsx(t,{authorizationDisclaimer:d}),y.jsx(b("Image.react"),{className:"_86v"+(d?" _4z29":""),src:"/images/instagram/ads/preview/story-ellipsis.png"})]})});function W(){H({type:p,payload:{index:null,autoplayTimeout:0,autoplayTimeoutID:0,autoplayTimeoutSetTime:0}})}function X(a){Z(function(){x(a);var b=ca(a),c=Date.now(),d=window.setTimeout(function(){W()},b);H({type:p,payload:{index:n,autoplayTimeout:b,autoplayTimeoutID:d,autoplayTimeoutSetTime:c}})},a)}function Y(c,a,d,e){var b=da(c,a,e),f=d[b];Z(function(){x(f);var a=aa(f),c=Date.now(),d=window.setTimeout(function(){W()},a);H({type:p,payload:{index:b,autoplayTimeout:a,autoplayTimeoutID:d,autoplayTimeoutSetTime:c}})},f)}function ra(a){a=ba(a);var b=Date.now(),c=window.setTimeout(function(){W()},a);H({type:o});H({type:p,payload:{index:null,autoplayTimeout:a,autoplayTimeoutID:c,autoplayTimeoutSetTime:b}})}function Z(a,c){if(c instanceof HTMLVideoElement&&c.readyState<c.HAVE_METADATA){b("Event").listen(c,"loadedmetadata",function(){a()});return}a()}function $(a){H({type:q,payload:{carouselType:a}})}}e.exports=a}),null);
__d("AdsInstagramStoryAdPreview.react",["AdsInstagramStorySingleFormatAdPreview.react","AdsInstagramStoryUnifiedCarouselAdPreview.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(b){return a.call(this,b)||this}var d=c.prototype;d.render=function(){if(this.props.newProps)switch(this.props.newProps.commonData.adType){case"single_media":return g.jsx(b("AdsInstagramStorySingleFormatAdPreview.react"),babelHelpers["extends"]({},this.props.newProps));case"carousel":return g.jsx(b("AdsInstagramStoryUnifiedCarouselAdPreview.react"),babelHelpers["extends"]({},this.props.newProps));default:return g.jsx("div",{})}};return c}(g.PureComponent);e.exports=a}),null);