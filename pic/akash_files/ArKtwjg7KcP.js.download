if (self.CavalryLogger) { CavalryLogger.start_js(["dgt2Z"]); }

__d("Asset3DBackgroundMap",[],(function(a,b,c,d,e,f){e.exports={one:{story:{normal:"3d-bkgrd-1.jpg",hd:"3d-bkgrd-1-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-1.jpg",hd:"3d-bkgrd-btn-1-2x.jpg"}},two:{story:{normal:"3d-bkgrd-2.jpg",hd:"3d-bkgrd-2-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-2.jpg",hd:"3d-bkgrd-btn-2-2x.jpg"}},three:{story:{normal:"3d-bkgrd-3.jpg",hd:"3d-bkgrd-3-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-3.jpg",hd:"3d-bkgrd-btn-3-2x.jpg"}},four:{story:{normal:"3d-bkgrd-4.jpg",hd:"3d-bkgrd-4-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-4.jpg",hd:"3d-bkgrd-btn-4-2x.jpg"}},five:{story:{normal:"3d-bkgrd-5.jpg",hd:"3d-bkgrd-5-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-5.jpg",hd:"3d-bkgrd-btn-5-2x.jpg"}},six:{story:{normal:"3d-bkgrd-6.jpg",hd:"3d-bkgrd-6-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-6.jpg",hd:"3d-bkgrd-btn-6-2x.jpg"}},seven:{story:{normal:"3d-bkgrd-7.jpg",hd:"3d-bkgrd-7-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-7.jpg",hd:"3d-bkgrd-btn-7-2x.jpg"}},eight:{story:{normal:"3d-bkgrd-8.jpg",hd:"3d-bkgrd-8-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-8.jpg",hd:"3d-bkgrd-btn-8-2x.jpg"}},nine:{story:{normal:"3d-bkgrd-9.jpg",hd:"3d-bkgrd-9-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-9.jpg",hd:"3d-bkgrd-btn-9-2x.jpg"}},ten:{story:{normal:"3d-bkgrd-10.jpg",hd:"3d-bkgrd-10-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-10.jpg",hd:"3d-bkgrd-btn-10-2x.jpg"}},eleven:{story:{normal:"3d-bkgrd-11.jpg",hd:"3d-bkgrd-11-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-11.jpg",hd:"3d-bkgrd-btn-11-2x.jpg"}},twelve:{story:{normal:"3d-bkgrd-12.jpg",hd:"3d-bkgrd-12-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-12.jpg",hd:"3d-bkgrd-btn-12-2x.jpg"}},thirteen:{story:{normal:"3d-bkgrd-13.jpg",hd:"3d-bkgrd-13-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-13.jpg",hd:"3d-bkgrd-btn-13-2x.jpg"}},fourteen:{story:{normal:"3d-bkgrd-14.jpg",hd:"3d-bkgrd-14-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-14.jpg",hd:"3d-bkgrd-btn-14-2x.jpg"}},fifteen:{story:{normal:"3d-bkgrd-15.jpg",hd:"3d-bkgrd-15-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-15.jpg",hd:"3d-bkgrd-btn-15-2x.jpg"}},sixteen:{story:{normal:"3d-bkgrd-16.jpg",hd:"3d-bkgrd-16-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-16.jpg",hd:"3d-bkgrd-btn-16-2x.jpg"}},seventeen:{story:{normal:"3d-bkgrd-17.jpg",hd:"3d-bkgrd-17-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-17.jpg",hd:"3d-bkgrd-btn-17-2x.jpg"}},eighteen:{story:{normal:"3d-bkgrd-18.jpg",hd:"3d-bkgrd-18-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-18.jpg",hd:"3d-bkgrd-btn-18-2x.jpg"}},twenty:{story:{normal:"3d-bkgrd-20.jpg",hd:"3d-bkgrd-20-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-20.jpg",hd:"3d-bkgrd-btn-20-2x.jpg"}},twentyone:{story:{normal:"3d-bkgrd-21.jpg",hd:"3d-bkgrd-21-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-21.jpg",hd:"3d-bkgrd-btn-21-2x.jpg"}},twentytwo:{story:{normal:"3d-bkgrd-22.jpg",hd:"3d-bkgrd-22-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-22.jpg",hd:"3d-bkgrd-btn-22-2x.jpg"}},twentythree:{story:{normal:"3d-bkgrd-23.jpg",hd:"3d-bkgrd-23-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-23.jpg",hd:"3d-bkgrd-btn-23-2x.jpg"}},twentyfour:{story:{normal:"3d-bkgrd-24.jpg",hd:"3d-bkgrd-24-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-24.jpg",hd:"3d-bkgrd-btn-24-2x.jpg"}},twentyfive:{story:{normal:"3d-bkgrd-25.jpg",hd:"3d-bkgrd-25-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-25.jpg",hd:"3d-bkgrd-btn-25-2x.jpg"}},twentysix:{story:{normal:"3d-bkgrd-26.jpg",hd:"3d-bkgrd-26-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-26.jpg",hd:"3d-bkgrd-btn-26-2x.jpg"}},twentyseven:{story:{normal:"3d-bkgrd-27.jpg",hd:"3d-bkgrd-27-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-27.jpg",hd:"3d-bkgrd-btn-27-2x.jpg"}},twentyeight:{story:{normal:"3d-bkgrd-28.jpg",hd:"3d-bkgrd-28-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-28.jpg",hd:"3d-bkgrd-btn-28-2x.jpg"}},twentynine:{story:{normal:"3d-bkgrd-29.jpg",hd:"3d-bkgrd-29-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-29.jpg",hd:"3d-bkgrd-btn-29-2x.jpg"}},thirty:{story:{normal:"3d-bkgrd-30.jpg",hd:"3d-bkgrd-30-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-30.jpg",hd:"3d-bkgrd-btn-30-2x.jpg"}},thirtyone:{story:{normal:"3d-bkgrd-31.jpg",hd:"3d-bkgrd-31-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-31.jpg",hd:"3d-bkgrd-btn-31-2x.jpg"}},thirtytwo:{story:{normal:"3d-bkgrd-32.jpg",hd:"3d-bkgrd-32-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-32.jpg",hd:"3d-bkgrd-btn-32-2x.jpg"}},thirtythree:{story:{normal:"3d-bkgrd-33.jpg",hd:"3d-bkgrd-33-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-33.jpg",hd:"3d-bkgrd-btn-33-2x.jpg"}},thirtyfour:{story:{normal:"3d-bkgrd-34.jpg",hd:"3d-bkgrd-34-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-34.jpg",hd:"3d-bkgrd-btn-34-2x.jpg"}},thirtyfive:{story:{normal:"3d-bkgrd-35.jpg",hd:"3d-bkgrd-35-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-35.jpg",hd:"3d-bkgrd-btn-35-2x.jpg"}},thirtysix:{story:{normal:"3d-bkgrd-36.jpg",hd:"3d-bkgrd-36-2x.jpg"},thumbnail:{normal:"3d-bkgrd-btn-36.jpg",hd:"3d-bkgrd-btn-36-2x.jpg"}},"default":{story:{normal:null,hd:null},thumbnail:{normal:null,hd:null}},medium:{story:{normal:"3d-bkgrd-medium.jpg",hd:"3d-bkgrd-medium-2x.jpg"},thumbnail:{normal:null,hd:null}},spaces:{story:{normal:"3d-bkgrd-spaces.jpg",hd:"3d-bkgrd-spaces-2x.jpg"},thumbnail:{normal:null,hd:null}},creator:{story:{normal:"3d-bkgrd-creator.jpg",hd:"3d-bkgrd-creator-2x.jpg"},thumbnail:{normal:null,hd:null}}}}),null);
__d("Asset3DConstants",[],(function(a,b,c,d,e,f){e.exports={ROTATION_FACTOR:.08,MAX_ZOOM:.25,CAMERA_RADIUS:1,GYRO_SPEED:.06,MODAL:{H_TARGET_FACTOR:{H_PHOTO:-.24,V_PHOTO:-.124},V_TARGET_FACTOR:{H_PHOTO:-.24,V_PHOTO:-.212},H_TARGET_DISTRIBUTE_FACTOR:{H_PHOTO:.7,V_PHOTO:.8},V_TARGET_DISTRIBUTE_FACTOR:{H_PHOTO:.6,V_PHOTO:.86},FOV_FACTOR:.92},POST:{FOV_FACTOR:.925}}}),null);
__d("SocialVRThreeJS",["ThreeJS.r93"],(function(a,b,c,d,e,f){a=b("ThreeJS.r93");e.exports=a}),null);
__d("AnimatedCameraMotion",["Asset3DConstants","React","SocialVRThreeJS","Tween","WitHelpersShared"],(function(a,b,c,d,e,f){var g=b("Asset3DConstants").GYRO_SPEED,h=b("React");b("SocialVRThreeJS").Camera;var i=b("SocialVRThreeJS").Vector3,j=b("WitHelpersShared").debounce;e.exports={withAnimatedCameraMotion:function(a){return function(c){"use strict";babelHelpers.inheritsLoose(d,c);function d(){var a,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(a=d=c.call.apply(c,[this].concat(f))||this,d.state={cameraPos:void 0,lookAtPos:void 0,isAnimating:!1},d.$1=j(function(a,c,e,f){d.__tween&&d.__tween.stop(),d.__tween=new(b("Tween"))(),d.__tween.start(function(b){d.setState({cameraPos:a.map(function(a,d){return a*(1-b)+b*c[d]}),lookAtPos:e.map(function(a,c){return a*(1-b)+b*f[c]}),isAnimating:!0})},16/g-16)},16),a)||babelHelpers.assertThisInitialized(d)}var e=d.prototype;e.UNSAFE_componentWillReceiveProps=function(a){var b=a.toCameraPos,c=a.toLookAtPos;a=a.camera;var d=this.state,e=d.cameraPos;e=e===void 0?a.position.toArray():e;d=d.lookAtPos;a=d===void 0?a.lookAtPosition.toArray():d;if(e&&a&&b&&c){d=e.map(function(a,c){return a+g*(b[c]-a)});var f=a.map(function(a,b){return a+g*(c[b]-a)});this.setState({cameraPos:d,lookAtPos:f,isAnimating:!1})}else this.setState({cameraPos:e,lookAtPos:a,isAnimating:!1})};e.componentWillUnmount=function(){this.__tween&&(this.__tween.stop(),this.__tween=null)};e.render=function(){var b=this.state,c=b.cameraPos,d=b.lookAtPos;b=b.isAnimating;var e=this.props,f=e.camera,g=e.toCameraPos,j=e.toLookAtPos;e=babelHelpers.objectWithoutPropertiesLoose(e,["camera","toCameraPos","toLookAtPos"]);c&&d&&(!b&&g&&j&&(this.__tween&&this.__tween.stop(),this.$1(c,g,d,j)),f.position.set(c[0],c[1],c[2]),f.lookAt(new i(d[0],d[1],d[2])));return h.jsx(a,babelHelpers["extends"]({camera:f},e))};return d}(h.Component)}}}),null);
__d("R3Scene",["React","SocialVRThreeJS"],(function(a,b,c,d,e,f){var g=b("React"),h=b("SocialVRThreeJS").Scene;e.exports=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(b){b=a.call(this,b)||this;b.$1=new h();return b}var c=b.prototype;c.componentDidUpdate=function(){this.__update()};c.componentDidMount=function(){this.__update()};c.__update=function(){var a=this.props.rendererDelegate;a&&this.$2&&a.requestUpdate(this.$1,this.$2)};c.$3=function(a){this.$2=a};c.render=function(){var a=this,b=this.props.children;this.props.children!=null&&(b=g.Children.map(b,function(b){return g.cloneElement(b,{rendererDelegate:Object.assign({},a.props.rendererDelegate,{requestUpdate:function(){return a.__update()}}),sceneDelegate:{getParentNode:function(){return a.$1},setCamera:function(b){return a.$3(b)}}})}));return g.jsx("div",{name:"scene",ref:"sceneElement",children:b})};return b}(g.Component)}),null);
__d("React3",["R3Scene","React","partitionArray"],(function(a,b,c,d,e,f){var g=b("React"),h=function(c){"use strict";babelHelpers.inheritsLoose(a,c);function a(a){a=c.call(this,a)||this;a.$1=new Map();return a}var d=a.prototype;d.componentDidMount=function(){var a=this.props,b=a.rendererDelegate,c=a.sceneDelegate;a=a.effects;var d=this.__component;if(d!=null&&c!=null&&b!=null){c=c.getParentNode();d=d.element();this.__sceneElement=d;this.__mount(c,d);this.$2(d,a);b.requestUpdate()}};d.componentDidUpdate=function(){this.$3(this.__sceneElement,this.props.effects)};d.componentWillUnmount=function(){var a=this.props,b=a.rendererDelegate;a=a.sceneDelegate;var c=this.__sceneElement;if(a!=null&&b!=null){a=a.getParentNode();this.__unmount(a,c);Array.from(this.$1).forEach(function(a){a[0];a=a[1];return a.onRemove(c,b)});b.requestUpdate()}};d.__mount=function(a,b){a.add(b)};d.__unmount=function(a,b){a.remove(b)};d.__getRendererDelegate=function(){var a=this.props,b=a.rendererDelegate,c=a.onUpdate,d=this.__sceneElement;return c&&b?Object.assign({},b,{requestUpdate:function(){c(d),b.requestUpdate()}}):b};d.__delegateChildren=function(a){var b=this;return g.Children.map(a,function(a){return g.cloneElement(a,{sceneDelegate:Object.assign({},b.props.sceneDelegate,{getParentNode:function(){return b.__sceneElement}}),rendererDelegate:b.__getRendererDelegate()})})};d.$2=function(a,b){b===void 0&&(b=[]);b=b||[];var c=this.__getRendererDelegate();c&&(b.forEach(function(b){return b.onApply(a,c)}),this.$1=new Map(b.map(function(a){return[a.getKey(),a]})))};d.$3=function(a,c){var d=this;c===void 0&&(c=[]);var e=new Map(c.map(function(a){return[a.getKey(),a]}));c=b("partitionArray")(c,function(a){return d.$1.has(a.getKey())});c[0];c=c[1];var f=b("partitionArray")(Array.from(this.$1),function(a){var b=a[0];a[1];return e.has(b)}),g=f[0];f=f[1];f=f.map(function(a){return a[1]});g=g.map(function(a){return a[1]});var h=this.__getRendererDelegate();h&&(c.forEach(function(b){return b.onApply(a,h)}),g.forEach(function(b){var c=e.get(b.getKey())||b;b.onUpdate(a,h,c)}),f.forEach(function(b){return b.onRemove(a,h)}));c.forEach(function(a){return d.$1.set(a.getKey(),a)});f.forEach(function(a){return d.$1["delete"](a.getKey())})};return a}(g.Component);function a(a){return function(b){"use strict";babelHelpers.inheritsLoose(c,b);function c(){return b.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var b=this;return g.jsx(a,babelHelpers["extends"]({ref:function(a){return b.__component=a}},this.props,{children:this.__delegateChildren(this.props.children)}))};return c}(h)}function c(a){return function(b){"use strict";babelHelpers.inheritsLoose(c,b);function c(){return b.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){b.prototype.componentDidMount.call(this);var a=this.props.sceneDelegate;a&&a.setCamera(this.__sceneElement)};d.componentWillUnmount=function(){b.prototype.componentWillUnmount.call(this);var a=this.props.sceneDelegate;a&&a.setCamera(null)};d.__mount=function(a,b){a.add(b.model())};d.__unmount=function(a,b){a.remove(b.model())};d.render=function(){var b=this;return g.jsx(a,babelHelpers["extends"]({ref:function(a){return b.__component=a}},this.props,{children:this.__delegateChildren(this.props.children)}))};return c}(h)}function d(a){return function(b){"use strict";babelHelpers.inheritsLoose(c,b);function c(){return b.apply(this,arguments)||this}var d=c.prototype;d.screenshot=function(){if(this.$1)return this.$1.screenshot();else return null};d.getElement=function(){if(this.$1)return this.$1.getElement();else return null};d.render=function(){var b=this,c=g.Children.map(this.props.children,function(a){return g.cloneElement(a,{rendererDelegate:{requestUpdate:function(a,c){return b.$1&&b.$1.update(a,c)},getRenderElement:function(){return b.$1&&b.$1.getElement()},getRenderDimension:function(){return b.$1&&b.$1.getDimension()}}})}),d=this.props,e=d.width;d=d.height;return g.jsxs("div",{name:"renderer container",style:{width:e+"px",height:d+"px"},children:[g.jsx(a,babelHelpers["extends"]({ref:function(a){return b.$1=a}},this.props)),c]})};return c}(g.Component)}f=function(){"use strict";function a(a){this.props=a}var b=a.prototype;b.getKey=function(){return this.props.key};b.getProps=function(){return this.props};b.onApply=function(a,b){};b.onUpdate=function(a,b,c){};b.onRemove=function(a,b){};return a}();e.exports={makeRenderable:a,makeCamera:c,makeRenderer:d,R3Effect:f,Scene:b("R3Scene")}}),null);
__d("GltfRenderable.react",["React","React3"],(function(a,b,c,d,e,f){var g=b("React");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.element=function(){var a=this.props.model;return a};c.render=function(){return g.jsx("div",{name:"GLTFModel",children:this.props.children})};return b}(g.Component);c=b("React3").makeRenderable(a);e.exports=c}),null);
__d("PerspectiveCamera.react",["React","React3","SocialVRThreeJS"],(function(a,b,c,d,e,f){var g=b("React"),h=b("SocialVRThreeJS").Object3D,i=b("SocialVRThreeJS").PerspectiveCamera;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.componentDidMount=function(){var a=this.props,b=a.aspectRatio,c=a.fov;c=c===void 0?45:c;var d=a.near;d=d===void 0?.01:d;var e=a.far;e=e===void 0?1e3:e;var f=a.position;a=a.lookAt;this.$1=new i(c,b,d,e);this.$2=new h();this.$2.add(this.$1);if(f!=null){(c=this.$2.position).set.apply(c,f)}if(a!=null){this.$3=new h();(b=this.$3.position).set.apply(b,a);this.$1.lookAt(0,0,1);this.$2.lookAt(this.$3.position)}};c.componentDidUpdate=function(){var a=this.props,b=a.position;a=a.lookAt;if(b!=null){var c;(c=this.$2.position).set.apply(c,b)}if(a!=null){(c=this.$3.position).set.apply(c,a);this.$1.lookAt(0,0,1);this.$2.lookAt(this.$3.position)}};c.element=function(){return this.$4(this.$1)};c.model=function(){return this.$2};c.render=function(){return g.jsx("div",{name:"Perspective Camera",children:this.props.children})};c.$4=function(a){var b=this;return Object.assign(a,{model:function(){return b.$2},target:function(){return b.$3}})};return b}(g.Component);c=b("React3").makeCamera(a);e.exports=c}),null);
__d("Asset3DScene.react",["GltfRenderable.react","PerspectiveCamera.react","React","React3","SocialVRThreeJS"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("React3").Scene,i=b("SocialVRThreeJS").Box3,j=b("SocialVRThreeJS").Vector3,k=1.5,l=Math.PI/8;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.screenshot=function(){return this.refs.renderer.screenshot()};d.render=function(){var a=this.props,c=a.model,d=a.onCameraUpdate,e=a.cameraEffects,f=a.modelEffects,k=a.cameraPosition;a=a.cameraTarget;var l=new i().setFromObject(c),m=l.min,n=l.max;k=k&&a?{position:k,target:a}:this.$1(m,n);a=k.position;m=k.target;n=l.getSize(new j());k=n.x;l=n.y;n=n.z;k=Math.sqrt(k/2*(k/2)+l/2*(l/2)+n/2*(n/2));l=Math.sqrt((a[0]-m[0])*(a[0]-m[0])+(a[1]-m[1])*(a[1]-m[1])+(a[2]-m[2])*(a[2]-m[2]));return g.jsxs(h,babelHelpers["extends"]({},this.props,{children:[g.jsx(b("PerspectiveCamera.react"),{position:a,lookAt:m,near:l-k,far:l+k,effects:e||[],onUpdate:d}),g.jsx(b("GltfRenderable.react"),{model:c,effects:f})]}))};d.$1=function(a,b){var c=b.x,d=b.y;b=b.z;var e=a.x,f=a.y;a=a.z;var g={x:(c+e)*.5,y:(d+f)*.5,z:(b+a)*.5};c=Math.sqrt((c-e)*(c-e)+(d-f)*(d-f)+(b-a)*(b-a));return{position:[g.x,g.y+c*k*Math.sin(l),g.z+c*k*Math.cos(l)],target:[g.x,g.y,g.z]}};return c}(g.Component);e.exports=a}),null);
__d("XAsset3DUpdateFallbackImageController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/3d/update/",{id:{type:"FBID",required:!0}})}),null);
__d("isHDScreen",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(){if(window.devicePixelRatio>1.5)return!0;var a="(-webkit-min-device-pixel-ratio: 1.5),(min--moz-device-pixel-ratio: 1.5),(-o-min-device-pixel-ratio: 3/2),(min-resolution: 1.5dppx)";return window.matchMedia&&window.matchMedia(a).matches?!0:!1}}),null);
__d("Asset3DUtils",["ActorURI","Asset3DBackgroundMap","AsyncRequest","XAsset3DUpdateFallbackImageController","dataUriToBlob","isHDScreen"],(function(a,b,c,d,e,f){"use strict";var g="/images/asset3d/backgrounds/",h="/images/asset3d/backgrounds/thumbnails/";a={fileEquals:function(a,b){return!!a&&!!b&&a.name===b.name&&a.size===b.size&&a.lastModified===b.lastModified},getBackgroundStyles:function(a,c){if(!a)return null;a=b("Asset3DBackgroundMap")[a];a&&(b("isHDScreen")()?a=a[c].hd:a=a[c].normal);if(a)switch(c){case"story":a=g+a;return{backgroundImage:"url("+a+")",backgroundSize:"cover"};case"thumbnail":a=h+a;return{backgroundImage:"url("+a+")",backgroundSize:"100%"}}return null},takeScreenshot:function(a){return b("dataUriToBlob")(a.toDataURL("image/png"))},saveScreenshot:function(a,c,d,e){c=b("ActorURI").create(b("XAsset3DUpdateFallbackImageController").getURIBuilder().setFBID("id",String(c)).getURI(),d);d=new FormData();d.append("fallback_image",a);e&&d.append("fallback_depth_image",e);new(b("AsyncRequest"))().setURI(c).setMethod("POST").setRawData(d).setErrorHandler(function(a){a&&a.errorDescription}).send()},getPanSpeed:function(a,b){var c=b.x,d=b.y;b=b.z;var e=a.x,f=a.y;a=a.z;c=Math.sqrt((c-e)*(c-e)+(d-f)*(d-f)+(b-a)*(b-a));return c},getCameraOrientation:function(a){var b=a.target();b=b.position;a=a.model();a=a.position;a=a.clone().sub(b).normalize();b=a.x;var c=a.y;a=a.z;c=Math.asin(c);var d=Math.atan(b/a);if(b*a>0)if(b>0)return{yaw:d,pitch:c};else return{yaw:d+Math.PI,pitch:c};else if(b>0)return{yaw:d+Math.PI,pitch:c};else return{yaw:d,pitch:c}},polarCoordToCartesianCoord:function(a,b){var c=Math.cos(b)*Math.sin(a),d=Math.sin(b);b=Math.cos(b)*Math.cos(a);return{x:c,y:d,z:b}}};e.exports=a}),null);
__d("SceneRenderer",["FBLogger","SocialVRThreeJS"],(function(a,b,c,d,e,f){b("SocialVRThreeJS").Camera;b("SocialVRThreeJS").Scene;var g=b("SocialVRThreeJS").WebGLRenderer;a=function(){function a(){try{var a=new g({antialias:!0,alpha:!0});this.$1=!0;a.gammaOutput=!0;a.setPixelRatio(window.devicePixelRatio);this.__renderer=a}catch(a){this.$1=!1,b("FBLogger")("Asset3DSceneRenderer").info("failed to create a webgl context (will fallback to 2D version)",a)}this.__width=0;this.__height=0}var c=a.prototype;c.isValid=function(){return this.$1};c.render=function(a,b,c,d){var e=d.height;d=d.width;d=Math.round(d);e=Math.round(e);var f=this.__renderer;if(f){this.__isSizeValid(d,e)||this.__resize(d,e);f.render(b,c);b=f.getDrawingBufferSize();c=b.width;b=b.height;a.clearRect(0,0,d,e);a.drawImage(f.domElement,0,0,c,b,0,0,d,e)}return this};c.getEl=function(){return this.__renderer&&this.__renderer.domElement};c.getRenderInfo=function(){var a;return(a=this.__renderer)==null?void 0:(a=a.info)==null?void 0:a.render};c.dispose=function(){this.__renderer&&(this.__renderer.dispose(),this.__renderer=null);return this};c.__resize=function(a,b){this.__renderer&&(this.__renderer.setSize(a,b),this.__width=a,this.__height=b);return this};c.__isSizeValid=function(a,b){return this.__width===a&&this.__height===b};return a}();e.exports=a}),null);
__d("FixedSizedSceneRenderer",["SceneRenderer"],(function(a,b,c,d,e,f){var g=null;a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.getInstance=function(){g==null&&(g=new b());return g};var c=b.prototype;c.__resize=function(b,c){var a=this.__renderer;a&&(this.__width=Math.max(b,this.__width),this.__height=Math.max(c,this.__height),a.setSize(this.__width,this.__height));return this};c.__isSizeValid=function(a,b){return this.__width>=a&&this.__height>=b};return b}(b("SceneRenderer"));e.exports=a}),null);
__d("CanvasRenderer.react",["FixedSizedSceneRenderer","React","React3"],(function(a,b,c,d,e,f){var g=b("React"),h=new(b("FixedSizedSceneRenderer"))();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.componentDidMount=function(){var a=this.refs.canvas;this.$1=a.getContext("2d");a.addEventListener("contextmenu",function(a){a.preventDefault();return!1})};c.getElement=function(){return this.refs.canvas};c.getDimension=function(){var a=this.props,b=a.width;a=a.height;return{width:b,height:a}};c.update=function(a,b){var c=this.props,d=c.width;d=d===void 0?100:d;var e=c.height;e=e===void 0?100:e;c=c.onRender;h.render(this.$1,a,b,{width:d,height:e,pixelRatio:window.devicePixelRatio});c&&c(h.getRenderInfo())};c.screenshot=function(){return this.refs.canvas.toDataURL("image/png")};c.render=function(){var a=this.props,b=a.width;b=b===void 0?100:b;a=a.height;a=a===void 0?100:a;return g.jsx("canvas",{ref:"canvas",width:b,height:a,style:{width:b+"px",height:a+"px"}})};return b}(g.Component);c=b("React3").makeRenderer(a);e.exports=c}),null);
__d("R3AmbientLight",["React3","SocialVRThreeJS"],(function(a,b,c,d,e,f){var g=b("SocialVRThreeJS").AmbientLight;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){return a.call(this,b||{key:"R3AmbientLight",color:16777215,intensity:.5})||this}var c=b.prototype;c.onApply=function(a,b){var c=this.props,d=c.color;c=c.intensity;d=new g(d,c);a.add(d);b&&b.requestUpdate();this.$R3AmbientLight1=d};c.onRemove=function(a,b){a&&this.$R3AmbientLight1&&a.remove(this.$R3AmbientLight1)};return b}(b("React3").R3Effect);e.exports=a}),null);
__d("R3DirectionalLight",["React3","SocialVRThreeJS"],(function(a,b,c,d,e,f){var g=b("SocialVRThreeJS").DirectionalLight;a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){return a.call(this,b||{key:"R3DirectionalLight",position:[0,1,0],color:16777215,intensity:.5})||this}var c=b.prototype;c.onApply=function(a,b){var c=this.props,d=c.position,e=c.color;c=c.intensity;e=new g(e,c);(c=e.position).set.apply(c,d);e.target=a;a.add(e);b&&b.requestUpdate();this.$R3DirectionalLight1=e};c.onRemove=function(a,b){this.$R3DirectionalLight1&&a.remove(this.$R3DirectionalLight1)};return b}(b("React3").R3Effect);e.exports=a}),null);
__d("R3OrbitalAnimation",["Asset3DUtils","React3"],(function(a,b,c,d,e,f){a=b("React3").R3Effect;c=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b||{key:"R3OrbitalAnimation",speed:.001,duration:1e3})||this;b.$R3OrbitalAnimation1=!1;return b}var d=c.prototype;d.onApply=function(a,b){var c=this;this.$R3OrbitalAnimation1=!0;window.requestAnimationFrame(function(){return c.$R3OrbitalAnimation2(a,b)})};d.onRemove=function(a,b){this.$R3OrbitalAnimation1=!1};d.$R3OrbitalAnimation2=function(a,c){var d=this;if(this.$R3OrbitalAnimation1){var e=this.props.speed;e=e===void 0?.001:e;var f=a.model().position,g=a.target().position,h=b("Asset3DUtils").getCameraOrientation(a),i=h.yaw;h=h.pitch;f=f.clone().sub(g).length();e=e*Math.PI*2;i=b("Asset3DUtils").polarCoordToCartesianCoord(i+e,h);e=i.x;h=i.y;i=i.z;a.model().position.set(f*e+g.x,f*h+g.y,f*i+g.z);a.model().lookAt(g.x,g.y,g.z);c.requestUpdate();window.requestAnimationFrame(function(){return d.$R3OrbitalAnimation2(a,c)})}};return c}(a);e.exports=c}),null);
__d("R3SphericalCameraControl",["Asset3DUtils","React3","SphericalViewportControl","SubscriptionsHandler","radToDeg"],(function(a,b,c,d,e,f){a=b("React3").R3Effect;var g=.15,h=50;c=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.onApply=function(a,b){if(b){this.$R3SphericalCameraControl1=this.$R3SphericalCameraControl3(a,b.getRenderElement());var c=b.getRenderDimension(),d=c.width;c=c.height;this.__configSphericalViewportControl(this.$R3SphericalCameraControl1);this.$R3SphericalCameraControl1.updateViewportClientSize({width:d,height:c});this.$R3SphericalCameraControl4(this.$R3SphericalCameraControl1,a,b);b.requestUpdate()}};d.onUpdate=function(a,c,d){c=b("Asset3DUtils").getCameraOrientation(a);d=c.yaw;a=c.pitch;this.$R3SphericalCameraControl1.setSphericalOrientation(b("radToDeg")(d),b("radToDeg")(a))};d.onRemove=function(a){this.$R3SphericalCameraControl2.release()};d.$R3SphericalCameraControl3=function(a,c){a=b("Asset3DUtils").getCameraOrientation(a);var d=a.yaw;a=a.pitch;var e={enableGyro:!1,slipFactor:g,enableRubberBanding:!1,disableAutoClientSizeUpdate:!0,enableZoomWithShiftKey:!0,enablePanningWithRightMouse:!0,listenOnlyOneElement:!1};d={expansionCoef:1.01,fieldOfView:this.props.fov==null?h:this.props.fov,initialHeading:b("radToDeg")(d),initialPitch:b("radToDeg")(a),projectionType:"flat"};return new(b("SphericalViewportControl"))(c,d,this.__getSphericalViewportControlConfig(e))};d.$R3SphericalCameraControl4=function(a,c,d){var e;this.$R3SphericalCameraControl2=new(b("SubscriptionsHandler"))();(e=this.$R3SphericalCameraControl2).addSubscriptions.apply(e,this.__registerOtherListeners(a,c,d))};d.__configSphericalViewportControl=function(a){};d.__getSphericalViewportControlConfig=function(a){return a};d.__registerOtherListeners=function(a,b,c){return[]};return c}(a);e.exports=c}),null);
__d("R3PanCameraControl",["R3SphericalCameraControl","React","SocialVRThreeJS","degToRad"],(function(a,b,c,d,e,f){var g=b("React"),h=b("SocialVRThreeJS").Vector3;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b||{panSpeed:1,key:"R3PanCameraControl"})||this;b.$R3PanCameraControl1=0;b.$R3PanCameraControl2=0;return b}var d=c.prototype;d.render=function(){return g.jsx("div",{name:"attribute zoomable camera control"})};d.__registerOtherListeners=function(a,c,d){var e=this;return[a.addListener("viewportChange",function(a,c,d){e.$R3PanCameraControl1=b("degToRad")(a),e.$R3PanCameraControl2=b("degToRad")(c)}),a.addListener("panningWithRightMouse",function(a){var b=a.x;a=a.y;e.$R3PanCameraControl3(c,-b,a,0,e.$R3PanCameraControl1,e.$R3PanCameraControl2);d.requestUpdate()})]};d.__getSphericalViewportControlConfig=function(a){return Object.assign({},a,{enableGyro:!1})};d.$R3PanCameraControl3=function(a,b,c,d,e,f){d=this.props.panSpeed;d=d===void 0?1:d;var g=a.target();a=a.model();var i=a.position.clone().sub(g.position),j=new h(1,0,0).applyAxisAngle(new h(0,1,0),e).normalize();f=new h(0,1,0).applyAxisAngle(new h(1,0,0),-f).applyAxisAngle(new h(0,1,0),e).normalize();g.position.add(j.multiplyScalar(b*d));g.position.add(f.multiplyScalar(c*d));e=g.position;j=e.clone().add(i);a.position.set(j.x,j.y,j.z)};return c}(b("R3SphericalCameraControl"));e.exports=a}),null);
__d("R3PositionalCameraControl",["Asset3DUtils","React3"],(function(a,b,c,d,e,f){a=b("React3").R3Effect;c=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b||{key:"R3PositionalCameraControl",range:.1*Math.PI,bound:.5*Math.PI})||this;b.$R3PositionalCameraControl1=0;return b}var d=c.prototype;d.onApply=function(a,b){var c=this,d=this.props,e=d.positionUpdate;d=d.initialPosition;e&&(this.$R3PositionalCameraControl2=e.addListener("position",function(d){d>=0&&d<=1&&(c.$R3PositionalCameraControl3(a,d),b.requestUpdate())}));d!=null&&(d>=0&&d<=1&&(this.$R3PositionalCameraControl3(a,d),b.requestUpdate()))};d.onRemove=function(a,b){this.$R3PositionalCameraControl2&&this.$R3PositionalCameraControl2.remove()};d.$R3PositionalCameraControl3=function(a,c){var d=this.props,e=d.range;d=d.bound;e=e==null?.1*Math.PI:parseFloat(e);d=d==null?.5*Math.PI:parseFloat(d);c=c*e-.5*e;e=this.$R3PositionalCameraControl1;var f=b("Asset3DUtils").getCameraOrientation(a),g=f.yaw;f=f.pitch;f=Math.max(-d,Math.min(f-e+c,d));e=a.target();d=e.position;e=a.model();a=e.position;a=a.clone().sub(d).length();g=b("Asset3DUtils").polarCoordToCartesianCoord(g,f);f=g.x;var h=g.y;g=g.z;e.position.set(a*f+d.x,a*h+d.y,a*g+d.z);e.lookAt(d.x,d.y,d.z);this.$R3PositionalCameraControl1=c};return c}(a);e.exports=c}),null);
__d("R3TurntableCameraControl",["Asset3DUtils","R3SphericalCameraControl","React","degToRad"],(function(a,b,c,d,e,f){var g=b("React"),h=6,i=3;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(b){return a.call(this,b||{enableGyro:!1,key:"R3TurntableCameraControl"})||this}var d=c.prototype;d.render=function(){return g.jsx("div",{name:"attribute turnable camera control"})};d.__registerOtherListeners=function(a,c,d){var e=this;if(d)return[a.addListener("viewportChange",function(a,f,g){g=b("degToRad")(a);a=b("degToRad")(f);e.$R3TurntableCameraControl1(c,g,a);d.requestUpdate()}),a.addListener("updateViewportEnd",function(b,c){e.props.enableGyro&&a.reEnableGyro()}),a.addListener("onMovementStart",function(a,b){e.props.onInteractionStart&&e.props.onInteractionStart(c)}),a.addListener("DOM/click",function(a){d.getRenderElement().dispatchEvent(new Event("DOM/click",{bubbles:!0}))})];else return[]};d.__configSphericalViewportControl=function(a){a.setAngularVelocityScaleFactor({x:h,y:i})};d.__getSphericalViewportControlConfig=function(a){return Object.assign({},a,{enableGyro:!!this.props.enableGyro})};d.$R3TurntableCameraControl1=function(a,c,d){var e=a.target();e=e.position;a=a.model();var f=a.position;f=f.clone().sub(e).length();c=b("Asset3DUtils").polarCoordToCartesianCoord(c,d);d=c.x;var g=c.y;c=c.z;a.position.set(f*d+e.x,f*g+e.y,f*c+e.z);a.lookAt(e.x,e.y,e.z)};return c}(b("R3SphericalCameraControl"));e.exports=a}),null);
__d("R3ZoomCameraControl",["R3SphericalCameraControl","React"],(function(a,b,c,d,e,f){var g=b("React"),h=.001;a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(b){return a.call(this,b||{key:"R3ZoomCameraControl",zoomSpeed:.05})||this}var c=b.prototype;c.render=function(){return g.jsx("div",{name:"attribute zoomable camera control"})};c.__getSphericalViewportControlConfig=function(a){return Object.assign({},a,{enableGyro:!1})};c.__registerOtherListeners=function(a,b,c){var d=this.props,e=d.maxCameraDistance,f=d.minCameraDistance;d=d.zoomSpeed;var g=d==null?.05:parseFloat(d);if(c)return[a.addListener("wheelScrollWithShiftKey",function(a,d){d=b.model();var i=b.target();i=i.position.clone().sub(d.position.clone());var j=i.length();i=i.normalize();a<0&&(b.near-j*g>=h&&(e==null||j<=e)&&(d.position.add(i.multiplyScalar(j*g)),b.near-=j*g,b.far-=j*g,b.updateProjectionMatrix(),c.requestUpdate()));a>0&&((f==null||j>=f)&&(d.position.sub(i.multiplyScalar(j*g)),b.near+=j*g,b.far+=j*g,b.updateProjectionMatrix(),c.requestUpdate()))})];else return[]};return b}(b("R3SphericalCameraControl"));e.exports=a}),null);
__d("Asset3DFeedView.react",["Asset3DScene.react","Asset3DUtils","CanvasRenderer.react","EventListener","R3AmbientLight","R3DirectionalLight","R3OrbitalAnimation","R3PanCameraControl","R3PositionalCameraControl","R3TurntableCameraControl","R3ZoomCameraControl","React","SocialVRThreeJS","SubscriptionsHandler","debounce"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("SocialVRThreeJS").Box3;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=!1,d.$2=new(b("SubscriptionsHandler"))(),d.$3=b("debounce")(function(){return d.$1=!1},50),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.screenshot=function(){return this.refs.renderer.screenshot()};d.componentDidMount=function(){var a=this,c=this.refs.content,d=this.props.onInteractionStart;d&&this.$2.addSubscriptions(b("EventListener").listen(c,"mousemove",function(){!a.$1?(a.$1=!0,d()):a.$3()}),b("EventListener").listen(c,"mouseenter",d),b("EventListener").listen(c,"mousedown",d))};d.render=function(){var a=this.props,c=a.model,d=a.viewportInfo,e=d.width;d=d.height;var f=a.onCameraUpdate,h=a.cameraPosition,i=a.cameraTarget;a=a.onRender;return g.jsx("div",{ref:"content",children:g.jsx(b("CanvasRenderer.react"),{width:e,height:d,onRender:a,ref:"renderer",children:g.jsx(b("Asset3DScene.react"),{model:c,cameraPosition:h,cameraTarget:i,onCameraUpdate:f,cameraEffects:this.$4(this.props),modelEffects:[new(b("R3DirectionalLight"))({key:"directionalLight",position:[1,2,1]}),new(b("R3AmbientLight"))({key:"ambientLight",color:13421772,intensity:.5})]})})})};d.$4=function(a){var c=a.model,d=a.isAttractionMode,e=a.positionUpdate,f=a.isInViewport;f=f===void 0?!0:f;a=a.scrollPosition;c=new h().setFromObject(c);var g=c.min;c=c.max;g=[new(b("R3TurntableCameraControl"))({key:"turntalbeControl",enableGyro:!0}),new(b("R3PanCameraControl"))({key:"panControl",panSpeed:b("Asset3DUtils").getPanSpeed(g,c)}),new(b("R3ZoomCameraControl"))()];d===!0&&g.push(new(b("R3OrbitalAnimation"))({key:"orbitalAnimation"}));f===!0&&g.push(new(b("R3PositionalCameraControl"))({key:"positionalControl",positionUpdate:e,range:.3*Math.PI,bound:.25*Math.PI,initialPosition:a}));return g};return c}(g.Component);e.exports=a}),null);
__d("Asset3DFullscreenViewContainer.react",["cx","Asset3DFeedView.react","Asset3DUtils","FBLogger","FDSCloseButton.react","React","Spotlight.react","UIPagelet","ge"],(function(a,b,c,d,e,f,g){"use strict";var h=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=function(){c.props.onExit()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$2()};d.render=function(){var a=this,c=this.props,d=c.model,e=c.viewportInfo;c=c.backgroundType;var f=e.height;return h.jsxs(b("Spotlight.react"),{onHide:this.$1,shown:!0,rootClassName:"_6gen",children:[h.jsx("div",{className:"_6gdn",children:h.jsx(b("FDSCloseButton.react"),{onClick:function(){return a.$1()},size:"large"})}),h.jsx("div",{className:"_n3",children:h.jsxs("div",{className:"_6iy4",children:[h.jsx("div",{style:this.$3(c),children:h.jsx("div",{ref:"contentContainer",children:h.jsx(b("Asset3DFeedView.react"),{model:d,viewportInfo:e})})}),h.jsx("div",{style:{height:f,overflowY:"auto"},className:"_6iy5",id:"pagelet_asset3d_viewer"})]})})]})};d.$2=function(){try{b("UIPagelet").loadFromEndpoint("Asset3DViewerPagelet",b("ge")("pagelet_asset3d_viewer",this.root),{storyID:this.props.storyID})}catch(a){b("FBLogger")("Asset3DFullscreenViewerContainer").info("the modal has been closed",a)}};d.$3=function(a){if(a!=null)return b("Asset3DUtils").getBackgroundStyles(a,"story");else return null};return c}(h.Component);e.exports=a}),null);
__d("Asset3DModalViewerStore",["undux"],(function(a,b,c,d,e,f){a=b("undux").connect;c=b("undux").createStore;d={pointerPos:{x:0,y:0}};f=c(d);e.exports.withStore=a(f)}),null);
__d("Asset3DViewerHelper",["Asset3DConstants"],(function(a,b,c,d,e,f){"use strict";var g=(a=b("Asset3DConstants")).CAMERA_RADIUS,h=a.MAX_ZOOM,i=a.MODAL,j=a.ROTATION_FACTOR;e.exports={getCameraViewParams:function(a,b,c,d,e,f){var k=.5*c,l=.5*d;a=2*(a-k)/c;k=-2*(b-l)/d;c=e>f;b=Math.sin(k*Math.PI*.5);l=Math.sin(a*Math.PI*.5);d=f*j*b;k=e*j*l;a=Math.tan(e/2)*g*(c?i.H_TARGET_FACTOR.H_PHOTO:i.H_TARGET_FACTOR.V_PHOTO);e=Math.tan(f/2)*g*(c?i.V_TARGET_FACTOR.H_PHOTO:i.V_TARGET_FACTOR.V_PHOTO);f=-b*e;b=-l*a;e=h*-.1;l=-d;a=-k;d=g+e;k=c?i.H_TARGET_DISTRIBUTE_FACTOR.H_PHOTO:i.H_TARGET_DISTRIBUTE_FACTOR.V_PHOTO;e=c?i.V_TARGET_DISTRIBUTE_FACTOR.H_PHOTO:i.V_TARGET_DISTRIBUTE_FACTOR.V_PHOTO;return{lookAtPos:[-(1-k)*b,-(1-e)*f,-g],cameraPos:[d*Math.cos(l)*Math.sin(a),0+d*Math.sin(l),-g+d*Math.cos(l)*Math.cos(a)]}}}}),null);
__d("Asset3dCameraControl",["EventListener","SocialVRThreeJS","degToRad"],(function(a,b,c,d,e,f){"use strict";var g=.01,h=2e3,i=b("degToRad")(270),j=b("degToRad")(0),k=50,l=5e3;a=function(){function a(a,c,d,e,f){var l=this;this.__cameraTarget=new(b("SocialVRThreeJS").Vector3)();this.__width=0;this.__height=0;this.__aspectRatio=1;this.__yaw=i;this.__pitch=j;this.__dirty=!0;this.__isInAttractMode=!1;this.__attractModeAnimationFrameID=null;this.$1=null;this.__fullVisibility=!1;this.__width=a;this.__height=c;this.__aspectRatio=a/c;this.__canvas=d;this.__camera=new(b("SocialVRThreeJS").PerspectiveCamera)(k,this.__width/this.__height,g,h);this.__renderingControl=f;e=new(b("SocialVRThreeJS").DirectionalLight)(15658734);e.position.set(1,2,1);this.__camera.add(e);this.setupViewportListeners();this.setDirty(!0);b("EventListener").listen(document,"visibilitychange",function(){l.setDirty(!0,!0)});b("EventListener").listen(window,"blur",function(){l.setDirty(!0,!0)});b("EventListener").listen(window,"focus",function(){l.setDirty(!0,!0)})}var c=a.prototype;c.modelLoad=function(a,b){b===void 0};c.setupViewportListeners=function(){};c.update=function(a){};c.camera=function(){return this.__camera};c.getHorizontalFov=function(){return this.__hFov};c.getVerticalFov=function(){return this.__vFov};c.destroy=function(){this.$1&&(window.clearTimeout(this.$1),this.$1=null)};c.isDirty=function(){return this.__dirty};c.setDirty=function(a,b){var c=this;b===void 0&&(b=!1);this.__dirty=a;a&&b&&(this.__isInAttractMode&&this.__exitAttractMode(),this.$1&&(window.clearTimeout(this.$1),this.$1=null),this.__fullVisibility&&(this.$1=window.setTimeout(function(){c.$1=null,c.__enterAttractMode()},l)))};c.setFullVisibility=function(a){this.__fullVisibility=a};c.resetCamera=function(){};c.__updateResetCamera=function(){};c.__enterAttractMode=function(){this.__isInAttractMode=!0};c.__exitAttractMode=function(){this.__attractModeAnimationFrameID!==null&&(window.cancelAnimationFrame(this.__attractModeAnimationFrameID),this.__attractModeAnimationFrameID=null),this.__isInAttractMode=!1};c.resize=function(a,b){};c.aspectRatio=function(){return this.__aspectRatio};return a}();e.exports=a}),null);
__d("Asset3dContextMenu",["CurrentUser","EventListener","React","ReactXUIMenu","UserAgent","MountedContextMenu.react","ReactDOM"],(function(a,b,c,d,e,f){"use strict";var g=b("React"),h=b("ReactXUIMenu").Item;a=function(){function a(a,c,d,e,f,g,h){var i=this;this.$9=function(a){var c=/^a$/i.test(a.target.nodeName||""),d=b("UserAgent").isPlatform("Mac OS X")?a.metaKey:a.ctrlKey;c=!c&&b("CurrentUser").isEmployee()&&d;c?(a.preventDefault(),i.$10()):(b("ReactDOM").unmountComponentAtNode(i.$1),delete i.$3)};this.$1=a;this.$2=c;this.$4=d;this.$5=e;this.$6=f;this.$7=g;this.$8=h;b("EventListener").listen(c,"contextmenu",this.$9)}var c=a.prototype;c.$10=function(){if(this.$2){var a,c,d,e;this.$4&&(a=g.jsx(h,{href:this.$4,target:"_blank",children:"Download 3D File"}));this.$5&&(c=g.jsx(h,{href:this.$5,target:"_blank",children:"Download 3D Depth File"}));this.$6&&(d=g.jsx(h,{href:this.$6,target:"_blank",children:"Download Original Image File"}));this.$7&&(e=g.jsx(h,{href:this.$7,target:"_blank",children:"3D Photo console"}));var f=g.jsxs(b("ReactXUIMenu"),{children:[a,c,d,e,g.jsx(h,{onclick:this.$8,children:"Dev Info"})]});f=g.jsx(b("MountedContextMenu.react"),{mountedTriggerElem:this.$2,menu:f});this.$3=b("ReactDOM").render(f,this.$1)}};return a}();e.exports=a}),null);
__d("Asset3dComponentContextMenu.react",["Asset3dContextMenu","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){this.props.target&&(this.$1=new(b("Asset3dContextMenu"))(this.refs.container,this.props.target,this.props.fileURL,this.props.depthImageURL,this.props.fallbackImgURL,this.props.consoleURL,this.props.onToggleDevPanel))};d.render=function(){return g.jsx("div",{ref:"container"})};return c}(g.Component);e.exports=a}),null);
__d("XAsset3DForLinkShareSrcController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/3d/linkshare/src/",{status_id:{type:"FBID",required:!0}})}),null);
__d("Asset3DLoader",["regeneratorRuntime","Promise","ActorURI","XAsset3DForLinkShareSrcController","XAsyncRequest"],(function(a,b,c,d,e,f){var g=10,h=1e3,i="Failed to load the asset because the arguments provided is not enought",j="Failed to load the asset because the max times of retry has reached",k="Failed to load the asset because the request to the server returned failed";a=function(){function a(a,b){this.$1=a,this.$2=b||{timesOfRetry:g,retryDelay:h}}var c=a.prototype;c.parse=function(a){return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(this.$1.parse(a));case 2:return c.abrupt("return",c.sent);case 3:case"end":return c.stop()}},null,this)};c.load=function(a){var c,d,e,f,g,h;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:a===void 0&&(a={});c=a,d=c.uri,e=c.statusID,f=c.actorID,g=c.assetID;if(d){j.next=10;break}if(!(e&&f)){j.next=7;break}return j.abrupt("return",this.$3(this.__createURL(e,f)));case 7:return j.abrupt("return",b("Promise").resolve({error:i}));case 8:j.next=14;break;case 10:j.next=12;return b("regeneratorRuntime").awrap(this.$1.load(a));case 12:h=j.sent;return j.abrupt("return",Object.assign({},h,{assetID:g,uri:d}));case 14:case"end":return j.stop()}},null,this)};c.__createURL=function(a,c){return b("ActorURI").create(b("XAsset3DForLinkShareSrcController").getURIBuilder().setFBID("status_id",String(a)).getURI(),c)};c.$3=function(a,c,d){var e=this;c===void 0&&(c=1);d===void 0&&(d=0);return new(b("Promise"))(function(c,f){var g=new(b("XAsyncRequest"))().setURI(a).setMethod("GET").setReadOnly(!0).setHandler(c).setErrorHandler(function(a){return e.$4(a)});d>0?setTimeout(function(){g.send()},d):g.send()}).then(function(b){return e.$5(a,c,b)})};c.$5=function(a,c,d){var e,f,g,h,i;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:e=d.getPayload(),f=e.status,g=e.asset3d_id,h=e.glb_uri;l.t0=f;l.next=l.t0==="uploading"?4:l.t0==="success"?5:9;break;case 4:return l.abrupt("return",this.$2.timesOfRetry>=c?this.$3(a,++c,this.$2.retryDelay):b("Promise").resolve({error:j}));case 5:l.next=7;return b("regeneratorRuntime").awrap(this.$1.load({assetID:g,uri:h}));case 7:i=l.sent;return l.abrupt("return",Object.assign({},i,{assetID:g,uri:h}));case 9:return l.abrupt("return",b("Promise").resolve({error:k}));case 10:case"end":return l.stop()}},null,this)};c.$4=function(a){throw a};return a}();e.exports=a}),null);
__d("GLTFLoader.r93",["Promise","ThreeJS.r93"],(function(a,b,c,d,e,f){GLTFLoader=function(){var a;function c(a){this.manager=a!==void 0?a:b("ThreeJS.r93").DefaultLoadingManager,this.dracoLoader=null}c.prototype={constructor:c,crossOrigin:"Anonymous",load:function(a,c,d,e){var f=this,g=this.path!==void 0?this.path:b("ThreeJS.r93").LoaderUtils.extractUrlBase(a),h=new(b("ThreeJS.r93").FileLoader)(f.manager);h.setResponseType("arraybuffer");h.load(a,function(a){try{f.parse(a,g,c,e)}catch(a){if(e!==void 0)e(a);else throw a}},d,e)},setCrossOrigin:function(a){this.crossOrigin=a;return this},setPath:function(a){this.path=a;return this},setDRACOLoader:function(a){this.dracoLoader=a;return this},parse:function(a,c,d,j){var k,o={};if(typeof a==="string")k=a;else{var p=b("ThreeJS.r93").LoaderUtils.decodeText(new Uint8Array(a,0,4));if(p===i){try{o[e.KHR_BINARY_GLTF]=new l(a)}catch(a){j&&j(a);return}k=o[e.KHR_BINARY_GLTF].content}else k=b("ThreeJS.r93").LoaderUtils.decodeText(new Uint8Array(a))}p=JSON.parse(k);if(p.asset===void 0||p.asset.version[0]<2){j&&j(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));return}if(p.extensionsUsed)for(var a=0;a<p.extensionsUsed.length;++a){k=p.extensionsUsed[a];var q=p.extensionsRequired||[];switch(k){case e.KHR_LIGHTS:o[k]=new g(p);break;case e.KHR_MATERIALS_UNLIT:o[k]=new h(p);break;case e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[k]=new n();break;case e.KHR_DRACO_MESH_COMPRESSION:o[k]=new m(p,this.dracoLoader);break;case e.MSFT_TEXTURE_DDS:o[e.MSFT_TEXTURE_DDS]=new f();break;default:q.indexOf(k)>=0}}var r=new N(p,o,{path:c||this.path||"",crossOrigin:this.crossOrigin,manager:this.manager});r.parse(function(a,b,c,e,f){a={scene:a,scenes:b,cameras:c,animations:e,asset:f.asset,parser:r,userData:{}};f.extras&&(a.userData=f.extras);C(o,a,f);d(a)},j)}};function d(){var a={};return{get:function(b){return a[b]},add:function(b,c){a[b]=c},remove:function(b){delete a[b]},removeAll:function(){a={}}}}var e={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS:"KHR_lights",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function f(){if(!b("ThreeJS.r93").DDSLoader)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=e.MSFT_TEXTURE_DDS;this.ddsLoader=new(b("ThreeJS.r93").DDSLoader)()}function g(a){this.name=e.KHR_LIGHTS;this.lights={};a=a.extensions&&a.extensions[e.KHR_LIGHTS]||{};a=a.lights||{};for(var c in a){var d=a[c],f,g=new(b("ThreeJS.r93").Color)().fromArray(d.color);switch(d.type){case"directional":f=new(b("ThreeJS.r93").DirectionalLight)(g);f.target.position.set(0,0,1);f.add(f.target);break;case"point":f=new(b("ThreeJS.r93").PointLight)(g);break;case"spot":f=new(b("ThreeJS.r93").SpotLight)(g);d.spot=d.spot||{};d.spot.innerConeAngle=d.spot.innerConeAngle!==void 0?d.spot.innerConeAngle:0;d.spot.outerConeAngle=d.spot.outerConeAngle!==void 0?d.spot.outerConeAngle:Math.PI/4;f.angle=d.spot.outerConeAngle;f.penumbra=1-d.spot.innerConeAngle/d.spot.outerConeAngle;f.target.position.set(0,0,1);f.add(f.target);break;case"ambient":f=new(b("ThreeJS.r93").AmbientLight)(g);break}f&&(f.decay=2,d.intensity!==void 0&&(f.intensity=d.intensity),f.name=d.name||"light_"+c,this.lights[c]=f)}}function h(a){this.name=e.KHR_MATERIALS_UNLIT}h.prototype.getMaterialType=function(a){return b("ThreeJS.r93").MeshBasicMaterial};h.prototype.extendParams=function(a,c,d){var e=[];a.color=new(b("ThreeJS.r93").Color)(1,1,1);a.opacity=1;c=c.pbrMetallicRoughness;if(c){if(Array.isArray(c.baseColorFactor)){var f=c.baseColorFactor;a.color.fromArray(f);a.opacity=f[3]}c.baseColorTexture!==void 0&&e.push(d.assignTexture(a,"map",c.baseColorTexture.index))}return b("Promise").all(e)};var i="glTF",j=12,k={JSON:1313821514,BIN:5130562};function l(a){this.name=e.KHR_BINARY_GLTF;this.content=null;this.body=null;var c=new DataView(a,0,j);this.header={magic:b("ThreeJS.r93").LoaderUtils.decodeText(new Uint8Array(a.slice(0,4))),version:c.getUint32(4,!0),length:c.getUint32(8,!0)};if(this.header.magic!==i)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");else if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");c=new DataView(a,j);var d=0;while(d<c.byteLength){var f=c.getUint32(d,!0);d+=4;var g=c.getUint32(d,!0);d+=4;if(g===k.JSON){var h=new Uint8Array(a,j+d,f);this.content=b("ThreeJS.r93").LoaderUtils.decodeText(h)}else if(g===k.BIN){h=j+d;this.body=a.slice(h,h+f)}d+=f}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}function m(a,b){if(!b)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=e.KHR_DRACO_MESH_COMPRESSION;this.json=a;this.dracoLoader=b}m.prototype.decodePrimitive=function(a,c){var d=this.json,e=this.dracoLoader,f=a.extensions[this.name].bufferView,g=a.extensions[this.name].attributes,h={},i={},j={};for(var k in g){if(!(k in w))continue;h[w[k]]=g[k]}for(k in a.attributes)if(w[k]!==void 0&&g[k]!==void 0){var l=d.accessors[a.attributes[k]],m=q[l.componentType];j[w[k]]=m;i[w[k]]=l.normalized===!0}return c.getDependency("bufferView",f).then(function(a){return new(b("Promise"))(function(b){e.decodeDracoFile(a,function(c){for(var a in c.attributes){var d=c.attributes[a],e=i[a];e!==void 0&&(d.normalized=e)}b(c)},h,j)})})};function n(){return{name:e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return b("ThreeJS.r93").ShaderMaterial},extendParams:function(c,d,e){var a;d=d.extensions[this.name];var f=(a=b("ThreeJS.r93")).ShaderLib.standard,g=a.UniformsUtils.clone(f.uniforms),h=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),j=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),k=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),l=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n");h=f.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",h).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",j).replace("#include <metalnessmap_fragment>",k).replace("#include <lights_physical_fragment>",l);delete g.roughness;delete g.metalness;delete g.roughnessMap;delete g.metalnessMap;g.specular={value:new a.Color().setHex(1118481)};g.glossiness={value:.5};g.specularMap={value:null};g.glossinessMap={value:null};c.vertexShader=f.vertexShader;c.fragmentShader=h;c.uniforms=g;c.defines={STANDARD:""};c.color=new a.Color(1,1,1);c.opacity=1;i=[];if(Array.isArray(d.diffuseFactor)){j=d.diffuseFactor;c.color.fromArray(j);c.opacity=j[3]}d.diffuseTexture!==void 0&&i.push(e.assignTexture(c,"map",d.diffuseTexture.index));c.emissive=new(b("ThreeJS.r93").Color)(0,0,0);c.glossiness=d.glossinessFactor!==void 0?d.glossinessFactor:1;c.specular=new(b("ThreeJS.r93").Color)(1,1,1);Array.isArray(d.specularFactor)&&c.specular.fromArray(d.specularFactor);if(d.specularGlossinessTexture!==void 0){k=d.specularGlossinessTexture.index;i.push(e.assignTexture(c,"glossinessMap",k));i.push(e.assignTexture(c,"specularMap",k))}return b("Promise").all(i)},createMaterial:function(a){var c=new(b("ThreeJS.r93").ShaderMaterial)({defines:a.defines,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,uniforms:a.uniforms,fog:!0,lights:!0,opacity:a.opacity,transparent:a.transparent});c.isGLTFSpecularGlossinessMaterial=!0;c.color=a.color;c.map=a.map===void 0?null:a.map;c.lightMap=null;c.lightMapIntensity=1;c.aoMap=a.aoMap===void 0?null:a.aoMap;c.aoMapIntensity=1;c.emissive=a.emissive;c.emissiveIntensity=1;c.emissiveMap=a.emissiveMap===void 0?null:a.emissiveMap;c.bumpMap=a.bumpMap===void 0?null:a.bumpMap;c.bumpScale=1;c.normalMap=a.normalMap===void 0?null:a.normalMap;a.normalScale&&(c.normalScale=a.normalScale);c.displacementMap=null;c.displacementScale=1;c.displacementBias=0;c.specularMap=a.specularMap===void 0?null:a.specularMap;c.specular=a.specular;c.glossinessMap=a.glossinessMap===void 0?null:a.glossinessMap;c.glossiness=a.glossiness;c.alphaMap=null;c.envMap=a.envMap===void 0?null:a.envMap;c.envMapIntensity=1;c.refractionRatio=.98;c.extensions.derivatives=!0;return c},cloneMaterial:function(a){var b=a.clone();b.isGLTFSpecularGlossinessMaterial=!0;var c=this.specularGlossinessParams;for(var d=0,e=c.length;d<e;d++)b[c[d]]=a[c[d]];return b},refreshUniforms:function(a,b,c,d,e,f){if(e.isGLTFSpecularGlossinessMaterial!==!0)return;a=e.uniforms;b=e.defines;a.opacity.value=e.opacity;a.diffuse.value.copy(e.color);a.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity);a.map.value=e.map;a.specularMap.value=e.specularMap;a.alphaMap.value=e.alphaMap;a.lightMap.value=e.lightMap;a.lightMapIntensity.value=e.lightMapIntensity;a.aoMap.value=e.aoMap;a.aoMapIntensity.value=e.aoMapIntensity;var g;e.map?g=e.map:e.specularMap?g=e.specularMap:e.displacementMap?g=e.displacementMap:e.normalMap?g=e.normalMap:e.bumpMap?g=e.bumpMap:e.glossinessMap?g=e.glossinessMap:e.alphaMap?g=e.alphaMap:e.emissiveMap&&(g=e.emissiveMap);if(g!==void 0){g.isWebGLRenderTarget&&(g=g.texture);if(g.matrix!==void 0){if(g.matrixAutoUpdate===!0){c=g.offset;d=g.repeat;f=g.rotation;var h=g.center;g.matrix.setUvTransform(c.x,c.y,d.x,d.y,f,h.x,h.y)}a.uvTransform.value.copy(g.matrix)}else c=g.offset,d=g.repeat,a.offsetRepeat.value.set(c.x,c.y,d.x,d.y)}a.envMap.value=e.envMap;a.envMapIntensity.value=e.envMapIntensity;a.flipEnvMap.value=e.envMap&&e.envMap.isCubeTexture?-1:1;a.refractionRatio.value=e.refractionRatio;a.specular.value.copy(e.specular);a.glossiness.value=e.glossiness;a.glossinessMap.value=e.glossinessMap;a.emissiveMap.value=e.emissiveMap;a.bumpMap.value=e.bumpMap;a.normalMap.value=e.normalMap;a.displacementMap.value=e.displacementMap;a.displacementScale.value=e.displacementScale;a.displacementBias.value=e.displacementBias;a.glossinessMap.value!==null&&b.USE_GLOSSINESSMAP===void 0&&(b.USE_GLOSSINESSMAP="",b.USE_ROUGHNESSMAP="");a.glossinessMap.value===null&&b.USE_GLOSSINESSMAP!==void 0&&(delete b.USE_GLOSSINESSMAP,delete b.USE_ROUGHNESSMAP)}}}function o(a,c,d,e){b("ThreeJS.r93").Interpolant.call(this,a,c,d,e)}o.prototype=Object.create((a=b("ThreeJS.r93")).Interpolant.prototype);o.prototype.constructor=o;o.prototype.interpolate_=function(a,b,c,d){var e=this.resultBuffer,f=this.sampleValues,g=this.valueSize,h=g*2,i=g*3;d=d-b;c=(c-b)/d;b=c*c;var j=b*c;a=a*i;i=a-i;var k=2*j-3*b+1;c=j-2*b+c;var l=-2*j+3*b;j=j-b;for(var b=0;b!==g;b++){var m=f[i+b+g],n=f[i+b+h]*d,o=f[a+b+g],p=f[a+b]*d;e[b]=k*m+c*n+l*o+j*p}return e};var p={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123};({5126:Number,35675:a.Matrix3,35676:a.Matrix4,35664:a.Vector2,35665:a.Vector3,35666:a.Vector4,35678:a.Texture});var q={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},r={9728:a.NearestFilter,9729:a.LinearFilter,9984:a.NearestMipMapNearestFilter,9985:a.LinearMipMapNearestFilter,9986:a.NearestMipMapLinearFilter,9987:a.LinearMipMapLinearFilter},s={33071:a.ClampToEdgeWrapping,33648:a.MirroredRepeatWrapping,10497:a.RepeatWrapping},t={6406:a.AlphaFormat,6407:a.RGBFormat,6408:a.RGBAFormat,6409:a.LuminanceFormat,6410:a.LuminanceAlphaFormat},u={5121:a.UnsignedByteType,32819:a.UnsignedShort4444Type,32820:a.UnsignedShort5551Type,33635:a.UnsignedShort565Type};({1028:a.BackSide,1029:a.FrontSide});({512:a.NeverDepth,513:a.LessDepth,514:a.EqualDepth,515:a.LessEqualDepth,516:a.GreaterEqualDepth,517:a.NotEqualDepth,518:a.GreaterEqualDepth,519:a.AlwaysDepth});({32774:a.AddEquation,32778:a.SubtractEquation,32779:a.ReverseSubtractEquation});({0:a.ZeroFactor,1:a.OneFactor,768:a.SrcColorFactor,769:a.OneMinusSrcColorFactor,770:a.SrcAlphaFactor,771:a.OneMinusSrcAlphaFactor,772:a.DstAlphaFactor,773:a.OneMinusDstAlphaFactor,774:a.DstColorFactor,775:a.OneMinusDstColorFactor,776:a.SrcAlphaSaturateFactor});var v={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},w={POSITION:"position",NORMAL:"normal",TEXCOORD_0:"uv",TEXCOORD0:"uv",TEXCOORD:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",COLOR0:"color",COLOR:"color",WEIGHTS_0:"skinWeight",WEIGHT:"skinWeight",JOINTS_0:"skinIndex",JOINT:"skinIndex"},x={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},y={CUBICSPLINE:a.InterpolateSmooth,LINEAR:a.InterpolateLinear,STEP:a.InterpolateDiscrete};({2884:"CULL_FACE",2929:"DEPTH_TEST",3042:"BLEND",3089:"SCISSOR_TEST",32823:"POLYGON_OFFSET_FILL",32926:"SAMPLE_ALPHA_TO_COVERAGE"});var z={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function A(a,b){if(typeof a!=="string"||a==="")return"";if(/^(https?:)?\/\//i.test(a))return a;if(/^data:.*,.*$/i.test(a))return a;return/^blob:.*$/i.test(a)?a:b+a}function B(){return new(b("ThreeJS.r93").MeshStandardMaterial)({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:b("ThreeJS.r93").FrontSide})}function C(a,b,c){for(var d in c.extensions)a[d]===void 0&&(b.userData.gltfExtensions=b.userData.gltfExtensions||{},b.userData.gltfExtensions[d]=c.extensions[d])}function D(a,b,c){var d=!1,e=!1;for(var f=0,g=b.length;f<g;f++){var h=b[f];h.POSITION!==void 0&&(d=!0);h.NORMAL!==void 0&&(e=!0);if(d&&e)break}if(!d&&!e)return;var i=[],j=[];for(var f=0,g=b.length;f<g;f++){var h=b[f],k="morphTarget"+f;if(d){if(h.POSITION!==void 0){var l=L(c[h.POSITION]);l.name=k;var m=a.attributes.position;for(var n=0,o=l.count;n<o;n++)l.setXYZ(n,l.getX(n)+m.getX(n),l.getY(n)+m.getY(n),l.getZ(n)+m.getZ(n))}else l=a.attributes.position;i.push(l)}if(e){if(h.NORMAL!==void 0){m=L(c[h.NORMAL]);m.name=k;l=a.attributes.normal;for(var n=0,o=m.count;n<o;n++)m.setXYZ(n,m.getX(n)+l.getX(n),m.getY(n)+l.getY(n),m.getZ(n)+l.getZ(n))}else m=a.attributes.normal;j.push(m)}}d&&(a.morphAttributes.position=i);e&&(a.morphAttributes.normal=j)}function E(a,b){a.updateMorphTargets();if(b.weights!==void 0)for(var c=0,d=b.weights.length;c<d;c++)a.morphTargetInfluences[c]=b.weights[c];if(b.extras&&Array.isArray(b.extras.targetNames)){b=b.extras.targetNames;if(a.morphTargetInfluences.length===b.length){a.morphTargetDictionary={};for(var c=0,d=b.length;c<d;c++)a.morphTargetDictionary[b[c]]=c}}}function F(a,b){return a.indices!==b.indices?!1:G(a.attributes,b.attributes)}function G(a,b){if(Object.keys(a).length!==Object.keys(b).length)return!1;for(var c in a)if(a[c]!==b[c])return!1;return!0}function H(a,b){if(a.length!==b.length)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]!==b[c])return!1;return!0}function I(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(F(e.primitive,b))return e.promise}return null}function J(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];if(H(b,e.baseGeometries))return e.geometry}return null}function K(a,b,c){for(var d=0,e=a.length;d<e;d++){var f=a[d];if(b===f.baseGeometry&&H(c,f.primitives))return f.geometry}return null}function L(a){if(a.isInterleavedBufferAttribute){var c=a.count,d=a.itemSize,e=a.array.slice(0,c*d);for(var f=0;f<c;++f)e[f]=a.getX(f),d>=2&&(e[f+1]=a.getY(f)),d>=3&&(e[f+2]=a.getZ(f)),d>=4&&(e[f+3]=a.getW(f));return new(b("ThreeJS.r93").BufferAttribute)(e,d,a.normalized)}return a.clone()}function M(a){if(a.length<2)return!1;var b=a[0],c=b.targets||[];if(b.indices===void 0)return!1;for(var d=1,e=a.length;d<e;d++){var f=a[d];if(b.mode!==f.mode)return!1;if(f.indices===void 0)return!1;if(!G(b.attributes,f.attributes))return!1;f=f.targets||[];if(c.length!==f.length)return!1;for(var g=0,h=c.length;g<h;g++)if(!G(c[g],f[g]))return!1}return!0}function N(a,c,e){this.json=a||{},this.extensions=c||{},this.options=e||{},this.cache=new d(),this.primitiveCache=[],this.multiplePrimitivesCache=[],this.multiPassGeometryCache=[],this.textureLoader=new(b("ThreeJS.r93").TextureLoader)(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new(b("ThreeJS.r93").FileLoader)(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}N.prototype.parse=function(a,b){var c=this.json;this.cache.removeAll();this.markDefs();this.getMultiDependencies(["scene","animation","camera"]).then(function(b){var d=b.scenes||[],e=d[c.scene||0],f=b.animations||[];b=b.cameras||[];a(e,d,b,f,c)})["catch"](b)};N.prototype.markDefs=function(){var a=this.json.nodes||[],b=this.json.skins||[],c=this.json.meshes||[],d={},e={};for(var f=0,g=b.length;f<g;f++){var h=b[f].joints;for(var i=0,j=h.length;i<j;i++)a[h[i]].isBone=!0}for(var i=0,j=a.length;i<j;i++){h=a[i];h.mesh!==void 0&&(d[h.mesh]===void 0&&(d[h.mesh]=e[h.mesh]=0),d[h.mesh]++,h.skin!==void 0&&(c[h.mesh].isSkinnedMesh=!0))}this.json.meshReferences=d;this.json.meshUses=e};N.prototype.getDependency=function(a,b){var c=a+":"+b,d=this.cache.get(c);if(!d){switch(a){case"scene":d=this.loadScene(b);break;case"node":d=this.loadNode(b);break;case"mesh":d=this.loadMesh(b);break;case"accessor":d=this.loadAccessor(b);break;case"bufferView":d=this.loadBufferView(b);break;case"buffer":d=this.loadBuffer(b);break;case"material":d=this.loadMaterial(b);break;case"texture":d=this.loadTexture(b);break;case"skin":d=this.loadSkin(b);break;case"animation":d=this.loadAnimation(b);break;case"camera":d=this.loadCamera(b);break;default:throw new Error("Unknown type: "+a)}this.cache.add(c,d)}return d};N.prototype.getDependencies=function(a){var c=this.cache.get(a);if(!c){var d=this,e=this.json[a+(a==="mesh"?"es":"s")]||[];c=b("Promise").all(e.map(function(b,c){return d.getDependency(a,c)}));this.cache.add(a,c)}return c};N.prototype.getMultiDependencies=function(a){var c={},d=[];for(var e=0,f=a.length;e<f;e++){var g=a[e],h=this.getDependencies(g);h=h.then(function(b,a){c[b]=a}.bind(this,g+(g==="mesh"?"es":"s")));d.push(h)}return b("Promise").all(d).then(function(){return c})};N.prototype.loadBuffer=function(a){var c=this.json.buffers[a],d=this.fileLoader;if(c.type&&c.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+c.type+" buffer type is not supported.");if(c.uri===void 0&&a===0)return b("Promise").resolve(this.extensions[e.KHR_BINARY_GLTF].body);var f=this.options;return new(b("Promise"))(function(a,b){d.load(A(c.uri,f.path),a,void 0,function(){b(new Error('THREE.GLTFLoader: Failed to load buffer "'+c.uri+'".'))})})};N.prototype.loadBufferView=function(a){var b=this.json.bufferViews[a];return this.getDependency("buffer",b.buffer).then(function(a){var c=b.byteLength||0,d=b.byteOffset||0;return a.slice(d,d+c)})};N.prototype.loadAccessor=function(a){var c=this,d=this.json,e=this.json.accessors[a];if(e.bufferView===void 0&&e.sparse===void 0)return null;a=[];e.bufferView!==void 0?a.push(this.getDependency("bufferView",e.bufferView)):a.push(null);e.sparse!==void 0&&(a.push(this.getDependency("bufferView",e.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",e.sparse.values.bufferView)));return b("Promise").all(a).then(function(a){var f=a[0],g=v[e.type],h=q[e.componentType],i=h.BYTES_PER_ELEMENT,j=i*g,k=e.byteOffset||0,l=d.bufferViews[e.bufferView].byteStride,m=e.normalized===!0,n;if(l&&l!==j){j="InterleavedBuffer:"+e.bufferView+":"+e.componentType;var o=c.cache.get(j);o||(n=new h(f),o=new(b("ThreeJS.r93").InterleavedBuffer)(n,l/i),c.cache.add(j,o));l=new(b("ThreeJS.r93").InterleavedBufferAttribute)(o,g,k/i,m)}else f===null?n=new h(e.count*g):n=new h(f,k,e.count*g),l=new(b("ThreeJS.r93").BufferAttribute)(n,g,m);if(e.sparse!==void 0){j=v.SCALAR;o=q[e.sparse.indices.componentType];i=e.sparse.indices.byteOffset||0;k=e.sparse.values.byteOffset||0;n=new o(a[1],i,e.sparse.count*j);m=new h(a[2],k,e.sparse.count*g);f!==null&&l.setArray(l.array.slice());for(var o=0,i=n.length;o<i;o++){j=n[o];l.setX(j,m[o*g]);g>=2&&l.setY(j,m[o*g+1]);g>=3&&l.setZ(j,m[o*g+2]);g>=4&&l.setW(j,m[o*g+3]);if(g>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return l})};N.prototype.loadTexture=function(a){var c=this,d=this.json,f=this.options,g=this.textureLoader,h=window.URL||window.webkitURL,i=d.textures[a],j=i.extensions||{},k;j[e.MSFT_TEXTURE_DDS]?k=d.images[j[e.MSFT_TEXTURE_DDS].source]:k=d.images[i.source];var l=k.uri,m=!1;k.bufferView!==void 0&&(l=c.getDependency("bufferView",k.bufferView).then(function(a){m=!0;a=new Blob([a],{type:k.mimeType});l=h.createObjectURL(a);return l}));return b("Promise").resolve(l).then(function(a){var d=b("ThreeJS.r93").Loader.Handlers.get(a);d||(d=j[e.MSFT_TEXTURE_DDS]?c.extensions[e.MSFT_TEXTURE_DDS].ddsLoader:g);return new(b("Promise"))(function(b,c){d.load(A(a,f.path),b,void 0,c)})}).then(function(a){m===!0&&h.revokeObjectURL(l);a.flipY=!1;i.name!==void 0&&(a.name=i.name);j[e.MSFT_TEXTURE_DDS]||(a.format=i.format!==void 0?t[i.format]:b("ThreeJS.r93").RGBAFormat);i.internalFormat!==void 0&&a.format!==t[i.internalFormat];a.type=i.type!==void 0?u[i.type]:b("ThreeJS.r93").UnsignedByteType;var c=d.samplers||{};c=c[i.sampler]||{};a.magFilter=r[c.magFilter]||b("ThreeJS.r93").LinearFilter;a.minFilter=r[c.minFilter]||b("ThreeJS.r93").LinearMipMapLinearFilter;a.wrapS=s[c.wrapS]||b("ThreeJS.r93").RepeatWrapping;a.wrapT=s[c.wrapT]||b("ThreeJS.r93").RepeatWrapping;return a})};N.prototype.assignTexture=function(a,b,c){return this.getDependency("texture",c).then(function(c){a[b]=c})};N.prototype.loadMaterial=function(a){var c=this;this.json;var d=this.extensions,f=this.json.materials[a],g,h={};a=f.extensions||{};var i=[];if(a[e.KHR_MATERIALS_UNLIT]){a=d[e.KHR_MATERIALS_UNLIT];g=a.getMaterialType(f);i.push(a.extendParams(h,f,c))}else{g=b("ThreeJS.r93").MeshStandardMaterial;a=f.pbrMetallicRoughness||{};h.color=new(b("ThreeJS.r93").Color)(1,1,1);h.opacity=1;if(Array.isArray(a.baseColorFactor)){var j=a.baseColorFactor;h.color.fromArray(j);h.opacity=j[3]}a.baseColorTexture!==void 0&&i.push(c.assignTexture(h,"map",a.baseColorTexture.index));h.metalness=a.metallicFactor!==void 0?a.metallicFactor:1;h.roughness=a.roughnessFactor!==void 0?a.roughnessFactor:1;if(a.metallicRoughnessTexture!==void 0){j=a.metallicRoughnessTexture.index;i.push(c.assignTexture(h,"metalnessMap",j));i.push(c.assignTexture(h,"roughnessMap",j))}}f.doubleSided===!0&&(h.side=b("ThreeJS.r93").DoubleSide);a=f.alphaMode||z.OPAQUE;a===z.BLEND?h.transparent=!0:(h.transparent=!1,a===z.MASK&&(h.alphaTest=f.alphaCutoff!==void 0?f.alphaCutoff:.5));f.normalTexture!==void 0&&g!==b("ThreeJS.r93").MeshBasicMaterial&&(i.push(c.assignTexture(h,"normalMap",f.normalTexture.index)),h.normalScale=new(b("ThreeJS.r93").Vector2)(1,1),f.normalTexture.scale!==void 0&&h.normalScale.set(f.normalTexture.scale,f.normalTexture.scale));f.occlusionTexture!==void 0&&g!==b("ThreeJS.r93").MeshBasicMaterial&&(i.push(c.assignTexture(h,"aoMap",f.occlusionTexture.index)),f.occlusionTexture.strength!==void 0&&(h.aoMapIntensity=f.occlusionTexture.strength));f.emissiveFactor!==void 0&&g!==b("ThreeJS.r93").MeshBasicMaterial&&(h.emissive=new(b("ThreeJS.r93").Color)().fromArray(f.emissiveFactor));f.emissiveTexture!==void 0&&g!==b("ThreeJS.r93").MeshBasicMaterial&&i.push(c.assignTexture(h,"emissiveMap",f.emissiveTexture.index));return b("Promise").all(i).then(function(){var a;g===b("ThreeJS.r93").ShaderMaterial?a=d[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(h):a=new g(h);f.name!==void 0&&(a.name=f.name);a.normalScale&&(a.normalScale.y=-a.normalScale.y);a.map&&(a.map.encoding=b("ThreeJS.r93").sRGBEncoding);a.emissiveMap&&(a.emissiveMap.encoding=b("ThreeJS.r93").sRGBEncoding);a.specularMap&&(a.specularMap.encoding=b("ThreeJS.r93").sRGBEncoding);f.extras&&(a.userData=f.extras);f.extensions&&C(d,a,f);return a})};function O(a,b,c){var d=b.attributes;for(var e in d){var f=w[e],g=c[d[e]];if(!f)continue;if(f in a.attributes)continue;a.addAttribute(f,g)}b.indices!==void 0&&!a.index&&a.setIndex(c[b.indices]);b.targets!==void 0&&D(a,b.targets,c);b.extras!==void 0&&(a.userData=b.extras)}N.prototype.loadGeometries=function(a){var c=this,d=this.extensions,f=this.primitiveCache,g=M(a),h;g&&(h=a,a=[a[0]]);return this.getDependencies("accessor").then(function(i){var j=[];for(var k=0,l=a.length;k<l;k++){var m=a[k],n=I(f,m);if(n)j.push(n);else if(m.extensions&&m.extensions[e.KHR_DRACO_MESH_COMPRESSION]){n=d[e.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(m,c).then(function(a){O(a,m,i);return a});f.push({primitive:m,promise:n});j.push(n)}else{var o=new(b("ThreeJS.r93").BufferGeometry)();O(o,m,i);n=b("Promise").resolve(o);f.push({primitive:m,promise:n});j.push(n)}}return b("Promise").all(j).then(function(l){if(g){var m=l[0],d=c.multiPassGeometryCache,j=K(d,m,h);if(j!==null)return[j.geometry];var k=new(b("ThreeJS.r93").BufferGeometry)();k.name=m.name;k.userData=m.userData;for(var n in m.attributes)k.addAttribute(n,m.attributes[n]);for(var n in m.morphAttributes)k.morphAttributes[n]=m.morphAttributes[n];var o=[],p=0;for(var e=0,f=h.length;e<f;e++){var q=i[h[e].indices];for(var r=0,s=q.count;r<s;r++)o.push(q.array[r]);k.addGroup(p,q.count,e);p+=q.count}k.setIndex(o);d.push({geometry:k,baseGeometry:m,primitives:h});return[k]}else if(l.length>1&&b("ThreeJS.r93").BufferGeometryUtils!==void 0){for(var e=1,f=a.length;e<f;e++)if(a[0].mode!==a[e].mode)return l;var d=c.multiplePrimitivesCache,j=J(d,l);if(j){if(j.geometry!==null)return[j.geometry]}else{var k=b("ThreeJS.r93").BufferGeometryUtils.mergeBufferGeometries(l,!0);d.push({geometry:k,baseGeometries:l});if(k!==null)return[k]}}return l})})};N.prototype.loadMesh=function(a){var c=this;this.json;var d=this.extensions,f=this.json.meshes[a];return this.getMultiDependencies(["accessor","material"]).then(function(g){var h=f.primitives,i=[];for(var j=0,k=h.length;j<k;j++)i[j]=h[j].material===void 0?B():g.materials[h[j].material];return c.loadGeometries(h).then(function(k){var l=k.length===1&&k[0].groups.length>0,m=[];for(var g=0,j=k.length;g<j;g++){var n=k[g],o=h[g],q,r=l?i:i[g];if(o.mode===p.TRIANGLES||o.mode===p.TRIANGLE_STRIP||o.mode===p.TRIANGLE_FAN||o.mode===void 0)q=f.isSkinnedMesh===!0?new(b("ThreeJS.r93").SkinnedMesh)(n,r):new(b("ThreeJS.r93").Mesh)(n,r),o.mode===p.TRIANGLE_STRIP?q.drawMode=b("ThreeJS.r93").TriangleStripDrawMode:o.mode===p.TRIANGLE_FAN&&(q.drawMode=b("ThreeJS.r93").TriangleFanDrawMode);else if(o.mode===p.LINES)q=new(b("ThreeJS.r93").LineSegments)(n,r);else if(o.mode===p.LINE_STRIP)q=new(b("ThreeJS.r93").Line)(n,r);else if(o.mode===p.LINE_LOOP)q=new(b("ThreeJS.r93").LineLoop)(n,r);else if(o.mode===p.POINTS)q=new(b("ThreeJS.r93").Points)(n,r);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+o.mode);Object.keys(q.geometry.morphAttributes).length>0&&E(q,f);q.name=f.name||"mesh_"+a;k.length>1&&(q.name+="_"+g);f.extras!==void 0&&(q.userData=f.extras);m.push(q);o=l?q.material:[q.material];var s=n.attributes.color!==void 0,t=n.attributes.normal===void 0,u=q.isSkinnedMesh===!0,v=Object.keys(n.morphAttributes).length>0,w=v&&n.morphAttributes.normal!==void 0;for(var x=0,y=o.length;x<y;x++){var r=o[x];if(q.isPoints){var z="PointsMaterial:"+r.uuid,A=c.cache.get(z);A||(A=new(b("ThreeJS.r93").PointsMaterial)(),b("ThreeJS.r93").Material.prototype.copy.call(A,r),A.color.copy(r.color),A.map=r.map,A.lights=!1,c.cache.add(z,A));r=A}else if(q.isLine){var z="LineBasicMaterial:"+r.uuid;A=c.cache.get(z);A||(A=new(b("ThreeJS.r93").LineBasicMaterial)(),b("ThreeJS.r93").Material.prototype.copy.call(A,r),A.color.copy(r.color),A.lights=!1,c.cache.add(z,A));r=A}if(s||t||u||v){var z="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(z+="specular-glossiness:");u&&(z+="skinning:");s&&(z+="vertex-colors:");t&&(z+="flat-shading:");v&&(z+="morph-targets:");w&&(z+="morph-normals:");A=c.cache.get(z);A||(A=r.isGLTFSpecularGlossinessMaterial?d[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(r):r.clone(),u&&(A.skinning=!0),s&&(A.vertexColors=b("ThreeJS.r93").VertexColors),t&&(A.flatShading=!0),v&&(A.morphTargets=!0),w&&(A.morphNormals=!0),c.cache.add(z,A));r=A}o[x]=r;r.aoMap&&n.attributes.uv2===void 0&&n.attributes.uv!==void 0&&n.addAttribute("uv2",new(b("ThreeJS.r93").BufferAttribute)(n.attributes.uv.array,2));r.isGLTFSpecularGlossinessMaterial&&(q.onBeforeRender=d[e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms)}q.material=l?o:o[0]}if(m.length===1)return m[0];z=new(b("ThreeJS.r93").Group)();for(var g=0,j=m.length;g<j;g++)z.add(m[g]);return z})})};N.prototype.loadCamera=function(a){var c;a=this.json.cameras[a];var d=a[a.type];if(!d)return;a.type==="perspective"?c=new(b("ThreeJS.r93").PerspectiveCamera)(b("ThreeJS.r93").Math.radToDeg(d.yfov),d.aspectRatio||1,d.znear||1,d.zfar||2e6):a.type==="orthographic"&&(c=new(b("ThreeJS.r93").OrthographicCamera)(d.xmag/-2,d.xmag/2,d.ymag/2,d.ymag/-2,d.znear,d.zfar));a.name!==void 0&&(c.name=a.name);a.extras&&(c.userData=a.extras);return b("Promise").resolve(c)};N.prototype.loadSkin=function(a){a=this.json.skins[a];var c={joints:a.joints};return a.inverseBindMatrices===void 0?b("Promise").resolve(c):this.getDependency("accessor",a.inverseBindMatrices).then(function(a){c.inverseBindMatrices=a;return c})};N.prototype.loadAnimation=function(a){this.json;var c=this.json.animations[a];return this.getMultiDependencies(["accessor","node"]).then(function(d){var e=[];for(var f=0,g=c.channels.length;f<g;f++){var h=c.channels[f],i=c.samplers[h.sampler];if(i){h=h.target;var j=h.node!==void 0?h.node:h.id,k=c.parameters!==void 0?c.parameters[i.input]:i.input,l=c.parameters!==void 0?c.parameters[i.output]:i.output;k=d.accessors[k];l=d.accessors[l];var m=d.nodes[j];if(m){m.updateMatrix();m.matrixAutoUpdate=!0;var n;switch(x[h.path]){case x.weights:n=b("ThreeJS.r93").NumberKeyframeTrack;break;case x.rotation:n=b("ThreeJS.r93").QuaternionKeyframeTrack;break;case x.position:case x.scale:default:n=b("ThreeJS.r93").VectorKeyframeTrack;break}var p=m.name?m.name:m.uuid,q=i.interpolation!==void 0?y[i.interpolation]:b("ThreeJS.r93").InterpolateLinear,r=[];x[h.path]===x.weights?m.traverse(function(a){a.isMesh===!0&&a.morphTargetInfluences&&r.push(a.name?a.name:a.uuid)}):r.push(p);for(var m=0,p=r.length;m<p;m++){var s=new n(r[m]+"."+x[h.path],b("ThreeJS.r93").AnimationUtils.arraySlice(k.array,0),b("ThreeJS.r93").AnimationUtils.arraySlice(l.array,0),q);i.interpolation==="CUBICSPLINE"&&(s.createInterpolant=function(a){return new o(this.times,this.values,this.getValueSize()/3,a)},s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0);e.push(s)}}}}var j=c.name!==void 0?c.name:"animation_"+a;return new(b("ThreeJS.r93").AnimationClip)(j,void 0,e)})};N.prototype.loadNode=function(a){this.json;var c=this.extensions,d=this.json.meshReferences,f=this.json.meshUses,g=this.json.nodes[a];return this.getMultiDependencies(["mesh","skin","camera","light"]).then(function(a){var h;if(g.isBone===!0)h=new(b("ThreeJS.r93").Bone)();else if(g.mesh!==void 0){var i=a.meshes[g.mesh];h=i.clone();if(i.isGroup===!0)for(var j=0,k=i.children.length;j<k;j++){var l=i.children[j];l.material&&l.material.isGLTFSpecularGlossinessMaterial===!0&&(h.children[j].onBeforeRender=l.onBeforeRender)}else i.material&&i.material.isGLTFSpecularGlossinessMaterial===!0&&(h.onBeforeRender=i.onBeforeRender);d[g.mesh]>1&&(h.name+="_instance_"+f[g.mesh]++)}else if(g.camera!==void 0)h=a.cameras[g.camera];else if(g.extensions&&g.extensions[e.KHR_LIGHTS]&&g.extensions[e.KHR_LIGHTS].light!==void 0){l=c[e.KHR_LIGHTS].lights;h=l[g.extensions[e.KHR_LIGHTS].light]}else h=new(b("ThreeJS.r93").Object3D)();g.name!==void 0&&(h.name=b("ThreeJS.r93").PropertyBinding.sanitizeNodeName(g.name));g.extras&&(h.userData=g.extras);g.extensions&&C(c,h,g);if(g.matrix!==void 0){j=new(b("ThreeJS.r93").Matrix4)();j.fromArray(g.matrix);h.applyMatrix(j)}else g.translation!==void 0&&h.position.fromArray(g.translation),g.rotation!==void 0&&h.quaternion.fromArray(g.rotation),g.scale!==void 0&&h.scale.fromArray(g.scale);return h})};N.prototype.loadScene=function(){function a(c,d,e,f,g){var h=f[c];c=e.nodes[c];if(c.skin!==void 0){var i=h.isGroup===!0?h.children:[h];for(var j=0,k=i.length;j<k;j++){var l=i[j],m=g[c.skin],n=[],o=[];for(var p=0,q=m.joints.length;p<q;p++){var r=m.joints[p];r=f[r];if(r){n.push(r);r=new(b("ThreeJS.r93").Matrix4)();m.inverseBindMatrices!==void 0&&r.fromArray(m.inverseBindMatrices.array,p*16);o.push(r)}}l.bind(new(b("ThreeJS.r93").Skeleton)(n,o),l.matrixWorld)}}d.add(h);if(c.children){r=c.children;for(var j=0,k=r.length;j<k;j++){p=r[j];a(p,h,e,f,g)}}}return function(c){var d=this.json,f=this.extensions,g=this.json.scenes[c];return this.getMultiDependencies(["node","skin"]).then(function(c){var h=new(b("ThreeJS.r93").Scene)();g.name!==void 0&&(h.name=g.name);g.extras&&(h.userData=g.extras);g.extensions&&C(f,h,g);var i=g.nodes||[];for(var j=0,k=i.length;j<k;j++)a(i[j],h,d,c.nodes,c.skins);if(g.extensions&&g.extensions[e.KHR_LIGHTS]&&g.extensions[e.KHR_LIGHTS].light!==void 0){c=f[e.KHR_LIGHTS].lights;h.add(c[g.extensions[e.KHR_LIGHTS].light])}return h})}}();return c}(),e.exports=GLTFLoader}),null);
__d("GLTFLoader.r93.patch",["GLTFLoader.r93"],(function(a,b,c,d,e,f){e.exports.patch=function(){return b("GLTFLoader.r93")}}),null);
__d("Asset3DLoaderAdapter",["Promise","GLTFLoader.r93.patch"],(function(a,b,c,d,e,f){b("GLTFLoader.r93.patch").patch(),e.exports=function(){"use strict";function a(a){this.$1=a}var c=a.prototype;c.load=function(a){var c=this;if(!a.uri)return b("Promise").reject({error:"Not a valid uri"});var d=new(b("Promise"))(function(b,d){var e=setTimeout(function(){d(new Error("Loader timed out"))},1e3*20);c.$1.load(a.uri,function(a){clearTimeout(e),b(a)},function(){},function(a){clearTimeout(e),b({error:a})})});return d};c.parse=function(a){var c=this;return new(b("Promise"))(function(b,d){c.$1.parse(a,"",function(a){b(a)},function(){},function(a){b({error:a})})})};return a}()}),null);
__d("Asset3DLoaderFactory",["Asset3DLoader","Asset3DLoaderAdapter","GLTFLoader.r93.patch"],(function(a,b,c,d,e,f){var g=b("GLTFLoader.r93.patch").patch();e.exports={make:function(a){switch(a){default:return new(b("Asset3DLoader"))(new(b("Asset3DLoaderAdapter"))(new g()),{retryDelay:1e3,timesOfRetry:10})}}}}),null);
__d("SceneViewer.react",["cx","React","SceneRenderer","SocialVRThreeJS"],(function(a,b,c,d,e,f,g){var h=b("React");b("SocialVRThreeJS").Camera;b("SocialVRThreeJS").Scene;var i=new(b("SceneRenderer"))();a=function(a){"use strict";babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.shouldComponentUpdate=function(a){return!0};c.componentDidMount=function(){var a=this.props.viewportInfo,b=a.height;a=a.width;this.$1=this.refs.canvas.getContext("2d");this.$2(a,b);this.$3()};c.$3=function(){var a=this.props,b=a.camera,c=a.scene,d=a.viewportInfo;a=a.onRenderFailed;var e=this.$1;e&&i.isValid()?i.render(e,c,b,d):a&&a()};c.render=function(){var a=this.props.viewportInfo,b=a.height;a=a.width;this.$4(a,b);this.$3();return h.jsx("canvas",{ref:"canvas",className:"_6dax"})};c.$4=function(a,b){var c=this.refs.canvas;c&&(c.width!==Math.round(a)||c.height!==Math.round(b))&&this.$2(a,b)};c.$2=function(a,b){var c=this.refs.canvas;c.width=Math.round(a);c.height=Math.round(b)};return b}(h.Component);e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/7R_-0_GF-gR/
 */
__d("rxjs-5.5.2",[],(function(a,b,c,d,e,f){"use strict";var g={},h={exports:g};function i(){var b=typeof window!=="undefined"&&window,c=typeof self!=="undefined"&&typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope&&self,d=typeof a!=="undefined"&&a,e=b||d||c;g.root=e;(function(){if(!e)throw new Error("RxJS could not find any global context (window, self, global)")})()}var j=!1;function k(){j||(j=!0,i());return h.exports}var l={},m={exports:l};function n(){function a(a){return typeof a==="function"}l.isFunction=a}var o=!1;function p(){o||(o=!0,n());return m.exports}var q={},r={exports:q};function s(){q.isArray=Array.isArray||function(a){return a&&typeof a.length==="number"}}var t=!1;function u(){t||(t=!0,s());return r.exports}var v={},w={exports:v};function aa(){function a(a){return a!=null&&typeof a==="object"}v.isObject=a}var ba=!1;function ca(){ba||(ba=!0,aa());return w.exports}var da={},ea={exports:da};function fa(){da.errorObject={e:{}}}var ga=!1;function x(){ga||(ga=!0,fa());return ea.exports}var ha={},ia={exports:ha};function ja(){var a=x(),b;function c(){try{return b.apply(this,arguments)}catch(b){a.errorObject.e=b;return a.errorObject}}function d(a){b=a;return c}ha.tryCatch=d}var ka=!1;function y(){ka||(ka=!0,ja());return ia.exports}var la={},ma={exports:la};function na(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=function(c){a(b,c);function b(a){c.call(this);this.errors=a;a=Error.call(this,a?a.length+" errors occurred during unsubscription:\n  "+a.map(function(a,b){return b+1+") "+a.toString()}).join("\n  "):"");this.name=a.name="UnsubscriptionError";this.stack=a.stack;this.message=a.message}return b}(Error);la.UnsubscriptionError=b}var oa=!1;function pa(){oa||(oa=!0,na());return ma.exports}var qa={},ra={exports:qa};function sa(){var a=u(),b=ca(),c=p(),d=y(),e=x(),f=pa(),g=function(){function g(a){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,a&&(this._unsubscribe=a)}g.prototype.unsubscribe=function(){var g=!1,i;if(this.closed)return;var j=this,k=j._parent,l=j._parents,m=j._unsubscribe;j=j._subscriptions;this.closed=!0;this._parent=null;this._parents=null;this._subscriptions=null;var n=-1,o=l?l.length:0;while(k)k.remove(this),k=++n<o&&l[n]||null;if(c.isFunction(m)){k=d.tryCatch(m).call(this);k===e.errorObject&&(g=!0,i=i||(e.errorObject.e instanceof f.UnsubscriptionError?h(e.errorObject.e.errors):[e.errorObject.e]))}if(a.isArray(j)){n=-1;o=j.length;while(++n<o){l=j[n];if(b.isObject(l)){k=d.tryCatch(l.unsubscribe).call(l);if(k===e.errorObject){g=!0;i=i||[];m=e.errorObject.e;m instanceof f.UnsubscriptionError?i=i.concat(h(m.errors)):i.push(m)}}}}if(g)throw new f.UnsubscriptionError(i)};g.prototype.add=function(a){if(!a||a===g.EMPTY)return g.EMPTY;if(a===this)return this;var b=a;switch(typeof a){case"function":b=new g(a);case"object":if(b.closed||typeof b.unsubscribe!=="function")return b;else if(this.closed){b.unsubscribe();return b}else if(typeof b._addParent!=="function"){var c=b;b=new g();b._subscriptions=[c]}break;default:throw new Error("unrecognized teardown "+a+" added to Subscription.")}c=this._subscriptions||(this._subscriptions=[]);c.push(b);b._addParent(this);return b};g.prototype.remove=function(a){var b=this._subscriptions;if(b){a=b.indexOf(a);a!==-1&&b.splice(a,1)}};g.prototype._addParent=function(a){var b=this,c=b._parent;b=b._parents;!c||c===a?this._parent=a:!b?this._parents=[a]:b.indexOf(a)===-1&&b.push(a)};g.EMPTY=function(a){a.closed=!0;return a}(new g());return g}();qa.Subscription=g;function h(a){return a.reduce(function(a,b){return a.concat(b instanceof f.UnsubscriptionError?b.errors:b)},[])}}var ta=!1;function z(){ta||(ta=!0,sa());return ra.exports}var ua={},va={exports:ua};function wa(){ua.empty={closed:!0,next:function(a){},error:function(a){throw a},complete:function(){}}}var xa=!1;function ya(){xa||(xa=!0,wa());return va.exports}var A={},za={exports:A};function Aa(){var a=k();a=a.root.Symbol;A.rxSubscriber=typeof a==="function"&&typeof a["for"]==="function"?a["for"]("rxSubscriber"):"@@rxSubscriber";A.$$rxSubscriber=A.rxSubscriber}var Ba=!1;function Ca(){Ba||(Ba=!0,Aa());return za.exports}var Da={},Ea={exports:Da};function Fa(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=p(),c=z(),d=ya(),e=Ca();c=function(b){a(c,b);function c(a,e,g){b.call(this);this.syncErrorValue=null;this.syncErrorThrown=!1;this.syncErrorThrowable=!1;this.isStopped=!1;switch(arguments.length){case 0:this.destination=d.empty;break;case 1:if(!a){this.destination=d.empty;break}if(typeof a==="object"){a instanceof c?(this.destination=a,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new f(this,a));break}default:this.syncErrorThrowable=!0;this.destination=new f(this,a,e,g);break}}c.prototype[e.rxSubscriber]=function(){return this};c.create=function(a,b,d){a=new c(a,b,d);a.syncErrorThrowable=!1;return a};c.prototype.next=function(a){this.isStopped||this._next(a)};c.prototype.error=function(a){this.isStopped||(this.isStopped=!0,this._error(a))};c.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())};c.prototype.unsubscribe=function(){if(this.closed)return;this.isStopped=!0;b.prototype.unsubscribe.call(this)};c.prototype._next=function(a){this.destination.next(a)};c.prototype._error=function(a){this.destination.error(a),this.unsubscribe()};c.prototype._complete=function(){this.destination.complete(),this.unsubscribe()};c.prototype._unsubscribeAndRecycle=function(){var a=this,b=a._parent;a=a._parents;this._parent=null;this._parents=null;this.unsubscribe();this.closed=!1;this.isStopped=!1;this._parent=b;this._parents=a;return this};return c}(c.Subscription);Da.Subscriber=c;var f=function(e){a(c,e);function c(a,c,f,g){e.call(this);this._parentSubscriber=a;var h;a=this;b.isFunction(c)?h=c:c&&(h=c.next,f=c.error,g=c.complete,c!==d.empty&&(a=Object.create(c),b.isFunction(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this)));this._context=a;this._next=h;this._error=f;this._complete=g}c.prototype.next=function(a){if(!this.isStopped&&this._next){var b=this._parentSubscriber;!b.syncErrorThrowable?this.__tryOrUnsub(this._next,a):this.__tryOrSetError(b,this._next,a)&&this.unsubscribe()}};c.prototype.error=function(a){if(!this.isStopped){var b=this._parentSubscriber;if(this._error)!b.syncErrorThrowable?(this.__tryOrUnsub(this._error,a),this.unsubscribe()):(this.__tryOrSetError(b,this._error,a),this.unsubscribe());else if(!b.syncErrorThrowable){this.unsubscribe();throw a}else b.syncErrorValue=a,b.syncErrorThrown=!0,this.unsubscribe()}};c.prototype.complete=function(){var a=this;if(!this.isStopped){var b=this._parentSubscriber;if(this._complete){var c=function(){return a._complete.call(a._context)};!b.syncErrorThrowable?(this.__tryOrUnsub(c),this.unsubscribe()):(this.__tryOrSetError(b,c),this.unsubscribe())}else this.unsubscribe()}};c.prototype.__tryOrUnsub=function(a,b){try{a.call(this._context,b)}catch(a){this.unsubscribe();throw a}};c.prototype.__tryOrSetError=function(a,b,c){try{b.call(this._context,c)}catch(b){a.syncErrorValue=b;a.syncErrorThrown=!0;return!0}return!1};c.prototype._unsubscribe=function(){var a=this._parentSubscriber;this._context=null;this._parentSubscriber=null;a.unsubscribe()};return c}(c)}var Ga=!1;function B(){Ga||(Ga=!0,Fa());return Ea.exports}var Ha={},Ia={exports:Ha};function Ja(){var a=B(),b=Ca(),c=ya();function d(d,e,f){if(d){if(d instanceof a.Subscriber)return d;if(d[b.rxSubscriber])return d[b.rxSubscriber]()}return!d&&!e&&!f?new a.Subscriber(c.empty):new a.Subscriber(d,e,f)}Ha.toSubscriber=d}var Ka=!1;function La(){Ka||(Ka=!0,Ja());return Ia.exports}var C={},Ma={exports:C};function Na(){var a=k();function b(a){var b;a=a.Symbol;typeof a==="function"?a.observable?b=a.observable:(b=a("observable"),a.observable=b):b="@@observable";return b}C.getSymbolObservable=b;C.observable=b(a.root);C.$$observable=C.observable}var Oa=!1;function Pa(){Oa||(Oa=!0,Na());return Ma.exports}var Qa={},Ra={exports:Qa};function Sa(){function a(){}Qa.noop=a}var Ta=!1;function Ua(){Ta||(Ta=!0,Sa());return Ra.exports}var Va={},Wa={exports:Va};function Xa(){var a=Ua();function b(){var a=[];for(var b=0;b<arguments.length;b++)a[b-0]=arguments[b];return c(a)}Va.pipe=b;function c(b){if(!b)return a.noop;return b.length===1?b[0]:function(a){return b.reduce(function(a,b){return b(a)},a)}}Va.pipeFromArray=c}var Ya=!1;function Za(){Ya||(Ya=!0,Xa());return Wa.exports}var $a={},ab={exports:$a};function bb(){var a=k(),b=La(),c=Pa(),d=Za(),e=function(){function e(a){this._isScalar=!1,a&&(this._subscribe=a)}e.prototype.lift=function(a){var b=new e();b.source=this;b.operator=a;return b};e.prototype.subscribe=function(a,c,d){var e=this.operator;a=b.toSubscriber(a,c,d);e?e.call(a,this.source):a.add(this.source?this._subscribe(a):this._trySubscribe(a));if(a.syncErrorThrowable){a.syncErrorThrowable=!1;if(a.syncErrorThrown)throw a.syncErrorValue}return a};e.prototype._trySubscribe=function(a){try{return this._subscribe(a)}catch(b){a.syncErrorThrown=!0,a.syncErrorValue=b,a.error(b)}};e.prototype.forEach=function(b,c){var d=this;c||(a.root.Rx&&a.root.Rx.config&&a.root.Rx.config.Promise?c=a.root.Rx.config.Promise:a.root.Promise&&(c=a.root.Promise));if(!c)throw new Error("no Promise impl found");return new c(function(a,c){var e;e=d.subscribe(function(a){if(e)try{b(a)}catch(a){c(a),e.unsubscribe()}else b(a)},c,a)})};e.prototype._subscribe=function(a){return this.source.subscribe(a)};e.prototype[c.observable]=function(){return this};e.prototype.pipe=function(){var a=[];for(var b=0;b<arguments.length;b++)a[b-0]=arguments[b];return a.length===0?this:d.pipeFromArray(a)(this)};e.prototype.toPromise=function(b){var c=this;b||(a.root.Rx&&a.root.Rx.config&&a.root.Rx.config.Promise?b=a.root.Rx.config.Promise:a.root.Promise&&(b=a.root.Promise));if(!b)throw new Error("no Promise impl found");return new b(function(a,b){var d;c.subscribe(function(a){return d=a},function(a){return b(a)},function(){return a(d)})})};e.create=function(a){return new e(a)};return e}();$a.Observable=e}var cb=!1;function D(){cb||(cb=!0,bb());return ab.exports}var db={},eb={exports:db};function fb(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=function(c){a(b,c);function b(){var a=c.call(this,"object unsubscribed");this.name=a.name="ObjectUnsubscribedError";this.stack=a.stack;this.message=a.message}return b}(Error);db.ObjectUnsubscribedError=b}var gb=!1;function hb(){gb||(gb=!0,fb());return eb.exports}var ib={},jb={exports:ib};function kb(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=z();b=function(b){a(c,b);function c(a,c){b.call(this),this.subject=a,this.subscriber=c,this.closed=!1}c.prototype.unsubscribe=function(){if(this.closed)return;this.closed=!0;var a=this.subject,b=a.observers;this.subject=null;if(!b||b.length===0||a.isStopped||a.closed)return;a=b.indexOf(this.subscriber);a!==-1&&b.splice(a,1)};return c}(b.Subscription);ib.SubjectSubscription=b}var lb=!1;function mb(){lb||(lb=!0,kb());return jb.exports}var nb={},ob={exports:nb};function pb(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D(),c=B(),d=z(),e=hb(),f=mb(),g=Ca(),h=function(c){a(b,c);function b(a){c.call(this,a),this.destination=a}return b}(c.Subscriber);nb.SubjectSubscriber=h;c=function(c){a(j,c);function j(){c.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}j.prototype[g.rxSubscriber]=function(){return new h(this)};j.prototype.lift=function(a){var b=new i(this,this);b.operator=a;return b};j.prototype.next=function(a){if(this.closed)throw new e.ObjectUnsubscribedError();if(!this.isStopped){var b=this.observers,c=b.length;b=b.slice();for(var d=0;d<c;d++)b[d].next(a)}};j.prototype.error=function(a){if(this.closed)throw new e.ObjectUnsubscribedError();this.hasError=!0;this.thrownError=a;this.isStopped=!0;var b=this.observers,c=b.length;b=b.slice();for(var d=0;d<c;d++)b[d].error(a);this.observers.length=0};j.prototype.complete=function(){if(this.closed)throw new e.ObjectUnsubscribedError();this.isStopped=!0;var a=this.observers,b=a.length;a=a.slice();for(var c=0;c<b;c++)a[c].complete();this.observers.length=0};j.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null};j.prototype._trySubscribe=function(a){if(this.closed)throw new e.ObjectUnsubscribedError();else return c.prototype._trySubscribe.call(this,a)};j.prototype._subscribe=function(a){if(this.closed)throw new e.ObjectUnsubscribedError();else if(this.hasError){a.error(this.thrownError);return d.Subscription.EMPTY}else if(this.isStopped){a.complete();return d.Subscription.EMPTY}else{this.observers.push(a);return new f.SubjectSubscription(this,a)}};j.prototype.asObservable=function(){var a=new b.Observable();a.source=this;return a};j.create=function(a,b){return new i(a,b)};return j}(b.Observable);nb.Subject=c;var i=function(c){a(b,c);function b(a,b){c.call(this),this.destination=a,this.source=b}b.prototype.next=function(a){var b=this.destination;b&&b.next&&b.next(a)};b.prototype.error=function(a){var b=this.destination;b&&b.error&&this.destination.error(a)};b.prototype.complete=function(){var a=this.destination;a&&a.complete&&this.destination.complete()};b.prototype._subscribe=function(a){var b=this.source;if(b)return this.source.subscribe(a);else return d.Subscription.EMPTY};return b}(c);nb.AnonymousSubject=i}var qb=!1;function E(){qb||(qb=!0,pb());return ob.exports}var rb={},sb={exports:rb};function tb(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=E(),c=z();b=function(b){a(d,b);function d(){b.apply(this,arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}d.prototype._subscribe=function(a){if(this.hasError){a.error(this.thrownError);return c.Subscription.EMPTY}else if(this.hasCompleted&&this.hasNext){a.next(this.value);a.complete();return c.Subscription.EMPTY}return b.prototype._subscribe.call(this,a)};d.prototype.next=function(a){this.hasCompleted||(this.value=a,this.hasNext=!0)};d.prototype.error=function(a){this.hasCompleted||b.prototype.error.call(this,a)};d.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&b.prototype.next.call(this,this.value),b.prototype.complete.call(this)};return d}(b.Subject);rb.AsyncSubject=b}var ub=!1;function vb(){ub||(ub=!0,tb());return sb.exports}var wb={},xb={exports:wb};function yb(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D(),c=y(),d=x(),e=vb();b=function(b){a(h,b);function h(a,c,d,e,f){b.call(this),this.callbackFunc=a,this.selector=c,this.args=d,this.context=e,this.scheduler=f}h.create=function(a,b,c){b===void 0&&(b=void 0);return function(){var d=[];for(var e=0;e<arguments.length;e++)d[e-0]=arguments[e];return new h(a,b,d,this,c)}};h.prototype._subscribe=function(a){var b=this.callbackFunc,f=this.args,g=this.scheduler,i=this.subject;if(!g){if(!i){i=this.subject=new e.AsyncSubject();var j=function a(){var e=[];for(var f=0;f<arguments.length;f++)e[f-0]=arguments[f];var g=a.source,h=g.selector,b=g.subject;if(h){var i=c.tryCatch(h).apply(this,e);i===d.errorObject?b.error(d.errorObject.e):(b.next(i),b.complete())}else b.next(e.length<=1?e[0]:e),b.complete()};j.source=this;b=c.tryCatch(b).apply(this.context,f.concat(j));b===d.errorObject&&i.error(d.errorObject.e)}return i.subscribe(a)}else return g.schedule(h.dispatch,0,{source:this,subscriber:a,context:this.context})};h.dispatch=function(a){var b=this,h=a.source,i=a.subscriber;a=a.context;var j=h.callbackFunc,k=h.args,l=h.scheduler,m=h.subject;if(!m){m=h.subject=new e.AsyncSubject();var n=function a(){var i=[];for(var j=0;j<arguments.length;j++)i[j-0]=arguments[j];var e=a.source,k=e.selector,h=e.subject;if(k){var m=c.tryCatch(k).apply(this,i);m===d.errorObject?b.add(l.schedule(g,0,{err:d.errorObject.e,subject:h})):b.add(l.schedule(f,0,{value:m,subject:h}))}else{var n=i.length<=1?i[0]:i;b.add(l.schedule(f,0,{value:n,subject:h}))}};n.source=h;h=c.tryCatch(j).apply(a,k.concat(n));h===d.errorObject&&m.error(d.errorObject.e)}b.add(m.subscribe(i))};return h}(b.Observable);wb.BoundCallbackObservable=b;function f(a){var b=a.value;a=a.subject;a.next(b);a.complete()}function g(a){var b=a.err;a=a.subject;a.error(b)}}var zb=!1;function Ab(){zb||(zb=!0,yb());return xb.exports}var Bb={},Cb={exports:Bb};function Db(){var a=Ab();Bb.bindCallback=a.BoundCallbackObservable.create}var Eb=!1;function Fb(){Eb||(Eb=!0,Db());return Cb.exports}c={};var Gb={exports:c};function Hb(){var a=D(),b=Fb();a.Observable.bindCallback=b.bindCallback}var Ib=!1;function Jb(){Ib||(Ib=!0,Hb());return Gb.exports}var Kb={},Lb={exports:Kb};function Mb(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D(),c=y(),d=x(),e=vb();b=function(b){a(g,b);function g(a,c,d,e,f){b.call(this),this.callbackFunc=a,this.selector=c,this.args=d,this.context=e,this.scheduler=f}g.create=function(a,b,c){b===void 0&&(b=void 0);return function(){var d=[];for(var e=0;e<arguments.length;e++)d[e-0]=arguments[e];return new g(a,b,d,this,c)}};g.prototype._subscribe=function(a){var b=this.callbackFunc,g=this.args,h=this.scheduler,i=this.subject;if(!h){if(!i){i=this.subject=new e.AsyncSubject();var j=function a(){var e=[];for(var f=0;f<arguments.length;f++)e[f-0]=arguments[f];var g=a.source,h=g.selector,b=g.subject,i=e.shift();if(i)b.error(i);else if(h){var j=c.tryCatch(h).apply(this,e);j===d.errorObject?b.error(d.errorObject.e):(b.next(j),b.complete())}else b.next(e.length<=1?e[0]:e),b.complete()};j.source=this;b=c.tryCatch(b).apply(this.context,g.concat(j));b===d.errorObject&&i.error(d.errorObject.e)}return i.subscribe(a)}else return h.schedule(f,0,{source:this,subscriber:a,context:this.context})};return g}(b.Observable);Kb.BoundNodeCallbackObservable=b;function f(a){var b=this,f=a.source,i=a.subscriber;a=a.context;var j=f,k=j.callbackFunc,l=j.args,m=j.scheduler;j=f.subject;if(!j){j=f.subject=new e.AsyncSubject();var n=function a(){var f=[];for(var i=0;i<arguments.length;i++)f[i-0]=arguments[i];var e=a.source,j=e.selector,k=e.subject,l=f.shift();if(l)b.add(m.schedule(h,0,{err:l,subject:k}));else if(j){var n=c.tryCatch(j).apply(this,f);n===d.errorObject?b.add(m.schedule(h,0,{err:d.errorObject.e,subject:k})):b.add(m.schedule(g,0,{value:n,subject:k}))}else{var o=f.length<=1?f[0]:f;b.add(m.schedule(g,0,{value:o,subject:k}))}};n.source=f;f=c.tryCatch(k).apply(a,l.concat(n));f===d.errorObject&&b.add(m.schedule(h,0,{err:d.errorObject.e,subject:j}))}b.add(j.subscribe(i))}function g(a){var b=a.value;a=a.subject;a.next(b);a.complete()}function h(a){var b=a.err;a=a.subject;a.error(b)}}var Nb=!1;function Ob(){Nb||(Nb=!0,Mb());return Lb.exports}var Pb={},Qb={exports:Pb};function Rb(){var a=Ob();Pb.bindNodeCallback=a.BoundNodeCallbackObservable.create}var Sb=!1;function Tb(){Sb||(Sb=!0,Rb());return Qb.exports}d={};var Ub={exports:d};function Vb(){var a=D(),b=Tb();a.Observable.bindNodeCallback=b.bindNodeCallback}var Wb=!1;function Xb(){Wb||(Wb=!0,Vb());return Ub.exports}var Yb={},Zb={exports:Yb};function $b(){function a(a){return a&&typeof a.schedule==="function"}Yb.isScheduler=a}var ac=!1;function F(){ac||(ac=!0,$b());return Zb.exports}var bc={},cc={exports:bc};function dc(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D();b=function(b){a(c,b);function c(a,c){b.call(this),this.value=a,this.scheduler=c,this._isScalar=!0,c&&(this._isScalar=!1)}c.create=function(a,b){return new c(a,b)};c.dispatch=function(a){var b=a.done,c=a.value,d=a.subscriber;if(b){d.complete();return}d.next(c);if(d.closed)return;a.done=!0;this.schedule(a)};c.prototype._subscribe=function(a){var b=this.value,d=this.scheduler;if(d)return d.schedule(c.dispatch,0,{done:!1,value:b,subscriber:a});else a.next(b),a.closed||a.complete()};return c}(b.Observable);bc.ScalarObservable=b}var ec=!1;function fc(){ec||(ec=!0,dc());return cc.exports}var gc={},hc={exports:gc};function ic(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D();b=function(b){a(c,b);function c(a){b.call(this),this.scheduler=a}c.create=function(a){return new c(a)};c.dispatch=function(a){a=a.subscriber;a.complete()};c.prototype._subscribe=function(a){var b=this.scheduler;if(b)return b.schedule(c.dispatch,0,{subscriber:a});else a.complete()};return c}(b.Observable);gc.EmptyObservable=b}var jc=!1;function G(){jc||(jc=!0,ic());return hc.exports}var kc={},lc={exports:kc};function mc(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D(),c=fc(),d=G(),e=F();b=function(b){a(f,b);function f(a,c){b.call(this),this.array=a,this.scheduler=c,!c&&a.length===1&&(this._isScalar=!0,this.value=a[0])}f.create=function(a,b){return new f(a,b)};f.of=function(){var a=[];for(var b=0;b<arguments.length;b++)a[b-0]=arguments[b];var g=a[a.length-1];e.isScheduler(g)?a.pop():g=null;var h=a.length;if(h>1)return new f(a,g);else if(h===1)return new c.ScalarObservable(a[0],g);else return new d.EmptyObservable(g)};f.dispatch=function(a){var b=a.array,c=a.index,d=a.count,e=a.subscriber;if(c>=d){e.complete();return}e.next(b[c]);if(e.closed)return;a.index=c+1;this.schedule(a)};f.prototype._subscribe=function(a){var b=0,c=this.array,d=c.length,e=this.scheduler;if(e)return e.schedule(f.dispatch,0,{array:c,index:b,count:d,subscriber:a});else{for(var e=0;e<d&&!a.closed;e++)a.next(c[e]);a.complete()}};return f}(b.Observable);kc.ArrayObservable=b}var nc=!1;function H(){nc||(nc=!0,mc());return lc.exports}var oc={},pc={exports:oc};function qc(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();b=function(b){a(c,b);function c(){b.apply(this,arguments)}c.prototype.notifyNext=function(a,b,c,d,e){this.destination.next(b)};c.prototype.notifyError=function(a,b){this.destination.error(a)};c.prototype.notifyComplete=function(a){this.destination.complete()};return c}(b.Subscriber);oc.OuterSubscriber=b}var rc=!1;function I(){rc||(rc=!0,qc());return pc.exports}var sc={},tc={exports:sc};function uc(){sc.isArrayLike=function(a){return a&&typeof a.length==="number"}}var vc=!1;function wc(){vc||(vc=!0,uc());return tc.exports}var xc={},yc={exports:xc};function zc(){function a(a){return a&&typeof a.subscribe!=="function"&&typeof a.then==="function"}xc.isPromise=a}var Ac=!1;function Bc(){Ac||(Ac=!0,zc());return yc.exports}var J={},Cc={exports:J};function Dc(){var a=k();function b(a){var b=a.Symbol;if(typeof b==="function"){b.iterator||(b.iterator=b("iterator polyfill"));return b.iterator}else{b=a.Set;if(b&&typeof new b()["@@iterator"]==="function")return"@@iterator";b=a.Map;if(b){a=Object.getOwnPropertyNames(b.prototype);for(var c=0;c<a.length;++c){var d=a[c];if(d!=="entries"&&d!=="size"&&b.prototype[d]===b.prototype.entries)return d}}return"@@iterator"}}J.symbolIteratorPonyfill=b;J.iterator=b(a.root);J.$$iterator=J.iterator}var Ec=!1;function K(){Ec||(Ec=!0,Dc());return Cc.exports}var Fc={},Gc={exports:Fc};function Hc(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();b=function(b){a(c,b);function c(a,c,d){b.call(this),this.parent=a,this.outerValue=c,this.outerIndex=d,this.index=0}c.prototype._next=function(a){this.parent.notifyNext(this.outerValue,a,this.outerIndex,this.index++,this)};c.prototype._error=function(a){this.parent.notifyError(a,this),this.unsubscribe()};c.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()};return c}(b.Subscriber);Fc.InnerSubscriber=b}var Ic=!1;function Jc(){Ic||(Ic=!0,Hc());return Gc.exports}var Kc={},Lc={exports:Kc};function Mc(){var a=k(),b=wc(),c=Bc(),d=ca(),e=D(),f=K(),g=Jc(),h=Pa();function i(i,j,k,l){var m=new g.InnerSubscriber(i,k,l);if(m.closed)return null;if(j instanceof e.Observable)if(j._isScalar){m.next(j.value);m.complete();return null}else{m.syncErrorThrowable=!0;return j.subscribe(m)}else if(b.isArrayLike(j)){for(var n=0,o=j.length;n<o&&!m.closed;n++)m.next(j[n]);m.closed||m.complete()}else if(c.isPromise(j)){j.then(function(a){m.closed||(m.next(a),m.complete())},function(a){return m.error(a)}).then(null,function(b){a.root.setTimeout(function(){throw b})});return m}else if(j&&typeof j[f.iterator]==="function"){n=j[f.iterator]();do{o=n.next();if(o.done){m.complete();break}m.next(o.value);if(m.closed)break}while(!0)}else if(j&&typeof j[h.observable]==="function"){o=j[h.observable]();if(typeof o.subscribe!=="function")m.error(new TypeError("Provided object does not correctly implement Symbol.observable"));else return o.subscribe(new g.InnerSubscriber(i,k,l))}else{n=d.isObject(j)?"an invalid object":"'"+j+"'";o="You provided "+n+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";m.error(new TypeError(o))}return null}Kc.subscribeToResult=i}var Nc=!1;function L(){Nc||(Nc=!0,Mc());return Lc.exports}var Oc={},Pc={exports:Oc};function Qc(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=H(),c=u(),d=I(),e=L(),f={};function g(){var a=[];for(var d=0;d<arguments.length;d++)a[d-0]=arguments[d];var e=null;typeof a[a.length-1]==="function"&&(e=a.pop());a.length===1&&c.isArray(a[0])&&(a=a[0].slice());return function(c){return c.lift.call(new b.ArrayObservable([c].concat(a)),new h(e))}}Oc.combineLatest=g;var h=function(){function a(a){this.project=a}a.prototype.call=function(a,b){return b.subscribe(new i(a,this.project))};return a}();Oc.CombineLatestOperator=h;var i=function(c){a(b,c);function b(a,b){c.call(this,a),this.project=b,this.active=0,this.values=[],this.observables=[]}b.prototype._next=function(a){this.values.push(f),this.observables.push(a)};b.prototype._complete=function(){var a=this.observables,b=a.length;if(b===0)this.destination.complete();else{this.active=b;this.toRespond=b;for(var c=0;c<b;c++){var d=a[c];this.add(e.subscribeToResult(this,d,d,c))}}};b.prototype.notifyComplete=function(a){(this.active-=1)===0&&this.destination.complete()};b.prototype.notifyNext=function(a,b,c,d,e){a=this.values;d=a[c];e=this.toRespond?d===f?--this.toRespond:this.toRespond:0;a[c]=b;e===0&&(this.project?this._tryProject(a):this.destination.next(a.slice()))};b.prototype._tryProject=function(a){try{a=this.project.apply(this,a)}catch(a){this.destination.error(a);return}this.destination.next(a)};return b}(d.OuterSubscriber);Oc.CombineLatestSubscriber=i}var Rc=!1;function Sc(){Rc||(Rc=!0,Qc());return Pc.exports}var Tc={},Uc={exports:Tc};function Vc(){var a=F(),b=u(),c=H(),d=Sc();function e(){var e=[];for(var f=0;f<arguments.length;f++)e[f-0]=arguments[f];var g=null,h=null;a.isScheduler(e[e.length-1])&&(h=e.pop());typeof e[e.length-1]==="function"&&(g=e.pop());e.length===1&&b.isArray(e[0])&&(e=e[0]);return new c.ArrayObservable(e,h).lift(new d.CombineLatestOperator(g))}Tc.combineLatest=e}var Wc=!1;function Xc(){Wc||(Wc=!0,Vc());return Uc.exports}f={};var Yc={exports:f};function Zc(){var a=D(),b=Xc();a.Observable.combineLatest=b.combineLatest}var $c=!1;function ad(){$c||($c=!0,Zc());return Yc.exports}var bd={},cd={exports:bd};function dd(){var a=H();bd.of=a.ArrayObservable.of}var ed=!1;function fd(){ed||(ed=!0,dd());return cd.exports}var gd={},hd={exports:gd};function id(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=k(),c=D();c=function(c){a(f,c);function f(a,b){c.call(this),this.promise=a,this.scheduler=b}f.create=function(a,b){return new f(a,b)};f.prototype._subscribe=function(a){var c=this,f=this.promise,g=this.scheduler;if(g==null)this._isScalar?a.closed||(a.next(this.value),a.complete()):f.then(function(b){c.value=b,c._isScalar=!0,a.closed||(a.next(b),a.complete())},function(b){a.closed||a.error(b)}).then(null,function(a){b.root.setTimeout(function(){throw a})});else if(this._isScalar){if(!a.closed)return g.schedule(d,0,{value:this.value,subscriber:a})}else f.then(function(b){c.value=b,c._isScalar=!0,a.closed||a.add(g.schedule(d,0,{value:b,subscriber:a}))},function(b){a.closed||a.add(g.schedule(e,0,{err:b,subscriber:a}))}).then(null,function(a){b.root.setTimeout(function(){throw a})})};return f}(c.Observable);gd.PromiseObservable=c;function d(a){var b=a.value;a=a.subscriber;a.closed||(a.next(b),a.complete())}function e(a){var b=a.err;a=a.subscriber;a.closed||a.error(b)}}var jd=!1;function kd(){jd||(jd=!0,id());return hd.exports}var ld={},md={exports:ld};function nd(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=k(),c=D(),d=K();c=function(b){a(c,b);function c(a,c){b.call(this);this.scheduler=c;if(a==null)throw new Error("iterator cannot be null.");this.iterator=g(a)}c.create=function(a,b){return new c(a,b)};c.dispatch=function(a){var b=a.index,c=a.hasError,d=a.iterator,e=a.subscriber;if(c){e.error(a.error);return}c=d.next();if(c.done){e.complete();return}e.next(c.value);a.index=b+1;if(e.closed){typeof d["return"]==="function"&&d["return"]();return}this.schedule(a)};c.prototype._subscribe=function(a){var b=0,d=this,e=d.iterator;d=d.scheduler;if(d)return d.schedule(c.dispatch,0,{index:b,iterator:e,subscriber:a});else do{d=e.next();if(d.done){a.complete();break}else a.next(d.value);if(a.closed){typeof e["return"]==="function"&&e["return"]();break}}while(!0)};return c}(c.Observable);ld.IteratorObservable=c;var e=function(){function a(a,b,c){b===void 0&&(b=0),c===void 0&&(c=a.length),this.str=a,this.idx=b,this.len=c}a.prototype[d.iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}};return a}(),f=function(){function a(a,b,c){b===void 0&&(b=0),c===void 0&&(c=i(a)),this.arr=a,this.idx=b,this.len=c}a.prototype[d.iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}};return a}();function g(a){var b=a[d.iterator];if(!b&&typeof a==="string")return new e(a);if(!b&&a.length!==void 0)return new f(a);if(!b)throw new TypeError("object is not iterable");return a[d.iterator]()}var h=Math.pow(2,53)-1;function i(a){a=+a.length;if(isNaN(a))return 0;if(a===0||!j(a))return a;a=l(a)*Math.floor(Math.abs(a));if(a<=0)return 0;return a>h?h:a}function j(a){return typeof a==="number"&&b.root.isFinite(a)}function l(a){a=+a;if(a===0)return a;return isNaN(a)?a:a<0?-1:1}}var od=!1;function pd(){od||(od=!0,nd());return md.exports}var qd={},rd={exports:qd};function sd(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D(),c=fc(),d=G();b=function(b){a(e,b);function e(a,c){b.call(this),this.arrayLike=a,this.scheduler=c,!c&&a.length===1&&(this._isScalar=!0,this.value=a[0])}e.create=function(a,b){var f=a.length;if(f===0)return new d.EmptyObservable();else if(f===1)return new c.ScalarObservable(a[0],b);else return new e(a,b)};e.dispatch=function(a){var b=a.arrayLike,c=a.index,d=a.length,e=a.subscriber;if(e.closed)return;if(c>=d){e.complete();return}e.next(b[c]);a.index=c+1;this.schedule(a)};e.prototype._subscribe=function(a){var b=0,c=this,d=c.arrayLike;c=c.scheduler;var f=d.length;if(c)return c.schedule(e.dispatch,0,{arrayLike:d,index:b,length:f,subscriber:a});else{for(var c=0;c<f&&!a.closed;c++)a.next(d[c]);a.complete()}};return e}(b.Observable);qd.ArrayLikeObservable=b}var td=!1;function ud(){td||(td=!0,sd());return rd.exports}var vd={},wd={exports:vd};function xd(){var a=D(),b=function(){function b(a,b,c){this.kind=a,this.value=b,this.error=c,this.hasValue=a==="N"}b.prototype.observe=function(a){switch(this.kind){case"N":return a.next&&a.next(this.value);case"E":return a.error&&a.error(this.error);case"C":return a.complete&&a.complete()}};b.prototype["do"]=function(a,b,c){var d=this.kind;switch(d){case"N":return a&&a(this.value);case"E":return b&&b(this.error);case"C":return c&&c()}};b.prototype.accept=function(a,b,c){if(a&&typeof a.next==="function")return this.observe(a);else return this["do"](a,b,c)};b.prototype.toObservable=function(){var b=this.kind;switch(b){case"N":return a.Observable.of(this.value);case"E":return a.Observable["throw"](this.error);case"C":return a.Observable.empty()}throw new Error("unexpected notification kind value")};b.createNext=function(a){return typeof a!=="undefined"?new b("N",a):b.undefinedValueNotification};b.createError=function(a){return new b("E",void 0,a)};b.createComplete=function(){return b.completeNotification};b.completeNotification=new b("C");b.undefinedValueNotification=new b("N",void 0);return b}();vd.Notification=b}var yd=!1;function M(){yd||(yd=!0,xd());return wd.exports}var N={},zd={exports:N};function Ad(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=M();function d(a,b){b===void 0&&(b=0);return function(c){return c.lift(new e(a,b))}}N.observeOn=d;var e=function(){function a(a,b){b===void 0&&(b=0),this.scheduler=a,this.delay=b}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.scheduler,this.delay))};return a}();N.ObserveOnOperator=e;var f=function(d){a(b,d);function b(a,b,c){c===void 0&&(c=0),d.call(this,a),this.scheduler=b,this.delay=c}b.dispatch=function(a){var b=a.notification;a=a.destination;b.observe(a);this.unsubscribe()};b.prototype.scheduleMessage=function(a){this.add(this.scheduler.schedule(b.dispatch,this.delay,new g(a,this.destination)))};b.prototype._next=function(a){this.scheduleMessage(c.Notification.createNext(a))};b.prototype._error=function(a){this.scheduleMessage(c.Notification.createError(a))};b.prototype._complete=function(){this.scheduleMessage(c.Notification.createComplete())};return b}(b.Subscriber);N.ObserveOnSubscriber=f;var g=function(){function a(a,b){this.notification=a,this.destination=b}return a}();N.ObserveOnMessage=g}var Bd=!1;function Cd(){Bd||(Bd=!0,Ad());return zd.exports}var Dd={},Ed={exports:Dd};function Fd(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=u(),c=wc(),d=Bc(),e=kd(),f=pd(),g=H(),h=ud(),i=K(),j=D(),k=Cd(),l=Pa(),m=function(n){a(m,n);function m(a,b){n.call(this,null),this.ish=a,this.scheduler=b}m.create=function(a,k){if(a!=null)if(typeof a[l.observable]==="function")return a instanceof j.Observable&&!k?a:new m(a,k);else if(b.isArray(a))return new g.ArrayObservable(a,k);else if(d.isPromise(a))return new e.PromiseObservable(a,k);else if(typeof a[i.iterator]==="function"||typeof a==="string")return new f.IteratorObservable(a,k);else if(c.isArrayLike(a))return new h.ArrayLikeObservable(a,k);throw new TypeError((a!==null&&typeof a||a)+" is not observable")};m.prototype._subscribe=function(a){var b=this.ish,c=this.scheduler;if(c==null)return b[l.observable]().subscribe(a);else return b[l.observable]().subscribe(new k.ObserveOnSubscriber(a,c,0))};return m}(j.Observable);Dd.FromObservable=m}var Gd=!1;function Hd(){Gd||(Gd=!0,Fd());return Ed.exports}var Id={},Jd={exports:Id};function Kd(){var a=Hd();Id.from=a.FromObservable.create}var Ld=!1;function Md(){Ld||(Ld=!0,Kd());return Jd.exports}var Nd={},Od={exports:Nd};function Pd(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=L(),c=I();function d(a,b,c){c===void 0&&(c=Number.POSITIVE_INFINITY);return function(d){typeof b==="number"&&(c=b,b=null);return d.lift(new e(a,b,c))}}Nd.mergeMap=d;var e=function(){function a(a,b,c){c===void 0&&(c=Number.POSITIVE_INFINITY),this.project=a,this.resultSelector=b,this.concurrent=c}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.project,this.resultSelector,this.concurrent))};return a}();Nd.MergeMapOperator=e;var f=function(d){a(c,d);function c(a,b,c,e){e===void 0&&(e=Number.POSITIVE_INFINITY),d.call(this,a),this.project=b,this.resultSelector=c,this.concurrent=e,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}c.prototype._next=function(a){this.active<this.concurrent?this._tryNext(a):this.buffer.push(a)};c.prototype._tryNext=function(a){var b,c=this.index++;try{b=this.project(a,c)}catch(a){this.destination.error(a);return}this.active++;this._innerSub(b,a,c)};c.prototype._innerSub=function(a,c,d){this.add(b.subscribeToResult(this,a,c,d))};c.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete()};c.prototype.notifyNext=function(a,b,c,d,e){this.resultSelector?this._notifyResultSelector(a,b,c,d):this.destination.next(b)};c.prototype._notifyResultSelector=function(a,b,c,d){try{a=this.resultSelector(a,b,c,d)}catch(a){this.destination.error(a);return}this.destination.next(a)};c.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;b.length>0?this._next(b.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()};return c}(c.OuterSubscriber);Nd.MergeMapSubscriber=f}var Qd=!1;function O(){Qd||(Qd=!0,Pd());return Od.exports}var Rd={},Sd={exports:Rd};function Td(){function a(a){return a}Rd.identity=a}var Ud=!1;function Vd(){Ud||(Ud=!0,Td());return Sd.exports}var Wd={},Xd={exports:Wd};function Yd(){var a=O(),b=Vd();function c(c){c===void 0&&(c=Number.POSITIVE_INFINITY);return a.mergeMap(b.identity,null,c)}Wd.mergeAll=c}var Zd=!1;function $d(){Zd||(Zd=!0,Yd());return Xd.exports}var ae={},be={exports:ae};function ce(){var a=$d();function b(){return a.mergeAll(1)}ae.concatAll=b}var de=!1;function ee(){de||(de=!0,ce());return be.exports}var fe={},ge={exports:fe};function he(){var a=F(),b=fd(),c=Md(),d=ee();function e(){var e=[];for(var f=0;f<arguments.length;f++)e[f-0]=arguments[f];return e.length===1||e.length===2&&a.isScheduler(e[1])?c.from(e[0]):d.concatAll()(b.of.apply(void 0,e))}fe.concat=e}var ie=!1;function je(){ie||(ie=!0,he());return ge.exports}c={};var ke={exports:c};function le(){var a=D(),b=je();a.Observable.concat=b.concat}var me=!1;function ne(){me||(me=!0,le());return ke.exports}var oe={},pe={exports:oe};function qe(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D(),c=L(),d=I();b=function(b){a(c,b);function c(a){b.call(this),this.observableFactory=a}c.create=function(a){return new c(a)};c.prototype._subscribe=function(a){return new e(a,this.observableFactory)};return c}(b.Observable);oe.DeferObservable=b;var e=function(d){a(b,d);function b(a,b){d.call(this,a),this.factory=b,this.tryDefer()}b.prototype.tryDefer=function(){try{this._callFactory()}catch(a){this._error(a)}};b.prototype._callFactory=function(){var a=this.factory();a&&this.add(c.subscribeToResult(this,a))};return b}(d.OuterSubscriber)}var re=!1;function se(){re||(re=!0,qe());return pe.exports}var te={},ue={exports:te};function ve(){var a=se();te.defer=a.DeferObservable.create}var we=!1;function xe(){we||(we=!0,ve());return ue.exports}d={};var ye={exports:d};function ze(){var a=D(),b=xe();a.Observable.defer=b.defer}var Ae=!1;function Be(){Ae||(Ae=!0,ze());return ye.exports}var Ce={},De={exports:Ce};function Ee(){var a=G();Ce.empty=a.EmptyObservable.create}var Fe=!1;function Ge(){Fe||(Fe=!0,Ee());return De.exports}f={};var He={exports:f};function Ie(){var a=D(),b=Ge();a.Observable.empty=b.empty}var Je=!1;function Ke(){Je||(Je=!0,Ie());return He.exports}var Le={},Me={exports:Le};function Ne(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D(),c=G(),d=u(),e=L(),f=I();b=function(b){a(e,b);function e(a,c){b.call(this),this.sources=a,this.resultSelector=c}e.create=function(){var a=[];for(var b=0;b<arguments.length;b++)a[b-0]=arguments[b];if(a===null||arguments.length===0)return new c.EmptyObservable();var f=null;typeof a[a.length-1]==="function"&&(f=a.pop());a.length===1&&d.isArray(a[0])&&(a=a[0]);return a.length===0?new c.EmptyObservable():new e(a,f)};e.prototype._subscribe=function(a){return new g(a,this.sources,this.resultSelector)};return e}(b.Observable);Le.ForkJoinObservable=b;var g=function(c){a(b,c);function b(a,b,d){c.call(this,a);this.sources=b;this.resultSelector=d;this.completed=0;this.haveValues=0;a=b.length;this.total=a;this.values=new Array(a);for(var d=0;d<a;d++){var f=b[d];f=e.subscribeToResult(this,f,null,d);f&&(f.outerIndex=d,this.add(f))}}b.prototype.notifyNext=function(a,b,c,d,e){this.values[c]=b,e._hasValue||(e._hasValue=!0,this.haveValues++)};b.prototype.notifyComplete=function(a){var b=this.destination,c=this,d=c.haveValues,e=c.resultSelector;c=c.values;var f=c.length;if(!a._hasValue){b.complete();return}this.completed++;if(this.completed!==f)return;if(d===f){a=e?e.apply(this,c):c;b.next(a)}b.complete()};return b}(f.OuterSubscriber)}var Oe=!1;function Pe(){Oe||(Oe=!0,Ne());return Me.exports}var Qe={},Re={exports:Qe};function Se(){var a=Pe();Qe.forkJoin=a.ForkJoinObservable.create}var Te=!1;function Ue(){Te||(Te=!0,Se());return Re.exports}c={};var Ve={exports:c};function We(){var a=D(),b=Ue();a.Observable.forkJoin=b.forkJoin}var Xe=!1;function Ye(){Xe||(Xe=!0,We());return Ve.exports}d={};var Ze={exports:d};function $e(){var a=D(),b=Md();a.Observable.from=b.from}var af=!1;function bf(){af||(af=!0,$e());return Ze.exports}var cf={},df={exports:cf};function ef(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D(),c=y(),d=p(),e=x(),f=z(),g=Object.prototype.toString;function h(a){return!!a&&typeof a.addListener==="function"&&typeof a.removeListener==="function"}function i(a){return!!a&&typeof a.on==="function"&&typeof a.off==="function"}function j(a){return!!a&&g.call(a)==="[object NodeList]"}function k(a){return!!a&&g.call(a)==="[object HTMLCollection]"}function l(a){return!!a&&typeof a.addEventListener==="function"&&typeof a.removeEventListener==="function"}b=function(b){a(g,b);function g(a,c,d,e){b.call(this),this.sourceObj=a,this.eventName=c,this.selector=d,this.options=e}g.create=function(a,b,c,e){d.isFunction(c)&&(e=c,c=void 0);return new g(a,b,e,c)};g.setupSubscription=function(a,b,c,d,e){var m;if(j(a)||k(a))for(var n=0,o=a.length;n<o;n++)g.setupSubscription(a[n],b,c,d,e);else if(l(a)){var p=a;a.addEventListener(b,c,e);m=function(){return p.removeEventListener(b,c)}}else if(i(a)){var q=a;a.on(b,c);m=function(){return q.off(b,c)}}else if(h(a)){var r=a;a.addListener(b,c);m=function(){return r.removeListener(b,c)}}else throw new TypeError("Invalid event target");d.add(new f.Subscription(m))};g.prototype._subscribe=function(a){var b=this.sourceObj,d=this.eventName,f=this.options,h=this.selector,i=h?function(){var b=[];for(var d=0;d<arguments.length;d++)b[d-0]=arguments[d];var f=c.tryCatch(h).apply(void 0,b);f===e.errorObject?a.error(e.errorObject.e):a.next(f)}:function(b){return a.next(b)};g.setupSubscription(b,d,i,a,f)};return g}(b.Observable);cf.FromEventObservable=b}var ff=!1;function gf(){ff||(ff=!0,ef());return df.exports}var hf={},jf={exports:hf};function kf(){var a=gf();hf.fromEvent=a.FromEventObservable.create}var lf=!1;function mf(){lf||(lf=!0,kf());return jf.exports}f={};var nf={exports:f};function of(){var a=D(),b=mf();a.Observable.fromEvent=b.fromEvent}var pf=!1;function qf(){pf||(pf=!0,of());return nf.exports}var rf={},sf={exports:rf};function tf(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=p(),c=D(),d=z();c=function(c){a(e,c);function e(a,b,d){c.call(this),this.addHandler=a,this.removeHandler=b,this.selector=d}e.create=function(a,b,c){return new e(a,b,c)};e.prototype._subscribe=function(a){var c=this,e=this.removeHandler,f=this.selector?function(){var b=[];for(var d=0;d<arguments.length;d++)b[d-0]=arguments[d];c._callSelector(a,b)}:function(b){a.next(b)},g=this._callAddHandler(f,a);if(!b.isFunction(e))return;a.add(new d.Subscription(function(){e(f,g)}))};e.prototype._callSelector=function(a,b){try{b=this.selector.apply(this,b);a.next(b)}catch(b){a.error(b)}};e.prototype._callAddHandler=function(a,b){try{return this.addHandler(a)||null}catch(a){b.error(a)}};return e}(c.Observable);rf.FromEventPatternObservable=c}var uf=!1;function vf(){uf||(uf=!0,tf());return sf.exports}var wf={},xf={exports:wf};function yf(){var a=vf();wf.fromEventPattern=a.FromEventPatternObservable.create}var zf=!1;function Af(){zf||(zf=!0,yf());return xf.exports}c={};var Bf={exports:c};function Cf(){var a=D(),b=Af();a.Observable.fromEventPattern=b.fromEventPattern}var Df=!1;function Ef(){Df||(Df=!0,Cf());return Bf.exports}var Ff={},Gf={exports:Ff};function Hf(){var a=kd();Ff.fromPromise=a.PromiseObservable.create}var If=!1;function Jf(){If||(If=!0,Hf());return Gf.exports}d={};var Kf={exports:d};function Lf(){var a=D(),b=Jf();a.Observable.fromPromise=b.fromPromise}var Mf=!1;function Nf(){Mf||(Mf=!0,Lf());return Kf.exports}var Of={},Pf={exports:Of};function Qf(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D(),c=F(),d=function(a){return a};b=function(b){a(e,b);function e(a,c,d,e,f){b.call(this),this.initialState=a,this.condition=c,this.iterate=d,this.resultSelector=e,this.scheduler=f}e.create=function(a,b,f,g,h){if(arguments.length==1)return new e(a.initialState,a.condition,a.iterate,a.resultSelector||d,a.scheduler);return g===void 0||c.isScheduler(g)?new e(a,b,f,d,g):new e(a,b,f,g,h)};e.prototype._subscribe=function(a){var b=this.initialState;if(this.scheduler)return this.scheduler.schedule(e.dispatch,0,{subscriber:a,iterate:this.iterate,condition:this.condition,resultSelector:this.resultSelector,state:b});var c=this,d=c.condition,f=c.resultSelector;c=c.iterate;do{if(d){var g=void 0;try{g=d(b)}catch(b){a.error(b);return}if(!g){a.complete();break}}g=void 0;try{g=f(b)}catch(b){a.error(b);return}a.next(g);if(a.closed)break;try{b=c(b)}catch(b){a.error(b);return}}while(!0)};e.dispatch=function(a){var b=a.subscriber,c=a.condition;if(b.closed)return;if(a.needIterate)try{a.state=a.iterate(a.state)}catch(a){b.error(a);return}else a.needIterate=!0;if(c){var d=void 0;try{d=c(a.state)}catch(a){b.error(a);return}if(!d){b.complete();return}if(b.closed)return}try{c=a.resultSelector(a.state)}catch(a){b.error(a);return}if(b.closed)return;b.next(c);if(b.closed)return;return this.schedule(a)};return e}(b.Observable);Of.GenerateObservable=b}var Rf=!1;function Sf(){Rf||(Rf=!0,Qf());return Pf.exports}var Tf={},Uf={exports:Tf};function Vf(){var a=Sf();Tf.generate=a.GenerateObservable.create}var Wf=!1;function Xf(){Wf||(Wf=!0,Vf());return Uf.exports}f={};var Yf={exports:f};function Zf(){var a=D(),b=Xf();a.Observable.generate=b.generate}var $f=!1;function ag(){$f||($f=!0,Zf());return Yf.exports}var bg={},cg={exports:bg};function dg(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D(),c=L(),d=I();b=function(b){a(c,b);function c(a,c,d){b.call(this),this.condition=a,this.thenSource=c,this.elseSource=d}c.create=function(a,b,d){return new c(a,b,d)};c.prototype._subscribe=function(a){var b=this,c=b.condition,d=b.thenSource;b=b.elseSource;return new e(a,c,d,b)};return c}(b.Observable);bg.IfObservable=b;var e=function(d){a(b,d);function b(a,b,c,e){d.call(this,a),this.condition=b,this.thenSource=c,this.elseSource=e,this.tryIf()}b.prototype.tryIf=function(){var a=this,b=a.condition,d=a.thenSource;a=a.elseSource;try{b=b();b=b?d:a;b?this.add(c.subscribeToResult(this,b)):this._complete()}catch(a){this._error(a)}};return b}(d.OuterSubscriber)}var eg=!1;function fg(){eg||(eg=!0,dg());return cg.exports}var gg={},hg={exports:gg};function ig(){var a=fg();gg._if=a.IfObservable.create}var jg=!1;function kg(){jg||(jg=!0,ig());return hg.exports}c={};var lg={exports:c};function mg(){var a=D(),b=kg();a.Observable["if"]=b._if}var ng=!1;function og(){ng||(ng=!0,mg());return lg.exports}var pg={},qg={exports:pg};function rg(){var a=u();function b(b){return!a.isArray(b)&&b-parseFloat(b)+1>=0}pg.isNumeric=b}var sg=!1;function P(){sg||(sg=!0,rg());return qg.exports}var tg={},ug={exports:tg};function vg(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=z();b=function(b){a(c,b);function c(a,c){b.call(this)}c.prototype.schedule=function(a,b){b===void 0;return this};return c}(b.Subscription);tg.Action=b}var wg=!1;function xg(){wg||(wg=!0,vg());return ug.exports}var yg={},zg={exports:yg};function Ag(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=k(),c=xg();c=function(c){a(d,c);function d(a,b){c.call(this,a,b),this.scheduler=a,this.work=b,this.pending=!1}d.prototype.schedule=function(a,b){b===void 0&&(b=0);if(this.closed)return this;this.state=a;this.pending=!0;a=this.id;var c=this.scheduler;a!=null&&(this.id=this.recycleAsyncId(c,a,b));this.delay=b;this.id=this.id||this.requestAsyncId(c,this.id,b);return this};d.prototype.requestAsyncId=function(a,c,d){d===void 0&&(d=0);return b.root.setInterval(a.flush.bind(a,this),d)};d.prototype.recycleAsyncId=function(a,c,d){d===void 0&&(d=0);return d!==null&&this.delay===d&&this.pending===!1?c:b.root.clearInterval(c)&&void 0||void 0};d.prototype.execute=function(a,b){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;a=this._execute(a,b);if(a)return a;else this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))};d.prototype._execute=function(a,b){b=!1;var c=void 0;try{this.work(a)}catch(a){b=!0,c=!!a&&a||new Error(a)}if(b){this.unsubscribe();return c}};d.prototype._unsubscribe=function(){var a=this.id,b=this.scheduler,c=b.actions,d=c.indexOf(this);this.work=null;this.state=null;this.pending=!1;this.scheduler=null;d!==-1&&c.splice(d,1);a!=null&&(this.id=this.recycleAsyncId(b,a,null));this.delay=null};return d}(c.Action);yg.AsyncAction=c}var Bg=!1;function Q(){Bg||(Bg=!0,Ag());return zg.exports}var Cg={},Dg={exports:Cg};function Eg(){var a=function(){function a(b,c){c===void 0&&(c=a.now),this.SchedulerAction=b,this.now=c}a.prototype.schedule=function(a,b,c){b===void 0&&(b=0);return new this.SchedulerAction(this,a).schedule(c,b)};a.now=Date.now?Date.now:function(){return+new Date()};return a}();Cg.Scheduler=a}var Fg=!1;function Gg(){Fg||(Fg=!0,Eg());return Dg.exports}var Hg={},Ig={exports:Hg};function Jg(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=Gg();b=function(b){a(c,b);function c(){b.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}c.prototype.flush=function(a){var b=this.actions;if(this.active){b.push(a);return}var c;this.active=!0;do if(c=a.execute(a.state,a.delay))break;while(a=b.shift());this.active=!1;if(c){while(a=b.shift())a.unsubscribe();throw c}};return c}(b.Scheduler);Hg.AsyncScheduler=b}var Kg=!1;function R(){Kg||(Kg=!0,Jg());return Ig.exports}var Lg={},Mg={exports:Lg};function Ng(){var a=Q(),b=R();Lg.async=new b.AsyncScheduler(a.AsyncAction)}var Og=!1;function S(){Og||(Og=!0,Ng());return Mg.exports}var Pg={},Qg={exports:Pg};function Rg(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=P(),c=D(),d=S();c=function(c){a(e,c);function e(a,e){a===void 0&&(a=0),e===void 0&&(e=d.async),c.call(this),this.period=a,this.scheduler=e,(!b.isNumeric(a)||a<0)&&(this.period=0),(!e||typeof e.schedule!=="function")&&(this.scheduler=d.async)}e.create=function(a,b){a===void 0&&(a=0);b===void 0&&(b=d.async);return new e(a,b)};e.dispatch=function(a){var b=a.index,c=a.subscriber,d=a.period;c.next(b);if(c.closed)return;a.index+=1;this.schedule(a,d)};e.prototype._subscribe=function(a){var b=0,c=this.period,d=this.scheduler;a.add(d.schedule(e.dispatch,c,{index:b,subscriber:a,period:c}))};return e}(c.Observable);Pg.IntervalObservable=c}var Sg=!1;function Tg(){Sg||(Sg=!0,Rg());return Qg.exports}var Ug={},Vg={exports:Ug};function Wg(){var a=Tg();Ug.interval=a.IntervalObservable.create}var Xg=!1;function Yg(){Xg||(Xg=!0,Wg());return Vg.exports}d={};var Zg={exports:d};function $g(){var a=D(),b=Yg();a.Observable.interval=b.interval}var ah=!1;function bh(){ah||(ah=!0,$g());return Zg.exports}var ch={},dh={exports:ch};function eh(){var a=D(),b=H(),c=$d(),d=F();function e(){var a=[];for(var b=0;b<arguments.length;b++)a[b-0]=arguments[b];return function(b){return b.lift.call(f.apply(void 0,[b].concat(a)))}}ch.merge=e;function f(){var e=[];for(var f=0;f<arguments.length;f++)e[f-0]=arguments[f];var g=Number.POSITIVE_INFINITY,h=null,i=e[e.length-1];d.isScheduler(i)?(h=e.pop(),e.length>1&&typeof e[e.length-1]==="number"&&(g=e.pop())):typeof i==="number"&&(g=e.pop());return h===null&&e.length===1&&e[0]instanceof a.Observable?e[0]:c.mergeAll(g)(new b.ArrayObservable(e,h))}ch.mergeStatic=f}var fh=!1;function gh(){fh||(fh=!0,eh());return dh.exports}var hh={},ih={exports:hh};function jh(){var a=gh(),b=gh();hh.mergeStatic=b.mergeStatic;function c(){var b=[];for(var c=0;c<arguments.length;c++)b[c-0]=arguments[c];return a.merge.apply(void 0,b)(this)}hh.merge=c}var kh=!1;function lh(){kh||(kh=!0,jh());return ih.exports}var mh={},nh={exports:mh};function oh(){var a=lh();mh.merge=a.mergeStatic}var ph=!1;function qh(){ph||(ph=!0,oh());return nh.exports}f={};var rh={exports:f};function sh(){var a=D(),b=qh();a.Observable.merge=b.merge}var th=!1;function uh(){th||(th=!0,sh());return rh.exports}var vh={},wh={exports:vh};function xh(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=u(),c=H(),d=I(),e=L();function f(){var a=[];for(var d=0;d<arguments.length;d++)a[d-0]=arguments[d];if(a.length===1)if(b.isArray(a[0]))a=a[0];else return a[0];return new c.ArrayObservable(a).lift(new g())}vh.race=f;var g=function(){function a(){}a.prototype.call=function(a,b){return b.subscribe(new h(a))};return a}();vh.RaceOperator=g;var h=function(c){a(b,c);function b(a){c.call(this,a),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}b.prototype._next=function(a){this.observables.push(a)};b.prototype._complete=function(){var a=this.observables,b=a.length;if(b===0)this.destination.complete();else{for(var c=0;c<b&&!this.hasFirst;c++){var d=a[c];d=e.subscribeToResult(this,d,d,c);this.subscriptions&&this.subscriptions.push(d);this.add(d)}this.observables=null}};b.prototype.notifyNext=function(a,b,c,d,e){if(!this.hasFirst){this.hasFirst=!0;for(var a=0;a<this.subscriptions.length;a++)if(a!==c){d=this.subscriptions[a];d.unsubscribe();this.remove(d)}this.subscriptions=null}this.destination.next(b)};return b}(d.OuterSubscriber);vh.RaceSubscriber=h}var yh=!1;function zh(){yh||(yh=!0,xh());return wh.exports}c={};var Ah={exports:c};function Bh(){var a=D(),b=zh();a.Observable.race=b.race}var Ch=!1;function Dh(){Ch||(Ch=!0,Bh());return Ah.exports}var Eh={},Fh={exports:Eh};function Gh(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D(),c=Ua();b=function(b){a(d,b);function d(){b.call(this)}d.create=function(){return new d()};d.prototype._subscribe=function(a){c.noop()};return d}(b.Observable);Eh.NeverObservable=b}var Hh=!1;function Ih(){Hh||(Hh=!0,Gh());return Fh.exports}var Jh={},Kh={exports:Jh};function Lh(){var a=Ih();Jh.never=a.NeverObservable.create}var Mh=!1;function Nh(){Mh||(Mh=!0,Lh());return Kh.exports}d={};var Oh={exports:d};function Ph(){var a=D(),b=Nh();a.Observable.never=b.never}var Qh=!1;function Rh(){Qh||(Qh=!0,Ph());return Oh.exports}f={};var Sh={exports:f};function Th(){var a=D(),b=fd();a.Observable.of=b.of}var Uh=!1;function Vh(){Uh||(Uh=!0,Th());return Sh.exports}var Wh={},Xh={exports:Wh};function Yh(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=Hd(),c=u(),d=I(),e=L();function f(){var a=[];for(var b=0;b<arguments.length;b++)a[b-0]=arguments[b];a.length===1&&c.isArray(a[0])&&(a=a[0]);return function(b){return b.lift(new h(a))}}Wh.onErrorResumeNext=f;function g(){var a=[];for(var d=0;d<arguments.length;d++)a[d-0]=arguments[d];var e;a.length===1&&c.isArray(a[0])&&(a=a[0]);e=a.shift();return new b.FromObservable(e,null).lift(new h(a))}Wh.onErrorResumeNextStatic=g;var h=function(){function a(a){this.nextSources=a}a.prototype.call=function(a,b){return b.subscribe(new i(a,this.nextSources))};return a}(),i=function(c){a(b,c);function b(a,b){c.call(this,a),this.destination=a,this.nextSources=b}b.prototype.notifyError=function(a,b){this.subscribeToNextSource()};b.prototype.notifyComplete=function(a){this.subscribeToNextSource()};b.prototype._error=function(a){this.subscribeToNextSource()};b.prototype._complete=function(){this.subscribeToNextSource()};b.prototype.subscribeToNextSource=function(){var a=this.nextSources.shift();a?this.add(e.subscribeToResult(this,a)):this.destination.complete()};return b}(d.OuterSubscriber)}var Zh=!1;function $h(){Zh||(Zh=!0,Yh());return Xh.exports}var ai={},bi={exports:ai};function ci(){var a=$h();ai.onErrorResumeNext=a.onErrorResumeNextStatic}var di=!1;function ei(){di||(di=!0,ci());return bi.exports}c={};var fi={exports:c};function gi(){var a=D(),b=ei();a.Observable.onErrorResumeNext=b.onErrorResumeNext}var hi=!1;function ii(){hi||(hi=!0,gi());return fi.exports}var ji={},ki={exports:ji};function li(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D();function c(a){var b=a.obj,c=a.keys,d=a.length,e=a.index,f=a.subscriber;if(e===d){f.complete();return}d=c[e];f.next([d,b[d]]);a.index=e+1;this.schedule(a)}b=function(b){a(d,b);function d(a,c){b.call(this),this.obj=a,this.scheduler=c,this.keys=Object.keys(a)}d.create=function(a,b){return new d(a,b)};d.prototype._subscribe=function(a){var b=this,d=b.keys;b=b.scheduler;var e=d.length;if(b)return b.schedule(c,0,{obj:this.obj,keys:d,length:e,index:0,subscriber:a});else{for(var b=0;b<e;b++){var f=d[b];a.next([f,this.obj[f]])}a.complete()}};return d}(b.Observable);ji.PairsObservable=b}var mi=!1;function ni(){mi||(mi=!0,li());return ki.exports}var oi={},pi={exports:oi};function qi(){var a=ni();oi.pairs=a.PairsObservable.create}var ri=!1;function si(){ri||(ri=!0,qi());return pi.exports}d={};var ti={exports:d};function ui(){var a=D(),b=si();a.Observable.pairs=b.pairs}var vi=!1;function wi(){vi||(vi=!0,ui());return ti.exports}var xi={},yi={exports:xi};function zi(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D();b=function(b){a(c,b);function c(a,c,d){b.call(this),this.start=a,this._count=c,this.scheduler=d}c.create=function(a,b,d){a===void 0&&(a=0);b===void 0&&(b=0);return new c(a,b,d)};c.dispatch=function(a){var b=a.start,c=a.index,d=a.count,e=a.subscriber;if(c>=d){e.complete();return}e.next(b);if(e.closed)return;a.index=c+1;a.start=b+1;this.schedule(a)};c.prototype._subscribe=function(a){var b=0,d=this.start,e=this._count,f=this.scheduler;if(f)return f.schedule(c.dispatch,0,{index:b,count:e,start:d,subscriber:a});else do{if(b++>=e){a.complete();break}a.next(d++);if(a.closed)break}while(!0)};return c}(b.Observable);xi.RangeObservable=b}var Ai=!1;function Bi(){Ai||(Ai=!0,zi());return yi.exports}var Ci={},Di={exports:Ci};function Ei(){var a=Bi();Ci.range=a.RangeObservable.create}var Fi=!1;function Gi(){Fi||(Fi=!0,Ei());return Di.exports}f={};var Hi={exports:f};function Ii(){var a=D(),b=Gi();a.Observable.range=b.range}var Ji=!1;function Ki(){Ji||(Ji=!0,Ii());return Hi.exports}var Li={},Mi={exports:Li};function Ni(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D(),c=L(),d=I();b=function(b){a(c,b);function c(a,c){b.call(this),this.resourceFactory=a,this.observableFactory=c}c.create=function(a,b){return new c(a,b)};c.prototype._subscribe=function(a){var b=this,c=b.resourceFactory;b=b.observableFactory;try{c=c();return new e(a,c,b)}catch(b){a.error(b)}};return c}(b.Observable);Li.UsingObservable=b;var e=function(d){a(b,d);function b(a,b,c){d.call(this,a),this.resource=b,this.observableFactory=c,a.add(b),this.tryUse()}b.prototype.tryUse=function(){try{var a=this.observableFactory.call(this,this.resource);a&&this.add(c.subscribeToResult(this,a))}catch(a){this._error(a)}};return b}(d.OuterSubscriber)}var Oi=!1;function Pi(){Oi||(Oi=!0,Ni());return Mi.exports}var Qi={},Ri={exports:Qi};function Si(){var a=Pi();Qi.using=a.UsingObservable.create}var Ti=!1;function Ui(){Ti||(Ti=!0,Si());return Ri.exports}c={};var Vi={exports:c};function Wi(){var a=D(),b=Ui();a.Observable.using=b.using}var Xi=!1;function Yi(){Xi||(Xi=!0,Wi());return Vi.exports}var Zi={},$i={exports:Zi};function aj(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D();b=function(b){a(c,b);function c(a,c){b.call(this),this.error=a,this.scheduler=c}c.create=function(a,b){return new c(a,b)};c.dispatch=function(a){var b=a.error;a=a.subscriber;a.error(b)};c.prototype._subscribe=function(a){var b=this.error,d=this.scheduler;a.syncErrorThrowable=!0;if(d)return d.schedule(c.dispatch,0,{error:b,subscriber:a});else a.error(b)};return c}(b.Observable);Zi.ErrorObservable=b}var bj=!1;function cj(){bj||(bj=!0,aj());return $i.exports}var dj={},ej={exports:dj};function fj(){var a=cj();dj._throw=a.ErrorObservable.create}var gj=!1;function hj(){gj||(gj=!0,fj());return ej.exports}d={};var ij={exports:d};function jj(){var a=D(),b=hj();a.Observable["throw"]=b._throw}var kj=!1;function lj(){kj||(kj=!0,jj());return ij.exports}var mj={},nj={exports:mj};function oj(){function a(a){return a instanceof Date&&!isNaN(+a)}mj.isDate=a}var pj=!1;function qj(){pj||(pj=!0,oj());return nj.exports}var rj={},sj={exports:rj};function tj(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=P(),c=D(),d=S(),e=F(),f=qj();c=function(c){a(g,c);function g(a,g,h){a===void 0&&(a=0),c.call(this),this.period=-1,this.dueTime=0,b.isNumeric(g)?this.period=Number(g)<1&&1||Number(g):e.isScheduler(g)&&(h=g),e.isScheduler(h)||(h=d.async),this.scheduler=h,this.dueTime=f.isDate(a)?+a-this.scheduler.now():a}g.create=function(a,b,c){a===void 0&&(a=0);return new g(a,b,c)};g.dispatch=function(a){var b=a.index,c=a.period,d=a.subscriber,e=this;d.next(b);if(d.closed)return;else if(c===-1)return d.complete();a.index=b+1;e.schedule(a,c)};g.prototype._subscribe=function(a){var b=0,c=this,d=c.period,e=c.dueTime;c=c.scheduler;return c.schedule(g.dispatch,e,{index:b,period:d,subscriber:a})};return g}(c.Observable);rj.TimerObservable=c}var uj=!1;function vj(){uj||(uj=!0,tj());return sj.exports}var wj={},xj={exports:wj};function yj(){var a=vj();wj.timer=a.TimerObservable.create}var zj=!1;function Aj(){zj||(zj=!0,yj());return xj.exports}f={};var Bj={exports:f};function Cj(){var a=D(),b=Aj();a.Observable.timer=b.timer}var Dj=!1;function Ej(){Dj||(Dj=!0,Cj());return Bj.exports}var T={},Fj={exports:T};function Gj(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=H(),c=u(),d=B(),e=I(),f=L(),g=K();function h(){var a=[];for(var b=0;b<arguments.length;b++)a[b-0]=arguments[b];return function(b){return b.lift.call(i.apply(void 0,[b].concat(a)))}}T.zip=h;function i(){var a=[];for(var c=0;c<arguments.length;c++)a[c-0]=arguments[c];var d=a[a.length-1];typeof d==="function"&&a.pop();return new b.ArrayObservable(a).lift(new j(d))}T.zipStatic=i;var j=function(){function a(a){this.project=a}a.prototype.call=function(a,b){return b.subscribe(new k(a,this.project))};return a}();T.ZipOperator=j;var k=function(d){a(b,d);function b(a,b,c){c===void 0&&(c=Object.create(null)),d.call(this,a),this.iterators=[],this.active=0,this.project=typeof b==="function"?b:null,this.values=c}b.prototype._next=function(a){var b=this.iterators;c.isArray(a)?b.push(new m(a)):typeof a[g.iterator]==="function"?b.push(new l(a[g.iterator]())):b.push(new n(this.destination,this,a))};b.prototype._complete=function(){var a=this.iterators,b=a.length;if(b===0){this.destination.complete();return}this.active=b;for(var c=0;c<b;c++){var d=a[c];d.stillUnsubscribed?this.add(d.subscribe(d,c)):this.active--}};b.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()};b.prototype.checkIterators=function(){var a=this.iterators,b=a.length,c=this.destination;for(var d=0;d<b;d++){var e=a[d];if(typeof e.hasValue==="function"&&!e.hasValue())return}var f=!1,g=[];for(var d=0;d<b;d++){var e=a[d],h=e.next();e.hasCompleted()&&(f=!0);if(h.done){c.complete();return}g.push(h.value)}this.project?this._tryProject(g):c.next(g);f&&c.complete()};b.prototype._tryProject=function(a){try{a=this.project.apply(this,a)}catch(a){this.destination.error(a);return}this.destination.next(a)};return b}(d.Subscriber);T.ZipSubscriber=k;var l=function(){function a(a){this.iterator=a,this.nextResult=a.next()}a.prototype.hasValue=function(){return!0};a.prototype.next=function(){var a=this.nextResult;this.nextResult=this.iterator.next();return a};a.prototype.hasCompleted=function(){var a=this.nextResult;return a&&a.done};return a}(),m=function(){function a(a){this.array=a,this.index=0,this.length=0,this.length=a.length}a.prototype[g.iterator]=function(){return this};a.prototype.next=function(a){a=this.index++;var b=this.array;return a<this.length?{value:b[a],done:!1}:{value:null,done:!0}};a.prototype.hasValue=function(){return this.array.length>this.index};a.prototype.hasCompleted=function(){return this.array.length===this.index};return a}(),n=function(c){a(b,c);function b(a,b,d){c.call(this,a),this.parent=b,this.observable=d,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}b.prototype[g.iterator]=function(){return this};b.prototype.next=function(){var a=this.buffer;if(a.length===0&&this.isComplete)return{value:null,done:!0};else return{value:a.shift(),done:!1}};b.prototype.hasValue=function(){return this.buffer.length>0};b.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete};b.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()};b.prototype.notifyNext=function(a,b,c,d,e){this.buffer.push(b),this.parent.checkIterators()};b.prototype.subscribe=function(a,b){return f.subscribeToResult(this,this.observable,this,b)};return b}(e.OuterSubscriber)}var Hj=!1;function Ij(){Hj||(Hj=!0,Gj());return Fj.exports}var Jj={},Kj={exports:Jj};function Lj(){var a=Ij();Jj.zip=a.zipStatic}var Mj=!1;function Nj(){Mj||(Mj=!0,Lj());return Kj.exports}c={};var Oj={exports:c};function Pj(){var a=D(),b=Nj();a.Observable.zip=b.zip}var Qj=!1;function Rj(){Qj||(Qj=!0,Pj());return Oj.exports}var Sj={},Tj={exports:Sj};function Uj(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(a,b){return function(c){if(typeof a!=="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return c.lift(new d(a,b))}}Sj.map=c;var d=function(){function a(a,b){this.project=a,this.thisArg=b}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.project,this.thisArg))};return a}();Sj.MapOperator=d;var e=function(c){a(b,c);function b(a,b,d){c.call(this,a),this.project=b,this.count=0,this.thisArg=d||this}b.prototype._next=function(a){try{a=this.project.call(this.thisArg,a,this.count++)}catch(a){this.destination.error(a);return}this.destination.next(a)};return b}(b.Subscriber)}var Vj=!1;function U(){Vj||(Vj=!0,Uj());return Tj.exports}var V={},Wj={exports:V};function Xj(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=k(),c=y(),d=x(),e=D(),f=B(),g=U();function h(){if(b.root.XMLHttpRequest)return new b.root.XMLHttpRequest();else if(b.root.XDomainRequest)return new b.root.XDomainRequest();else throw new Error("CORS is not supported by your browser")}function i(){if(b.root.XMLHttpRequest)return new b.root.XMLHttpRequest();else{var a=void 0;try{var c=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];for(var d=0;d<3;d++)try{a=c[d];if(new b.root.ActiveXObject(a))break}catch(a){}return new b.root.ActiveXObject(a)}catch(a){throw new Error("XMLHttpRequest is not supported by your browser")}}}function j(a,b){b===void 0&&(b=null);return new r({method:"GET",url:a,headers:b})}V.ajaxGet=j;function l(a,b,c){return new r({method:"POST",url:a,body:b,headers:c})}V.ajaxPost=l;function m(a,b){return new r({method:"DELETE",url:a,headers:b})}V.ajaxDelete=m;function n(a,b,c){return new r({method:"PUT",url:a,body:b,headers:c})}V.ajaxPut=n;function o(a,b,c){return new r({method:"PATCH",url:a,body:b,headers:c})}V.ajaxPatch=o;var p=g.map(function(a,b){return a.response});function q(a,b){return p(new r({method:"GET",url:a,responseType:"json",headers:b}))}V.ajaxGetJSON=q;var r=function(c){a(b,c);function b(a){c.call(this);var b={async:!0,createXHR:function(){return this.crossDomain?h.call(this):i()},crossDomain:!1,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if(typeof a==="string")b.url=a;else for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);this.request=b}b.prototype._subscribe=function(a){return new s(a,this.request)};b.create=function(){var a=function(a){return new b(a)};a.get=j;a.post=l;a["delete"]=m;a.put=n;a.patch=o;a.getJSON=q;return a}();return b}(e.Observable);V.AjaxObservable=r;var s=function(f){a(e,f);function e(a,c){f.call(this,a);this.request=c;this.done=!1;a=c.headers=c.headers||{};!c.crossDomain&&!a["X-Requested-With"]&&(a["X-Requested-With"]="XMLHttpRequest");!("Content-Type"in a)&&!(b.root.FormData&&c.body instanceof b.root.FormData)&&typeof c.body!=="undefined"&&(a["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8");c.body=this.serializeBody(c.body,c.headers["Content-Type"]);this.send()}e.prototype.next=function(a){this.done=!0;var b=this,c=b.xhr,d=b.request;b=b.destination;a=new t(a,c,d);b.next(a)};e.prototype.send=function(){var a=this,b=a.request;a=a.request;var e=a.user,f=a.method,g=a.url,h=a.async,i=a.password,j=a.headers;a=a.body;var k=b.createXHR;k=c.tryCatch(k).call(b);if(k===d.errorObject)this.error(d.errorObject.e);else{this.xhr=k;this.setupEvents(k,b);e?e=c.tryCatch(k.open).call(k,f,g,h,e,i):e=c.tryCatch(k.open).call(k,f,g,h);if(e===d.errorObject){this.error(d.errorObject.e);return null}h&&(k.timeout=b.timeout,k.responseType=b.responseType);"withCredentials"in k&&(k.withCredentials=!!b.withCredentials);this.setHeaders(k,j);e=a?c.tryCatch(k.send).call(k,a):c.tryCatch(k.send).call(k);if(e===d.errorObject){this.error(d.errorObject.e);return null}}return k};e.prototype.serializeBody=function(a,c){if(!a||typeof a==="string")return a;else if(b.root.FormData&&a instanceof b.root.FormData)return a;if(c){var d=c.indexOf(";");d!==-1&&(c=c.substring(0,d))}switch(c){case"application/x-www-form-urlencoded":return Object.keys(a).map(function(b){return encodeURI(b)+"="+encodeURI(a[b])}).join("&");case"application/json":return JSON.stringify(a);default:return a}};e.prototype.setHeaders=function(a,b){for(var c in b)b.hasOwnProperty(c)&&a.setRequestHeader(c,b[c])};e.prototype.setupEvents=function(a,c){var d=c.progressSubscriber;function e(b){var c=e,d=c.subscriber,a=c.progressSubscriber;c=c.request;a&&a.error(b);d.error(new w(this,c))}a.ontimeout=e;e.request=c;e.subscriber=this;e.progressSubscriber=d;if(a.upload&&"withCredentials"in a){if(d){var f;f=function(b){var a=f.progressSubscriber;a.next(b)};b.root.XDomainRequest?a.onprogress=f:a.upload.onprogress=f;f.progressSubscriber=d}var g;g=function(b){var c=g,a=c.progressSubscriber,d=c.subscriber;c=c.request;a&&a.error(b);d.error(new u("ajax error",this,c))};a.onerror=g;g.request=c;g.subscriber=this;g.progressSubscriber=d}function h(b){var c=h,d=c.subscriber,a=c.progressSubscriber;c=c.request;if(this.readyState===4){var e=this.status===1223?204:this.status,f=this.responseType==="text"?this.response||this.responseText:this.response;e===0&&(e=f?200:0);200<=e&&e<300?(a&&a.complete(),d.next(b),d.complete()):(a&&a.error(b),d.error(new u("ajax error "+e,this,c)))}}a.onreadystatechange=h;h.subscriber=this;h.progressSubscriber=d;h.request=c};e.prototype.unsubscribe=function(){var a=this,b=a.done;a=a.xhr;!b&&a&&a.readyState!==4&&typeof a.abort==="function"&&a.abort();f.prototype.unsubscribe.call(this)};return e}(f.Subscriber);V.AjaxSubscriber=s;var t=function(){function a(a,b,c){this.originalEvent=a,this.xhr=b,this.request=c,this.status=b.status,this.responseType=b.responseType||c.responseType,this.response=v(this.responseType,b)}return a}();V.AjaxResponse=t;var u=function(c){a(b,c);function b(a,b,d){c.call(this,a),this.message=a,this.xhr=b,this.request=d,this.status=b.status,this.responseType=b.responseType||d.responseType,this.response=v(this.responseType,b)}return b}(Error);V.AjaxError=u;function v(a,b){switch(a){case"json":if("response"in b)return b.responseType?b.response:JSON.parse(b.response||b.responseText||"null");else return JSON.parse(b.responseText||"null");case"xml":return b.responseXML;case"text":default:return"response"in b?b.response:b.responseText}}var w=function(c){a(b,c);function b(a,b){c.call(this,"ajax timeout",a,b)}return b}(u);V.AjaxTimeoutError=w}var Yj=!1;function Zj(){Yj||(Yj=!0,Xj());return Wj.exports}var $j={},ak={exports:$j};function bk(){var a=Zj();$j.ajax=a.AjaxObservable.create}var ck=!1;function dk(){ck||(ck=!0,bk());return ak.exports}d={};var ek={exports:d};function fk(){var a=D(),b=dk();a.Observable.ajax=b.ajax}var gk=!1;function hk(){gk||(gk=!0,fk());return ek.exports}var ik={},jk={exports:ik};function kk(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=Q();b=function(b){a(c,b);function c(a,c){b.call(this,a,c),this.scheduler=a,this.work=c}c.prototype.schedule=function(a,c){c===void 0&&(c=0);if(c>0)return b.prototype.schedule.call(this,a,c);this.delay=c;this.state=a;this.scheduler.flush(this);return this};c.prototype.execute=function(a,c){return c>0||this.closed?b.prototype.execute.call(this,a,c):this._execute(a,c)};c.prototype.requestAsyncId=function(a,c,d){d===void 0&&(d=0);return d!==null&&d>0||d===null&&this.delay>0?b.prototype.requestAsyncId.call(this,a,c,d):a.flush(this)};return c}(b.AsyncAction);ik.QueueAction=b}var lk=!1;function mk(){lk||(lk=!0,kk());return jk.exports}var nk={},ok={exports:nk};function pk(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=R();b=function(b){a(c,b);function c(){b.apply(this,arguments)}return c}(b.AsyncScheduler);nk.QueueScheduler=b}var qk=!1;function rk(){qk||(qk=!0,pk());return ok.exports}var sk={},tk={exports:sk};function uk(){var a=mk(),b=rk();sk.queue=new b.QueueScheduler(a.QueueAction)}var vk=!1;function wk(){vk||(vk=!0,uk());return tk.exports}var xk={},yk={exports:xk};function zk(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=E(),c=wk(),d=z(),e=Cd(),f=hb(),g=mb();b=function(b){a(i,b);function i(a,c,d){a===void 0&&(a=Number.POSITIVE_INFINITY),c===void 0&&(c=Number.POSITIVE_INFINITY),b.call(this),this.scheduler=d,this._events=[],this._bufferSize=a<1?1:a,this._windowTime=c<1?1:c}i.prototype.next=function(a){var c=this._getNow();this._events.push(new h(c,a));this._trimBufferThenGetEvents();b.prototype.next.call(this,a)};i.prototype._subscribe=function(a){var b=this._trimBufferThenGetEvents(),c=this.scheduler,h;if(this.closed)throw new f.ObjectUnsubscribedError();else this.hasError?h=d.Subscription.EMPTY:this.isStopped?h=d.Subscription.EMPTY:(this.observers.push(a),h=new g.SubjectSubscription(this,a));c&&a.add(a=new e.ObserveOnSubscriber(a,c));c=b.length;for(var i=0;i<c&&!a.closed;i++)a.next(b[i].value);this.hasError?a.error(this.thrownError):this.isStopped&&a.complete();return h};i.prototype._getNow=function(){return(this.scheduler||c.queue).now()};i.prototype._trimBufferThenGetEvents=function(){var a=this._getNow(),b=this._bufferSize,c=this._windowTime,d=this._events,e=d.length,f=0;while(f<e){if(a-d[f].time<c)break;f++}e>b&&(f=Math.max(f,e-b));f>0&&d.splice(0,f);return d};return i}(b.Subject);xk.ReplaySubject=b;var h=function(){function a(a,b){this.time=a,this.value=b}return a}()}var Ak=!1;function Bk(){Ak||(Ak=!0,zk());return yk.exports}var Ck={},Dk={exports:Ck};function Ek(){var a=k();function b(a){var b=[];for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=b.length;for(var e=0;e<d;e++){var f=b[e];for(var g in f)f.hasOwnProperty(g)&&(a[g]=f[g])}return a}Ck.assignImpl=b;function c(a){return a.Object.assign||b}Ck.getAssign=c;Ck.assign=c(a.root)}var Fk=!1;function Gk(){Fk||(Fk=!0,Ek());return Dk.exports}var Hk={},Ik={exports:Hk};function Jk(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=E(),c=B(),d=D(),e=z(),f=k(),g=Bk(),h=y(),i=x(),j=Gk(),l=function(l){a(k,l);function k(a,c){if(a instanceof d.Observable)l.call(this,c,a);else{l.call(this);this.WebSocketCtor=f.root.WebSocket;this._output=new b.Subject();typeof a==="string"?this.url=a:j.assign(this,a);if(!this.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new g.ReplaySubject()}}k.prototype.resultSelector=function(a){return JSON.parse(a.data)};k.create=function(a){return new k(a)};k.prototype.lift=function(a){var b=new k(this,this.destination);b.operator=a;return b};k.prototype._resetState=function(){this.socket=null,this.source||(this.destination=new g.ReplaySubject()),this._output=new b.Subject()};k.prototype.multiplex=function(a,b,c){var e=this;return new d.Observable(function(d){var f=h.tryCatch(a)();f===i.errorObject?d.error(i.errorObject.e):e.next(f);var g=e.subscribe(function(b){var a=h.tryCatch(c)(b);a===i.errorObject?d.error(i.errorObject.e):a&&d.next(b)},function(a){return d.error(a)},function(){return d.complete()});return function(){var a=h.tryCatch(b)();a===i.errorObject?d.error(i.errorObject.e):e.next(a);g.unsubscribe()}})};k.prototype._connectSocket=function(){var a=this,b=this.WebSocketCtor,d=this._output,f=null;try{f=this.protocol?new b(this.url,this.protocol):new b(this.url),this.socket=f,this.binaryType&&(this.socket.binaryType=this.binaryType)}catch(a){d.error(a);return}var j=new e.Subscription(function(){a.socket=null,f&&f.readyState===1&&f.close()});f.onopen=function(b){var e=a.openObserver;e&&e.next(b);e=a.destination;a.destination=c.Subscriber.create(function(a){return f.readyState===1&&f.send(a)},function(b){var c=a.closingObserver;c&&c.next(void 0);b&&b.code?f.close(b.code,b.reason):d.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }"));a._resetState()},function(){var b=a.closingObserver;b&&b.next(void 0);f.close();a._resetState()});e&&e instanceof g.ReplaySubject&&j.add(e.subscribe(a.destination))};f.onerror=function(b){a._resetState(),d.error(b)};f.onclose=function(b){a._resetState();var c=a.closeObserver;c&&c.next(b);b.wasClean?d.complete():d.error(b)};f.onmessage=function(b){b=h.tryCatch(a.resultSelector)(b);b===i.errorObject?d.error(i.errorObject.e):d.next(b)}};k.prototype._subscribe=function(a){var b=this,c=this.source;if(c)return c.subscribe(a);this.socket||this._connectSocket();c=new e.Subscription();c.add(this._output.subscribe(a));c.add(function(){var a=b.socket;b._output.observers.length===0&&(a&&a.readyState===1&&a.close(),b._resetState())});return c};k.prototype.unsubscribe=function(){var a=this,b=a.source;a=a.socket;a&&a.readyState===1&&(a.close(),this._resetState());l.prototype.unsubscribe.call(this);b||(this.destination=new g.ReplaySubject())};return k}(b.AnonymousSubject);Hk.WebSocketSubject=l}var Kk=!1;function Lk(){Kk||(Kk=!0,Jk());return Ik.exports}var Mk={},Nk={exports:Mk};function Ok(){var a=Lk();Mk.webSocket=a.WebSocketSubject.create}var Pk=!1;function Qk(){Pk||(Pk=!0,Ok());return Nk.exports}f={};var Rk={exports:f};function Sk(){var a=D(),b=Qk();a.Observable.webSocket=b.webSocket}var Tk=!1;function Uk(){Tk||(Tk=!0,Sk());return Rk.exports}var Vk={},Wk={exports:Vk};function Xk(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=I(),c=L();function d(a){return function(b){return b.lift(new e(a))}}Vk.buffer=d;var e=function(){function a(a){this.closingNotifier=a}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.closingNotifier))};return a}(),f=function(d){a(b,d);function b(a,b){d.call(this,a),this.buffer=[],this.add(c.subscribeToResult(this,b))}b.prototype._next=function(a){this.buffer.push(a)};b.prototype.notifyNext=function(a,b,c,d,e){a=this.buffer;this.buffer=[];this.destination.next(a)};return b}(b.OuterSubscriber)}var Yk=!1;function Zk(){Yk||(Yk=!0,Xk());return Wk.exports}var $k={},al={exports:$k};function bl(){var a=Zk();function b(b){return a.buffer(b)(this)}$k.buffer=b}var cl=!1;function dl(){cl||(cl=!0,bl());return al.exports}c={};var el={exports:c};function fl(){var a=D(),b=dl();a.Observable.prototype.buffer=b.buffer}var gl=!1;function hl(){gl||(gl=!0,fl());return el.exports}var il={},jl={exports:il};function kl(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(a,b){b===void 0&&(b=null);return function(c){return c.lift(new d(a,b))}}il.bufferCount=c;var d=function(){function a(a,b){this.bufferSize=a,this.startBufferEvery=b,!b||a===b?this.subscriberClass=e:this.subscriberClass=f}a.prototype.call=function(a,b){return b.subscribe(new this.subscriberClass(a,this.bufferSize,this.startBufferEvery))};return a}(),e=function(c){a(b,c);function b(a,b){c.call(this,a),this.bufferSize=b,this.buffer=[]}b.prototype._next=function(a){var b=this.buffer;b.push(a);b.length==this.bufferSize&&(this.destination.next(b),this.buffer=[])};b.prototype._complete=function(){var a=this.buffer;a.length>0&&this.destination.next(a);c.prototype._complete.call(this)};return b}(b.Subscriber),f=function(c){a(b,c);function b(a,b,d){c.call(this,a),this.bufferSize=b,this.startBufferEvery=d,this.buffers=[],this.count=0}b.prototype._next=function(a){var b=this,c=b.bufferSize,d=b.startBufferEvery,e=b.buffers;b=b.count;this.count++;b%d===0&&e.push([]);for(var b=e.length;b--;){d=e[b];d.push(a);d.length===c&&(e.splice(b,1),this.destination.next(d))}};b.prototype._complete=function(){var a=this,b=a.buffers;a=a.destination;while(b.length>0){var d=b.shift();d.length>0&&a.next(d)}c.prototype._complete.call(this)};return b}(b.Subscriber)}var ll=!1;function ml(){ll||(ll=!0,kl());return jl.exports}var nl={},ol={exports:nl};function pl(){var a=ml();function b(b,c){c===void 0&&(c=null);return a.bufferCount(b,c)(this)}nl.bufferCount=b}var ql=!1;function rl(){ql||(ql=!0,pl());return ol.exports}d={};var sl={exports:d};function tl(){var a=D(),b=rl();a.Observable.prototype.bufferCount=b.bufferCount}var ul=!1;function vl(){ul||(ul=!0,tl());return sl.exports}var wl={},xl={exports:wl};function yl(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=S(),c=B(),d=F();function e(a){var c=arguments.length,e=b.async;d.isScheduler(arguments[arguments.length-1])&&(e=arguments[arguments.length-1],c--);var g=null;c>=2&&(g=arguments[1]);var h=Number.POSITIVE_INFINITY;c>=3&&(h=arguments[2]);return function(b){return b.lift(new f(a,g,h,e))}}wl.bufferTime=e;var f=function(){function a(a,b,c,d){this.bufferTimeSpan=a,this.bufferCreationInterval=b,this.maxBufferSize=c,this.scheduler=d}a.prototype.call=function(a,b){return b.subscribe(new h(a,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))};return a}(),g=function(){function a(){this.buffer=[]}return a}(),h=function(c){a(b,c);function b(a,b,d,e,f){c.call(this,a);this.bufferTimeSpan=b;this.bufferCreationInterval=d;this.maxBufferSize=e;this.scheduler=f;this.contexts=[];a=this.openContext();this.timespanOnly=d==null||d<0;if(this.timespanOnly){e={subscriber:this,context:a,bufferTimeSpan:b};this.add(a.closeAction=f.schedule(i,b,e))}else{e={subscriber:this,context:a};var g={bufferTimeSpan:b,bufferCreationInterval:d,subscriber:this,scheduler:f};this.add(a.closeAction=f.schedule(k,b,e));this.add(f.schedule(j,d,g))}}b.prototype._next=function(a){var b=this.contexts,c=b.length,d;for(var e=0;e<c;e++){var f=b[e],g=f.buffer;g.push(a);g.length==this.maxBufferSize&&(d=f)}d&&this.onBufferFull(d)};b.prototype._error=function(a){this.contexts.length=0,c.prototype._error.call(this,a)};b.prototype._complete=function(){var a=this,b=a.contexts;a=a.destination;while(b.length>0){var d=b.shift();a.next(d.buffer)}c.prototype._complete.call(this)};b.prototype._unsubscribe=function(){this.contexts=null};b.prototype.onBufferFull=function(a){this.closeContext(a);var b=a.closeAction;b.unsubscribe();this.remove(b);if(!this.closed&&this.timespanOnly){a=this.openContext();b=this.bufferTimeSpan;var c={subscriber:this,context:a,bufferTimeSpan:b};this.add(a.closeAction=this.scheduler.schedule(i,b,c))}};b.prototype.openContext=function(){var a=new g();this.contexts.push(a);return a};b.prototype.closeContext=function(a){this.destination.next(a.buffer);var b=this.contexts,c=b?b.indexOf(a):-1;c>=0&&b.splice(b.indexOf(a),1)};return b}(c.Subscriber);function i(a){var b=a.subscriber,c=a.context;c&&b.closeContext(c);b.closed||(a.context=b.openContext(),a.context.closeAction=this.schedule(a,a.bufferTimeSpan))}function j(a){var b=a.bufferCreationInterval,c=a.bufferTimeSpan,d=a.subscriber,e=a.scheduler,f=d.openContext(),g=this;d.closed||(d.add(f.closeAction=e.schedule(k,c,{subscriber:d,context:f})),g.schedule(a,b))}function k(a){var b=a.subscriber;a=a.context;b.closeContext(a)}}var zl=!1;function Al(){zl||(zl=!0,yl());return xl.exports}var Bl={},Cl={exports:Bl};function Dl(){var a=S(),b=F(),c=Al();function d(d){var e=arguments.length,f=a.async;b.isScheduler(arguments[arguments.length-1])&&(f=arguments[arguments.length-1],e--);var g=null;e>=2&&(g=arguments[1]);var h=Number.POSITIVE_INFINITY;e>=3&&(h=arguments[2]);return c.bufferTime(d,g,h,f)(this)}Bl.bufferTime=d}var El=!1;function Fl(){El||(El=!0,Dl());return Cl.exports}f={};var Gl={exports:f};function Hl(){var a=D(),b=Fl();a.Observable.prototype.bufferTime=b.bufferTime}var Il=!1;function Jl(){Il||(Il=!0,Hl());return Gl.exports}var Kl={},Ll={exports:Kl};function Ml(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=z(),c=L(),d=I();function e(a,b){return function(c){return c.lift(new f(a,b))}}Kl.bufferToggle=e;var f=function(){function a(a,b){this.openings=a,this.closingSelector=b}a.prototype.call=function(a,b){return b.subscribe(new g(a,this.openings,this.closingSelector))};return a}(),g=function(e){a(d,e);function d(a,b,d){e.call(this,a),this.openings=b,this.closingSelector=d,this.contexts=[],this.add(c.subscribeToResult(this,b))}d.prototype._next=function(a){var b=this.contexts,c=b.length;for(var d=0;d<c;d++)b[d].buffer.push(a)};d.prototype._error=function(a){var b=this.contexts;while(b.length>0){var c=b.shift();c.subscription.unsubscribe();c.buffer=null;c.subscription=null}this.contexts=null;e.prototype._error.call(this,a)};d.prototype._complete=function(){var a=this.contexts;while(a.length>0){var b=a.shift();this.destination.next(b.buffer);b.subscription.unsubscribe();b.buffer=null;b.subscription=null}this.contexts=null;e.prototype._complete.call(this)};d.prototype.notifyNext=function(a,b,c,d,e){a?this.closeBuffer(a):this.openBuffer(b)};d.prototype.notifyComplete=function(a){this.closeBuffer(a.context)};d.prototype.openBuffer=function(a){try{var b=this.closingSelector;b=b.call(this,a);b&&this.trySubscribe(b)}catch(a){this._error(a)}};d.prototype.closeBuffer=function(a){var b=this.contexts;if(b&&a){var c=a.buffer,d=a.subscription;this.destination.next(c);b.splice(b.indexOf(a),1);this.remove(d);d.unsubscribe()}};d.prototype.trySubscribe=function(a){var d=this.contexts,e=[],f=new b.Subscription();e={buffer:e,subscription:f};d.push(e);d=c.subscribeToResult(this,a,e);!d||d.closed?this.closeBuffer(e):(d.context=e,this.add(d),f.add(d))};return d}(d.OuterSubscriber)}var Nl=!1;function Ol(){Nl||(Nl=!0,Ml());return Ll.exports}var Pl={},Ql={exports:Pl};function Rl(){var a=Ol();function b(b,c){return a.bufferToggle(b,c)(this)}Pl.bufferToggle=b}var Sl=!1;function Tl(){Sl||(Sl=!0,Rl());return Ql.exports}c={};var Ul={exports:c};function Vl(){var a=D(),b=Tl();a.Observable.prototype.bufferToggle=b.bufferToggle}var Wl=!1;function Xl(){Wl||(Wl=!0,Vl());return Ul.exports}var Yl={},Zl={exports:Yl};function $l(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=z(),c=y(),d=x(),e=I(),f=L();function g(a){return function(b){return b.lift(new h(a))}}Yl.bufferWhen=g;var h=function(){function a(a){this.closingSelector=a}a.prototype.call=function(a,b){return b.subscribe(new i(a,this.closingSelector))};return a}(),i=function(g){a(e,g);function e(a,b){g.call(this,a),this.closingSelector=b,this.subscribing=!1,this.openBuffer()}e.prototype._next=function(a){this.buffer.push(a)};e.prototype._complete=function(){var a=this.buffer;a&&this.destination.next(a);g.prototype._complete.call(this)};e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1};e.prototype.notifyNext=function(a,b,c,d,e){this.openBuffer()};e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()};e.prototype.openBuffer=function(){var a=this.closingSubscription;a&&(this.remove(a),a.unsubscribe());var e=this.buffer;this.buffer&&this.destination.next(e);this.buffer=[];e=c.tryCatch(this.closingSelector)();e===d.errorObject?this.error(d.errorObject.e):(a=new b.Subscription(),this.closingSubscription=a,this.add(a),this.subscribing=!0,a.add(f.subscribeToResult(this,e)),this.subscribing=!1)};return e}(e.OuterSubscriber)}var am=!1;function bm(){am||(am=!0,$l());return Zl.exports}var cm={},dm={exports:cm};function em(){var a=bm();function b(b){return a.bufferWhen(b)(this)}cm.bufferWhen=b}var fm=!1;function gm(){fm||(fm=!0,em());return dm.exports}d={};var hm={exports:d};function im(){var a=D(),b=gm();a.Observable.prototype.bufferWhen=b.bufferWhen}var jm=!1;function km(){jm||(jm=!0,im());return hm.exports}var lm={},mm={exports:lm};function nm(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=I(),c=L();function d(a){return function(b){var c=new e(a);b=b.lift(c);return c.caught=b}}lm.catchError=d;var e=function(){function a(a){this.selector=a}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.selector,this.caught))};return a}(),f=function(d){a(b,d);function b(a,b,c){d.call(this,a),this.selector=b,this.caught=c}b.prototype.error=function(a){if(!this.isStopped){var b=void 0;try{b=this.selector(a,this.caught)}catch(a){d.prototype.error.call(this,a);return}this._unsubscribeAndRecycle();this.add(c.subscribeToResult(this,b))}};return b}(b.OuterSubscriber)}var om=!1;function pm(){om||(om=!0,nm());return mm.exports}var qm={},rm={exports:qm};function sm(){var a=pm();function b(b){return a.catchError(b)(this)}qm._catch=b}var tm=!1;function um(){tm||(tm=!0,sm());return rm.exports}f={};var vm={exports:f};function wm(){var a=D(),b=um();a.Observable.prototype["catch"]=b._catch;a.Observable.prototype._catch=b._catch}var xm=!1;function ym(){xm||(xm=!0,wm());return vm.exports}var zm={},Am={exports:zm};function Bm(){var a=Sc();function b(b){return function(c){return c.lift(new a.CombineLatestOperator(b))}}zm.combineAll=b}var Cm=!1;function Dm(){Cm||(Cm=!0,Bm());return Am.exports}var Em={},Fm={exports:Em};function Gm(){var a=Dm();function b(b){return a.combineAll(b)(this)}Em.combineAll=b}var Hm=!1;function Im(){Hm||(Hm=!0,Gm());return Fm.exports}c={};var Jm={exports:c};function Km(){var a=D(),b=Im();a.Observable.prototype.combineAll=b.combineAll}var Lm=!1;function Mm(){Lm||(Lm=!0,Km());return Jm.exports}var Nm={},Om={exports:Nm};function Pm(){var a=Sc();function b(){var b=[];for(var c=0;c<arguments.length;c++)b[c-0]=arguments[c];return a.combineLatest.apply(void 0,b)(this)}Nm.combineLatest=b}var Qm=!1;function Rm(){Qm||(Qm=!0,Pm());return Om.exports}d={};var Sm={exports:d};function Tm(){var a=D(),b=Rm();a.Observable.prototype.combineLatest=b.combineLatest}var Um=!1;function Vm(){Um||(Um=!0,Tm());return Sm.exports}var Wm={},Xm={exports:Wm};function Ym(){var a=je();function b(){var b=[];for(var c=0;c<arguments.length;c++)b[c-0]=arguments[c];return function(c){return c.lift.call(a.concat.apply(void 0,[c].concat(b)))}}Wm.concat=b}var Zm=!1;function $m(){Zm||(Zm=!0,Ym());return Xm.exports}var an={},bn={exports:an};function cn(){var a=$m();function b(){var b=[];for(var c=0;c<arguments.length;c++)b[c-0]=arguments[c];return a.concat.apply(void 0,b)(this)}an.concat=b}var dn=!1;function en(){dn||(dn=!0,cn());return bn.exports}f={};var fn={exports:f};function gn(){var a=D(),b=en();a.Observable.prototype.concat=b.concat}var hn=!1;function jn(){hn||(hn=!0,gn());return fn.exports}var kn={},ln={exports:kn};function mn(){var a=ee();function b(){return a.concatAll()(this)}kn.concatAll=b}var nn=!1;function on(){nn||(nn=!0,mn());return ln.exports}c={};var pn={exports:c};function qn(){var a=D(),b=on();a.Observable.prototype.concatAll=b.concatAll}var rn=!1;function sn(){rn||(rn=!0,qn());return pn.exports}var tn={},un={exports:tn};function vn(){var a=O();function b(b,c){return a.mergeMap(b,c,1)}tn.concatMap=b}var wn=!1;function xn(){wn||(wn=!0,vn());return un.exports}var yn={},zn={exports:yn};function An(){var a=xn();function b(b,c){return a.concatMap(b,c)(this)}yn.concatMap=b}var Bn=!1;function Cn(){Bn||(Bn=!0,An());return zn.exports}d={};var Dn={exports:d};function En(){var a=D(),b=Cn();a.Observable.prototype.concatMap=b.concatMap}var Fn=!1;function Gn(){Fn||(Fn=!0,En());return Dn.exports}var Hn={},In={exports:Hn};function Jn(){var a=xn();function b(b,c){return a.concatMap(function(){return b},c)}Hn.concatMapTo=b}var Kn=!1;function Ln(){Kn||(Kn=!0,Jn());return In.exports}var Mn={},Nn={exports:Mn};function On(){var a=Ln();function b(b,c){return a.concatMapTo(b,c)(this)}Mn.concatMapTo=b}var Pn=!1;function Qn(){Pn||(Pn=!0,On());return Nn.exports}f={};var Rn={exports:f};function Sn(){var a=D(),b=Qn();a.Observable.prototype.concatMapTo=b.concatMapTo}var Tn=!1;function Un(){Tn||(Tn=!0,Sn());return Rn.exports}var Vn={},Wn={exports:Vn};function Xn(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(a){return function(b){return b.lift(new d(a,b))}}Vn.count=c;var d=function(){function a(a,b){this.predicate=a,this.source=b}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.predicate,this.source))};return a}(),e=function(c){a(b,c);function b(a,b,d){c.call(this,a),this.predicate=b,this.source=d,this.count=0,this.index=0}b.prototype._next=function(a){this.predicate?this._tryPredicate(a):this.count++};b.prototype._tryPredicate=function(a){try{a=this.predicate(a,this.index++,this.source)}catch(a){this.destination.error(a);return}a&&this.count++};b.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()};return b}(b.Subscriber)}var Yn=!1;function Zn(){Yn||(Yn=!0,Xn());return Wn.exports}var $n={},ao={exports:$n};function bo(){var a=Zn();function b(b){return a.count(b)(this)}$n.count=b}var co=!1;function eo(){co||(co=!0,bo());return ao.exports}c={};var fo={exports:c};function go(){var a=D(),b=eo();a.Observable.prototype.count=b.count}var ho=!1;function io(){ho||(ho=!0,go());return fo.exports}var jo={},ko={exports:jo};function lo(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(){return function(a){return a.lift(new d())}}jo.dematerialize=c;var d=function(){function a(){}a.prototype.call=function(a,b){return b.subscribe(new e(a))};return a}(),e=function(c){a(b,c);function b(a){c.call(this,a)}b.prototype._next=function(a){a.observe(this.destination)};return b}(b.Subscriber)}var mo=!1;function no(){mo||(mo=!0,lo());return ko.exports}var oo={},po={exports:oo};function qo(){var a=no();function b(){return a.dematerialize()(this)}oo.dematerialize=b}var ro=!1;function so(){ro||(ro=!0,qo());return po.exports}d={};var to={exports:d};function uo(){var a=D(),b=so();a.Observable.prototype.dematerialize=b.dematerialize}var vo=!1;function wo(){vo||(vo=!0,uo());return to.exports}var xo={},yo={exports:xo};function zo(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=I(),c=L();function d(a){return function(b){return b.lift(new e(a))}}xo.debounce=d;var e=function(){function a(a){this.durationSelector=a}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.durationSelector))};return a}(),f=function(d){a(b,d);function b(a,b){d.call(this,a),this.durationSelector=b,this.hasValue=!1,this.durationSubscription=null}b.prototype._next=function(a){try{var b=this.durationSelector.call(this,a);b&&this._tryNext(a,b)}catch(a){this.destination.error(a)}};b.prototype._complete=function(){this.emitValue(),this.destination.complete()};b.prototype._tryNext=function(a,b){var d=this.durationSubscription;this.value=a;this.hasValue=!0;d&&(d.unsubscribe(),this.remove(d));d=c.subscribeToResult(this,b);d.closed||this.add(this.durationSubscription=d)};b.prototype.notifyNext=function(a,b,c,d,e){this.emitValue()};b.prototype.notifyComplete=function(){this.emitValue()};b.prototype.emitValue=function(){if(this.hasValue){var a=this.value,b=this.durationSubscription;b&&(this.durationSubscription=null,b.unsubscribe(),this.remove(b));this.value=null;this.hasValue=!1;d.prototype._next.call(this,a)}};return b}(b.OuterSubscriber)}var Ao=!1;function Bo(){Ao||(Ao=!0,zo());return yo.exports}var Co={},Do={exports:Co};function Eo(){var a=Bo();function b(b){return a.debounce(b)(this)}Co.debounce=b}var Fo=!1;function Go(){Fo||(Fo=!0,Eo());return Do.exports}f={};var Ho={exports:f};function Io(){var a=D(),b=Go();a.Observable.prototype.debounce=b.debounce}var Jo=!1;function Ko(){Jo||(Jo=!0,Io());return Ho.exports}var Lo={},Mo={exports:Lo};function No(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=S();function d(a,b){b===void 0&&(b=c.async);return function(c){return c.lift(new e(a,b))}}Lo.debounceTime=d;var e=function(){function a(a,b){this.dueTime=a,this.scheduler=b}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.dueTime,this.scheduler))};return a}(),f=function(c){a(b,c);function b(a,b,d){c.call(this,a),this.dueTime=b,this.scheduler=d,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}b.prototype._next=function(a){this.clearDebounce(),this.lastValue=a,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(g,this.dueTime,this))};b.prototype._complete=function(){this.debouncedNext(),this.destination.complete()};b.prototype.debouncedNext=function(){this.clearDebounce(),this.hasValue&&(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)};b.prototype.clearDebounce=function(){var a=this.debouncedSubscription;a!==null&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)};return b}(b.Subscriber);function g(a){a.debouncedNext()}}var Oo=!1;function Po(){Oo||(Oo=!0,No());return Mo.exports}var Qo={},Ro={exports:Qo};function So(){var a=S(),b=Po();function c(c,d){d===void 0&&(d=a.async);return b.debounceTime(c,d)(this)}Qo.debounceTime=c}var To=!1;function Uo(){To||(To=!0,So());return Ro.exports}c={};var Vo={exports:c};function Wo(){var a=D(),b=Uo();a.Observable.prototype.debounceTime=b.debounceTime}var Xo=!1;function Yo(){Xo||(Xo=!0,Wo());return Vo.exports}var Zo={},$o={exports:Zo};function ap(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(a){a===void 0&&(a=null);return function(b){return b.lift(new d(a))}}Zo.defaultIfEmpty=c;var d=function(){function a(a){this.defaultValue=a}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.defaultValue))};return a}(),e=function(c){a(b,c);function b(a,b){c.call(this,a),this.defaultValue=b,this.isEmpty=!0}b.prototype._next=function(a){this.isEmpty=!1,this.destination.next(a)};b.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()};return b}(b.Subscriber)}var bp=!1;function cp(){bp||(bp=!0,ap());return $o.exports}var dp={},ep={exports:dp};function fp(){var a=cp();function b(b){b===void 0&&(b=null);return a.defaultIfEmpty(b)(this)}dp.defaultIfEmpty=b}var gp=!1;function hp(){gp||(gp=!0,fp());return ep.exports}d={};var ip={exports:d};function jp(){var a=D(),b=hp();a.Observable.prototype.defaultIfEmpty=b.defaultIfEmpty}var kp=!1;function lp(){kp||(kp=!0,jp());return ip.exports}var mp={},np={exports:mp};function op(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=S(),c=qj(),d=B(),e=M();function f(a,d){d===void 0&&(d=b.async);var e=c.isDate(a),f=e?+a-d.now():Math.abs(a);return function(a){return a.lift(new g(f,d))}}mp.delay=f;var g=function(){function a(a,b){this.delay=a,this.scheduler=b}a.prototype.call=function(a,b){return b.subscribe(new h(a,this.delay,this.scheduler))};return a}(),h=function(c){a(b,c);function b(b,a,d){c.call(this,b),this.delay=a,this.scheduler=d,this.queue=[],this.active=!1,this.errored=!1}b.dispatch=function(a){var b=a.source,c=b.queue,d=a.scheduler,e=a.destination;while(c.length>0&&c[0].time-d.now()<=0)c.shift().notification.observe(e);if(c.length>0){e=Math.max(0,c[0].time-d.now());this.schedule(a,e)}else b.active=!1};b.prototype._schedule=function(a){this.active=!0,this.add(a.schedule(b.dispatch,this.delay,{source:this,destination:this.destination,scheduler:a}))};b.prototype.scheduleNotification=function(a){if(this.errored===!0)return;var b=this.scheduler;a=new i(b.now()+this.delay,a);this.queue.push(a);this.active===!1&&this._schedule(b)};b.prototype._next=function(a){this.scheduleNotification(e.Notification.createNext(a))};b.prototype._error=function(a){this.errored=!0,this.queue=[],this.destination.error(a)};b.prototype._complete=function(){this.scheduleNotification(e.Notification.createComplete())};return b}(d.Subscriber),i=function(){function a(a,b){this.time=a,this.notification=b}return a}()}var pp=!1;function qp(){pp||(pp=!0,op());return np.exports}var rp={},sp={exports:rp};function tp(){var a=S(),b=qp();function c(c,d){d===void 0&&(d=a.async);return b.delay(c,d)(this)}rp.delay=c}var up=!1;function vp(){up||(up=!0,tp());return sp.exports}f={};var wp={exports:f};function xp(){var a=D(),b=vp();a.Observable.prototype.delay=b.delay}var yp=!1;function zp(){yp||(yp=!0,xp());return wp.exports}var Ap={},Bp={exports:Ap};function Cp(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=D(),d=I(),e=L();function f(a,b){return b?function(c){return new i(c,b).lift(new g(a))}:function(b){return b.lift(new g(a))}}Ap.delayWhen=f;var g=function(){function a(a){this.delayDurationSelector=a}a.prototype.call=function(a,b){return b.subscribe(new h(a,this.delayDurationSelector))};return a}(),h=function(c){a(b,c);function b(a,b){c.call(this,a),this.delayDurationSelector=b,this.completed=!1,this.delayNotifierSubscriptions=[],this.values=[]}b.prototype.notifyNext=function(a,b,c,d,e){this.destination.next(a),this.removeSubscription(e),this.tryComplete()};b.prototype.notifyError=function(a,b){this._error(a)};b.prototype.notifyComplete=function(a){a=this.removeSubscription(a);a&&this.destination.next(a);this.tryComplete()};b.prototype._next=function(a){try{var b=this.delayDurationSelector(a);b&&this.tryDelay(b,a)}catch(a){this.destination.error(a)}};b.prototype._complete=function(){this.completed=!0,this.tryComplete()};b.prototype.removeSubscription=function(a){a.unsubscribe();a=this.delayNotifierSubscriptions.indexOf(a);var b=null;a!==-1&&(b=this.values[a],this.delayNotifierSubscriptions.splice(a,1),this.values.splice(a,1));return b};b.prototype.tryDelay=function(a,b){a=e.subscribeToResult(this,a,b);a&&!a.closed&&(this.add(a),this.delayNotifierSubscriptions.push(a));this.values.push(b)};b.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()};return b}(d.OuterSubscriber),i=function(c){a(b,c);function b(a,b){c.call(this),this.source=a,this.subscriptionDelay=b}b.prototype._subscribe=function(a){this.subscriptionDelay.subscribe(new j(a,this.source))};return b}(c.Observable),j=function(c){a(b,c);function b(a,b){c.call(this),this.parent=a,this.source=b,this.sourceSubscribed=!1}b.prototype._next=function(a){this.subscribeToSource()};b.prototype._error=function(a){this.unsubscribe(),this.parent.error(a)};b.prototype._complete=function(){this.subscribeToSource()};b.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))};return b}(b.Subscriber)}var Dp=!1;function Ep(){Dp||(Dp=!0,Cp());return Bp.exports}var Fp={},Gp={exports:Fp};function Hp(){var a=Ep();function b(b,c){return a.delayWhen(b,c)(this)}Fp.delayWhen=b}var Ip=!1;function Jp(){Ip||(Ip=!0,Hp());return Gp.exports}c={};var Kp={exports:c};function Lp(){var a=D(),b=Jp();a.Observable.prototype.delayWhen=b.delayWhen}var Mp=!1;function Np(){Mp||(Mp=!0,Lp());return Kp.exports}var Op={},Pp={exports:Op};function Qp(){var a=k();function b(){return function(){function a(){this._values=[]}a.prototype.add=function(a){this.has(a)||this._values.push(a)};a.prototype.has=function(a){return this._values.indexOf(a)!==-1};Object.defineProperty(a.prototype,"size",{get:function(){return this._values.length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._values.length=0};return a}()}Op.minimalSetImpl=b;Op.Set=a.root.Set||b()}var Rp=!1;function Sp(){Rp||(Rp=!0,Qp());return Pp.exports}var Tp={},Up={exports:Tp};function Vp(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=I(),c=L(),d=Sp();function e(a,b){return function(c){return c.lift(new f(a,b))}}Tp.distinct=e;var f=function(){function a(a,b){this.keySelector=a,this.flushes=b}a.prototype.call=function(a,b){return b.subscribe(new g(a,this.keySelector,this.flushes))};return a}(),g=function(e){a(b,e);function b(a,b,f){e.call(this,a),this.keySelector=b,this.values=new d.Set(),f&&this.add(c.subscribeToResult(this,f))}b.prototype.notifyNext=function(a,b,c,d,e){this.values.clear()};b.prototype.notifyError=function(a,b){this._error(a)};b.prototype._next=function(a){this.keySelector?this._useKeySelector(a):this._finalizeNext(a,a)};b.prototype._useKeySelector=function(a){var b,c=this.destination;try{b=this.keySelector(a)}catch(a){c.error(a);return}this._finalizeNext(b,a)};b.prototype._finalizeNext=function(a,b){var c=this.values;c.has(a)||(c.add(a),this.destination.next(b))};return b}(b.OuterSubscriber);Tp.DistinctSubscriber=g}var Wp=!1;function Xp(){Wp||(Wp=!0,Vp());return Up.exports}var Yp={},Zp={exports:Yp};function $p(){var a=Xp();function b(b,c){return a.distinct(b,c)(this)}Yp.distinct=b}var aq=!1;function bq(){aq||(aq=!0,$p());return Zp.exports}d={};var cq={exports:d};function dq(){var a=D(),b=bq();a.Observable.prototype.distinct=b.distinct}var eq=!1;function fq(){eq||(eq=!0,dq());return cq.exports}var gq={},hq={exports:gq};function iq(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=y(),d=x();function e(a,b){return function(c){return c.lift(new f(a,b))}}gq.distinctUntilChanged=e;var f=function(){function a(a,b){this.compare=a,this.keySelector=b}a.prototype.call=function(a,b){return b.subscribe(new g(a,this.compare,this.keySelector))};return a}(),g=function(e){a(b,e);function b(a,b,c){e.call(this,a),this.keySelector=c,this.hasKey=!1,typeof b==="function"&&(this.compare=b)}b.prototype.compare=function(a,b){return a===b};b.prototype._next=function(a){var b=this.keySelector,e=a;if(b){e=c.tryCatch(this.keySelector)(a);if(e===d.errorObject)return this.destination.error(d.errorObject.e)}b=!1;if(this.hasKey){b=c.tryCatch(this.compare)(this.key,e);if(b===d.errorObject)return this.destination.error(d.errorObject.e)}else this.hasKey=!0;Boolean(b)===!1&&(this.key=e,this.destination.next(a))};return b}(b.Subscriber)}var jq=!1;function kq(){jq||(jq=!0,iq());return hq.exports}var lq={},mq={exports:lq};function nq(){var a=kq();function b(b,c){return a.distinctUntilChanged(b,c)(this)}lq.distinctUntilChanged=b}var oq=!1;function pq(){oq||(oq=!0,nq());return mq.exports}f={};var qq={exports:f};function rq(){var a=D(),b=pq();a.Observable.prototype.distinctUntilChanged=b.distinctUntilChanged}var sq=!1;function tq(){sq||(sq=!0,rq());return qq.exports}var uq={},vq={exports:uq};function wq(){var a=kq();function b(b,c){return a.distinctUntilChanged(function(a,d){return c?c(a[b],d[b]):a[b]===d[b]})}uq.distinctUntilKeyChanged=b}var xq=!1;function yq(){xq||(xq=!0,wq());return vq.exports}var zq={},Aq={exports:zq};function Bq(){var a=yq();function b(b,c){return a.distinctUntilKeyChanged(b,c)(this)}zq.distinctUntilKeyChanged=b}var Cq=!1;function Dq(){Cq||(Cq=!0,Bq());return Aq.exports}c={};var Eq={exports:c};function Fq(){var a=D(),b=Dq();a.Observable.prototype.distinctUntilKeyChanged=b.distinctUntilKeyChanged}var Gq=!1;function Hq(){Gq||(Gq=!0,Fq());return Eq.exports}var Iq={},Jq={exports:Iq};function Kq(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(a,b,c){return function(e){return e.lift(new d(a,b,c))}}Iq.tap=c;var d=function(){function a(a,b,c){this.nextOrObserver=a,this.error=b,this.complete=c}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.nextOrObserver,this.error,this.complete))};return a}(),e=function(d){a(c,d);function c(a,c,e,f){d.call(this,a);a=new b.Subscriber(c,e,f);a.syncErrorThrowable=!0;this.add(a);this.safeSubscriber=a}c.prototype._next=function(a){var b=this.safeSubscriber;b.next(a);b.syncErrorThrown?this.destination.error(b.syncErrorValue):this.destination.next(a)};c.prototype._error=function(a){var b=this.safeSubscriber;b.error(a);b.syncErrorThrown?this.destination.error(b.syncErrorValue):this.destination.error(a)};c.prototype._complete=function(){var a=this.safeSubscriber;a.complete();a.syncErrorThrown?this.destination.error(a.syncErrorValue):this.destination.complete()};return c}(b.Subscriber)}var Lq=!1;function Mq(){Lq||(Lq=!0,Kq());return Jq.exports}var Nq={},Oq={exports:Nq};function Pq(){var a=Mq();function b(b,c,d){return a.tap(b,c,d)(this)}Nq._do=b}var Qq=!1;function Rq(){Qq||(Qq=!0,Pq());return Oq.exports}d={};var Sq={exports:d};function Tq(){var a=D(),b=Rq();a.Observable.prototype["do"]=b._do;a.Observable.prototype._do=b._do}var Uq=!1;function Vq(){Uq||(Uq=!0,Tq());return Sq.exports}var Wq={},Xq={exports:Wq};function Yq(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=I(),c=L();function d(){return function(a){return a.lift(new e())}}Wq.exhaust=d;var e=function(){function a(){}a.prototype.call=function(a,b){return b.subscribe(new f(a))};return a}(),f=function(d){a(b,d);function b(a){d.call(this,a),this.hasCompleted=!1,this.hasSubscription=!1}b.prototype._next=function(a){this.hasSubscription||(this.hasSubscription=!0,this.add(c.subscribeToResult(this,a)))};b.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()};b.prototype.notifyComplete=function(a){this.remove(a),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()};return b}(b.OuterSubscriber)}var Zq=!1;function $q(){Zq||(Zq=!0,Yq());return Xq.exports}var ar={},br={exports:ar};function cr(){var a=$q();function b(){return a.exhaust()(this)}ar.exhaust=b}var dr=!1;function er(){dr||(dr=!0,cr());return br.exports}f={};var fr={exports:f};function gr(){var a=D(),b=er();a.Observable.prototype.exhaust=b.exhaust}var hr=!1;function ir(){hr||(hr=!0,gr());return fr.exports}var jr={},kr={exports:jr};function lr(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=I(),c=L();function d(a,b){return function(c){return c.lift(new e(a,b))}}jr.exhaustMap=d;var e=function(){function a(a,b){this.project=a,this.resultSelector=b}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.project,this.resultSelector))};return a}(),f=function(d){a(b,d);function b(a,b,c){d.call(this,a),this.project=b,this.resultSelector=c,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}b.prototype._next=function(a){this.hasSubscription||this.tryNext(a)};b.prototype.tryNext=function(a){var b=this.index++,d=this.destination;try{var e=this.project(a,b);this.hasSubscription=!0;this.add(c.subscribeToResult(this,e,a,b))}catch(a){d.error(a)}};b.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()};b.prototype.notifyNext=function(a,b,c,d,e){e=this;var f=e.resultSelector;e=e.destination;f?this.trySelectResult(a,b,c,d):e.next(b)};b.prototype.trySelectResult=function(a,b,c,d){var e=this,f=e.resultSelector;e=e.destination;try{f=f(a,b,c,d);e.next(f)}catch(a){e.error(a)}};b.prototype.notifyError=function(a){this.destination.error(a)};b.prototype.notifyComplete=function(a){this.remove(a),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()};return b}(b.OuterSubscriber)}var mr=!1;function nr(){mr||(mr=!0,lr());return kr.exports}var or={},pr={exports:or};function qr(){var a=nr();function b(b,c){return a.exhaustMap(b,c)(this)}or.exhaustMap=b}var rr=!1;function sr(){rr||(rr=!0,qr());return pr.exports}c={};var tr={exports:c};function ur(){var a=D(),b=sr();a.Observable.prototype.exhaustMap=b.exhaustMap}var vr=!1;function wr(){vr||(vr=!0,ur());return tr.exports}var xr={},yr={exports:xr};function zr(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=y(),c=x(),d=I(),e=L();function f(a,b,c){b===void 0&&(b=Number.POSITIVE_INFINITY);c===void 0&&(c=void 0);b=(b||0)<1?Number.POSITIVE_INFINITY:b;return function(d){return d.lift(new g(a,b,c))}}xr.expand=f;var g=function(){function a(a,b,c){this.project=a,this.concurrent=b,this.scheduler=c}a.prototype.call=function(a,b){return b.subscribe(new h(a,this.project,this.concurrent,this.scheduler))};return a}();xr.ExpandOperator=g;var h=function(f){a(d,f);function d(a,b,c,d){f.call(this,a),this.project=b,this.concurrent=c,this.scheduler=d,this.index=0,this.active=0,this.hasCompleted=!1,c<Number.POSITIVE_INFINITY&&(this.buffer=[])}d.dispatch=function(a){var b=a.subscriber,c=a.result,d=a.value;a=a.index;b.subscribeToProjection(c,d,a)};d.prototype._next=function(a){var e=this.destination;if(e.closed){this._complete();return}var f=this.index++;if(this.active<this.concurrent){e.next(a);var g=b.tryCatch(this.project)(a,f);if(g===c.errorObject)e.error(c.errorObject.e);else if(!this.scheduler)this.subscribeToProjection(g,a,f);else{e={subscriber:this,result:g,value:a,index:f};this.add(this.scheduler.schedule(d.dispatch,0,e))}}else this.buffer.push(a)};d.prototype.subscribeToProjection=function(a,b,c){this.active++,this.add(e.subscribeToResult(this,a,b,c))};d.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete()};d.prototype.notifyNext=function(a,b,c,d,e){this._next(b)};d.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;b&&b.length>0&&this._next(b.shift());this.hasCompleted&&this.active===0&&this.destination.complete()};return d}(d.OuterSubscriber);xr.ExpandSubscriber=h}var Ar=!1;function Br(){Ar||(Ar=!0,zr());return yr.exports}var Cr={},Dr={exports:Cr};function Er(){var a=Br();function b(b,c,d){c===void 0&&(c=Number.POSITIVE_INFINITY);d===void 0&&(d=void 0);c=(c||0)<1?Number.POSITIVE_INFINITY:c;return a.expand(b,c,d)(this)}Cr.expand=b}var Fr=!1;function Gr(){Fr||(Fr=!0,Er());return Dr.exports}d={};var Hr={exports:d};function Ir(){var a=D(),b=Gr();a.Observable.prototype.expand=b.expand}var Jr=!1;function Kr(){Jr||(Jr=!0,Ir());return Hr.exports}var Lr={},Mr={exports:Lr};function Nr(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=function(c){a(b,c);function b(){var a=c.call(this,"argument out of range");this.name=a.name="ArgumentOutOfRangeError";this.stack=a.stack;this.message=a.message}return b}(Error);Lr.ArgumentOutOfRangeError=b}var Or=!1;function W(){Or||(Or=!0,Nr());return Mr.exports}var Pr={},Qr={exports:Pr};function Rr(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=W();function d(a,b){return function(c){return c.lift(new e(a,b))}}Pr.elementAt=d;var e=function(){function a(a,b){this.index=a;this.defaultValue=b;if(a<0)throw new c.ArgumentOutOfRangeError()}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.index,this.defaultValue))};return a}(),f=function(d){a(b,d);function b(a,b,c){d.call(this,a),this.index=b,this.defaultValue=c}b.prototype._next=function(a){this.index--===0&&(this.destination.next(a),this.destination.complete())};b.prototype._complete=function(){var a=this.destination;this.index>=0&&(typeof this.defaultValue!=="undefined"?a.next(this.defaultValue):a.error(new c.ArgumentOutOfRangeError()));a.complete()};return b}(b.Subscriber)}var Sr=!1;function Tr(){Sr||(Sr=!0,Rr());return Qr.exports}var Ur={},Vr={exports:Ur};function Wr(){var a=Tr();function b(b,c){return a.elementAt(b,c)(this)}Ur.elementAt=b}var Xr=!1;function Yr(){Xr||(Xr=!0,Wr());return Vr.exports}f={};var Zr={exports:f};function $r(){var a=D(),b=Yr();a.Observable.prototype.elementAt=b.elementAt}var as=!1;function bs(){as||(as=!0,$r());return Zr.exports}var cs={},ds={exports:cs};function es(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(a,b){return function(c){return c.lift(new d(a,b))}}cs.filter=c;var d=function(){function a(a,b){this.predicate=a,this.thisArg=b}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.predicate,this.thisArg))};return a}(),e=function(c){a(b,c);function b(a,b,d){c.call(this,a),this.predicate=b,this.thisArg=d,this.count=0}b.prototype._next=function(a){var b;try{b=this.predicate.call(this.thisArg,a,this.count++)}catch(a){this.destination.error(a);return}b&&this.destination.next(a)};return b}(b.Subscriber)}var fs=!1;function gs(){fs||(fs=!0,es());return ds.exports}var hs={},is={exports:hs};function js(){var a=gs();function b(b,c){return a.filter(b,c)(this)}hs.filter=b}var ks=!1;function ls(){ks||(ks=!0,js());return is.exports}c={};var ms={exports:c};function ns(){var a=D(),b=ls();a.Observable.prototype.filter=b.filter}var os=!1;function ps(){os||(os=!0,ns());return ms.exports}var qs={},rs={exports:qs};function ss(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=z();function d(a){return function(b){return b.lift(new e(a))}}qs.finalize=d;var e=function(){function a(a){this.callback=a}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.callback))};return a}(),f=function(d){a(b,d);function b(a,b){d.call(this,a),this.add(new c.Subscription(b))}return b}(b.Subscriber)}var ts=!1;function us(){ts||(ts=!0,ss());return rs.exports}var vs={},ws={exports:vs};function xs(){var a=us();function b(b){return a.finalize(b)(this)}vs._finally=b}var ys=!1;function zs(){ys||(ys=!0,xs());return ws.exports}d={};var As={exports:d};function Bs(){var a=D(),b=zs();a.Observable.prototype["finally"]=b._finally;a.Observable.prototype._finally=b._finally}var Cs=!1;function Ds(){Cs||(Cs=!0,Bs());return As.exports}var Es={},Fs={exports:Es};function Gs(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(a,b){if(typeof a!=="function")throw new TypeError("predicate is not a function");return function(c){return c.lift(new d(a,c,!1,b))}}Es.find=c;var d=function(){function a(a,b,c,d){this.predicate=a,this.source=b,this.yieldIndex=c,this.thisArg=d}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.predicate,this.source,this.yieldIndex,this.thisArg))};return a}();Es.FindValueOperator=d;var e=function(c){a(b,c);function b(a,b,d,e,f){c.call(this,a),this.predicate=b,this.source=d,this.yieldIndex=e,this.thisArg=f,this.index=0}b.prototype.notifyComplete=function(a){var b=this.destination;b.next(a);b.complete()};b.prototype._next=function(a){var b=this,c=b.predicate;b=b.thisArg;var d=this.index++;try{c=c.call(b||this,a,d,this.source);c&&this.notifyComplete(this.yieldIndex?d:a)}catch(a){this.destination.error(a)}};b.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)};return b}(b.Subscriber);Es.FindValueSubscriber=e}var Hs=!1;function Is(){Hs||(Hs=!0,Gs());return Fs.exports}var Js={},Ks={exports:Js};function Ls(){var a=Is();function b(b,c){return a.find(b,c)(this)}Js.find=b}var Ms=!1;function Ns(){Ms||(Ms=!0,Ls());return Ks.exports}f={};var Os={exports:f};function Ps(){var a=D(),b=Ns();a.Observable.prototype.find=b.find}var Qs=!1;function Rs(){Qs||(Qs=!0,Ps());return Os.exports}var Ss={},Ts={exports:Ss};function Us(){var a=Is();function b(b,c){return function(d){return d.lift(new a.FindValueOperator(b,d,!0,c))}}Ss.findIndex=b}var Vs=!1;function Ws(){Vs||(Vs=!0,Us());return Ts.exports}var Xs={},Ys={exports:Xs};function Zs(){var a=Ws();function b(b,c){return a.findIndex(b,c)(this)}Xs.findIndex=b}var $s=!1;function at(){$s||($s=!0,Zs());return Ys.exports}c={};var bt={exports:c};function ct(){var a=D(),b=at();a.Observable.prototype.findIndex=b.findIndex}var dt=!1;function et(){dt||(dt=!0,ct());return bt.exports}var ft={},gt={exports:ft};function ht(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=function(c){a(b,c);function b(){var a=c.call(this,"no elements in sequence");this.name=a.name="EmptyError";this.stack=a.stack;this.message=a.message}return b}(Error);ft.EmptyError=b}var it=!1;function jt(){it||(it=!0,ht());return gt.exports}var kt={},lt={exports:kt};function mt(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=jt();function d(a,b,c){return function(d){return d.lift(new e(a,b,c,d))}}kt.first=d;var e=function(){function a(a,b,c,d){this.predicate=a,this.resultSelector=b,this.defaultValue=c,this.source=d}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.predicate,this.resultSelector,this.defaultValue,this.source))};return a}(),f=function(d){a(b,d);function b(a,b,c,e,f){d.call(this,a),this.predicate=b,this.resultSelector=c,this.defaultValue=e,this.source=f,this.index=0,this.hasCompleted=!1,this._emitted=!1}b.prototype._next=function(a){var b=this.index++;this.predicate?this._tryPredicate(a,b):this._emit(a,b)};b.prototype._tryPredicate=function(a,b){var c;try{c=this.predicate(a,b,this.source)}catch(a){this.destination.error(a);return}c&&this._emit(a,b)};b.prototype._emit=function(a,b){if(this.resultSelector){this._tryResultSelector(a,b);return}this._emitFinal(a)};b.prototype._tryResultSelector=function(a,b){try{a=this.resultSelector(a,b)}catch(a){this.destination.error(a);return}this._emitFinal(a)};b.prototype._emitFinal=function(a){var b=this.destination;this._emitted||(this._emitted=!0,b.next(a),b.complete(),this.hasCompleted=!0)};b.prototype._complete=function(){var a=this.destination;!this.hasCompleted&&typeof this.defaultValue!=="undefined"?(a.next(this.defaultValue),a.complete()):this.hasCompleted||a.error(new c.EmptyError())};return b}(b.Subscriber)}var nt=!1;function ot(){nt||(nt=!0,mt());return lt.exports}var pt={},qt={exports:pt};function rt(){var a=ot();function b(b,c,d){return a.first(b,c,d)(this)}pt.first=b}var st=!1;function tt(){st||(st=!0,rt());return qt.exports}d={};var ut={exports:d};function vt(){var a=D(),b=tt();a.Observable.prototype.first=b.first}var wt=!1;function xt(){wt||(wt=!0,vt());return ut.exports}var yt={},zt={exports:yt};function At(){var a=function(){function a(){this.size=0,this._values=[],this._keys=[]}a.prototype.get=function(a){a=this._keys.indexOf(a);return a===-1?void 0:this._values[a]};a.prototype.set=function(a,b){var c=this._keys.indexOf(a);c===-1?(this._keys.push(a),this._values.push(b),this.size++):this._values[c]=b;return this};a.prototype["delete"]=function(a){a=this._keys.indexOf(a);if(a===-1)return!1;this._values.splice(a,1);this._keys.splice(a,1);this.size--;return!0};a.prototype.clear=function(){this._keys.length=0,this._values.length=0,this.size=0};a.prototype.forEach=function(a,b){for(var c=0;c<this.size;c++)a.call(b,this._values[c],this._keys[c])};return a}();yt.MapPolyfill=a}var Bt=!1;function Ct(){Bt||(Bt=!0,At());return zt.exports}var Dt={},Et={exports:Dt};function Ft(){var a=k(),b=Ct();Dt.Map=a.root.Map||function(){return b.MapPolyfill}()}var Gt=!1;function Ht(){Gt||(Gt=!0,Ft());return Et.exports}var It={},Jt={exports:It};function Kt(){var a=function(){function a(){this.values={}}a.prototype["delete"]=function(a){this.values[a]=null;return!0};a.prototype.set=function(a,b){this.values[a]=b;return this};a.prototype.get=function(a){return this.values[a]};a.prototype.forEach=function(a,b){var c=this.values;for(var d in c)c.hasOwnProperty(d)&&c[d]!==null&&a.call(b,c[d],d)};a.prototype.clear=function(){this.values={}};return a}();It.FastMap=a}var Lt=!1;function Mt(){Lt||(Lt=!0,Kt());return Jt.exports}var Nt={},Ot={exports:Nt};function Pt(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=z(),d=D(),e=E(),f=Ht(),g=Mt();function h(a,b,c,d){return function(e){return e.lift(new i(a,b,c,d))}}Nt.groupBy=h;var i=function(){function a(a,b,c,d){this.keySelector=a,this.elementSelector=b,this.durationSelector=c,this.subjectSelector=d}a.prototype.call=function(a,b){return b.subscribe(new j(a,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))};return a}(),j=function(c){a(b,c);function b(a,b,d,e,f){c.call(this,a),this.keySelector=b,this.elementSelector=d,this.durationSelector=e,this.subjectSelector=f,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}b.prototype._next=function(a){var b;try{b=this.keySelector(a)}catch(a){this.error(a);return}this._group(a,b)};b.prototype._group=function(a,b){var c=this.groups;c||(c=this.groups=typeof b==="string"?new g.FastMap():new f.Map());var d=c.get(b),h;if(this.elementSelector)try{h=this.elementSelector(a)}catch(a){this.error(a)}else h=a;if(!d){d=this.subjectSelector?this.subjectSelector():new e.Subject();c.set(b,d);a=new l(b,d,this);this.destination.next(a);if(this.durationSelector){c=void 0;try{c=this.durationSelector(new l(b,d))}catch(a){this.error(a);return}this.add(c.subscribe(new k(b,d,this)))}}d.closed||d.next(h)};b.prototype._error=function(a){var b=this.groups;b&&(b.forEach(function(b,c){b.error(a)}),b.clear());this.destination.error(a)};b.prototype._complete=function(){var a=this.groups;a&&(a.forEach(function(a,b){a.complete()}),a.clear());this.destination.complete()};b.prototype.removeGroup=function(a){this.groups["delete"](a)};b.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&c.prototype.unsubscribe.call(this))};return b}(b.Subscriber),k=function(c){a(b,c);function b(a,b,d){c.call(this,b),this.key=a,this.group=b,this.parent=d}b.prototype._next=function(a){this.complete()};b.prototype._unsubscribe=function(){var a=this,b=a.parent;a=a.key;this.key=this.parent=null;b&&b.removeGroup(a)};return b}(b.Subscriber),l=function(d){a(b,d);function b(a,b,c){d.call(this),this.key=a,this.groupSubject=b,this.refCountSubscription=c}b.prototype._subscribe=function(a){var b=new c.Subscription(),d=this,e=d.refCountSubscription;d=d.groupSubject;e&&!e.closed&&b.add(new m(e));b.add(d.subscribe(a));return b};return b}(d.Observable);Nt.GroupedObservable=l;var m=function(c){a(b,c);function b(a){c.call(this),this.parent=a,a.count++}b.prototype.unsubscribe=function(){var a=this.parent;!a.closed&&!this.closed&&(c.prototype.unsubscribe.call(this),a.count-=1,a.count===0&&a.attemptedToUnsubscribe&&a.unsubscribe())};return b}(c.Subscription)}var Qt=!1;function Rt(){Qt||(Qt=!0,Pt());return Ot.exports}var St={},Tt={exports:St};function Ut(){var a=Rt();St.GroupedObservable=a.GroupedObservable;function b(b,c,d,e){return a.groupBy(b,c,d,e)(this)}St.groupBy=b}var Vt=!1;function Wt(){Vt||(Vt=!0,Ut());return Tt.exports}f={};var Xt={exports:f};function Yt(){var a=D(),b=Wt();a.Observable.prototype.groupBy=b.groupBy}var Zt=!1;function $t(){Zt||(Zt=!0,Yt());return Xt.exports}var au={},bu={exports:au};function cu(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=Ua();function d(){return function(a){return a.lift(new e())}}au.ignoreElements=d;var e=function(){function a(){}a.prototype.call=function(a,b){return b.subscribe(new f(a))};return a}(),f=function(d){a(b,d);function b(){d.apply(this,arguments)}b.prototype._next=function(a){c.noop()};return b}(b.Subscriber)}var du=!1;function eu(){du||(du=!0,cu());return bu.exports}var fu={},gu={exports:fu};function hu(){var a=eu();function b(){return a.ignoreElements()(this)}fu.ignoreElements=b}var iu=!1;function ju(){iu||(iu=!0,hu());return gu.exports}c={};var ku={exports:c};function lu(){var a=D(),b=ju();a.Observable.prototype.ignoreElements=b.ignoreElements}var mu=!1;function nu(){mu||(mu=!0,lu());return ku.exports}var ou={},pu={exports:ou};function qu(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(){return function(a){return a.lift(new d())}}ou.isEmpty=c;var d=function(){function a(){}a.prototype.call=function(a,b){return b.subscribe(new e(a))};return a}(),e=function(c){a(b,c);function b(a){c.call(this,a)}b.prototype.notifyComplete=function(a){var b=this.destination;b.next(a);b.complete()};b.prototype._next=function(a){this.notifyComplete(!1)};b.prototype._complete=function(){this.notifyComplete(!0)};return b}(b.Subscriber)}var ru=!1;function su(){ru||(ru=!0,qu());return pu.exports}var tu={},uu={exports:tu};function vu(){var a=su();function b(){return a.isEmpty()(this)}tu.isEmpty=b}var wu=!1;function xu(){wu||(wu=!0,vu());return uu.exports}d={};var yu={exports:d};function zu(){var a=D(),b=xu();a.Observable.prototype.isEmpty=b.isEmpty}var Au=!1;function Bu(){Au||(Au=!0,zu());return yu.exports}var Cu={},Du={exports:Cu};function Eu(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=y(),c=x(),d=I(),e=L();function f(a){return function(b){return b.lift(new g(a))}}Cu.audit=f;var g=function(){function a(a){this.durationSelector=a}a.prototype.call=function(a,b){return b.subscribe(new h(a,this.durationSelector))};return a}(),h=function(f){a(d,f);function d(a,b){f.call(this,a),this.durationSelector=b,this.hasValue=!1}d.prototype._next=function(a){this.value=a;this.hasValue=!0;if(!this.throttled){a=b.tryCatch(this.durationSelector)(a);if(a===c.errorObject)this.destination.error(c.errorObject.e);else{a=e.subscribeToResult(this,a);a.closed?this.clearThrottle():this.add(this.throttled=a)}}};d.prototype.clearThrottle=function(){var a=this,b=a.value,c=a.hasValue;a=a.throttled;a&&(this.remove(a),this.throttled=null,a.unsubscribe());c&&(this.value=null,this.hasValue=!1,this.destination.next(b))};d.prototype.notifyNext=function(a,b,c,d){this.clearThrottle()};d.prototype.notifyComplete=function(){this.clearThrottle()};return d}(d.OuterSubscriber)}var Fu=!1;function Gu(){Fu||(Fu=!0,Eu());return Du.exports}var Hu={},Iu={exports:Hu};function Ju(){var a=Gu();function b(b){return a.audit(b)(this)}Hu.audit=b}var Ku=!1;function Lu(){Ku||(Ku=!0,Ju());return Iu.exports}f={};var Mu={exports:f};function Nu(){var a=D(),b=Lu();a.Observable.prototype.audit=b.audit}var Ou=!1;function Pu(){Ou||(Ou=!0,Nu());return Mu.exports}var Qu={},Ru={exports:Qu};function Su(){var a=S(),b=Gu(),c=Aj();function d(d,e){e===void 0&&(e=a.async);return b.audit(function(){return c.timer(d,e)})}Qu.auditTime=d}var Tu=!1;function Uu(){Tu||(Tu=!0,Su());return Ru.exports}var Vu={},Wu={exports:Vu};function Xu(){var a=S(),b=Uu();function c(c,d){d===void 0&&(d=a.async);return b.auditTime(c,d)(this)}Vu.auditTime=c}var Yu=!1;function Zu(){Yu||(Yu=!0,Xu());return Wu.exports}c={};var $u={exports:c};function av(){var a=D(),b=Zu();a.Observable.prototype.auditTime=b.auditTime}var bv=!1;function cv(){bv||(bv=!0,av());return $u.exports}var dv={},ev={exports:dv};function fv(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=jt();function d(a,b,c){return function(d){return d.lift(new e(a,b,c,d))}}dv.last=d;var e=function(){function a(a,b,c,d){this.predicate=a,this.resultSelector=b,this.defaultValue=c,this.source=d}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.predicate,this.resultSelector,this.defaultValue,this.source))};return a}(),f=function(d){a(b,d);function b(a,b,c,e,f){d.call(this,a),this.predicate=b,this.resultSelector=c,this.defaultValue=e,this.source=f,this.hasValue=!1,this.index=0,typeof e!=="undefined"&&(this.lastValue=e,this.hasValue=!0)}b.prototype._next=function(a){var b=this.index++;if(this.predicate)this._tryPredicate(a,b);else{if(this.resultSelector){this._tryResultSelector(a,b);return}this.lastValue=a;this.hasValue=!0}};b.prototype._tryPredicate=function(a,b){var c;try{c=this.predicate(a,b,this.source)}catch(a){this.destination.error(a);return}if(c){if(this.resultSelector){this._tryResultSelector(a,b);return}this.lastValue=a;this.hasValue=!0}};b.prototype._tryResultSelector=function(a,b){try{a=this.resultSelector(a,b)}catch(a){this.destination.error(a);return}this.lastValue=a;this.hasValue=!0};b.prototype._complete=function(){var a=this.destination;this.hasValue?(a.next(this.lastValue),a.complete()):a.error(new c.EmptyError())};return b}(b.Subscriber)}var gv=!1;function hv(){gv||(gv=!0,fv());return ev.exports}var iv={},jv={exports:iv};function kv(){var a=hv();function b(b,c,d){return a.last(b,c,d)(this)}iv.last=b}var lv=!1;function mv(){lv||(lv=!0,kv());return jv.exports}d={};var nv={exports:d};function ov(){var a=D(),b=mv();a.Observable.prototype.last=b.last}var pv=!1;function qv(){pv||(pv=!0,ov());return nv.exports}var rv={},sv={exports:rv};function tv(){function a(a){return a(this)}rv.letProto=a}var uv=!1;function vv(){uv||(uv=!0,tv());return sv.exports}f={};var wv={exports:f};function xv(){var a=D(),b=vv();a.Observable.prototype.let=b.letProto;a.Observable.prototype.letBind=b.letProto}var yv=!1;function zv(){yv||(yv=!0,xv());return wv.exports}var Av={},Bv={exports:Av};function Cv(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(a,b){return function(c){return c.lift(new d(a,b,c))}}Av.every=c;var d=function(){function a(a,b,c){this.predicate=a,this.thisArg=b,this.source=c}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.predicate,this.thisArg,this.source))};return a}(),e=function(c){a(b,c);function b(a,b,d,e){c.call(this,a),this.predicate=b,this.thisArg=d,this.source=e,this.index=0,this.thisArg=d||this}b.prototype.notifyComplete=function(a){this.destination.next(a),this.destination.complete()};b.prototype._next=function(a){var b=!1;try{b=this.predicate.call(this.thisArg,a,this.index++,this.source)}catch(a){this.destination.error(a);return}b||this.notifyComplete(!1)};b.prototype._complete=function(){this.notifyComplete(!0)};return b}(b.Subscriber)}var Dv=!1;function Ev(){Dv||(Dv=!0,Cv());return Bv.exports}var Fv={},Gv={exports:Fv};function Hv(){var a=Ev();function b(b,c){return a.every(b,c)(this)}Fv.every=b}var Iv=!1;function Jv(){Iv||(Iv=!0,Hv());return Gv.exports}c={};var Kv={exports:c};function Lv(){var a=D(),b=Jv();a.Observable.prototype.every=b.every}var Mv=!1;function Nv(){Mv||(Mv=!0,Lv());return Kv.exports}var Ov={},Pv={exports:Ov};function Qv(){var a=U();function b(b,c){return a.map(b,c)(this)}Ov.map=b}var Rv=!1;function Sv(){Rv||(Rv=!0,Qv());return Pv.exports}d={};var Tv={exports:d};function Uv(){var a=D(),b=Sv();a.Observable.prototype.map=b.map}var Vv=!1;function Wv(){Vv||(Vv=!0,Uv());return Tv.exports}var Xv={},Yv={exports:Xv};function Zv(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(a){return function(b){return b.lift(new d(a))}}Xv.mapTo=c;var d=function(){function a(a){this.value=a}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.value))};return a}(),e=function(c){a(b,c);function b(a,b){c.call(this,a),this.value=b}b.prototype._next=function(a){this.destination.next(this.value)};return b}(b.Subscriber)}var $v=!1;function aw(){$v||($v=!0,Zv());return Yv.exports}var bw={},cw={exports:bw};function dw(){var a=aw();function b(b){return a.mapTo(b)(this)}bw.mapTo=b}var ew=!1;function fw(){ew||(ew=!0,dw());return cw.exports}f={};var gw={exports:f};function hw(){var a=D(),b=fw();a.Observable.prototype.mapTo=b.mapTo}var iw=!1;function jw(){iw||(iw=!0,hw());return gw.exports}var kw={},lw={exports:kw};function mw(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=M();function d(){return function(a){return a.lift(new e())}}kw.materialize=d;var e=function(){function a(){}a.prototype.call=function(a,b){return b.subscribe(new f(a))};return a}(),f=function(d){a(b,d);function b(a){d.call(this,a)}b.prototype._next=function(a){this.destination.next(c.Notification.createNext(a))};b.prototype._error=function(a){var b=this.destination;b.next(c.Notification.createError(a));b.complete()};b.prototype._complete=function(){var a=this.destination;a.next(c.Notification.createComplete());a.complete()};return b}(b.Subscriber)}var nw=!1;function ow(){nw||(nw=!0,mw());return lw.exports}var pw={},qw={exports:pw};function rw(){var a=ow();function b(){return a.materialize()(this)}pw.materialize=b}var sw=!1;function tw(){sw||(sw=!0,rw());return qw.exports}c={};var uw={exports:c};function vw(){var a=D(),b=tw();a.Observable.prototype.materialize=b.materialize}var ww=!1;function xw(){ww||(ww=!0,vw());return uw.exports}var yw={},zw={exports:yw};function Aw(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(a,b){var c=!1;arguments.length>=2&&(c=!0);return function(e){return e.lift(new d(a,b,c))}}yw.scan=c;var d=function(){function a(a,b,c){c===void 0&&(c=!1),this.accumulator=a,this.seed=b,this.hasSeed=c}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.accumulator,this.seed,this.hasSeed))};return a}(),e=function(c){a(b,c);function b(a,b,d,e){c.call(this,a),this.accumulator=b,this._seed=d,this.hasSeed=e,this.index=0}Object.defineProperty(b.prototype,"seed",{get:function(){return this._seed},set:function(a){this.hasSeed=!0,this._seed=a},enumerable:!0,configurable:!0});b.prototype._next=function(a){if(!this.hasSeed)this.seed=a,this.destination.next(a);else return this._tryNext(a)};b.prototype._tryNext=function(a){var b=this.index++;try{a=this.accumulator(this.seed,a,b)}catch(a){this.destination.error(a)}this.seed=a;this.destination.next(a)};return b}(b.Subscriber)}var Bw=!1;function Cw(){Bw||(Bw=!0,Aw());return zw.exports}var Dw={},Ew={exports:Dw};function Fw(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=W(),d=G();function e(a){return function(b){if(a===0)return new d.EmptyObservable();else return b.lift(new f(a))}}Dw.takeLast=e;var f=function(){function a(a){this.total=a;if(this.total<0)throw new c.ArgumentOutOfRangeError()}a.prototype.call=function(a,b){return b.subscribe(new g(a,this.total))};return a}(),g=function(c){a(b,c);function b(a,b){c.call(this,a),this.total=b,this.ring=new Array(),this.count=0}b.prototype._next=function(a){var b=this.ring,c=this.total,d=this.count++;if(b.length<c)b.push(a);else{d=d%c;b[d]=a}};b.prototype._complete=function(){var a=this.destination,b=this.count;if(b>0){var c=this.count>=this.total?this.total:this.count,d=this.ring;for(var e=0;e<c;e++){var f=b++%c;a.next(d[f])}}a.complete()};return b}(b.Subscriber)}var Gw=!1;function Hw(){Gw||(Gw=!0,Fw());return Ew.exports}var Iw={},Jw={exports:Iw};function Kw(){var a=Cw(),b=Hw(),c=cp(),d=Za();function e(e,f){return arguments.length>=2?function(g){return d.pipe(a.scan(e,f),b.takeLast(1),c.defaultIfEmpty(f))(g)}:function(c){return d.pipe(a.scan(function(a,b,c){return e(a,b,c+1)}),b.takeLast(1))(c)}}Iw.reduce=e}var Lw=!1;function X(){Lw||(Lw=!0,Kw());return Jw.exports}var Mw={},Nw={exports:Mw};function Ow(){var a=X();function b(c){var b=typeof c==="function"?function(a,b){return c(a,b)>0?a:b}:function(a,b){return a>b?a:b};return a.reduce(b)}Mw.max=b}var Pw=!1;function Qw(){Pw||(Pw=!0,Ow());return Nw.exports}var Rw={},Sw={exports:Rw};function Tw(){var a=Qw();function b(b){return a.max(b)(this)}Rw.max=b}var Uw=!1;function Vw(){Uw||(Uw=!0,Tw());return Sw.exports}d={};var Ww={exports:d};function Xw(){var a=D(),b=Vw();a.Observable.prototype.max=b.max}var Yw=!1;function Zw(){Yw||(Yw=!0,Xw());return Ww.exports}f={};var $w={exports:f};function ax(){var a=D(),b=lh();a.Observable.prototype.merge=b.merge}var bx=!1;function cx(){bx||(bx=!0,ax());return $w.exports}var dx={},ex={exports:dx};function fx(){var a=$d();function b(b){b===void 0&&(b=Number.POSITIVE_INFINITY);return a.mergeAll(b)(this)}dx.mergeAll=b}var gx=!1;function hx(){gx||(gx=!0,fx());return ex.exports}c={};var ix={exports:c};function jx(){var a=D(),b=hx();a.Observable.prototype.mergeAll=b.mergeAll}var kx=!1;function lx(){kx||(kx=!0,jx());return ix.exports}var mx={},nx={exports:mx};function ox(){var a=O();function b(b,c,d){d===void 0&&(d=Number.POSITIVE_INFINITY);return a.mergeMap(b,c,d)(this)}mx.mergeMap=b}var px=!1;function qx(){px||(px=!0,ox());return nx.exports}d={};var rx={exports:d};function sx(){var a=D(),b=qx();a.Observable.prototype.mergeMap=b.mergeMap;a.Observable.prototype.flatMap=b.mergeMap}var tx=!1;function ux(){tx||(tx=!0,sx());return rx.exports}var vx={},wx={exports:vx};function xx(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=I(),c=L();function d(a,b,c){c===void 0&&(c=Number.POSITIVE_INFINITY);typeof b==="number"&&(c=b,b=null);return function(d){return d.lift(new e(a,b,c))}}vx.mergeMapTo=d;var e=function(){function a(a,b,c){c===void 0&&(c=Number.POSITIVE_INFINITY),this.ish=a,this.resultSelector=b,this.concurrent=c}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.ish,this.resultSelector,this.concurrent))};return a}();vx.MergeMapToOperator=e;var f=function(d){a(b,d);function b(a,b,c,e){e===void 0&&(e=Number.POSITIVE_INFINITY),d.call(this,a),this.ish=b,this.resultSelector=c,this.concurrent=e,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}b.prototype._next=function(a){if(this.active<this.concurrent){var b=this.resultSelector,c=this.index++,d=this.ish,e=this.destination;this.active++;this._innerSub(d,e,b,a,c)}else this.buffer.push(a)};b.prototype._innerSub=function(a,b,d,e,f){this.add(c.subscribeToResult(this,a,e,f))};b.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete()};b.prototype.notifyNext=function(a,b,c,d,e){e=this;var f=e.resultSelector;e=e.destination;f?this.trySelectResult(a,b,c,d):e.next(b)};b.prototype.trySelectResult=function(a,b,c,d){var e=this,f=e.resultSelector;e=e.destination;try{f=f(a,b,c,d)}catch(a){e.error(a);return}e.next(f)};b.prototype.notifyError=function(a){this.destination.error(a)};b.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;b.length>0?this._next(b.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()};return b}(b.OuterSubscriber);vx.MergeMapToSubscriber=f}var yx=!1;function zx(){yx||(yx=!0,xx());return wx.exports}var Ax={},Bx={exports:Ax};function Cx(){var a=zx();function b(b,c,d){d===void 0&&(d=Number.POSITIVE_INFINITY);return a.mergeMapTo(b,c,d)(this)}Ax.mergeMapTo=b}var Dx=!1;function Ex(){Dx||(Dx=!0,Cx());return Bx.exports}f={};var Fx={exports:f};function Gx(){var a=D(),b=Ex();a.Observable.prototype.flatMapTo=b.mergeMapTo;a.Observable.prototype.mergeMapTo=b.mergeMapTo}var Hx=!1;function Ix(){Hx||(Hx=!0,Gx());return Fx.exports}var Jx={},Kx={exports:Jx};function Lx(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=y(),c=x(),d=L(),e=I();function f(a,b,c){c===void 0&&(c=Number.POSITIVE_INFINITY);return function(d){return d.lift(new g(a,b,c))}}Jx.mergeScan=f;var g=function(){function a(a,b,c){this.accumulator=a,this.seed=b,this.concurrent=c}a.prototype.call=function(a,b){return b.subscribe(new h(a,this.accumulator,this.seed,this.concurrent))};return a}();Jx.MergeScanOperator=g;var h=function(f){a(e,f);function e(a,b,c,d){f.call(this,a),this.accumulator=b,this.acc=c,this.concurrent=d,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}e.prototype._next=function(a){if(this.active<this.concurrent){var d=this.index++,e=b.tryCatch(this.accumulator)(this.acc,a),f=this.destination;e===c.errorObject?f.error(c.errorObject.e):(this.active++,this._innerSub(e,a,d))}else this.buffer.push(a)};e.prototype._innerSub=function(a,b,c){this.add(d.subscribeToResult(this,a,b,c))};e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())};e.prototype.notifyNext=function(a,b,c,d,e){a=this.destination;this.acc=b;this.hasValue=!0;a.next(b)};e.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;b.length>0?this._next(b.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())};return e}(e.OuterSubscriber);Jx.MergeScanSubscriber=h}var Mx=!1;function Nx(){Mx||(Mx=!0,Lx());return Kx.exports}var Ox={},Px={exports:Ox};function Qx(){var a=Nx();function b(b,c,d){d===void 0&&(d=Number.POSITIVE_INFINITY);return a.mergeScan(b,c,d)(this)}Ox.mergeScan=b}var Rx=!1;function Sx(){Rx||(Rx=!0,Qx());return Px.exports}c={};var Tx={exports:c};function Ux(){var a=D(),b=Sx();a.Observable.prototype.mergeScan=b.mergeScan}var Vx=!1;function Wx(){Vx||(Vx=!0,Ux());return Tx.exports}var Xx={},Yx={exports:Xx};function Zx(){var a=X();function b(c){var b=typeof c==="function"?function(a,b){return c(a,b)<0?a:b}:function(a,b){return a<b?a:b};return a.reduce(b)}Xx.min=b}var $x=!1;function ay(){$x||($x=!0,Zx());return Yx.exports}var by={},cy={exports:by};function dy(){var a=ay();function b(b){return a.min(b)(this)}by.min=b}var ey=!1;function fy(){ey||(ey=!0,dy());return cy.exports}d={};var gy={exports:d};function hy(){var a=D(),b=fy();a.Observable.prototype.min=b.min}var iy=!1;function jy(){iy||(iy=!0,hy());return gy.exports}var ky={},ly={exports:ky};function my(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(){return function(a){return a.lift(new d(a))}}ky.refCount=c;var d=function(){function a(a){this.connectable=a}a.prototype.call=function(a,b){var c=this.connectable;c._refCount++;a=new e(a,c);b=b.subscribe(a);a.closed||(a.connection=c.connect());return b};return a}(),e=function(c){a(b,c);function b(a,b){c.call(this,a),this.connectable=b}b.prototype._unsubscribe=function(){var b=this.connectable;if(!b){this.connection=null;return}this.connectable=null;var a=b._refCount;if(a<=0){this.connection=null;return}b._refCount=a-1;if(a>1){this.connection=null;return}a=this.connection;b=b._connection;this.connection=null;b&&(!a||b===a)&&b.unsubscribe()};return b}(b.Subscriber)}var ny=!1;function oy(){ny||(ny=!0,my());return ly.exports}var py={},qy={exports:py};function ry(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=E(),c=D(),d=B(),e=z(),f=oy();c=function(b){a(c,b);function c(a,c){b.call(this),this.source=a,this.subjectFactory=c,this._refCount=0,this._isComplete=!1}c.prototype._subscribe=function(a){return this.getSubject().subscribe(a)};c.prototype.getSubject=function(){var a=this._subject;(!a||a.isStopped)&&(this._subject=this.subjectFactory());return this._subject};c.prototype.connect=function(){var a=this._connection;a||(this._isComplete=!1,a=this._connection=new e.Subscription(),a.add(this.source.subscribe(new g(this.getSubject(),this))),a.closed?(this._connection=null,a=e.Subscription.EMPTY):this._connection=a);return a};c.prototype.refCount=function(){return f.refCount()(this)};return c}(c.Observable);py.ConnectableObservable=c;c=c.prototype;py.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}};var g=function(c){a(b,c);function b(a,b){c.call(this,a),this.connectable=b}b.prototype._error=function(a){this._unsubscribe(),c.prototype._error.call(this,a)};b.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),c.prototype._complete.call(this)};b.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var b=a._connection;a._refCount=0;a._subject=null;a._connection=null;b&&b.unsubscribe()}};return b}(b.SubjectSubscriber);(function(b){a(c,b);function c(a,c){b.call(this,a),this.connectable=c}c.prototype._unsubscribe=function(){var a=this.connectable;if(!a){this.connection=null;return}this.connectable=null;var b=a._refCount;if(b<=0){this.connection=null;return}a._refCount=b-1;if(b>1){this.connection=null;return}b=this.connection;a=a._connection;this.connection=null;a&&(!b||a===b)&&a.unsubscribe()};return c})(d.Subscriber)}var sy=!1;function ty(){sy||(sy=!0,ry());return qy.exports}var uy={},vy={exports:uy};function wy(){var a=ty();function b(b,d){return function(e){var f;typeof b==="function"?f=b:f=function(){return b};if(typeof d==="function")return e.lift(new c(f,d));var g=Object.create(e,a.connectableObservableDescriptor);g.source=e;g.subjectFactory=f;return g}}uy.multicast=b;var c=function(){function a(a,b){this.subjectFactory=a,this.selector=b}a.prototype.call=function(a,b){var c=this.selector,d=this.subjectFactory();c=c(d).subscribe(a);c.add(b.subscribe(d));return c};return a}();uy.MulticastOperator=c}var xy=!1;function Y(){xy||(xy=!0,wy());return vy.exports}var yy={},zy={exports:yy};function Ay(){var a=Y();function b(b,c){return a.multicast(b,c)(this)}yy.multicast=b}var By=!1;function Cy(){By||(By=!0,Ay());return zy.exports}f={};var Dy={exports:f};function Ey(){var a=D(),b=Cy();a.Observable.prototype.multicast=b.multicast}var Fy=!1;function Gy(){Fy||(Fy=!0,Ey());return Dy.exports}var Hy={},Iy={exports:Hy};function Jy(){var a=Cd();function b(b,c){c===void 0&&(c=0);return a.observeOn(b,c)(this)}Hy.observeOn=b}var Ky=!1;function Ly(){Ky||(Ky=!0,Jy());return Iy.exports}c={};var My={exports:c};function Ny(){var a=D(),b=Ly();a.Observable.prototype.observeOn=b.observeOn}var Oy=!1;function Py(){Oy||(Oy=!0,Ny());return My.exports}var Qy={},Ry={exports:Qy};function Sy(){var a=$h();function b(){var b=[];for(var c=0;c<arguments.length;c++)b[c-0]=arguments[c];return a.onErrorResumeNext.apply(void 0,b)(this)}Qy.onErrorResumeNext=b}var Ty=!1;function Uy(){Ty||(Ty=!0,Sy());return Ry.exports}d={};var Vy={exports:d};function Wy(){var a=D(),b=Uy();a.Observable.prototype.onErrorResumeNext=b.onErrorResumeNext}var Xy=!1;function Yy(){Xy||(Xy=!0,Wy());return Vy.exports}var Zy={},$y={exports:Zy};function az(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(){return function(a){return a.lift(new d())}}Zy.pairwise=c;var d=function(){function a(){}a.prototype.call=function(a,b){return b.subscribe(new e(a))};return a}(),e=function(c){a(b,c);function b(a){c.call(this,a),this.hasPrev=!1}b.prototype._next=function(a){this.hasPrev?this.destination.next([this.prev,a]):this.hasPrev=!0,this.prev=a};return b}(b.Subscriber)}var bz=!1;function cz(){bz||(bz=!0,az());return $y.exports}var dz={},ez={exports:dz};function fz(){var a=cz();function b(){return a.pairwise()(this)}dz.pairwise=b}var gz=!1;function hz(){gz||(gz=!0,fz());return ez.exports}f={};var iz={exports:f};function jz(){var a=D(),b=hz();a.Observable.prototype.pairwise=b.pairwise}var kz=!1;function lz(){kz||(kz=!0,jz());return iz.exports}var mz={},nz={exports:mz};function oz(){function a(a,b){function c(){return!c.pred.apply(c.thisArg,arguments)}c.pred=a;c.thisArg=b;return c}mz.not=a}var pz=!1;function qz(){pz||(pz=!0,oz());return nz.exports}var rz={},sz={exports:rz};function tz(){var a=qz(),b=gs();function c(c,d){return function(e){return[b.filter(c,d)(e),b.filter(a.not(c,d))(e)]}}rz.partition=c}var uz=!1;function vz(){uz||(uz=!0,tz());return sz.exports}var wz={},xz={exports:wz};function yz(){var a=vz();function b(b,c){return a.partition(b,c)(this)}wz.partition=b}var zz=!1;function Az(){zz||(zz=!0,yz());return xz.exports}c={};var Bz={exports:c};function Cz(){var a=D(),b=Az();a.Observable.prototype.partition=b.partition}var Dz=!1;function Ez(){Dz||(Dz=!0,Cz());return Bz.exports}var Fz={},Gz={exports:Fz};function Hz(){var a=U();function b(){var b=[];for(var d=0;d<arguments.length;d++)b[d-0]=arguments[d];var e=b.length;if(e===0)throw new Error("list of properties cannot be empty.");return function(d){return a.map(c(b,e))(d)}}Fz.pluck=b;function c(a,b){var c=function(c){c=c;for(var d=0;d<b;d++){var e=c[a[d]];if(typeof e!=="undefined")c=e;else return void 0}return c};return c}}var Iz=!1;function Jz(){Iz||(Iz=!0,Hz());return Gz.exports}var Kz={},Lz={exports:Kz};function Mz(){var a=Jz();function b(){var b=[];for(var c=0;c<arguments.length;c++)b[c-0]=arguments[c];return a.pluck.apply(void 0,b)(this)}Kz.pluck=b}var Nz=!1;function Oz(){Nz||(Nz=!0,Mz());return Lz.exports}d={};var Pz={exports:d};function Qz(){var a=D(),b=Oz();a.Observable.prototype.pluck=b.pluck}var Rz=!1;function Sz(){Rz||(Rz=!0,Qz());return Pz.exports}var Tz={},Uz={exports:Tz};function Vz(){var a=E(),b=Y();function c(c){return c?b.multicast(function(){return new a.Subject()},c):b.multicast(new a.Subject())}Tz.publish=c}var Wz=!1;function Xz(){Wz||(Wz=!0,Vz());return Uz.exports}var Yz={},Zz={exports:Yz};function $z(){var a=Xz();function b(b){return a.publish(b)(this)}Yz.publish=b}var aA=!1;function bA(){aA||(aA=!0,$z());return Zz.exports}f={};var cA={exports:f};function dA(){var a=D(),b=bA();a.Observable.prototype.publish=b.publish}var eA=!1;function fA(){eA||(eA=!0,dA());return cA.exports}var gA={},hA={exports:gA};function iA(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=E(),c=hb();b=function(b){a(d,b);function d(a){b.call(this),this._value=a}Object.defineProperty(d.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0});d.prototype._subscribe=function(a){var c=b.prototype._subscribe.call(this,a);c&&!c.closed&&a.next(this._value);return c};d.prototype.getValue=function(){if(this.hasError)throw this.thrownError;else if(this.closed)throw new c.ObjectUnsubscribedError();else return this._value};d.prototype.next=function(a){b.prototype.next.call(this,this._value=a)};return d}(b.Subject);gA.BehaviorSubject=b}var jA=!1;function kA(){jA||(jA=!0,iA());return hA.exports}var lA={},mA={exports:lA};function nA(){var a=kA(),b=Y();function c(c){return function(d){return b.multicast(new a.BehaviorSubject(c))(d)}}lA.publishBehavior=c}var oA=!1;function pA(){oA||(oA=!0,nA());return mA.exports}var qA={},rA={exports:qA};function sA(){var a=pA();function b(b){return a.publishBehavior(b)(this)}qA.publishBehavior=b}var tA=!1;function uA(){tA||(tA=!0,sA());return rA.exports}c={};var vA={exports:c};function wA(){var a=D(),b=uA();a.Observable.prototype.publishBehavior=b.publishBehavior}var xA=!1;function yA(){xA||(xA=!0,wA());return vA.exports}var zA={},AA={exports:zA};function BA(){var a=Bk(),b=Y();function c(c,d,e,f){e&&typeof e!=="function"&&(f=e);var g=typeof e==="function"?e:void 0,h=new a.ReplaySubject(c,d,f);return function(a){return b.multicast(function(){return h},g)(a)}}zA.publishReplay=c}var CA=!1;function DA(){CA||(CA=!0,BA());return AA.exports}var EA={},FA={exports:EA};function GA(){var a=DA();function b(b,c,d,e){return a.publishReplay(b,c,d,e)(this)}EA.publishReplay=b}var HA=!1;function IA(){HA||(HA=!0,GA());return FA.exports}d={};var JA={exports:d};function KA(){var a=D(),b=IA();a.Observable.prototype.publishReplay=b.publishReplay}var LA=!1;function MA(){LA||(LA=!0,KA());return JA.exports}var NA={},OA={exports:NA};function PA(){var a=vb(),b=Y();function c(){return function(c){return b.multicast(new a.AsyncSubject())(c)}}NA.publishLast=c}var QA=!1;function RA(){QA||(QA=!0,PA());return OA.exports}var SA={},TA={exports:SA};function UA(){var a=RA();function b(){return a.publishLast()(this)}SA.publishLast=b}var VA=!1;function WA(){VA||(VA=!0,UA());return TA.exports}f={};var XA={exports:f};function YA(){var a=D(),b=WA();a.Observable.prototype.publishLast=b.publishLast}var ZA=!1;function $A(){ZA||(ZA=!0,YA());return XA.exports}var aB={},bB={exports:aB};function cB(){var a=u(),b=zh();function c(){var c=[];for(var d=0;d<arguments.length;d++)c[d-0]=arguments[d];return function(d){c.length===1&&a.isArray(c[0])&&(c=c[0]);return d.lift.call(b.race.apply(void 0,[d].concat(c)))}}aB.race=c}var dB=!1;function eB(){dB||(dB=!0,cB());return bB.exports}var fB={},gB={exports:fB};function hB(){var a=eB(),b=zh();fB.raceStatic=b.race;function c(){var b=[];for(var c=0;c<arguments.length;c++)b[c-0]=arguments[c];return a.race.apply(void 0,b)(this)}fB.race=c}var iB=!1;function jB(){iB||(iB=!0,hB());return gB.exports}c={};var kB={exports:c};function lB(){var a=D(),b=jB();a.Observable.prototype.race=b.race}var mB=!1;function nB(){mB||(mB=!0,lB());return kB.exports}var oB={},pB={exports:oB};function qB(){var a=X();function b(b,c){return arguments.length>=2?a.reduce(b,c)(this):a.reduce(b)(this)}oB.reduce=b}var rB=!1;function sB(){rB||(rB=!0,qB());return pB.exports}d={};var tB={exports:d};function uB(){var a=D(),b=sB();a.Observable.prototype.reduce=b.reduce}var vB=!1;function wB(){vB||(vB=!0,uB());return tB.exports}var xB={},yB={exports:xB};function zB(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=G();function d(a){a===void 0&&(a=-1);return function(b){if(a===0)return new c.EmptyObservable();else if(a<0)return b.lift(new e(-1,b));else return b.lift(new e(a-1,b))}}xB.repeat=d;var e=function(){function a(a,b){this.count=a,this.source=b}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.count,this.source))};return a}(),f=function(c){a(b,c);function b(a,b,d){c.call(this,a),this.count=b,this.source=d}b.prototype.complete=function(){if(!this.isStopped){var a=this,b=a.source;a=a.count;if(a===0)return c.prototype.complete.call(this);else a>-1&&(this.count=a-1);b.subscribe(this._unsubscribeAndRecycle())}};return b}(b.Subscriber)}var AB=!1;function BB(){AB||(AB=!0,zB());return yB.exports}var CB={},DB={exports:CB};function EB(){var a=BB();function b(b){b===void 0&&(b=-1);return a.repeat(b)(this)}CB.repeat=b}var FB=!1;function GB(){FB||(FB=!0,EB());return DB.exports}f={};var HB={exports:f};function IB(){var a=D(),b=GB();a.Observable.prototype.repeat=b.repeat}var JB=!1;function KB(){JB||(JB=!0,IB());return HB.exports}var LB={},MB={exports:LB};function NB(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=E(),c=y(),d=x(),e=I(),f=L();function g(a){return function(b){return b.lift(new h(a))}}LB.repeatWhen=g;var h=function(){function a(a){this.notifier=a}a.prototype.call=function(a,b){return b.subscribe(new i(a,this.notifier,b))};return a}(),i=function(g){a(e,g);function e(a,b,c){g.call(this,a),this.notifier=b,this.source=c,this.sourceIsBeingSubscribedTo=!0}e.prototype.notifyNext=function(a,b,c,d,e){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)};e.prototype.notifyComplete=function(a){if(this.sourceIsBeingSubscribedTo===!1)return g.prototype.complete.call(this)};e.prototype.complete=function(){this.sourceIsBeingSubscribedTo=!1;if(!this.isStopped){if(!this.retries)this.subscribeToRetries();else if(this.retriesSubscription.closed)return g.prototype.complete.call(this);this._unsubscribeAndRecycle();this.notifications.next()}};e.prototype._unsubscribe=function(){var a=this,b=a.notifications;a=a.retriesSubscription;b&&(b.unsubscribe(),this.notifications=null);a&&(a.unsubscribe(),this.retriesSubscription=null);this.retries=null};e.prototype._unsubscribeAndRecycle=function(){var a=this,b=a.notifications,c=a.retries;a=a.retriesSubscription;this.notifications=null;this.retries=null;this.retriesSubscription=null;g.prototype._unsubscribeAndRecycle.call(this);this.notifications=b;this.retries=c;this.retriesSubscription=a;return this};e.prototype.subscribeToRetries=function(){this.notifications=new b.Subject();var a=c.tryCatch(this.notifier)(this.notifications);if(a===d.errorObject)return g.prototype.complete.call(this);this.retries=a;this.retriesSubscription=f.subscribeToResult(this,a)};return e}(e.OuterSubscriber)}var OB=!1;function PB(){OB||(OB=!0,NB());return MB.exports}var QB={},RB={exports:QB};function SB(){var a=PB();function b(b){return a.repeatWhen(b)(this)}QB.repeatWhen=b}var TB=!1;function UB(){TB||(TB=!0,SB());return RB.exports}c={};var VB={exports:c};function WB(){var a=D(),b=UB();a.Observable.prototype.repeatWhen=b.repeatWhen}var XB=!1;function YB(){XB||(XB=!0,WB());return VB.exports}var ZB={},$B={exports:ZB};function aC(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(a){a===void 0&&(a=-1);return function(b){return b.lift(new d(a,b))}}ZB.retry=c;var d=function(){function a(a,b){this.count=a,this.source=b}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.count,this.source))};return a}(),e=function(c){a(b,c);function b(a,b,d){c.call(this,a),this.count=b,this.source=d}b.prototype.error=function(a){if(!this.isStopped){var b=this,d=b.source;b=b.count;if(b===0)return c.prototype.error.call(this,a);else b>-1&&(this.count=b-1);d.subscribe(this._unsubscribeAndRecycle())}};return b}(b.Subscriber)}var bC=!1;function cC(){bC||(bC=!0,aC());return $B.exports}var dC={},eC={exports:dC};function fC(){var a=cC();function b(b){b===void 0&&(b=-1);return a.retry(b)(this)}dC.retry=b}var gC=!1;function hC(){gC||(gC=!0,fC());return eC.exports}d={};var iC={exports:d};function jC(){var a=D(),b=hC();a.Observable.prototype.retry=b.retry}var kC=!1;function lC(){kC||(kC=!0,jC());return iC.exports}var mC={},nC={exports:mC};function oC(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=E(),c=y(),d=x(),e=I(),f=L();function g(a){return function(b){return b.lift(new h(a,b))}}mC.retryWhen=g;var h=function(){function a(a,b){this.notifier=a,this.source=b}a.prototype.call=function(a,b){return b.subscribe(new i(a,this.notifier,this.source))};return a}(),i=function(g){a(e,g);function e(a,b,c){g.call(this,a),this.notifier=b,this.source=c}e.prototype.error=function(a){if(!this.isStopped){var e=this.errors,h=this.retries,i=this.retriesSubscription;if(!h){e=new b.Subject();h=c.tryCatch(this.notifier)(e);if(h===d.errorObject)return g.prototype.error.call(this,d.errorObject.e);i=f.subscribeToResult(this,h)}else this.errors=null,this.retriesSubscription=null;this._unsubscribeAndRecycle();this.errors=e;this.retries=h;this.retriesSubscription=i;e.next(a)}};e.prototype._unsubscribe=function(){var a=this,b=a.errors;a=a.retriesSubscription;b&&(b.unsubscribe(),this.errors=null);a&&(a.unsubscribe(),this.retriesSubscription=null);this.retries=null};e.prototype.notifyNext=function(a,b,c,d,e){a=this;b=a.errors;c=a.retries;d=a.retriesSubscription;this.errors=null;this.retries=null;this.retriesSubscription=null;this._unsubscribeAndRecycle();this.errors=b;this.retries=c;this.retriesSubscription=d;this.source.subscribe(this)};return e}(e.OuterSubscriber)}var pC=!1;function qC(){pC||(pC=!0,oC());return nC.exports}var rC={},sC={exports:rC};function tC(){var a=qC();function b(b){return a.retryWhen(b)(this)}rC.retryWhen=b}var uC=!1;function vC(){uC||(uC=!0,tC());return sC.exports}f={};var wC={exports:f};function xC(){var a=D(),b=vC();a.Observable.prototype.retryWhen=b.retryWhen}var yC=!1;function zC(){yC||(yC=!0,xC());return wC.exports}var AC={},BC={exports:AC};function CC(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=I(),c=L();function d(a){return function(b){return b.lift(new e(a))}}AC.sample=d;var e=function(){function a(a){this.notifier=a}a.prototype.call=function(a,b){a=new f(a);b=b.subscribe(a);b.add(c.subscribeToResult(a,this.notifier));return b};return a}(),f=function(c){a(b,c);function b(){c.apply(this,arguments),this.hasValue=!1}b.prototype._next=function(a){this.value=a,this.hasValue=!0};b.prototype.notifyNext=function(a,b,c,d,e){this.emitValue()};b.prototype.notifyComplete=function(){this.emitValue()};b.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))};return b}(b.OuterSubscriber)}var DC=!1;function EC(){DC||(DC=!0,CC());return BC.exports}var FC={},GC={exports:FC};function HC(){var a=EC();function b(b){return a.sample(b)(this)}FC.sample=b}var IC=!1;function JC(){IC||(IC=!0,HC());return GC.exports}c={};var KC={exports:c};function LC(){var a=D(),b=JC();a.Observable.prototype.sample=b.sample}var MC=!1;function NC(){MC||(MC=!0,LC());return KC.exports}var OC={},PC={exports:OC};function QC(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=S();function d(a,b){b===void 0&&(b=c.async);return function(c){return c.lift(new e(a,b))}}OC.sampleTime=d;var e=function(){function a(a,b){this.period=a,this.scheduler=b}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.period,this.scheduler))};return a}(),f=function(c){a(b,c);function b(a,b,d){c.call(this,a),this.period=b,this.scheduler=d,this.hasValue=!1,this.add(d.schedule(g,b,{subscriber:this,period:b}))}b.prototype._next=function(a){this.lastValue=a,this.hasValue=!0};b.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))};return b}(b.Subscriber);function g(a){var b=a.subscriber,c=a.period;b.notifyNext();this.schedule(a,c)}}var RC=!1;function SC(){RC||(RC=!0,QC());return PC.exports}var TC={},UC={exports:TC};function VC(){var a=S(),b=SC();function c(c,d){d===void 0&&(d=a.async);return b.sampleTime(c,d)(this)}TC.sampleTime=c}var WC=!1;function XC(){WC||(WC=!0,VC());return UC.exports}d={};var YC={exports:d};function ZC(){var a=D(),b=XC();a.Observable.prototype.sampleTime=b.sampleTime}var $C=!1;function aD(){$C||($C=!0,ZC());return YC.exports}var bD={},cD={exports:bD};function dD(){var a=Cw();function b(b,c){return arguments.length>=2?a.scan(b,c)(this):a.scan(b)(this)}bD.scan=b}var eD=!1;function fD(){eD||(eD=!0,dD());return cD.exports}f={};var gD={exports:f};function hD(){var a=D(),b=fD();a.Observable.prototype.scan=b.scan}var iD=!1;function jD(){iD||(iD=!0,hD());return gD.exports}var kD={},lD={exports:kD};function mD(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=y(),d=x();function e(a,b){return function(c){return c.lift(new f(a,b))}}kD.sequenceEqual=e;var f=function(){function a(a,b){this.compareTo=a,this.comparor=b}a.prototype.call=function(a,b){return b.subscribe(new g(a,this.compareTo,this.comparor))};return a}();kD.SequenceEqualOperator=f;var g=function(e){a(b,e);function b(a,b,c){e.call(this,a),this.compareTo=b,this.comparor=c,this._a=[],this._b=[],this._oneComplete=!1,this.add(b.subscribe(new h(a,this)))}b.prototype._next=function(a){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(a),this.checkValues())};b.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0};b.prototype.checkValues=function(){var a=this,b=a._a,e=a._b;a=a.comparor;while(b.length>0&&e.length>0){var f=b.shift(),g=e.shift(),h=!1;a?(h=c.tryCatch(a)(f,g),h===d.errorObject&&this.destination.error(d.errorObject.e)):h=f===g;h||this.emit(!1)}};b.prototype.emit=function(a){var b=this.destination;b.next(a);b.complete()};b.prototype.nextB=function(a){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(a),this.checkValues())};return b}(b.Subscriber);kD.SequenceEqualSubscriber=g;var h=function(c){a(b,c);function b(a,b){c.call(this,a),this.parent=b}b.prototype._next=function(a){this.parent.nextB(a)};b.prototype._error=function(a){this.parent.error(a)};b.prototype._complete=function(){this.parent._complete()};return b}(b.Subscriber)}var nD=!1;function oD(){nD||(nD=!0,mD());return lD.exports}var pD={},qD={exports:pD};function rD(){var a=oD();function b(b,c){return a.sequenceEqual(b,c)(this)}pD.sequenceEqual=b}var sD=!1;function tD(){sD||(sD=!0,rD());return qD.exports}c={};var uD={exports:c};function vD(){var a=D(),b=tD();a.Observable.prototype.sequenceEqual=b.sequenceEqual}var wD=!1;function xD(){wD||(wD=!0,vD());return uD.exports}var yD={},zD={exports:yD};function AD(){var a=Y(),b=oy(),c=E();function d(){return new c.Subject()}function e(){return function(c){return b.refCount()(a.multicast(d)(c))}}yD.share=e}var BD=!1;function CD(){BD||(BD=!0,AD());return zD.exports}var DD={},ED={exports:DD};function FD(){var a=CD();function b(){return a.share()(this)}DD.share=b}var GD=!1;function HD(){GD||(GD=!0,FD());return ED.exports}d={};var ID={exports:d};function JD(){var a=D(),b=HD();a.Observable.prototype.share=b.share}var KD=!1;function LD(){KD||(KD=!0,JD());return ID.exports}var MD={},ND={exports:MD};function OD(){var a=Bk();function b(a,b,d){return function(e){return e.lift(c(a,b,d))}}MD.shareReplay=b;function c(b,c,d){var e,f=0,g,h=!1,i=!1;return function(j){f++;(!e||h)&&(h=!1,e=new a.ReplaySubject(b,c,d),g=j.subscribe({next:function(a){e.next(a)},error:function(a){h=!0,e.error(a)},complete:function(){i=!0,e.complete()}}));var k=e.subscribe(this);return function(){f--,k.unsubscribe(),g&&f===0&&i&&g.unsubscribe()}}}}var PD=!1;function QD(){PD||(PD=!0,OD());return ND.exports}var RD={},SD={exports:RD};function TD(){var a=QD();function b(b,c,d){return a.shareReplay(b,c,d)(this)}RD.shareReplay=b}var UD=!1;function VD(){UD||(UD=!0,TD());return SD.exports}f={};var WD={exports:f};function XD(){var a=D(),b=VD();a.Observable.prototype.shareReplay=b.shareReplay}var YD=!1;function ZD(){YD||(YD=!0,XD());return WD.exports}var $D={},aE={exports:$D};function bE(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=jt();function d(a){return function(b){return b.lift(new e(a,b))}}$D.single=d;var e=function(){function a(a,b){this.predicate=a,this.source=b}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.predicate,this.source))};return a}(),f=function(d){a(b,d);function b(a,b,c){d.call(this,a),this.predicate=b,this.source=c,this.seenValue=!1,this.index=0}b.prototype.applySingleValue=function(a){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=a)};b.prototype._next=function(a){var b=this.index++;this.predicate?this.tryNext(a,b):this.applySingleValue(a)};b.prototype.tryNext=function(a,b){try{this.predicate(a,b,this.source)&&this.applySingleValue(a)}catch(a){this.destination.error(a)}};b.prototype._complete=function(){var a=this.destination;this.index>0?(a.next(this.seenValue?this.singleValue:void 0),a.complete()):a.error(new c.EmptyError())};return b}(b.Subscriber)}var cE=!1;function dE(){cE||(cE=!0,bE());return aE.exports}var eE={},fE={exports:eE};function gE(){var a=dE();function b(b){return a.single(b)(this)}eE.single=b}var hE=!1;function iE(){hE||(hE=!0,gE());return fE.exports}c={};var jE={exports:c};function kE(){var a=D(),b=iE();a.Observable.prototype.single=b.single}var lE=!1;function mE(){lE||(lE=!0,kE());return jE.exports}var nE={},oE={exports:nE};function pE(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(a){return function(b){return b.lift(new d(a))}}nE.skip=c;var d=function(){function a(a){this.total=a}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.total))};return a}(),e=function(c){a(b,c);function b(a,b){c.call(this,a),this.total=b,this.count=0}b.prototype._next=function(a){++this.count>this.total&&this.destination.next(a)};return b}(b.Subscriber)}var qE=!1;function rE(){qE||(qE=!0,pE());return oE.exports}var sE={},tE={exports:sE};function uE(){var a=rE();function b(b){return a.skip(b)(this)}sE.skip=b}var vE=!1;function wE(){vE||(vE=!0,uE());return tE.exports}d={};var xE={exports:d};function yE(){var a=D(),b=wE();a.Observable.prototype.skip=b.skip}var zE=!1;function AE(){zE||(zE=!0,yE());return xE.exports}var BE={},CE={exports:BE};function DE(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=W();function d(a){return function(b){return b.lift(new e(a))}}BE.skipLast=d;var e=function(){function a(a){this._skipCount=a;if(this._skipCount<0)throw new c.ArgumentOutOfRangeError()}a.prototype.call=function(a,c){if(this._skipCount===0)return c.subscribe(new b.Subscriber(a));else return c.subscribe(new f(a,this._skipCount))};return a}(),f=function(c){a(b,c);function b(a,b){c.call(this,a),this._skipCount=b,this._count=0,this._ring=new Array(b)}b.prototype._next=function(a){var b=this._skipCount,c=this._count++;if(c<b)this._ring[c]=a;else{c=c%b;b=this._ring;var d=b[c];b[c]=a;this.destination.next(d)}};return b}(b.Subscriber)}var EE=!1;function FE(){EE||(EE=!0,DE());return CE.exports}var GE={},HE={exports:GE};function IE(){var a=FE();function b(b){return a.skipLast(b)(this)}GE.skipLast=b}var JE=!1;function KE(){JE||(JE=!0,IE());return HE.exports}f={};var LE={exports:f};function ME(){var a=D(),b=KE();a.Observable.prototype.skipLast=b.skipLast}var NE=!1;function OE(){NE||(NE=!0,ME());return LE.exports}var PE={},QE={exports:PE};function RE(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=I(),c=L();function d(a){return function(b){return b.lift(new e(a))}}PE.skipUntil=d;var e=function(){function a(a){this.notifier=a}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.notifier))};return a}(),f=function(d){a(b,d);function b(a,b){d.call(this,a),this.hasValue=!1,this.isInnerStopped=!1,this.add(c.subscribeToResult(this,b))}b.prototype._next=function(a){this.hasValue&&d.prototype._next.call(this,a)};b.prototype._complete=function(){this.isInnerStopped?d.prototype._complete.call(this):this.unsubscribe()};b.prototype.notifyNext=function(a,b,c,d,e){this.hasValue=!0};b.prototype.notifyComplete=function(){this.isInnerStopped=!0,this.isStopped&&d.prototype._complete.call(this)};return b}(b.OuterSubscriber)}var SE=!1;function TE(){SE||(SE=!0,RE());return QE.exports}var UE={},VE={exports:UE};function WE(){var a=TE();function b(b){return a.skipUntil(b)(this)}UE.skipUntil=b}var XE=!1;function YE(){XE||(XE=!0,WE());return VE.exports}c={};var ZE={exports:c};function $E(){var a=D(),b=YE();a.Observable.prototype.skipUntil=b.skipUntil}var aF=!1;function bF(){aF||(aF=!0,$E());return ZE.exports}var cF={},dF={exports:cF};function eF(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(a){return function(b){return b.lift(new d(a))}}cF.skipWhile=c;var d=function(){function a(a){this.predicate=a}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.predicate))};return a}(),e=function(c){a(b,c);function b(a,b){c.call(this,a),this.predicate=b,this.skipping=!0,this.index=0}b.prototype._next=function(a){var b=this.destination;this.skipping&&this.tryCallPredicate(a);this.skipping||b.next(a)};b.prototype.tryCallPredicate=function(a){try{a=this.predicate(a,this.index++);this.skipping=Boolean(a)}catch(a){this.destination.error(a)}};return b}(b.Subscriber)}var fF=!1;function gF(){fF||(fF=!0,eF());return dF.exports}var hF={},iF={exports:hF};function jF(){var a=gF();function b(b){return a.skipWhile(b)(this)}hF.skipWhile=b}var kF=!1;function lF(){kF||(kF=!0,jF());return iF.exports}d={};var mF={exports:d};function nF(){var a=D(),b=lF();a.Observable.prototype.skipWhile=b.skipWhile}var oF=!1;function pF(){oF||(oF=!0,nF());return mF.exports}var qF={},rF={exports:qF};function sF(){var a=H(),b=fc(),c=G(),d=je(),e=F();function f(){var f=[];for(var g=0;g<arguments.length;g++)f[g-0]=arguments[g];return function(g){var h=f[f.length-1];e.isScheduler(h)?f.pop():h=null;var i=f.length;if(i===1)return d.concat(new b.ScalarObservable(f[0],h),g);else if(i>1)return d.concat(new a.ArrayObservable(f,h),g);else return d.concat(new c.EmptyObservable(h),g)}}qF.startWith=f}var tF=!1;function uF(){tF||(tF=!0,sF());return rF.exports}var vF={},wF={exports:vF};function xF(){var a=uF();function b(){var b=[];for(var c=0;c<arguments.length;c++)b[c-0]=arguments[c];return a.startWith.apply(void 0,b)(this)}vF.startWith=b}var yF=!1;function zF(){yF||(yF=!0,xF());return wF.exports}f={};var AF={exports:f};function BF(){var a=D(),b=zF();a.Observable.prototype.startWith=b.startWith}var CF=!1;function DF(){CF||(CF=!0,BF());return AF.exports}var EF={},FF={exports:EF};function GF(){var a=k(),b=function(){function a(a){this.root=a;if(a.setImmediate&&typeof a.setImmediate==="function")this.setImmediate=a.setImmediate.bind(a),this.clearImmediate=a.clearImmediate.bind(a);else{this.nextHandle=1;this.tasksByHandle={};this.currentlyRunningATask=!1;this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate();a=function a(b){delete a.instance.tasksByHandle[b]};a.instance=this;this.clearImmediate=a}}a.prototype.identify=function(a){return this.root.Object.prototype.toString.call(a)};a.prototype.canUseProcessNextTick=function(){return this.identify(this.root.process)==="[object process]"};a.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)};a.prototype.canUseReadyStateChange=function(){var a=this.root.document;return Boolean(a&&"onreadystatechange"in a.createElement("script"))};a.prototype.canUsePostMessage=function(){var a=this.root;if(a.postMessage&&!a.importScripts){var b=!0,c=a.onmessage;a.onmessage=function(){b=!1};a.postMessage("","*");a.onmessage=c;return b}return!1};a.prototype.partiallyApplied=function(a){var b=[];for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];var d=function a(){var c=a,b=c.handler;c=c.args;typeof b==="function"?b.apply(void 0,c):new Function(""+b)()};d.handler=a;d.args=b;return d};a.prototype.addFromSetImmediateArguments=function(a){this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,a);return this.nextHandle++};a.prototype.createProcessNextTickSetImmediate=function(){var a=function a(){var b=a.instance,c=b.addFromSetImmediateArguments(arguments);b.root.process.nextTick(b.partiallyApplied(b.runIfPresent,c));return c};a.instance=this;return a};a.prototype.createPostMessageSetImmediate=function(){var a=this.root,b="setImmediate$"+a.Math.random()+"$",c=function c(d){var e=c.instance;d.source===a&&typeof d.data==="string"&&d.data.indexOf(b)===0&&e.runIfPresent(+d.data.slice(b.length))};c.instance=this;a.addEventListener("message",c,!1);c=function a(){var c=a,b=c.messagePrefix,d=c.instance,e=d.addFromSetImmediateArguments(arguments);d.root.postMessage(b+e,"*");return e};c.instance=this;c.messagePrefix=b;return c};a.prototype.runIfPresent=function(a){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,a),0);else{var b=this.tasksByHandle[a];if(b){this.currentlyRunningATask=!0;try{b()}finally{this.clearImmediate(a),this.currentlyRunningATask=!1}}}};a.prototype.createMessageChannelSetImmediate=function(){var a=this,b=new this.root.MessageChannel();b.port1.onmessage=function(b){b=b.data;a.runIfPresent(b)};var c=function a(){var c=a,b=c.channel,d=c.instance,e=d.addFromSetImmediateArguments(arguments);b.port2.postMessage(e);return e};c.channel=b;c.instance=this;return c};a.prototype.createReadyStateChangeSetImmediate=function(){var a=function a(){var b=a.instance,c=b.root,d=c.document,e=d.documentElement,f=b.addFromSetImmediateArguments(arguments),g=d.createElement("script");g.onreadystatechange=function(){b.runIfPresent(f),g.onreadystatechange=null,e.removeChild(g),g=null};e.appendChild(g);return f};a.instance=this;return a};a.prototype.createSetTimeoutSetImmediate=function(){var a=function a(){var b=a.instance,c=b.addFromSetImmediateArguments(arguments);b.root.setTimeout(b.partiallyApplied(b.runIfPresent,c),0);return c};a.instance=this;return a};return a}();EF.ImmediateDefinition=b;EF.Immediate=new b(a.root)}var HF=!1;function IF(){HF||(HF=!0,GF());return FF.exports}var JF={},KF={exports:JF};function LF(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=IF(),c=Q();c=function(c){a(d,c);function d(a,b){c.call(this,a,b),this.scheduler=a,this.work=b}d.prototype.requestAsyncId=function(a,d,e){e===void 0&&(e=0);if(e!==null&&e>0)return c.prototype.requestAsyncId.call(this,a,d,e);a.actions.push(this);return a.scheduled||(a.scheduled=b.Immediate.setImmediate(a.flush.bind(a,null)))};d.prototype.recycleAsyncId=function(a,d,e){e===void 0&&(e=0);if(e!==null&&e>0||e===null&&this.delay>0)return c.prototype.recycleAsyncId.call(this,a,d,e);a.actions.length===0&&(b.Immediate.clearImmediate(d),a.scheduled=void 0);return void 0};return d}(c.AsyncAction);JF.AsapAction=c}var MF=!1;function NF(){MF||(MF=!0,LF());return KF.exports}var OF={},PF={exports:OF};function QF(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=R();b=function(b){a(c,b);function c(){b.apply(this,arguments)}c.prototype.flush=function(a){this.active=!0;this.scheduled=void 0;var b=this.actions,c,d=-1,e=b.length;a=a||b.shift();do if(c=a.execute(a.state,a.delay))break;while(++d<e&&(a=b.shift()));this.active=!1;if(c){while(++d<e&&(a=b.shift()))a.unsubscribe();throw c}};return c}(b.AsyncScheduler);OF.AsapScheduler=b}var RF=!1;function SF(){RF||(RF=!0,QF());return PF.exports}var TF={},UF={exports:TF};function VF(){var a=NF(),b=SF();TF.asap=new b.AsapScheduler(a.AsapAction)}var WF=!1;function XF(){WF||(WF=!0,VF());return UF.exports}var YF={},ZF={exports:YF};function $F(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D(),c=XF(),d=P();b=function(b){a(e,b);function e(a,e,f){e===void 0&&(e=0),f===void 0&&(f=c.asap),b.call(this),this.source=a,this.delayTime=e,this.scheduler=f,(!d.isNumeric(e)||e<0)&&(this.delayTime=0),(!f||typeof f.schedule!=="function")&&(this.scheduler=c.asap)}e.create=function(a,b,d){b===void 0&&(b=0);d===void 0&&(d=c.asap);return new e(a,b,d)};e.dispatch=function(a){var b=a.source;a=a.subscriber;return this.add(b.subscribe(a))};e.prototype._subscribe=function(a){var b=this.delayTime,c=this.source,d=this.scheduler;return d.schedule(e.dispatch,b,{source:c,subscriber:a})};return e}(b.Observable);YF.SubscribeOnObservable=b}var aG=!1;function bG(){aG||(aG=!0,$F());return ZF.exports}var cG={},dG={exports:cG};function eG(){var a=bG();function b(a,b){b===void 0&&(b=0);return function(d){return d.lift(new c(a,b))}}cG.subscribeOn=b;var c=function(){function b(a,b){this.scheduler=a,this.delay=b}b.prototype.call=function(b,c){return new a.SubscribeOnObservable(c,this.delay,this.scheduler).subscribe(b)};return b}()}var fG=!1;function gG(){fG||(fG=!0,eG());return dG.exports}var hG={},iG={exports:hG};function jG(){var a=gG();function b(b,c){c===void 0&&(c=0);return a.subscribeOn(b,c)(this)}hG.subscribeOn=b}var kG=!1;function lG(){kG||(kG=!0,jG());return iG.exports}c={};var mG={exports:c};function nG(){var a=D(),b=lG();a.Observable.prototype.subscribeOn=b.subscribeOn}var oG=!1;function pG(){oG||(oG=!0,nG());return mG.exports}var qG={},rG={exports:qG};function sG(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=I(),c=L();function d(a,b){return function(c){return c.lift(new e(a,b))}}qG.switchMap=d;var e=function(){function a(a,b){this.project=a,this.resultSelector=b}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.project,this.resultSelector))};return a}(),f=function(d){a(b,d);function b(a,b,c){d.call(this,a),this.project=b,this.resultSelector=c,this.index=0}b.prototype._next=function(a){var b,c=this.index++;try{b=this.project(a,c)}catch(a){this.destination.error(a);return}this._innerSub(b,a,c)};b.prototype._innerSub=function(a,b,d){var e=this.innerSubscription;e&&e.unsubscribe();this.add(this.innerSubscription=c.subscribeToResult(this,a,b,d))};b.prototype._complete=function(){var a=this.innerSubscription;(!a||a.closed)&&d.prototype._complete.call(this)};b.prototype._unsubscribe=function(){this.innerSubscription=null};b.prototype.notifyComplete=function(a){this.remove(a),this.innerSubscription=null,this.isStopped&&d.prototype._complete.call(this)};b.prototype.notifyNext=function(a,b,c,d,e){this.resultSelector?this._tryNotifyNext(a,b,c,d):this.destination.next(b)};b.prototype._tryNotifyNext=function(a,b,c,d){try{a=this.resultSelector(a,b,c,d)}catch(a){this.destination.error(a);return}this.destination.next(a)};return b}(b.OuterSubscriber)}var tG=!1;function uG(){tG||(tG=!0,sG());return rG.exports}var vG={},wG={exports:vG};function xG(){var a=uG(),b=Vd();function c(){return a.switchMap(b.identity)}vG.switchAll=c}var yG=!1;function zG(){yG||(yG=!0,xG());return wG.exports}var AG={},BG={exports:AG};function CG(){var a=zG();function b(){return a.switchAll()(this)}AG._switch=b}var DG=!1;function EG(){DG||(DG=!0,CG());return BG.exports}d={};var FG={exports:d};function GG(){var a=D(),b=EG();a.Observable.prototype["switch"]=b._switch;a.Observable.prototype._switch=b._switch}var HG=!1;function IG(){HG||(HG=!0,GG());return FG.exports}var JG={},KG={exports:JG};function LG(){var a=uG();function b(b,c){return a.switchMap(b,c)(this)}JG.switchMap=b}var MG=!1;function NG(){MG||(MG=!0,LG());return KG.exports}f={};var OG={exports:f};function PG(){var a=D(),b=NG();a.Observable.prototype.switchMap=b.switchMap}var QG=!1;function RG(){QG||(QG=!0,PG());return OG.exports}var SG={},TG={exports:SG};function UG(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=I(),c=L();function d(a,b){return function(c){return c.lift(new e(a,b))}}SG.switchMapTo=d;var e=function(){function a(a,b){this.observable=a,this.resultSelector=b}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.observable,this.resultSelector))};return a}(),f=function(d){a(b,d);function b(a,b,c){d.call(this,a),this.inner=b,this.resultSelector=c,this.index=0}b.prototype._next=function(a){var b=this.innerSubscription;b&&b.unsubscribe();this.add(this.innerSubscription=c.subscribeToResult(this,this.inner,a,this.index++))};b.prototype._complete=function(){var a=this.innerSubscription;(!a||a.closed)&&d.prototype._complete.call(this)};b.prototype._unsubscribe=function(){this.innerSubscription=null};b.prototype.notifyComplete=function(a){this.remove(a),this.innerSubscription=null,this.isStopped&&d.prototype._complete.call(this)};b.prototype.notifyNext=function(a,b,c,d,e){e=this;var f=e.resultSelector;e=e.destination;f?this.tryResultSelector(a,b,c,d):e.next(b)};b.prototype.tryResultSelector=function(a,b,c,d){var e=this,f=e.resultSelector;e=e.destination;try{f=f(a,b,c,d)}catch(a){e.error(a);return}e.next(f)};return b}(b.OuterSubscriber)}var VG=!1;function WG(){VG||(VG=!0,UG());return TG.exports}var XG={},YG={exports:XG};function ZG(){var a=WG();function b(b,c){return a.switchMapTo(b,c)(this)}XG.switchMapTo=b}var $G=!1;function aH(){$G||($G=!0,ZG());return YG.exports}c={};var bH={exports:c};function cH(){var a=D(),b=aH();a.Observable.prototype.switchMapTo=b.switchMapTo}var dH=!1;function eH(){dH||(dH=!0,cH());return bH.exports}var fH={},gH={exports:fH};function hH(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=W(),d=G();function e(a){return function(b){if(a===0)return new d.EmptyObservable();else return b.lift(new f(a))}}fH.take=e;var f=function(){function a(a){this.total=a;if(this.total<0)throw new c.ArgumentOutOfRangeError()}a.prototype.call=function(a,b){return b.subscribe(new g(a,this.total))};return a}(),g=function(c){a(b,c);function b(a,b){c.call(this,a),this.total=b,this.count=0}b.prototype._next=function(a){var b=this.total,c=++this.count;c<=b&&(this.destination.next(a),c===b&&(this.destination.complete(),this.unsubscribe()))};return b}(b.Subscriber)}var iH=!1;function jH(){iH||(iH=!0,hH());return gH.exports}var kH={},lH={exports:kH};function mH(){var a=jH();function b(b){return a.take(b)(this)}kH.take=b}var nH=!1;function oH(){nH||(nH=!0,mH());return lH.exports}d={};var pH={exports:d};function qH(){var a=D(),b=oH();a.Observable.prototype.take=b.take}var rH=!1;function sH(){rH||(rH=!0,qH());return pH.exports}var tH={},uH={exports:tH};function vH(){var a=Hw();function b(b){return a.takeLast(b)(this)}tH.takeLast=b}var wH=!1;function xH(){wH||(wH=!0,vH());return uH.exports}f={};var yH={exports:f};function zH(){var a=D(),b=xH();a.Observable.prototype.takeLast=b.takeLast}var AH=!1;function BH(){AH||(AH=!0,zH());return yH.exports}var CH={},DH={exports:CH};function EH(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=I(),c=L();function d(a){return function(b){return b.lift(new e(a))}}CH.takeUntil=d;var e=function(){function a(a){this.notifier=a}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.notifier))};return a}(),f=function(d){a(b,d);function b(a,b){d.call(this,a),this.notifier=b,this.add(c.subscribeToResult(this,b))}b.prototype.notifyNext=function(a,b,c,d,e){this.complete()};b.prototype.notifyComplete=function(){};return b}(b.OuterSubscriber)}var FH=!1;function GH(){FH||(FH=!0,EH());return DH.exports}var HH={},IH={exports:HH};function JH(){var a=GH();function b(b){return a.takeUntil(b)(this)}HH.takeUntil=b}var KH=!1;function LH(){KH||(KH=!0,JH());return IH.exports}c={};var MH={exports:c};function NH(){var a=D(),b=LH();a.Observable.prototype.takeUntil=b.takeUntil}var OH=!1;function PH(){OH||(OH=!0,NH());return MH.exports}var QH={},RH={exports:QH};function SH(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B();function c(a){return function(b){return b.lift(new d(a))}}QH.takeWhile=c;var d=function(){function a(a){this.predicate=a}a.prototype.call=function(a,b){return b.subscribe(new e(a,this.predicate))};return a}(),e=function(c){a(b,c);function b(a,b){c.call(this,a),this.predicate=b,this.index=0}b.prototype._next=function(a){var b=this.destination,c;try{c=this.predicate(a,this.index++)}catch(a){b.error(a);return}this.nextOrComplete(a,c)};b.prototype.nextOrComplete=function(a,b){var c=this.destination;Boolean(b)?c.next(a):c.complete()};return b}(b.Subscriber)}var TH=!1;function UH(){TH||(TH=!0,SH());return RH.exports}var VH={},WH={exports:VH};function XH(){var a=UH();function b(b){return a.takeWhile(b)(this)}VH.takeWhile=b}var YH=!1;function ZH(){YH||(YH=!0,XH());return WH.exports}d={};var $H={exports:d};function aI(){var a=D(),b=ZH();a.Observable.prototype.takeWhile=b.takeWhile}var bI=!1;function cI(){bI||(bI=!0,aI());return $H.exports}var dI={},eI={exports:dI};function fI(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=I(),c=L();dI.defaultThrottleConfig={leading:!0,trailing:!1};function d(a,b){b===void 0&&(b=dI.defaultThrottleConfig);return function(c){return c.lift(new e(a,b.leading,b.trailing))}}dI.throttle=d;var e=function(){function a(a,b,c){this.durationSelector=a,this.leading=b,this.trailing=c}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.durationSelector,this.leading,this.trailing))};return a}(),f=function(d){a(b,d);function b(a,b,c,e){d.call(this,a),this.destination=a,this.durationSelector=b,this._leading=c,this._trailing=e,this._hasTrailingValue=!1}b.prototype._next=function(a){if(this.throttled)this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=a);else{var b=this.tryDurationSelector(a);b&&this.add(this.throttled=c.subscribeToResult(this,b));this._leading&&(this.destination.next(a),this._trailing&&(this._hasTrailingValue=!0,this._trailingValue=a))}};b.prototype.tryDurationSelector=function(a){try{return this.durationSelector(a)}catch(a){this.destination.error(a);return null}};b.prototype._unsubscribe=function(){var a=this,b=a.throttled;a._trailingValue;a._hasTrailingValue;a._trailing;this._trailingValue=null;this._hasTrailingValue=!1;b&&(this.remove(b),this.throttled=null,b.unsubscribe())};b.prototype._sendTrailing=function(){var a=this,b=a.destination,c=a.throttled,d=a._trailing,e=a._trailingValue;a=a._hasTrailingValue;c&&d&&a&&(b.next(e),this._trailingValue=null,this._hasTrailingValue=!1)};b.prototype.notifyNext=function(a,b,c,d,e){this._sendTrailing(),this._unsubscribe()};b.prototype.notifyComplete=function(){this._sendTrailing(),this._unsubscribe()};return b}(b.OuterSubscriber)}var gI=!1;function hI(){gI||(gI=!0,fI());return eI.exports}var iI={},jI={exports:iI};function kI(){var a=hI();function b(b,c){c===void 0&&(c=a.defaultThrottleConfig);return a.throttle(b,c)(this)}iI.throttle=b}var lI=!1;function mI(){lI||(lI=!0,kI());return jI.exports}f={};var nI={exports:f};function oI(){var a=D(),b=mI();a.Observable.prototype.throttle=b.throttle}var pI=!1;function qI(){pI||(pI=!0,oI());return nI.exports}var rI={},sI={exports:rI};function tI(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=S(),d=hI();function e(a,b,e){b===void 0&&(b=c.async);e===void 0&&(e=d.defaultThrottleConfig);return function(c){return c.lift(new f(a,b,e.leading,e.trailing))}}rI.throttleTime=e;var f=function(){function a(a,b,c,d){this.duration=a,this.scheduler=b,this.leading=c,this.trailing=d}a.prototype.call=function(a,b){return b.subscribe(new g(a,this.duration,this.scheduler,this.leading,this.trailing))};return a}(),g=function(c){a(b,c);function b(a,b,d,e,f){c.call(this,a),this.duration=b,this.scheduler=d,this.leading=e,this.trailing=f,this._hasTrailingValue=!1,this._trailingValue=null}b.prototype._next=function(a){this.throttled?this.trailing&&(this._trailingValue=a,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(h,this.duration,{subscriber:this})),this.leading&&this.destination.next(a))};b.prototype.clearThrottle=function(){var a=this.throttled;a&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),a.unsubscribe(),this.remove(a),this.throttled=null)};return b}(b.Subscriber);function h(a){a=a.subscriber;a.clearThrottle()}}var uI=!1;function vI(){uI||(uI=!0,tI());return sI.exports}var wI={},xI={exports:wI};function yI(){var a=S(),b=hI(),c=vI();function d(d,e,f){e===void 0&&(e=a.async);f===void 0&&(f=b.defaultThrottleConfig);return c.throttleTime(d,e,f)(this)}wI.throttleTime=d}var zI=!1;function AI(){zI||(zI=!0,yI());return xI.exports}c={};var BI={exports:c};function CI(){var a=D(),b=AI();a.Observable.prototype.throttleTime=b.throttleTime}var DI=!1;function EI(){DI||(DI=!0,CI());return BI.exports}var FI={},GI={exports:FI};function HI(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=S();function d(a){a===void 0&&(a=c.async);return function(b){return b.lift(new f(a))}}FI.timeInterval=d;var e=function(){function a(a,b){this.value=a,this.interval=b}return a}();FI.TimeInterval=e;var f=function(){function a(a){this.scheduler=a}a.prototype.call=function(a,b){return b.subscribe(new g(a,this.scheduler))};return a}(),g=function(c){a(b,c);function b(a,b){c.call(this,a),this.scheduler=b,this.lastTime=0,this.lastTime=b.now()}b.prototype._next=function(a){var b=this.scheduler.now(),c=b-this.lastTime;this.lastTime=b;this.destination.next(new e(a,c))};return b}(b.Subscriber)}var II=!1;function JI(){II||(II=!0,HI());return GI.exports}var KI={},LI={exports:KI};function MI(){var a=S(),b=JI();KI.TimeInterval=b.TimeInterval;function c(c){c===void 0&&(c=a.async);return b.timeInterval(c)(this)}KI.timeInterval=c}var NI=!1;function OI(){NI||(NI=!0,MI());return LI.exports}d={};var PI={exports:d};function QI(){var a=D(),b=OI();a.Observable.prototype.timeInterval=b.timeInterval}var RI=!1;function SI(){RI||(RI=!0,QI());return PI.exports}var TI={},UI={exports:TI};function VI(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=function(c){a(b,c);function b(){var a=c.call(this,"Timeout has occurred");this.name=a.name="TimeoutError";this.stack=a.stack;this.message=a.message}return b}(Error);TI.TimeoutError=b}var WI=!1;function XI(){WI||(WI=!0,VI());return UI.exports}var YI={},ZI={exports:YI};function $I(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=S(),c=qj(),d=B(),e=XI();function f(a,d){d===void 0&&(d=b.async);var f=c.isDate(a),h=f?+a-d.now():Math.abs(a);return function(a){return a.lift(new g(h,f,d,new e.TimeoutError()))}}YI.timeout=f;var g=function(){function a(a,b,c,d){this.waitFor=a,this.absoluteTimeout=b,this.scheduler=c,this.errorInstance=d}a.prototype.call=function(a,b){return b.subscribe(new h(a,this.absoluteTimeout,this.waitFor,this.scheduler,this.errorInstance))};return a}(),h=function(c){a(b,c);function b(a,b,d,e,f){c.call(this,a),this.absoluteTimeout=b,this.waitFor=d,this.scheduler=e,this.errorInstance=f,this.action=null,this.scheduleTimeout()}b.dispatchTimeout=function(a){a.error(a.errorInstance)};b.prototype.scheduleTimeout=function(){var a=this.action;a?this.action=a.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(b.dispatchTimeout,this.waitFor,this))};b.prototype._next=function(a){this.absoluteTimeout||this.scheduleTimeout(),c.prototype._next.call(this,a)};b.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.errorInstance=null};return b}(d.Subscriber)}var aJ=!1;function bJ(){aJ||(aJ=!0,$I());return ZI.exports}var cJ={},dJ={exports:cJ};function eJ(){var a=S(),b=bJ();function c(c,d){d===void 0&&(d=a.async);return b.timeout(c,d)(this)}cJ.timeout=c}var fJ=!1;function gJ(){fJ||(fJ=!0,eJ());return dJ.exports}f={};var hJ={exports:f};function iJ(){var a=D(),b=gJ();a.Observable.prototype.timeout=b.timeout}var jJ=!1;function kJ(){jJ||(jJ=!0,iJ());return hJ.exports}var lJ={},mJ={exports:lJ};function nJ(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=S(),c=qj(),d=I(),e=L();function f(a,d,e){e===void 0&&(e=b.async);return function(b){var f=c.isDate(a),h=f?+a-e.now():Math.abs(a);return b.lift(new g(h,f,d,e))}}lJ.timeoutWith=f;var g=function(){function a(a,b,c,d){this.waitFor=a,this.absoluteTimeout=b,this.withObservable=c,this.scheduler=d}a.prototype.call=function(a,b){return b.subscribe(new h(a,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))};return a}(),h=function(c){a(b,c);function b(a,b,d,e,f){c.call(this,a),this.absoluteTimeout=b,this.waitFor=d,this.withObservable=e,this.scheduler=f,this.action=null,this.scheduleTimeout()}b.dispatchTimeout=function(a){var b=a.withObservable;a._unsubscribeAndRecycle();a.add(e.subscribeToResult(a,b))};b.prototype.scheduleTimeout=function(){var a=this.action;a?this.action=a.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(b.dispatchTimeout,this.waitFor,this))};b.prototype._next=function(a){this.absoluteTimeout||this.scheduleTimeout(),c.prototype._next.call(this,a)};b.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null};return b}(d.OuterSubscriber)}var oJ=!1;function pJ(){oJ||(oJ=!0,nJ());return mJ.exports}var qJ={},rJ={exports:qJ};function sJ(){var a=S(),b=pJ();function c(c,d,e){e===void 0&&(e=a.async);return b.timeoutWith(c,d,e)(this)}qJ.timeoutWith=c}var tJ=!1;function uJ(){tJ||(tJ=!0,sJ());return rJ.exports}c={};var vJ={exports:c};function wJ(){var a=D(),b=uJ();a.Observable.prototype.timeoutWith=b.timeoutWith}var xJ=!1;function yJ(){xJ||(xJ=!0,wJ());return vJ.exports}var zJ={},AJ={exports:zJ};function BJ(){var a=S(),b=U();function c(c){c===void 0&&(c=a.async);return b.map(function(a){return new d(a,c.now())})}zJ.timestamp=c;var d=function(){function a(b,a){this.value=b,this.timestamp=a}return a}();zJ.Timestamp=d}var CJ=!1;function DJ(){CJ||(CJ=!0,BJ());return AJ.exports}var EJ={},FJ={exports:EJ};function GJ(){var a=S(),b=DJ();function c(c){c===void 0&&(c=a.async);return b.timestamp(c)(this)}EJ.timestamp=c}var HJ=!1;function IJ(){HJ||(HJ=!0,GJ());return FJ.exports}d={};var JJ={exports:d};function KJ(){var a=D(),b=IJ();a.Observable.prototype.timestamp=b.timestamp}var LJ=!1;function MJ(){LJ||(LJ=!0,KJ());return JJ.exports}var NJ={},OJ={exports:NJ};function PJ(){var a=X();function b(a,b,c){a.push(b);return a}function c(){return a.reduce(b,[])}NJ.toArray=c}var QJ=!1;function RJ(){QJ||(QJ=!0,PJ());return OJ.exports}var SJ={},TJ={exports:SJ};function UJ(){var a=RJ();function b(){return a.toArray()(this)}SJ.toArray=b}var VJ=!1;function WJ(){VJ||(VJ=!0,UJ());return TJ.exports}f={};var XJ={exports:f};function YJ(){var a=D(),b=WJ();a.Observable.prototype.toArray=b.toArray}var ZJ=!1;function $J(){ZJ||(ZJ=!0,YJ());return XJ.exports}var aK={},bK={exports:aK};function cK(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=E(),c=I(),d=L();function e(a){return function(b){return b.lift(new f(a))}}aK.window=e;var f=function(){function a(a){this.windowBoundaries=a}a.prototype.call=function(a,b){a=new g(a);b=b.subscribe(a);b.closed||a.add(d.subscribeToResult(a,this.windowBoundaries));return b};return a}(),g=function(d){a(c,d);function c(a){d.call(this,a),this.window=new b.Subject(),a.next(this.window)}c.prototype.notifyNext=function(a,b,c,d,e){this.openWindow()};c.prototype.notifyError=function(a,b){this._error(a)};c.prototype.notifyComplete=function(a){this._complete()};c.prototype._next=function(a){this.window.next(a)};c.prototype._error=function(a){this.window.error(a),this.destination.error(a)};c.prototype._complete=function(){this.window.complete(),this.destination.complete()};c.prototype._unsubscribe=function(){this.window=null};c.prototype.openWindow=function(){var a=this.window;a&&a.complete();a=this.destination;var c=this.window=new b.Subject();a.next(c)};return c}(c.OuterSubscriber)}var dK=!1;function eK(){dK||(dK=!0,cK());return bK.exports}var fK={},gK={exports:fK};function hK(){var a=eK();function b(b){return a.window(b)(this)}fK.window=b}var iK=!1;function jK(){iK||(iK=!0,hK());return gK.exports}c={};var kK={exports:c};function lK(){var a=D(),b=jK();a.Observable.prototype.window=b.window}var mK=!1;function nK(){mK||(mK=!0,lK());return kK.exports}var oK={},pK={exports:oK};function qK(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=B(),c=E();function d(a,b){b===void 0&&(b=0);return function(c){return c.lift(new e(a,b))}}oK.windowCount=d;var e=function(){function a(a,b){this.windowSize=a,this.startWindowEvery=b}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.windowSize,this.startWindowEvery))};return a}(),f=function(d){a(b,d);function b(a,b,e){d.call(this,a),this.destination=a,this.windowSize=b,this.startWindowEvery=e,this.windows=[new c.Subject()],this.count=0,a.next(this.windows[0])}b.prototype._next=function(a){var b=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,d=this.destination,e=this.windowSize,f=this.windows,g=f.length;for(var h=0;h<g&&!this.closed;h++)f[h].next(a);h=this.count-e+1;h>=0&&h%b===0&&!this.closed&&f.shift().complete();if(++this.count%b===0&&!this.closed){g=new c.Subject();f.push(g);d.next(g)}};b.prototype._error=function(a){var b=this.windows;if(b)while(b.length>0&&!this.closed)b.shift().error(a);this.destination.error(a)};b.prototype._complete=function(){var a=this.windows;if(a)while(a.length>0&&!this.closed)a.shift().complete();this.destination.complete()};b.prototype._unsubscribe=function(){this.count=0,this.windows=null};return b}(b.Subscriber)}var rK=!1;function sK(){rK||(rK=!0,qK());return pK.exports}var tK={},uK={exports:tK};function vK(){var a=sK();function b(b,c){c===void 0&&(c=0);return a.windowCount(b,c)(this)}tK.windowCount=b}var wK=!1;function xK(){wK||(wK=!0,vK());return uK.exports}d={};var yK={exports:d};function zK(){var a=D(),b=xK();a.Observable.prototype.windowCount=b.windowCount}var AK=!1;function BK(){AK||(AK=!0,zK());return yK.exports}var CK={},DK={exports:CK};function EK(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=E(),c=S(),d=B(),e=P(),f=F();function g(a){var b=c.async,d=null,g=Number.POSITIVE_INFINITY;f.isScheduler(arguments[3])&&(b=arguments[3]);f.isScheduler(arguments[2])?b=arguments[2]:e.isNumeric(arguments[2])&&(g=arguments[2]);f.isScheduler(arguments[1])?b=arguments[1]:e.isNumeric(arguments[1])&&(d=arguments[1]);return function(c){return c.lift(new h(a,d,g,b))}}CK.windowTime=g;var h=function(){function a(a,b,c,d){this.windowTimeSpan=a,this.windowCreationInterval=b,this.maxWindowSize=c,this.scheduler=d}a.prototype.call=function(a,b){return b.subscribe(new j(a,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))};return a}(),i=function(c){a(b,c);function b(){c.apply(this,arguments),this._numberOfNextedValues=0}b.prototype.next=function(a){this._numberOfNextedValues++,c.prototype.next.call(this,a)};Object.defineProperty(b.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0});return b}(b.Subject),j=function(c){a(b,c);function b(a,b,d,e,f){c.call(this,a);this.destination=a;this.windowTimeSpan=b;this.windowCreationInterval=d;this.maxWindowSize=e;this.scheduler=f;this.windows=[];a=this.openWindow();if(d!==null&&d>=0){e={subscriber:this,window:a,context:null};var g={windowTimeSpan:b,windowCreationInterval:d,subscriber:this,scheduler:f};this.add(f.schedule(m,b,e));this.add(f.schedule(l,d,g))}else{e={subscriber:this,window:a,windowTimeSpan:b};this.add(f.schedule(k,b,e))}}b.prototype._next=function(a){var b=this.windows,c=b.length;for(var d=0;d<c;d++){var e=b[d];e.closed||(e.next(a),e.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(e))}};b.prototype._error=function(a){var b=this.windows;while(b.length>0)b.shift().error(a);this.destination.error(a)};b.prototype._complete=function(){var a=this.windows;while(a.length>0){var b=a.shift();b.closed||b.complete()}this.destination.complete()};b.prototype.openWindow=function(){var a=new i();this.windows.push(a);var b=this.destination;b.next(a);return a};b.prototype.closeWindow=function(a){a.complete();var b=this.windows;b.splice(b.indexOf(a),1)};return b}(d.Subscriber);function k(a){var b=a.subscriber,c=a.windowTimeSpan,d=a.window;d&&b.closeWindow(d);a.window=b.openWindow();this.schedule(a,c)}function l(a){var b=a.windowTimeSpan,c=a.subscriber,d=a.scheduler,e=a.windowCreationInterval,f=c.openWindow(),g=this,h={action:g,subscription:null};c={subscriber:c,window:f,context:h};h.subscription=d.schedule(m,b,c);g.add(h.subscription);g.schedule(a,e)}function m(a){var b=a.subscriber,c=a.window;a=a.context;a&&a.action&&a.subscription&&a.action.remove(a.subscription);b.closeWindow(c)}}var FK=!1;function GK(){FK||(FK=!0,EK());return DK.exports}var HK={},IK={exports:HK};function JK(){var a=S(),b=P(),c=F(),d=GK();function e(e){var f=a.async,g=null,h=Number.POSITIVE_INFINITY;c.isScheduler(arguments[3])&&(f=arguments[3]);c.isScheduler(arguments[2])?f=arguments[2]:b.isNumeric(arguments[2])&&(h=arguments[2]);c.isScheduler(arguments[1])?f=arguments[1]:b.isNumeric(arguments[1])&&(g=arguments[1]);return d.windowTime(e,g,h,f)(this)}HK.windowTime=e}var KK=!1;function LK(){KK||(KK=!0,JK());return IK.exports}f={};var MK={exports:f};function NK(){var a=D(),b=LK();a.Observable.prototype.windowTime=b.windowTime}var OK=!1;function PK(){OK||(OK=!0,NK());return MK.exports}var QK={},RK={exports:QK};function SK(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=E(),c=z(),d=y(),e=x(),f=I(),g=L();function h(a,b){return function(c){return c.lift(new i(a,b))}}QK.windowToggle=h;var i=function(){function a(a,b){this.openings=a,this.closingSelector=b}a.prototype.call=function(a,b){return b.subscribe(new j(a,this.openings,this.closingSelector))};return a}(),j=function(h){a(f,h);function f(a,b,c){h.call(this,a),this.openings=b,this.closingSelector=c,this.contexts=[],this.add(this.openSubscription=g.subscribeToResult(this,b,b))}f.prototype._next=function(a){var b=this.contexts;if(b){var c=b.length;for(var d=0;d<c;d++)b[d].window.next(a)}};f.prototype._error=function(a){var b=this.contexts;this.contexts=null;if(b){var c=b.length,d=-1;while(++d<c){var e=b[d];e.window.error(a);e.subscription.unsubscribe()}}h.prototype._error.call(this,a)};f.prototype._complete=function(){var a=this.contexts;this.contexts=null;if(a){var b=a.length,c=-1;while(++c<b){var d=a[c];d.window.complete();d.subscription.unsubscribe()}}h.prototype._complete.call(this)};f.prototype._unsubscribe=function(){var a=this.contexts;this.contexts=null;if(a){var b=a.length,c=-1;while(++c<b){var d=a[c];d.window.unsubscribe();d.subscription.unsubscribe()}}};f.prototype.notifyNext=function(a,f,h,i,j){if(a===this.openings){h=this.closingSelector;i=d.tryCatch(h)(f);if(i===e.errorObject)return this.error(e.errorObject.e);else{j=new b.Subject();h=new c.Subscription();f={window:j,subscription:h};this.contexts.push(f);i=g.subscribeToResult(this,i,f);i.closed?this.closeWindow(this.contexts.length-1):(i.context=f,h.add(i));this.destination.next(j)}}else this.closeWindow(this.contexts.indexOf(a))};f.prototype.notifyError=function(a){this.error(a)};f.prototype.notifyComplete=function(a){a!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(a.context))};f.prototype.closeWindow=function(a){if(a===-1)return;var b=this.contexts,c=b[a],d=c.window;c=c.subscription;b.splice(a,1);d.complete();c.unsubscribe()};return f}(f.OuterSubscriber)}var TK=!1;function UK(){TK||(TK=!0,SK());return RK.exports}var VK={},WK={exports:VK};function XK(){var a=UK();function b(b,c){return a.windowToggle(b,c)(this)}VK.windowToggle=b}var YK=!1;function ZK(){YK||(YK=!0,XK());return WK.exports}c={};var $K={exports:c};function aL(){var a=D(),b=ZK();a.Observable.prototype.windowToggle=b.windowToggle}var bL=!1;function cL(){bL||(bL=!0,aL());return $K.exports}var dL={},eL={exports:dL};function fL(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=E(),c=y(),d=x(),e=I(),f=L();function g(a){return function(b){return b.lift(new h(a))}}dL.windowWhen=g;var h=function(){function a(a){this.closingSelector=a}a.prototype.call=function(a,b){return b.subscribe(new i(a,this.closingSelector))};return a}(),i=function(g){a(e,g);function e(a,b){g.call(this,a),this.destination=a,this.closingSelector=b,this.openWindow()}e.prototype.notifyNext=function(a,b,c,d,e){this.openWindow(e)};e.prototype.notifyError=function(a,b){this._error(a)};e.prototype.notifyComplete=function(a){this.openWindow(a)};e.prototype._next=function(a){this.window.next(a)};e.prototype._error=function(a){this.window.error(a),this.destination.error(a),this.unsubscribeClosingNotification()};e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()};e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()};e.prototype.openWindow=function(a){a===void 0&&(a=null);a&&(this.remove(a),a.unsubscribe());a=this.window;a&&a.complete();a=this.window=new b.Subject();this.destination.next(a);a=c.tryCatch(this.closingSelector)();if(a===d.errorObject){var e=d.errorObject.e;this.destination.error(e);this.window.error(e)}else this.add(this.closingNotification=f.subscribeToResult(this,a))};return e}(e.OuterSubscriber)}var gL=!1;function hL(){gL||(gL=!0,fL());return eL.exports}var iL={},jL={exports:iL};function kL(){var a=hL();function b(b){return a.windowWhen(b)(this)}iL.windowWhen=b}var lL=!1;function mL(){lL||(lL=!0,kL());return jL.exports}d={};var nL={exports:d};function oL(){var a=D(),b=mL();a.Observable.prototype.windowWhen=b.windowWhen}var pL=!1;function qL(){pL||(pL=!0,oL());return nL.exports}var rL={},sL={exports:rL};function tL(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=I(),c=L();function d(){var a=[];for(var b=0;b<arguments.length;b++)a[b-0]=arguments[b];return function(b){var c;typeof a[a.length-1]==="function"&&(c=a.pop());var d=a;return b.lift(new e(d,c))}}rL.withLatestFrom=d;var e=function(){function a(a,b){this.observables=a,this.project=b}a.prototype.call=function(a,b){return b.subscribe(new f(a,this.observables,this.project))};return a}(),f=function(d){a(b,d);function b(a,b,e){d.call(this,a);this.observables=b;this.project=e;this.toRespond=[];a=b.length;this.values=new Array(a);for(var e=0;e<a;e++)this.toRespond.push(e);for(var e=0;e<a;e++){var f=b[e];this.add(c.subscribeToResult(this,f,f,e))}}b.prototype.notifyNext=function(a,b,c,d,e){this.values[c]=b;a=this.toRespond;if(a.length>0){d=a.indexOf(c);d!==-1&&a.splice(d,1)}};b.prototype.notifyComplete=function(){};b.prototype._next=function(a){if(this.toRespond.length===0){a=[a].concat(this.values);this.project?this._tryProject(a):this.destination.next(a)}};b.prototype._tryProject=function(a){try{a=this.project.apply(this,a)}catch(a){this.destination.error(a);return}this.destination.next(a)};return b}(b.OuterSubscriber)}var uL=!1;function vL(){uL||(uL=!0,tL());return sL.exports}var wL={},xL={exports:wL};function yL(){var a=vL();function b(){var b=[];for(var c=0;c<arguments.length;c++)b[c-0]=arguments[c];return a.withLatestFrom.apply(void 0,b)(this)}wL.withLatestFrom=b}var zL=!1;function AL(){zL||(zL=!0,yL());return xL.exports}f={};var BL={exports:f};function CL(){var a=D(),b=AL();a.Observable.prototype.withLatestFrom=b.withLatestFrom}var DL=!1;function EL(){DL||(DL=!0,CL());return BL.exports}var FL={},GL={exports:FL};function HL(){var a=Ij();function b(){var b=[];for(var c=0;c<arguments.length;c++)b[c-0]=arguments[c];return a.zip.apply(void 0,b)(this)}FL.zipProto=b}var IL=!1;function JL(){IL||(IL=!0,HL());return GL.exports}c={};var KL={exports:c};function LL(){var a=D(),b=JL();a.Observable.prototype.zip=b.zipProto}var ML=!1;function NL(){ML||(ML=!0,LL());return KL.exports}var OL={},PL={exports:OL};function QL(){var a=Ij();function b(b){return function(c){return c.lift(new a.ZipOperator(b))}}OL.zipAll=b}var RL=!1;function SL(){RL||(RL=!0,QL());return PL.exports}var TL={},UL={exports:TL};function VL(){var a=SL();function b(b){return a.zipAll(b)(this)}TL.zipAll=b}var WL=!1;function XL(){WL||(WL=!0,VL());return UL.exports}d={};var YL={exports:d};function ZL(){var a=D(),b=XL();a.Observable.prototype.zipAll=b.zipAll}var $L=!1;function aM(){$L||($L=!0,ZL());return YL.exports}var bM={},cM={exports:bM};function dM(){var a=function(){function a(a,b){b===void 0&&(b=Number.POSITIVE_INFINITY),this.subscribedFrame=a,this.unsubscribedFrame=b}return a}();bM.SubscriptionLog=a}var eM=!1;function fM(){eM||(eM=!0,dM());return cM.exports}var gM={},hM={exports:gM};function iM(){var a=fM(),b=function(){function b(){this.subscriptions=[]}b.prototype.logSubscribedFrame=function(){this.subscriptions.push(new a.SubscriptionLog(this.scheduler.now()));return this.subscriptions.length-1};b.prototype.logUnsubscribedFrame=function(b){var c=this.subscriptions,d=c[b];c[b]=new a.SubscriptionLog(d.subscribedFrame,this.scheduler.now())};return b}();gM.SubscriptionLoggable=b}var jM=!1;function kM(){jM||(jM=!0,iM());return hM.exports}var lM={},mM={exports:lM};function nM(){function a(a,b){for(var c=0,d=b.length;c<d;c++){var e=b[c],f=Object.getOwnPropertyNames(e.prototype);for(var g=0,h=f.length;g<h;g++){var i=f[g];a.prototype[i]=e.prototype[i]}}}lM.applyMixins=a}var oM=!1;function pM(){oM||(oM=!0,nM());return mM.exports}var qM={},rM={exports:qM};function sM(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D(),c=z(),d=kM(),e=pM();b=function(b){a(d,b);function d(a,d){b.call(this,function(a){var b=this,d=b.logSubscribedFrame();a.add(new c.Subscription(function(){b.logUnsubscribedFrame(d)}));b.scheduleMessages(a);return a}),this.messages=a,this.subscriptions=[],this.scheduler=d}d.prototype.scheduleMessages=function(a){var b=this.messages.length;for(var c=0;c<b;c++){var d=this.messages[c];a.add(this.scheduler.schedule(function(b){var a=b.message;b=b.subscriber;a.notification.observe(b)},d.frame,{message:d,subscriber:a}))}};return d}(b.Observable);qM.ColdObservable=b;e.applyMixins(b,[d.SubscriptionLoggable])}var tM=!1;function uM(){tM||(tM=!0,sM());return rM.exports}var vM={},wM={exports:vM};function xM(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=E(),c=z(),d=kM(),e=pM();b=function(b){a(d,b);function d(a,c){b.call(this),this.messages=a,this.subscriptions=[],this.scheduler=c}d.prototype._subscribe=function(a){var d=this,e=d.logSubscribedFrame();a.add(new c.Subscription(function(){d.logUnsubscribedFrame(e)}));return b.prototype._subscribe.call(this,a)};d.prototype.setup=function(){var a=this,b=a.messages.length;for(var c=0;c<b;c++)(function(){var b=a.messages[c];a.scheduler.schedule(function(){b.notification.observe(a)},b.frame)})()};return d}(b.Subject);vM.HotObservable=b;e.applyMixins(b,[d.SubscriptionLoggable])}var yM=!1;function zM(){yM||(yM=!0,xM());return wM.exports}var AM={},BM={exports:AM};function CM(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=Q(),c=R();c=function(b){a(c,b);function c(a,c){var e=this;a===void 0&&(a=d);c===void 0&&(c=Number.POSITIVE_INFINITY);b.call(this,a,function(){return e.frame});this.maxFrames=c;this.frame=0;this.index=-1}c.prototype.flush=function(){var a=this,b=a.actions;a=a.maxFrames;var c,d;while((d=b.shift())&&(this.frame=d.delay)<=a)if(c=d.execute(d.state,d.delay))break;if(c){while(d=b.shift())d.unsubscribe();throw c}};c.frameTimeFactor=10;return c}(c.AsyncScheduler);AM.VirtualTimeScheduler=c;var d=function(c){a(b,c);function b(a,b,d){d===void 0&&(d=a.index+=1),c.call(this,a,b),this.scheduler=a,this.work=b,this.index=d,this.active=!0,this.index=a.index=d}b.prototype.schedule=function(a,d){d===void 0&&(d=0);if(!this.id)return c.prototype.schedule.call(this,a,d);this.active=!1;var e=new b(this.scheduler,this.work);this.add(e);return e.schedule(a,d)};b.prototype.requestAsyncId=function(a,c,d){d===void 0&&(d=0);this.delay=a.frame+d;c=a.actions;c.push(this);c.sort(b.sortActions);return!0};b.prototype.recycleAsyncId=function(a,b,c){c===void 0;return void 0};b.prototype._execute=function(a,b){if(this.active===!0)return c.prototype._execute.call(this,a,b)};b.sortActions=function(a,b){if(a.delay===b.delay)if(a.index===b.index)return 0;else if(a.index>b.index)return 1;else return-1;else if(a.delay>b.delay)return 1;else return-1};return b}(b.AsyncAction);AM.VirtualAction=d}var DM=!1;function EM(){DM||(DM=!0,CM());return BM.exports}var FM={},GM={exports:FM};function HM(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=D(),c=M(),d=uM(),e=zM(),f=fM(),g=EM(),h=750,i=function(j){a(i,j);function i(a){j.call(this,g.VirtualAction,h),this.assertDeepEqual=a,this.hotObservables=[],this.coldObservables=[],this.flushTests=[]}i.prototype.createTime=function(a){a=a.indexOf("|");if(a===-1)throw new Error('marble diagram for time should have a completion marker "|"');return a*i.frameTimeFactor};i.prototype.createColdObservable=function(a,b,c){if(a.indexOf("^")!==-1)throw new Error('cold observable cannot have subscription offset "^"');if(a.indexOf("!")!==-1)throw new Error('cold observable cannot have unsubscription marker "!"');a=i.parseMarbles(a,b,c);b=new d.ColdObservable(a,this);this.coldObservables.push(b);return b};i.prototype.createHotObservable=function(a,b,c){if(a.indexOf("!")!==-1)throw new Error('hot observable cannot have unsubscription marker "!"');a=i.parseMarbles(a,b,c);b=new e.HotObservable(a,this);this.hotObservables.push(b);return b};i.prototype.materializeInnerObservable=function(a,b){var d=this,e=[];a.subscribe(function(a){e.push({frame:d.frame-b,notification:c.Notification.createNext(a)})},function(a){e.push({frame:d.frame-b,notification:c.Notification.createError(a)})},function(){e.push({frame:d.frame-b,notification:c.Notification.createComplete()})});return e};i.prototype.expectObservable=function(a,d){var e=this;d===void 0&&(d=null);var f=[],g={actual:f,ready:!1};d=i.parseMarblesAsSubscriptions(d).unsubscribedFrame;var h;this.schedule(function(){h=a.subscribe(function(a){var d=a;a instanceof b.Observable&&(d=e.materializeInnerObservable(d,e.frame));f.push({frame:e.frame,notification:c.Notification.createNext(d)})},function(a){f.push({frame:e.frame,notification:c.Notification.createError(a)})},function(){f.push({frame:e.frame,notification:c.Notification.createComplete()})})},0);d!==Number.POSITIVE_INFINITY&&this.schedule(function(){return h.unsubscribe()},d);this.flushTests.push(g);return{toBe:function(a,b,c){g.ready=!0,g.expected=i.parseMarbles(a,b,c,!0)}}};i.prototype.expectSubscriptions=function(a){var b={actual:a,ready:!1};this.flushTests.push(b);return{toBe:function(a){a=typeof a==="string"?[a]:a;b.ready=!0;b.expected=a.map(function(a){return i.parseMarblesAsSubscriptions(a)})}}};i.prototype.flush=function(){var a=this.hotObservables;while(a.length>0)a.shift().setup();j.prototype.flush.call(this);a=this.flushTests.filter(function(a){return a.ready});while(a.length>0){var b=a.shift();this.assertDeepEqual(b.actual,b.expected)}};i.parseMarblesAsSubscriptions=function(a){if(typeof a!=="string")return new f.SubscriptionLog(Number.POSITIVE_INFINITY);var b=a.length,c=-1,d=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY;for(var g=0;g<b;g++){var h=g*this.frameTimeFactor,i=a[g];switch(i){case"-":case" ":break;case"(":c=h;break;case")":c=-1;break;case"^":if(d!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");d=c>-1?c:h;break;case"!":if(e!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");e=c>-1?c:h;break;default:throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+i+"'.")}}if(e<0)return new f.SubscriptionLog(d);else return new f.SubscriptionLog(d,e)};i.parseMarbles=function(a,b,e,f){f===void 0&&(f=!1);if(a.indexOf("!")!==-1)throw new Error('conventional marble diagrams cannot have the unsubscription marker "!"');var g=a.length,h=[],i=a.indexOf("^");i=i===-1?0:i*-this.frameTimeFactor;var j=typeof b!=="object"?function(a){return a}:function(a){return f&&b[a]instanceof d.ColdObservable?b[a].messages:b[a]},k=-1;for(var l=0;l<g;l++){var m=l*this.frameTimeFactor+i,n=void 0,o=a[l];switch(o){case"-":case" ":break;case"(":k=m;break;case")":k=-1;break;case"|":n=c.Notification.createComplete();break;case"^":break;case"#":n=c.Notification.createError(e||"error");break;default:n=c.Notification.createNext(j(o));break}n&&h.push({frame:k>-1?k:m,notification:n})}return h};return i}(g.VirtualTimeScheduler);FM.TestScheduler=i}var IM=!1;function JM(){IM||(IM=!0,HM());return GM.exports}var KM={},LM={exports:KM};function MM(){var a=k(),b=function(){function a(a){a.requestAnimationFrame?(this.cancelAnimationFrame=a.cancelAnimationFrame.bind(a),this.requestAnimationFrame=a.requestAnimationFrame.bind(a)):a.mozRequestAnimationFrame?(this.cancelAnimationFrame=a.mozCancelAnimationFrame.bind(a),this.requestAnimationFrame=a.mozRequestAnimationFrame.bind(a)):a.webkitRequestAnimationFrame?(this.cancelAnimationFrame=a.webkitCancelAnimationFrame.bind(a),this.requestAnimationFrame=a.webkitRequestAnimationFrame.bind(a)):a.msRequestAnimationFrame?(this.cancelAnimationFrame=a.msCancelAnimationFrame.bind(a),this.requestAnimationFrame=a.msRequestAnimationFrame.bind(a)):a.oRequestAnimationFrame?(this.cancelAnimationFrame=a.oCancelAnimationFrame.bind(a),this.requestAnimationFrame=a.oRequestAnimationFrame.bind(a)):(this.cancelAnimationFrame=a.clearTimeout.bind(a),this.requestAnimationFrame=function(b){return a.setTimeout(b,1e3/60)})}return a}();KM.RequestAnimationFrameDefinition=b;KM.AnimationFrame=new b(a.root)}var NM=!1;function OM(){NM||(NM=!0,MM());return LM.exports}var PM={},QM={exports:PM};function RM(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=Q(),c=OM();b=function(b){a(d,b);function d(a,c){b.call(this,a,c),this.scheduler=a,this.work=c}d.prototype.requestAsyncId=function(a,d,e){e===void 0&&(e=0);if(e!==null&&e>0)return b.prototype.requestAsyncId.call(this,a,d,e);a.actions.push(this);return a.scheduled||(a.scheduled=c.AnimationFrame.requestAnimationFrame(a.flush.bind(a,null)))};d.prototype.recycleAsyncId=function(a,d,e){e===void 0&&(e=0);if(e!==null&&e>0||e===null&&this.delay>0)return b.prototype.recycleAsyncId.call(this,a,d,e);a.actions.length===0&&(c.AnimationFrame.cancelAnimationFrame(d),a.scheduled=void 0);return void 0};return d}(b.AsyncAction);PM.AnimationFrameAction=b}var SM=!1;function TM(){SM||(SM=!0,RM());return QM.exports}var UM={},VM={exports:UM};function WM(){var a=this&&this.__extends||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);function d(){this.constructor=a}a.prototype=b===null?Object.create(b):(d.prototype=b.prototype,new d())},b=R();b=function(b){a(c,b);function c(){b.apply(this,arguments)}c.prototype.flush=function(a){this.active=!0;this.scheduled=void 0;var b=this.actions,c,d=-1,e=b.length;a=a||b.shift();do if(c=a.execute(a.state,a.delay))break;while(++d<e&&(a=b.shift()));this.active=!1;if(c){while(++d<e&&(a=b.shift()))a.unsubscribe();throw c}};return c}(b.AsyncScheduler);UM.AnimationFrameScheduler=b}var XM=!1;function YM(){XM||(XM=!0,WM());return VM.exports}var ZM={},$M={exports:ZM};function aN(){var a=TM(),b=YM();ZM.animationFrame=new b.AnimationFrameScheduler(a.AnimationFrameAction)}var bN=!1;function cN(){bN||(bN=!0,aN());return $M.exports}var Z={},dN={exports:Z};function eN(){var a=Gu();Z.audit=a.audit;a=Uu();Z.auditTime=a.auditTime;a=Zk();Z.buffer=a.buffer;a=ml();Z.bufferCount=a.bufferCount;a=Al();Z.bufferTime=a.bufferTime;a=Ol();Z.bufferToggle=a.bufferToggle;a=bm();Z.bufferWhen=a.bufferWhen;a=pm();Z.catchError=a.catchError;a=Dm();Z.combineAll=a.combineAll;a=Sc();Z.combineLatest=a.combineLatest;a=$m();Z.concat=a.concat;a=ee();Z.concatAll=a.concatAll;a=xn();Z.concatMap=a.concatMap;a=Ln();Z.concatMapTo=a.concatMapTo;a=Zn();Z.count=a.count;a=Bo();Z.debounce=a.debounce;a=Po();Z.debounceTime=a.debounceTime;a=cp();Z.defaultIfEmpty=a.defaultIfEmpty;a=qp();Z.delay=a.delay;a=Ep();Z.delayWhen=a.delayWhen;a=no();Z.dematerialize=a.dematerialize;a=Xp();Z.distinct=a.distinct;a=kq();Z.distinctUntilChanged=a.distinctUntilChanged;a=yq();Z.distinctUntilKeyChanged=a.distinctUntilKeyChanged;a=Tr();Z.elementAt=a.elementAt;a=Ev();Z.every=a.every;a=$q();Z.exhaust=a.exhaust;a=nr();Z.exhaustMap=a.exhaustMap;a=Br();Z.expand=a.expand;a=gs();Z.filter=a.filter;a=us();Z.finalize=a.finalize;a=Is();Z.find=a.find;a=Ws();Z.findIndex=a.findIndex;a=ot();Z.first=a.first;a=Rt();Z.groupBy=a.groupBy;a=eu();Z.ignoreElements=a.ignoreElements;a=su();Z.isEmpty=a.isEmpty;a=hv();Z.last=a.last;a=U();Z.map=a.map;a=aw();Z.mapTo=a.mapTo;a=ow();Z.materialize=a.materialize;a=Qw();Z.max=a.max;a=gh();Z.merge=a.merge;a=$d();Z.mergeAll=a.mergeAll;a=O();Z.mergeMap=a.mergeMap;a=O();Z.flatMap=a.mergeMap;a=zx();Z.mergeMapTo=a.mergeMapTo;a=Nx();Z.mergeScan=a.mergeScan;a=ay();Z.min=a.min;a=Y();Z.multicast=a.multicast;a=Cd();Z.observeOn=a.observeOn;a=$h();Z.onErrorResumeNext=a.onErrorResumeNext;a=cz();Z.pairwise=a.pairwise;a=vz();Z.partition=a.partition;a=Jz();Z.pluck=a.pluck;a=Xz();Z.publish=a.publish;a=pA();Z.publishBehavior=a.publishBehavior;a=RA();Z.publishLast=a.publishLast;a=DA();Z.publishReplay=a.publishReplay;a=eB();Z.race=a.race;a=X();Z.reduce=a.reduce;a=BB();Z.repeat=a.repeat;a=PB();Z.repeatWhen=a.repeatWhen;a=cC();Z.retry=a.retry;a=qC();Z.retryWhen=a.retryWhen;a=oy();Z.refCount=a.refCount;a=EC();Z.sample=a.sample;a=SC();Z.sampleTime=a.sampleTime;a=Cw();Z.scan=a.scan;a=oD();Z.sequenceEqual=a.sequenceEqual;a=CD();Z.share=a.share;a=QD();Z.shareReplay=a.shareReplay;a=dE();Z.single=a.single;a=rE();Z.skip=a.skip;a=FE();Z.skipLast=a.skipLast;a=TE();Z.skipUntil=a.skipUntil;a=gF();Z.skipWhile=a.skipWhile;a=uF();Z.startWith=a.startWith;a=zG();Z.switchAll=a.switchAll;a=uG();Z.switchMap=a.switchMap;a=WG();Z.switchMapTo=a.switchMapTo;a=jH();Z.take=a.take;a=Hw();Z.takeLast=a.takeLast;a=GH();Z.takeUntil=a.takeUntil;a=UH();Z.takeWhile=a.takeWhile;a=Mq();Z.tap=a.tap;a=hI();Z.throttle=a.throttle;a=vI();Z.throttleTime=a.throttleTime;a=JI();Z.timeInterval=a.timeInterval;a=bJ();Z.timeout=a.timeout;a=pJ();Z.timeoutWith=a.timeoutWith;a=DJ();Z.timestamp=a.timestamp;a=RJ();Z.toArray=a.toArray;a=eK();Z.window=a.window;a=sK();Z.windowCount=a.windowCount;a=GK();Z.windowTime=a.windowTime;a=UK();Z.windowToggle=a.windowToggle;a=hL();Z.windowWhen=a.windowWhen;a=vL();Z.withLatestFrom=a.withLatestFrom;a=Ij();Z.zip=a.zip;a=SL();Z.zipAll=a.zipAll}var fN=!1;function gN(){fN||(fN=!0,eN());return dN.exports}var $={},hN={exports:$};function iN(){var a=E();$.Subject=a.Subject;$.AnonymousSubject=a.AnonymousSubject;a=D();$.Observable=a.Observable;Jb();Xb();ad();ne();Be();Ke();Ye();bf();qf();Ef();Nf();ag();og();bh();uh();Dh();Rh();Vh();ii();wi();Ki();Yi();lj();Ej();Rj();hk();Uk();hl();vl();Jl();Xl();km();ym();Mm();Vm();jn();sn();Gn();Un();io();wo();Ko();Yo();lp();zp();Np();fq();tq();Hq();Vq();ir();wr();Kr();bs();ps();Ds();Rs();et();xt();$t();nu();Bu();Pu();cv();qv();zv();Nv();Wv();jw();xw();Zw();cx();lx();ux();Ix();Wx();jy();Gy();Py();Yy();lz();Ez();Sz();fA();yA();MA();$A();nB();wB();KB();YB();lC();zC();NC();aD();jD();xD();LD();ZD();mE();AE();OE();bF();pF();DF();pG();IG();RG();eH();sH();BH();PH();cI();qI();EI();SI();kJ();yJ();MJ();$J();nK();BK();PK();cL();qL();EL();NL();aM();a=z();$.Subscription=a.Subscription;a=B();$.Subscriber=a.Subscriber;a=vb();$.AsyncSubject=a.AsyncSubject;a=Bk();$.ReplaySubject=a.ReplaySubject;a=kA();$.BehaviorSubject=a.BehaviorSubject;a=ty();$.ConnectableObservable=a.ConnectableObservable;a=M();$.Notification=a.Notification;a=jt();$.EmptyError=a.EmptyError;a=W();$.ArgumentOutOfRangeError=a.ArgumentOutOfRangeError;a=hb();$.ObjectUnsubscribedError=a.ObjectUnsubscribedError;a=XI();$.TimeoutError=a.TimeoutError;a=pa();$.UnsubscriptionError=a.UnsubscriptionError;a=OI();$.TimeInterval=a.TimeInterval;a=DJ();$.Timestamp=a.Timestamp;a=JM();$.TestScheduler=a.TestScheduler;a=EM();$.VirtualTimeScheduler=a.VirtualTimeScheduler;a=Zj();$.AjaxResponse=a.AjaxResponse;$.AjaxError=a.AjaxError;$.AjaxTimeoutError=a.AjaxTimeoutError;a=Za();$.pipe=a.pipe;a=XF();var b=S(),c=wk(),d=cN(),e=Ca(),f=K(),g=Pa(),h=gN();$.operators=h;h={asap:a.asap,queue:c.queue,animationFrame:d.animationFrame,async:b.async};$.Scheduler=h;a={rxSubscriber:e.rxSubscriber,observable:g.observable,iterator:f.iterator};$.Symbol=a}var jN=!1;function kN(){jN||(jN=!0,iN());return hN.exports}function b(a){switch(a){case void 0:return kN();case"/Observable":return D();case"/Subject":return E();case"/observable/from":return Md();case"/observable/merge":return qh();case"/observable/of":return fd();case"/operator/filter":return ls();case"/operator/map":return Sv();case"/operator/merge":return lh();case"/operator/switchMap":return NG()}}e.exports=b}),null);
__d("rxjs",["rxjs-5.5.2"],(function(a,b,c,d,e,f){e.exports=b("rxjs-5.5.2")()}),null);
__d("Asset3dFeedViewerModalContainer.react",["cx","AnimatedCameraMotion","Asset3DModalViewerStore","Asset3DViewerHelper","EventListener","FDSCloseButton.react","React","UIPagelet","ge","rxjs","SceneViewer.react","SocialVRThreeJS","Spotlight.react"],(function(a,b,c,d,e,f,g){"use strict";a=b("AnimatedCameraMotion").withAnimatedCameraMotion;c=b("Asset3DModalViewerStore").withStore;var h=b("React");b("rxjs").Subscription;var i=a(b("SceneViewer.react"));b("SocialVRThreeJS").Camera;b("SocialVRThreeJS").Scene;d=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this)||this;d.state={cameraPos:null,lookAtPos:null};d.$2=function(){d.props.onExit()};var e=c.store,f=c.viewportInfo,g=c.asset3DInfo;d.$1=e.on("pointerPos").subscribe(function(a){var c=a.x;a=a.y;var e=g.horizontalFov,h=g.verticalFov,i=f.width,j=f.height;c=b("Asset3DViewerHelper").getCameraViewParams(c,a,i,j,e,h);a=c.cameraPos;i=c.lookAtPos;d.setState({lookAtPos:i,cameraPos:a})});return d}var d=c.prototype;d.componentDidMount=function(){var a=this.props.store;b("EventListener").listen(this.refs.contentContainer,"mousemove",function(b){var c=b.offsetX;b=b.offsetY;a.set("pointerPos")({x:c,y:b})});this.setupFeedback()};d.componentWillUnmount=function(){this.$1.unsubscribe()};d.render=function(){var a=this,c=this.props,d=c.scene,e=c.camera;c=c.viewportInfo;var f=this.state,g=f.cameraPos;f=f.lookAtPos;var j=c.height;return h.jsxs(b("Spotlight.react"),{onHide:this.$2,shown:!0,rootClassName:"_6gen",children:[h.jsx("div",{className:"_6gdn",children:h.jsx(b("FDSCloseButton.react"),{onClick:function(){return a.$2()},size:"large"})}),h.jsx("div",{className:"_n3",children:h.jsxs("div",{className:"_6iy4",style:{height:c.height},children:[h.jsx("div",{ref:"contentContainer",tabIndex:0,children:h.jsx(i,{toLookAtPos:f,toCameraPos:g,scene:d,camera:e,viewportInfo:c})}),h.jsx("div",{style:{height:j,overflowY:"auto"},className:"_6iy5",id:"pagelet_asset3d_viewer"})]})})]})};d.setupFeedback=function(){b("UIPagelet").loadFromEndpoint("Asset3DViewerPagelet",b("ge")("pagelet_asset3d_viewer",this.root),{storyID:this.props.storyID})};return c}(h.Component);e.exports=c(d)}),null);
__d("VertexAlphaMaterial",["ThreeJS.r93"],(function(a,b,c,d,e,f){var g=!1;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;c.name="CustomVertexAlphaShader";c.vertexShader="#include <common>\n          #include <skinning_pars_vertex>\n          #include <clipping_planes_pars_vertex>\n          #include <fog_pars_vertex>\n          attribute vec4 color;\n          varying vec4 colorAlpha;\n          void main(void) {\n            #include <skinbase_vertex>\n            #include <begin_vertex>\n            #include <skinning_vertex>\n            #include <project_vertex>\n            #include <worldpos_vertex>\n            #include <clipping_planes_vertex>\n            #include <fog_vertex>\n            colorAlpha = color;\n          }";c.fragmentShader="#include <common>\n          #include <fog_pars_fragment>\n          #include <clipping_planes_pars_fragment>\n          uniform float opacity;\n          varying vec4 colorAlpha;\n          void main(void) {\n            #include <clipping_planes_fragment>\n            gl_FragColor = colorAlpha;\n            gl_FragColor.a *= opacity;\n            #include <fog_fragment>\n            #include <premultiplied_alpha_fragment>\n            "+(g?"gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);":"")+"\n          }";c.uniforms.fogColor={value:new(b("ThreeJS.r93").Color)()};c.uniforms.fogNear={value:0};c.uniforms.fogFar={value:0};c.uniforms.fogDensity={value:0};c.uniforms.opacity={value:1};return c}return c}(b("ThreeJS.r93").ShaderMaterial);e.exports=a}),null);
__d("Asset3dThreeJsHelpers",["ThreeJS.r93","VertexAlphaMaterial"],(function(a,b,c,d,e,f){"use strict";f.onModelLoad=a;function a(a){a.traverse(function(a){if(a.isMesh){a=a;if(!a.geometry.isBufferGeometry)return;var c=a.material;c.map&&c.map.isTexture&&c.map.anisotropy===1&&(c.map.anisotropy=4);var d=a.geometry;d=d.getAttribute("color");var e=!1;if(d&&d.itemSize===4){for(var f=0,g=3;f<d.count;f++,g+=4)if(d.array[g]<1){e=!0;break}e&&(c=new(b("VertexAlphaMaterial"))({flatShading:c.flatShading,skinning:c.skinning,transparent:c.transparent,morphTargets:c.morphTargets,fog:!0,clipping:!0}));c.needsUpdate=!0;a.material=c}}})}}),null);
__d("Asset3dTurntableCameraControl",["Asset3dCameraControl","Ease","SocialVRThreeJS","SphericalViewportControl","Tween","degToRad","radToDeg","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";var g=b("degToRad")(-70),h=b("degToRad")(100),i=1.2,j=.01,k=30,l=.95,m=.1,n=10,o=.15,p=270,q=50,r=.05,s=.001,t=6.5,u=1.2,v=Object.freeze({FAKE_GYRO_INITIAL:"fake_gyro_initial",FOCUS_STATE:"focus_state",FAKE_GYRO_AFTER_FOCUS:"fake_gyro_after_focus"});a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,g,h){var i;i=a.call(this,c,d,f,g,h)||this;i.$Asset3dTurntableCameraControl1=new(b("SocialVRThreeJS").Object3D)();i.$Asset3dTurntableCameraControl2=new(b("SocialVRThreeJS").Object3D)();i.$Asset3dTurntableCameraControl3=new(b("SocialVRThreeJS").Vector3)();i.$Asset3dTurntableCameraControl4=new(b("SocialVRThreeJS").Vector3)();i.$Asset3dTurntableCameraControl5=new(b("SocialVRThreeJS").Object3D)();i.$Asset3dTurntableCameraControl9=0;i.$Asset3dTurntableCameraControl10=!1;i.$Asset3dTurntableCameraControl12=v.FAKE_GYRO_INITIAL;i.$Asset3dTurntableCameraControl15=null;i.__updateResetCamera=function(){var a=i.__sphericalViewportControl.getOrientation();Math.abs(a.x-i.__initialOrientation.x)>180&&(a.x>i.__initialOrientation.x?a.x-=360:a.x+=360);i.__sphericalViewportControl.setSphericalOrientation(a.x+r*(i.__initialOrientation.x-a.x),a.y+r*(i.__initialOrientation.y-a.y));var c=i.__camera.position;c.set(c.x+r*(i.__cameraInitialPosition.x-c.x),c.y+r*(i.__cameraInitialPosition.y-c.y),c.z+r*(i.__cameraInitialPosition.z-c.z));var d=i.__cameraTarget;d.set(d.x+r*(i.__cameraInitialTarget.x-d.x),d.y+r*(i.__cameraInitialTarget.y-d.y),d.z+r*(i.__cameraInitialTarget.z-d.z));i.$Asset3dTurntableCameraControl1.position.x+=r*(i.$Asset3dTurntableCameraControl13-i.$Asset3dTurntableCameraControl1.position.x);i.$Asset3dTurntableCameraControl2.position.y+=r*(i.$Asset3dTurntableCameraControl14-i.$Asset3dTurntableCameraControl2.position.y);var e=Math.abs(a.x);a=Math.abs(a.y);var f=Math.abs(c.x-i.__cameraInitialPosition.x),g=Math.abs(c.y-i.__cameraInitialPosition.y);c=Math.abs(c.z-i.__cameraInitialPosition.z);var h=Math.abs(d.x-i.__cameraInitialTarget.x),j=Math.abs(d.y-i.__cameraInitialTarget.y);d=Math.abs(d.z-i.__cameraInitialTarget.z);(e>s||a>s||f>s||g>s||c>s||h>s||j>s||d>s)&&i.$Asset3dTurntableCameraControl15?i.$Asset3dTurntableCameraControl15=b("requestAnimationFrame")(i.__updateResetCamera):i.$Asset3dTurntableCameraControl15=null};i.__camera.name="Turntable Camera";i.$Asset3dTurntableCameraControl5.add(i.__camera);e.add(i.$Asset3dTurntableCameraControl5);i.$Asset3dTurntableCameraControl11=new(b("Tween"))();return i}var d=c.prototype;d.setupViewportListeners=function(){var a=this,c={enableGyro:!0,slipFactor:o,enableRubberBanding:!1,disableAutoClientSizeUpdate:!0,enableZoomWithShiftKey:!0,enablePanningWithRightMouse:!0},d={expansionCoef:1.01,fieldOfView:q,initialHeading:p,initialPitch:0,projectionType:"flat"};this.__sphericalViewportControl=new(b("SphericalViewportControl"))(this.__canvas,d,c);this.__sphericalViewportControl.updateViewportClientSize({width:this.__width,height:this.__height});this.__sphericalViewportControl.addListener("viewportChange",function(c,d,e){a.__yaw=b("degToRad")(c),a.__pitch=b("degToRad")(-d),a.$Asset3dTurntableCameraControl12===v.FOCUS_STATE&&(a.__pitch=Math.min(b("degToRad")(45),Math.max(a.__pitch,b("degToRad")(-45)))),a.setDirty(!0)});this.__sphericalViewportControl.addListener("DOM/click",function(b){a.__canvas.dispatchEvent(new CustomEvent("DOM/click"))});this.__sphericalViewportControl.addListener("mouseMove",function(b){a.$Asset3dTurntableCameraControl10&&(a.__sphericalViewportControl.setMovementPosition(b),a.$Asset3dTurntableCameraControl10=!1),a.setDirty(!0),a.__renderingControl.startRenderingLoop()});this.__sphericalViewportControl.addListener("wheelScrollWithShiftKey",function(b,c){a.setDirty(!0);a.$Asset3dTurntableCameraControl15=null;var d=a.__camera.position.length();b>0?d<a.$Asset3dTurntableCameraControl7&&(a.$Asset3dTurntableCameraControl16((1-1/l)*c.x,(1/l-1)*c.y),a.__camera.position.divideScalar(l),a.$Asset3dTurntableCameraControl1.position.divideScalar(l),a.$Asset3dTurntableCameraControl2.position.divideScalar(l)):b<0&&(d>a.$Asset3dTurntableCameraControl6&&(a.$Asset3dTurntableCameraControl16((1-l)*c.x,(l-1)*c.y),a.__camera.position.multiplyScalar(l),a.$Asset3dTurntableCameraControl1.position.multiplyScalar(l),a.$Asset3dTurntableCameraControl2.position.multiplyScalar(l)))});this.__sphericalViewportControl.addListener("panningWithRightMouse",function(b){a.$Asset3dTurntableCameraControl16(-b.x,b.y),a.setDirty(!0),a.$Asset3dTurntableCameraControl15=null});this.__sphericalViewportControl.addListener("updateViewportMoveStart",function(b){a.$Asset3dTurntableCameraControl15=null});this.__sphericalViewportControl.addListener("updateViewportMove",function(b){a.$Asset3dTurntableCameraControl11.stop(),a.setDirty(!0)});this.__sphericalViewportControl.addListener("updateViewportEnd",function(c,d){a.$Asset3dTurntableCameraControl8=d,a.$Asset3dTurntableCameraControl9=c,a.$Asset3dTurntableCameraControl12===v.FOCUS_STATE&&(a.$Asset3dTurntableCameraControl12=v.FAKE_GYRO_AFTER_FOCUS,a.__sphericalViewportControl.setSphericalOrientation(b("radToDeg")(a.__yaw),b("radToDeg")(-a.__pitch)),a.__sphericalViewportControl.setAngularVelocityScaleFactor({x:1,y:1}),a.__sphericalViewportControl.reEnableGyro(),a.$Asset3dTurntableCameraControl10=!0),a.$Asset3dTurntableCameraControl17()});this.__sphericalViewportControl.addListener("onMovementStart",function(b){a.$Asset3dTurntableCameraControl15=null,a.$Asset3dTurntableCameraControl11.stop(),a.setDirty(!0),a.$Asset3dTurntableCameraControl12!==v.FOCUS_STATE&&(a.$Asset3dTurntableCameraControl12=v.FOCUS_STATE,a.__sphericalViewportControl.setAngularVelocityScaleFactor({x:t,y:u}))})};d.modelLoad=function(a,c){c===void 0;this.setDirty(!0);c=null;var d=null;a.traverse(function(a){a.name==="FB_Post_Camera"?c=a:a.name==="FB_Post_Target"&&(d=a)});if(c&&d){c.updateMatrixWorld();d.updateMatrixWorld();var e=new(b("SocialVRThreeJS").Vector3)().setFromMatrixPosition(c.matrixWorld),f=new(b("SocialVRThreeJS").Vector3)().setFromMatrixPosition(d.matrixWorld);this.__cameraTarget.copy(f);this.__camera.near=c.near;this.__camera.far=c.far;this.__camera.fov=c.fov;e.sub(f);f=e.length();e.normalize();var g=Math.asin(e.y);e=Math.atan2(e.x,e.z);this.__sphericalViewportControl.setRelativeSphericalOrientation(b("radToDeg")(e),b("radToDeg")(g))}else{e=new(b("SocialVRThreeJS").Box3)().setFromObject(a);g=new(b("SocialVRThreeJS").Vector3)();a=e.getSize(g).length();e.getCenter(this.__cameraTarget);this.__camera.near=a*j;this.__camera.far=a*k;this.__camera.aspect=1;f=a*i}this.$Asset3dTurntableCameraControl6=m*f;this.$Asset3dTurntableCameraControl7=n*f;this.$Asset3dTurntableCameraControl5.position.copy(this.__cameraTarget);this.__camera.position.set(0,0,f);this.$Asset3dTurntableCameraControl2.position.y=2*f*Math.tan(b("degToRad")(this.__camera.fov*.5));this.$Asset3dTurntableCameraControl1.position.x=this.$Asset3dTurntableCameraControl2.position.y*this.__camera.aspect;this.$Asset3dTurntableCameraControl5.add(this.$Asset3dTurntableCameraControl1);this.$Asset3dTurntableCameraControl5.add(this.$Asset3dTurntableCameraControl2);this.__camera.updateProjectionMatrix();this.__initialOrientation=this.__sphericalViewportControl.getOrientation();this.__cameraInitialTarget=this.__cameraTarget.clone();this.__cameraInitialPosition=this.__camera.position.clone();this.$Asset3dTurntableCameraControl14=this.$Asset3dTurntableCameraControl2.position.y;this.$Asset3dTurntableCameraControl13=this.$Asset3dTurntableCameraControl1.position.x};d.update=function(a){if(!this.isDirty())return;a=g+h*(1-a);a=this.__pitch+a;var b=-this.__yaw,c=-.001*Math.cos(a)*Math.cos(b),d=.001*Math.sin(a);a=-.001*Math.cos(a)*Math.sin(b);this.$Asset3dTurntableCameraControl5.position.set(c+this.__cameraTarget.x,d+this.__cameraTarget.y,a+this.__cameraTarget.z);this.$Asset3dTurntableCameraControl5.lookAt(this.__cameraTarget)};d.$Asset3dTurntableCameraControl16=function(a,b){var c=this.$Asset3dTurntableCameraControl3,d=this.$Asset3dTurntableCameraControl4;c.set(0,0,0);this.$Asset3dTurntableCameraControl5.updateMatrixWorld();d.setFromMatrixPosition(this.$Asset3dTurntableCameraControl1.matrixWorld);d.sub(this.__cameraTarget);c.addScaledVector(d,a);d.setFromMatrixPosition(this.$Asset3dTurntableCameraControl2.matrixWorld);d.sub(this.__cameraTarget);c.addScaledVector(d,b);this.__cameraTarget.add(c);this.$Asset3dTurntableCameraControl5.position.add(c)};d.$Asset3dTurntableCameraControl17=function(){var a=this;this.$Asset3dTurntableCameraControl12===v.FAKE_GYRO_INITIAL&&this.$Asset3dTurntableCameraControl11.start(function(c,d){a.setDirty(!0);d=b("Tween").scale(a.$Asset3dTurntableCameraControl9,a.__initialOrientation.x,c);c=b("Tween").scale(a.$Asset3dTurntableCameraControl8,a.__initialOrientation.y,c);a.__sphericalViewportControl.setSphericalOrientation(d,c)},2e3,b("Ease").makePowerIn(3))};d.resetCamera=function(){this.$Asset3dTurntableCameraControl15||(this.$Asset3dTurntableCameraControl15=b("requestAnimationFrame")(this.__updateResetCamera))};d.destroy=function(){a.prototype.destroy.call(this),this.$Asset3dTurntableCameraControl11.stop,this.__sphericalViewportControl&&this.__sphericalViewportControl.destroy()};d.resizeCanvas=function(a,b){this.__sphericalViewportControl&&this.__sphericalViewportControl.updateViewportClientSize({width:a,height:b})};return c}(b("Asset3dCameraControl"));e.exports=a}),null);
__d("VrHtmlToImageDataURLLoader",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1=document.createElement("canvas")}a.getInstance=function(){a.singleVrHtmlToImageDataURLLoader||(a.singleVrHtmlToImageDataURLLoader=new a());return a.singleVrHtmlToImageDataURLLoader};var b=a.prototype;b.loadHtml=function(b,c,d,e,f){c=a.WORLD_TO_PIXELS*c;d=a.WORLD_TO_PIXELS*d;b='<svg xmlns="http://www.w3.org/2000/svg" background-color="blue" width="'+c+'" height="'+d+'"><foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml" style="height:100%;width:100%; xbackground:green;">'+b+"</div></foreignObject></svg>";b=encodeURIComponent(b);e.onload=this.$2.bind(this,e,f,c,d);e.src="data:image/svg+xml,"+b};b.$2=function(a,b,c,d){var e=this.$1.getContext("2d");this.$1.width=c;this.$1.height=d;e.clearRect(0,0,this.$1.width,this.$1.height);e.drawImage(a,0,0);b(this.$1.toDataURL("image/png"))};b.loadPicture=function(a,b,c){b.crossOrigin="Anonymous",b.onload=this.$3.bind(this,b,c),b.src=a};b.$3=function(a,b){var c=this.$1.getContext("2d");this.$1.width=a.width;this.$1.height=a.height;c.clearRect(0,0,this.$1.width,this.$1.height);c.drawImage(a,0,0);b(this.$1.toDataURL("image/png"))};return a}();e.exports=a;a.WORLD_TO_PIXELS=1024;a.singleVrHtmlToImageDataURLLoader=null}),null);
__d("Asset3dVr3DofZoomNuxText",["SocialVRThreeJS","VrHtmlToImageDataURLLoader"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a;this.$3=new Image();this.$4=new Image();this.$2=new((a=b("SocialVRThreeJS")).Texture)();this.$2.image=this.$3;this.$2.wrapS=a.RepeatWrapping;this.$2.wrapT=a.RepeatWrapping;this.$2.repeat.x=1;this.$2.repeat.y=1;this.$5=new a.Mesh(new a.PlaneGeometry(this.$1.width,this.$1.height,32),new a.MeshBasicMaterial({map:this.$2,transparent:!0,depthWrite:!1,opacity:0}));this.$5.name="nuxTextMesh";this.$6()}var c=a.prototype;c.model=function(){return this.$5};c.$6=function(){var a=this,c=(this.$1.height*b("VrHtmlToImageDataURLLoader").WORLD_TO_PIXELS-8)/6,d=c-2;d='<div style="height:100%;padding:4px;text-align:center;font-family:Helvetica, Arial, sans-serif;font-size:'+d+"px;line-height:"+c+'px;">';d+="<div><b>"+this.$1.headerText.toString()+"</b></div>";d+='<div style="padding-top: '+c/2+'px;">'+this.$1.bodyText.toString()+"</div>";d+="</div>";b("VrHtmlToImageDataURLLoader").getInstance().loadHtml(d,this.$1.width,this.$1.height,this.$4,function(b){a.$3.onload=function(){a.$2.needsUpdate=!0},a.$3.src=b})};return a}();e.exports=a}),null);
__d("ThreeJsHelpers",["SocialVRThreeJS"],(function(a,b,c,d,e,f){"use strict";f.createRoundedCorneredPlane=a;f.disposeModel=c;f.createAnimationGroup=d;function a(a,c,d,e){e=new(b("SocialVRThreeJS").Shape)();var f=-a/2,g=-c/2;e.moveTo(f,g+d);e.lineTo(f,g+c-d);e.quadraticCurveTo(f,g+c,f+d,g+c);e.lineTo(f+a-d,g+c);e.quadraticCurveTo(f+a,g+c,f+a,g+c-d);e.lineTo(f+a,g+d);e.quadraticCurveTo(f+a,g,f+a-d,g);e.lineTo(f+d,g);e.quadraticCurveTo(f,g,f,g+d);return new(b("SocialVRThreeJS").ShapeBufferGeometry)(e)}function c(a){a.traverse(function(a){a.isMesh&&(a.geometry&&a.geometry.dispose(),a.material&&(Object.values(a.material).forEach(function(a){a instanceof b("SocialVRThreeJS").Texture&&a.dispose()}),a.material.dispose()))})}function d(a){var c=new(b("SocialVRThreeJS").AnimationObjectGroup)();a.traverse(function(a){a.isMesh&&c.add(a)});return c}}),null);
__d("VrFadeAnimation",["SocialVRThreeJS"],(function(a,b,c,d,e,f){var g=1;a=function(){function a(a,c){this.$2=new(b("SocialVRThreeJS").Clock)();this.$1=new(b("SocialVRThreeJS").AnimationMixer)(a);var d=[];c.forEach(function(a){if(a.objectNames)a.objectNames.forEach(function(c){c=new(b("SocialVRThreeJS").NumberKeyframeTrack)(c+".material.opacity",a.times,a.opacities,b("SocialVRThreeJS").InterpolateLinear);d.push(c)});else{var c=new(b("SocialVRThreeJS").NumberKeyframeTrack)(".material.opacity",a.times,a.opacities,b("SocialVRThreeJS").InterpolateLinear);d.push(c)}});this.$3=new(b("SocialVRThreeJS").AnimationClip)("fadeAnimation",-1,d)}var c=a.prototype;c.start=function(){this.$1.clipAction(this.$3).play().setLoop(b("SocialVRThreeJS").LoopOnce,g),this.$2.start()};c.stop=function(){this.$1.clipAction(this.$3).stop(),this.$2.stop()};c.update=function(){this.$1.update(this.$2.getDelta())};c.isRunning=function(){return this.$1.clipAction(this.$3).isRunning()};return a}();e.exports=a}),null);
__d("Asset3DVr3ZoomNux",["fbt","Asset3dVr3DofZoomNuxText","SocialVRThreeJS","ThreeJsHelpers","VrFadeAnimation"],(function(a,b,c,d,e,f,g){"use strict";var h=.75,i=.375,j=42,k=13,l=4,m=120,n=280,o=m*k,p=1e3;a=function(){function a(a){this.$1=a;this.$7=!1;this.$5=null;this.$2=new((a=b("SocialVRThreeJS")).Mesh)(b("ThreeJsHelpers").createRoundedCorneredPlane(h,i,.025),new a.MeshBasicMaterial({color:"white",depthWrite:!1,transparent:!0,opacity:0}));this.$2.name="nuxMesh";var c=h*.6,d=i*.75;this.$6=new(b("Asset3dVr3DofZoomNuxText"))({headerText:g._("Zoom"),bodyText:g._("Slide your thumb up or down on your controller's trackpad to zoom in or out"),width:c,height:d});c=this.$6.model();d=h*.1;c.translateX(d);this.$2.add(c);c=new a.TextureLoader().load(this.$1.textureURI);c.wrapS=a.RepeatWrapping;c.wrapT=a.RepeatWrapping;c.repeat.x=m/o;c.repeat.y=1;var e=i*.95,f=e*m/n;this.$3=new a.Mesh(new a.PlaneGeometry(f,e,1),new a.MeshBasicMaterial({colorWrite:!0,depthWrite:!1,map:c,transparent:!0,opacity:0}));this.$3.name="controllerMesh";this.$3.translateX(-(h-f)/2+d/2);this.$2.add(this.$3);e=[{times:[0,.5,4,5],opacities:[0,.25,.25,0],objectNames:[this.$2.name]},{times:[0,.75,1,4,5],opacities:[0,1,1,1,0],objectNames:[this.$3.name,this.$6.model().name]}];this.$4=new(b("VrFadeAnimation"))(this.$2,e)}var c=a.prototype;c.model=function(){return this.$2};c.size=function(){var a=new(b("SocialVRThreeJS").Box3)().setFromObject(this.model()),c=new(b("SocialVRThreeJS").Vector3)();a.getSize(c);return c};c.$8=function(){this.$7=!0,this.$3.material.map.offset.x=0,this.$5={nextFrameTime:Date.now()+p,nextframeNumber:0,frameCount:0},this.$4.start()};c.onRender=function(){this.$7||this.$8();this.$4&&this.$4.update();var a=this.$5;if(a&&a.frameCount<=k*l){var b=Date.now();if(b>a.nextFrameTime){b=this.$3.material.map;b.offset.x=a.nextframeNumber*b.repeat.x;b=Math.floor(a.frameCount/k);b%2===0?a.nextframeNumber+=1:a.nextframeNumber-=1;a.frameCount+=1;a.nextFrameTime+=j}}};return a}();e.exports=a}),null);
__d("XAsset3DVrStoryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/3d/vrstory/",{post_id:{type:"FBID",required:!0}})}),null);
__d("Asset3dVrStoryFetcher",["invariant","Promise","Asset3dThreeJsHelpers","XAsset3DVrStoryController","XAsyncRequest","GLTFLoader.r93.patch","SocialVRThreeJS"],(function(a,b,c,d,e,f,g){"use strict";f.sendPhotoRequest=a;b("GLTFLoader.r93.patch").patch();function a(a,c){var d=b("XAsset3DVrStoryController").getURIBuilder();d.setFBID("post_id",String(a));d=d.getURI();var e=new(b("XAsyncRequest"))();e.setURI(d);e.setMethod("GET");e.setReadOnly(!0);return new(b("Promise"))(function(d,f){e.setHandler(function(e){var h=e.payload;if(c!=null){e=h.glbURI;e||g(0,13154);c.load(e,function(c){var e=c.userData;c=c.scene;b("Asset3dThreeJsHelpers").onModelLoad(c);d({userData:e,model:c,storyProps:h.storyProps,photoID:a.toString()})},null,function(){f("LoadGLTFError")})}else d({userData:null,model:null,storyProps:h.storyProps,photoID:a.toString()})}).setErrorHandler(function(){f("FetchStoryError")}),e.send()})}}),null);
__d("XAsset3DVrNavigationController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/3d/vrnavigation/",{original_creation_time:{type:"Int",required:!0},cursor:{type:"String"},feed_type:{type:"Enum",required:!0,enumType:1}})}),null);
__d("Asset3dPhotoVrNavigator",["invariant","Promise","Asset3dVrStoryFetcher","XAsset3DVrNavigationController","XAsyncRequest","GLTFLoader.r93.patch"],(function(a,b,c,d,e,f,g){"use strict";var h=b("GLTFLoader.r93.patch").patch(),i=6;a=function(){function a(a){this.$1=new h(),this.$3=a.creationTime,this.$2=a.feedType,this.__nextCursor=null,this.__currentPostIds=[],this.__nextPostIds=null,this.__currentNextIndex=0,this.__fetchNextPromise=null,this.__atEndOfFeed=!1,this.__fetchNextProps()}var c=a.prototype;c.feedType=function(){return this.$2};c.atEndOfFeed=function(){return this.__atEndOfFeed};c.__isCurrentIndexOutsideOfFetchBoundary=function(){return this.__currentPostIds.length-this.__currentNextIndex<i};a.__sendNextIdsRequest=function(a,c,d){var e=b("XAsset3DVrNavigationController").getURIBuilder();e.setInt("original_creation_time",a);e.setEnum("feed_type",c);d&&e.setString("cursor",d);a=e.getURI();var f=new(b("XAsyncRequest"))();f.setURI(a);f.setMethod("GET");f.setReadOnly(!0);return new(b("Promise"))(function(a,b){f.setHandler(function(b){b=b.payload.nextProps;a(b)}).setErrorHandler(function(){b("FetchNextIdsError")}),f.send()})};c.__fetchNextProps=function(){var c=this;if(this.__fetchNextPromise===null&&(this.__currentPostIds.length===0||this.__isCurrentIndexOutsideOfFetchBoundary()&&this.__nextPostIds===null))if(this.__atEndOfFeed)this.__fetchNextPromise=b("Promise").reject("FetchingPastEndOfFeedError");else{var d=a.__sendNextIdsRequest(this.$3,this.$2,this.__nextCursor);this.__fetchNextPromise=d.then(function(a){a?(c.__nextPostIds=a.nextPostIds,c.__nextCursor=a.nextCursor,c.__atEndOfFeed=!a.hasNext):(c.__nextPostIds=null,c.__nextCursor=null,c.__atEndOfFeed=!0),c.__fetchNextPromise=null},function(a){c.__fetchNextPromise=null;c.__atEndOfFeed=!0;return b("Promise").reject(a)})}if(this.__fetchNextPromise&&this.__currentNextIndex===this.__currentPostIds.length)return this.__fetchNextPromise;else return b("Promise").resolve()};c.fetchNextPhoto=function(){var a=this;return this.__fetchNextProps().then(function(){return a.__fetchPhoto()},function(a){return b("Promise").reject(a)})};c.__fetchPhoto=function(){var a=this;this.__currentNextIndex===this.__currentPostIds.length&&(this.__currentNextIndex=0,this.__nextPostIds||g(0,13056),this.__currentPostIds=this.__nextPostIds,this.__nextPostIds=null);var c=this.__currentPostIds[this.__currentNextIndex];this.__currentNextIndex+=1;return b("Asset3dVrStoryFetcher").sendPhotoRequest(c,this.$1).then(function(b){var c=a.__currentNextIndex===a.__currentPostIds.length&&a.__atEndOfFeed;return babelHelpers["extends"]({atEndOfFeed:c},b)})};return a}();e.exports=a}),null);
__d("Asset3dVrRoundButton",["SocialVRThreeJS"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a;this.$2=new((a=b("SocialVRThreeJS")).Mesh)(new a.CircleGeometry(this.$1.radius,64),new a.MeshBasicMaterial({colorWrite:!0,depthWrite:!1}));this.$2.frustumCulled=!1;this.$3=new a.Mesh(new a.CircleGeometry(this.$1.textureRadius,64),new a.MeshBasicMaterial({colorWrite:!0,depthWrite:!1,transparent:!0}));this.$3.frustumCulled=!1;this.$2.add(this.$3)}var c=a.prototype;c.model=function(){return this.$2};c.hitTest=function(a){a=a.intersectObject(this.$2,!1);return a.length>0};c.setColor=function(a){this.$2.material.color=a};c.setTexture=function(a){this.$3.material.map=a};return a}();e.exports=a}),null);
__d("Asset3dVrRoundButtonManager",["Asset3dVrRoundButton","SocialVRThreeJS"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a;this.$9=!1;this.$2=new((a=b("SocialVRThreeJS")).Color)(this.$1.color);this.$3=new a.Color(this.$1.hoverColor);this.$4=new a.Color(this.$1.clickColor);this.$6=new a.TextureLoader().load(this.$1.textureURI);this.$6.wrapS=a.RepeatWrapping;this.$6.wrapT=a.RepeatWrapping;this.$6.repeat.x=1;this.$6.repeat.y=1;this.$7=new a.TextureLoader().load(this.$1.hoveredTextureURI);this.$7.wrapS=a.RepeatWrapping;this.$7.wrapT=a.RepeatWrapping;this.$7.repeat.x=1;this.$7.repeat.y=1;this.$8=new a.TextureLoader().load(this.$1.clickTextureURI);this.$8.wrapS=a.RepeatWrapping;this.$8.wrapT=a.RepeatWrapping;this.$8.repeat.x=1;this.$8.repeat.y=1;this.$5=new(b("Asset3dVrRoundButton"))(this.$1.buttonProps);this.$5.setColor(this.$2);this.$5.setTexture(this.$6)}var c=a.prototype;c.model=function(){return this.$5.model()};c.show=function(){this.model().visible=!0};c.hide=function(){this.model().visible=!1};c.onRender=function(a){var b=a.isPressed();a=this.$5.hitTest(a.rayCaster());a?b?(this.$5.setColor(this.$3),this.$5.setTexture(this.$7)):(this.$5.setColor(this.$4),this.$5.setTexture(this.$8)):(this.$5.setColor(this.$2),this.$5.setTexture(this.$6));a&&this.$9&&!b&&this.$1.onClick();this.$9=b};return a}();e.exports=a}),null);
__d("WebXRController",["SocialVRThreeJS"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d){this.__hand=a,this.__controllerListener=c,this.$3=new(b("SocialVRThreeJS").Vector3)(),this.$2=new(b("SocialVRThreeJS").Quaternion)(),this.$5={},this.$4=d}var c=a.prototype;c.update=function(a,b){var c=!1;for(var d=b.session.inputSources,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;if(g.targetRaySpace){var h=b.getPose(g.targetRaySpace,a.vr.getReferenceSpace());g.handedness===this.__hand&&(this.__pose=h,this.$1=g.gamepad,c=!0)}}c||(this.__pose=void 0)};c.axes=function(){return this.__axes};c.orientation=function(){var a=null;if(this.__pose&&this.isValid()){var b=this.__pose.transform.orientation;b&&(this.$2.set(b.x,b.y,b.z,b.w),a=this.$2)}return a};c.position=function(){var a=null;if(this.__pose&&this.isValid()){var b=this.__pose.transform.position;this.__pose.transform.position&&(this.$3.set(b.x,b.y,b.z),a=this.$3)}return a};c.hand=function(){return this.__hand};c.isValid=function(){return this.__pose!==void 0};c.hasButtonPressed=function(){return this.isValid()&&this.$1?this.__hasButtonPressed(this.$1):!1};c.__hasButtonPressed=function(a){a=a.buttons;for(var b=0;b<a.length;b++)if(a[b].pressed)return!0;return!1};c.__dectButtonPressed=function(a){var b=this;this.$4.forEach(function(c){var d=!1;if(a.id===c.gampadId){var e=a.buttons;d=c.buttonIndex>0&&c.buttonIndex<e.length&&e[c.buttonIndex].pressed}e=b.$5[c];d&&!e&&b.__controllerListener({controller:b,eventType:c.eventType});b.$5[c]=d})};return a}();e.exports=a}),null);
__d("GetXRFromNavigator",[],(function(a,b,c,d,e,f){"use strict";e.exports=a;function a(){return navigator.xr}}),null);
__d("WebVrTimeTracker",[],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){var a=this;this.$2=0;window.addEventListener("vrdisplayblur",function(){a.stopTime()});window.addEventListener("vrdisplayfocus",function(){a.startTime()})}var b=a.prototype;b.reset=function(){this.$1=null,this.$2=0};b.startTime=function(){this.$1===null&&(this.$1=Date.now())};b.stopTime=function(){var a=this.$1;a=a!==null&&a!==void 0?Date.now()-a:0;this.$1=null;this.$2+=a;return this.$2};return a}();e.exports=a}),null);
__d("WebXRManager",["invariant","Promise","GetXRFromNavigator","WebVrTimeTracker","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";a=function(){a.getInstance=function(){a.$1==null&&(a.$1=new a());return a.$1};function a(){var c=this;this.$6=[];this.$15=function(){c.$3=null,c.$12()};this.$16=function(){c.$2&&c.$2.onVrFocusChange&&c.$2.onVrFocusChange()};a.$1===null||g(0,11125);this.$8=!1;this.$4=!1;this.$3=null;this.$5=null;this.$7=new(b("WebVrTimeTracker"))();this.$10();var d=b("GetXRFromNavigator")();d&&(d.addEventListener("devicechange",function(a){c.$10()}),d.addEventListener("sessiongranted",function(a){c.$11()}));document.addEventListener("visibilitychange",function(){document.visibilityState!=="visible"&&(c.$12(),b("promiseDone")(c.exitVr()))})}var c=a.prototype;c.setDeeplinkProps=function(a){this.$9=a};c.isDeepLink=function(){return this.$8};c.addXRSupportListener=function(a){this.$6.push(a),a(this.$4)};c.removeXRSupportListener=function(a){a=this.$6.indexOf(a);a>=0&&this.$6.splice(a,1)};c.$13=function(){var a=this;this.$6.forEach(function(b){b(a.$4)})};c.$10=function(){var a=this,c=b("GetXRFromNavigator")();c&&c.isSessionSupported?b("promiseDone")(b("Promise").resolve(c.isSessionSupported("immersive-vr").then(function(b){a.$4=b,a.$13()}))):this.$4=!1};c.$14=function(a){a.addEventListener("end",this.$15),a.addEventListener("visibilitychange",this.$16),this.$3=a,this.$17()};c.$11=function(){var a=this;this.$2&&this.$2.onVrFocusChange&&this.$2.onVrFocusChange();var b=this.$9;if(b){var c={onVrEnter:function(){a.$8=!0,b.onVrDeepLink()},onVrExit:function(){},vrAttributes:b.vrAttributes,vrCanvas:b.vrCanvas};this.enterVr(c)}};c.enterVr=function(a){var c=this;if(!this.$4)return b("Promise").resolve();if(this.$3!==null){this.$12();this.$2=a;this.$17();return b("Promise").resolve()}this.$2=a;a=b("GetXRFromNavigator")();return!a?b("Promise").resolve():a.requestSession("immersive-vr").then(function(a){c.$14(a);return b("Promise").resolve()})["catch"](function(a){})};c.$17=function(){var a=this.$2;a||g(0,10938);this.$7.reset();this.$7.startTime();if(!this.$3)return;var b=this.$3;a.onVrEnter(b)};c.exitVr=function(){this.$4&&this.$3!==null&&this.$3!==void 0&&this.$3.end();return b("Promise").resolve()};c.$12=function(){this.$8=!1;var a=this.$2;if(a){var b=this.$7.stopTime();this.$7.reset();a.onVrExit(b);this.$2=null}};c.inVr=function(){return this.$3!==null};c.getXRFrame=function(){return this.$5};c.getXRSession=function(){return this.$3};c.render=function(a,b){if(this.inVr()){var c=this.$2;c||g(0,10939);c=c.onVrRender;c||g(0,11325);this.$5=b;c(a,b)}};return a}();e.exports=a;a.$1=null}),null);
__d("Asset3dVrViewer",["SocialVRThreeJS","ThreeJsHelpers","WebXRController","WebXRManager","promiseDone"],(function(a,b,c,d,e,f){"use strict";var g=5592405;a=function(){function a(a){this.__frameData=null;this.__helperEuler=new(b("SocialVRThreeJS").Euler)();this.__helperVector3=new(b("SocialVRThreeJS").Vector3)();this.__helperQuaternion=new(b("SocialVRThreeJS").Quaternion)();this.__helperArray=[];this.__navigationProps=null;var c=[{gampadId:"Oculus Touch (Right)",buttonIndex:4,eventType:"quit"},{gampadId:"Oculus Touch",buttonIndex:4,eventType:"quit"}];this.__leftController=new(b("WebXRController"))("left",this.__onControllerEvent.bind(this),c);this.__rightController=new(b("WebXRController"))("right",this.__onControllerEvent.bind(this),c);this.$1=a?[]:[{type:"position",warningUpperLimit:.15,warningLowerLimit:-.15,upperLimit:.3,lowerLimit:-.3,arrayIndex:0},{type:"position",warningUpperLimit:.15,warningLowerLimit:-.15,upperLimit:.3,lowerLimit:-.3,arrayIndex:1},{type:"position",warningUpperLimit:.45,warningLowerLimit:-.75,upperLimit:.6,lowerLimit:-1,arrayIndex:2},{type:"orientation",eulerOrder:"YXZ",warningUpperLimit:b("SocialVRThreeJS").Math.degToRad(20),warningLowerLimit:b("SocialVRThreeJS").Math.degToRad(-20),upperLimit:b("SocialVRThreeJS").Math.degToRad(45),lowerLimit:b("SocialVRThreeJS").Math.degToRad(-45),arrayIndex:1}];this.__warningValue=0;this.__clearColor=new(b("SocialVRThreeJS").Color)(g);this.__scene=new(b("SocialVRThreeJS").Scene)();c=new(b("SocialVRThreeJS").AmbientLight)(13421772,.5);this.__scene.add(c);this.__vrCamera=new(b("SocialVRThreeJS").PerspectiveCamera)(75,1,.1,2e3);this.__vrCameraPositionAnchor=new(b("SocialVRThreeJS").Object3D)();this.__vrCameraPositionAnchor.add(this.__vrCamera);this.__vrCameraOrientationAnchor=new(b("SocialVRThreeJS").Object3D)();this.__vrCameraOrientationAnchor.add(this.__vrCameraPositionAnchor)}var c=a.prototype;c.setup=function(a,b,c,d,e){this.__model=a,this.__storyProps=b,this.__photoID=c,this.__navigationProps=d,this.__userData=e};c.__setupScene=function(){this.__scene.add(this.__model)};c.onExitVr=function(){this.__destroyScene()};c.__destroyScene=function(){this.__scene.remove(this.__model),b("ThreeJsHelpers").disposeModel(this.__model),this.__model=null};c.render=function(a){};c.__render=function(a){this.__frameData=b("WebXRManager").getInstance().getXRFrame();if(!this.__frameData)return;var c=this.__frameData;this.__leftController.update(a,c);this.__rightController.update(a,c)};c.__onControllerEvent=function(a){switch(a.eventType){case"quit":b("promiseDone")(b("WebXRManager").getInstance().exitVr());break}};return a}();e.exports=a}),null);
__d("OculusArmModel",["SocialVRThreeJS"],(function(a,b,c,d,e,f){var g=b("SocialVRThreeJS").Matrix4,h=b("SocialVRThreeJS").Quaternion,i=b("SocialVRThreeJS").Vector3,j=60*Math.PI/180,k=new i(0,0,1),l=new i(1,0,0),m=new i(0,1,0),n=new h(1,0,0,0),o=new i(1,1,1),p=new h(0,0,0,1),q=function(){function a(a,b){this.$1=a.clone(),this.$2=b.clone(),this.$3=new g(),this.$3.compose(this.$1,this.$2,o)}var b=a.prototype;b.setPosition=function(a){this.$1.copy(a),this.$3.setPosition(a)};b.setPositionFromValues=function(a,b,c){this.$1.set(a,b,c),this.$3.setPosition(this.$1)};b.setOrientation=function(a){this.$2.copy(a),this.$3.makeRotationFromQuaternion(a),this.$3.setPosition(this.$1)};b.getPosition=function(){return this.$1};b.getOrientation=function(){return this.$2};b.getMatrix=function(){return this.$3};return a}(),r=function(a,b){this.parent=a,this.transform=b};a=function(){function a(a){var b=this;a===void 0&&(a="right");a=a==="left"?-1:1;this.$11={neck:new r(null,new q(new i(-.1,.5,0),p)),clavicle:new r("neck",new q(new i(a*.2286,0,0),p)),shoulder:new r("clavicle",new q(new i(0,-.2441,.02134),p)),elbow:new r("shoulder",new q(new i(0,0,-.3048),p)),wrist:new r("elbow",new q(new i(0,0,-.0762),p)),hand:new r("wrist",new q(new i(0,.0381,-.0381),p))};this.$13=["neck","clavicle","shoulder","elbow","wrist","hand"];this.$12={};Object.keys(this.$11).forEach(function(a){b.$12[a]=new g()});this.$1=new q(k,n);this.$2=new q(k,n);this.$3=new q(k,n);this.$4=new h();this.$5=new h();this.$6=new h();this.$7=new h();this.$8=new i();this.$9=new i();this.$10=new i();this.computeWorldTransforms()}var b=a.prototype;b.setHeadPosition=function(a){this.$1.setPosition(a)};b.setHeadOrientation=function(a){this.$1.setOrientation(a)};b.setControllerOrientation=function(a){this.$2.setOrientation(a)};b.getPose=function(){return this.$2};b.update=function(){this.$5.setFromRotationMatrix(this.$1.getMatrix());this.$5.set(this.$5.w,0,this.$5.y,0);this.$5.normalize();this.$3.setPosition(this.$1.getPosition());this.$3.setOrientation(this.$5);this.$4.copy(this.$2.getOrientation());this.$6.set(this.$4.w,0,this.$4.y,0);this.$6.normalize();this.$8.copy(k).applyQuaternion(this.$5);this.$10.copy(k).applyQuaternion(this.$6);var a=this.$8.angleTo(this.$10);if(a>j){this.$9.copy(l).applyQuaternion(this.$5);var b=Math.sign(this.$10.dot(this.$9));a=(a-j)*-b;this.$7.setFromAxisAngle(m,a);this.$4.copy(this.$7.multiply(this.$4))}b=this.$5.inverse().multiply(this.$4);a=n.slerp(b,.6);b=n.slerp(b,.4);this.$11.shoulder.transform.setOrientation(a);this.$11.elbow.transform.setOrientation(b);this.computeWorldTransforms()};b.computeWorldTransforms=function(){var a=this;this.$13.forEach(function(b){var c=a.$11[b];c.parent!==null&&c.parent!==void 0?a.$12[b].copy(a.$12[c.parent]):a.$12[b].copy(a.$3.getMatrix());a.$12[b].multiply(c.transform.getMatrix())});this.$2.setPositionFromValues(this.$12.hand.elements[12],this.$12.hand.elements[13],this.$12.hand.elements[14])};return a}();e.exports=a}),null);
__d("VrCursor",["OculusArmModel","SocialVRThreeJS"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a;this.$14=null;this.$2=null;this.$13=!1;this.$6=new((a=b("SocialVRThreeJS")).Euler)();this.$7=new a.Vector3();this.$8=new a.Quaternion();this.$11=new a.Quaternion();this.$12=new a.Vector3();this.$5=new a.Raycaster();this.$9=new a.Color(this.$1.circleColor);this.$10=new a.Color(this.$1.circlePressedColor);this.$3=new a.Vector3(0,0,-1);this.$4=new a.Object3D();this.$1.worldAnchor.add(this.$4);this.$15=new(b("OculusArmModel"))("right");this.$16=new(b("OculusArmModel"))("left");this.$17();this.$18()}var c=a.prototype;c.wandModel=function(){return this.$14};c.cursorCircleModel=function(){return this.$2};c.$17=function(){this.$2=new(b("SocialVRThreeJS").Mesh)(new(b("SocialVRThreeJS").CircleGeometry)(this.$1.circleRadius,64),new(b("SocialVRThreeJS").MeshBasicMaterial)({colorWrite:!0,depthWrite:!0,color:this.$9}));var a=this.$1.circleImageURL;if(a!==null){var c;a=new((c=b("SocialVRThreeJS")).TextureLoader)().load(a);a.wrapS=c.RepeatWrapping;a.wrapT=c.RepeatWrapping;a.repeat.x=1;a.repeat.y=1;this.$2.add(new c.Mesh(new c.CircleGeometry(this.$1.circleRadius*1.1,64),new c.MeshBasicMaterial({colorWrite:!0,depthWrite:!0,color:this.$9,map:a,transparent:!0})))}};c.$19=function(){var a=document.createElement("canvas");a.width=1024;a.height=32;var c=a.getContext("2d"),d=c.createLinearGradient(0,0,1024,0);d.addColorStop(0,"rgba(255, 255, 255, 0.9)");d.addColorStop(1,"rgba(255, 255, 255, 0)");c.fillStyle=d;c.fillRect(0,0,1024,32);d=new(b("SocialVRThreeJS").Texture)(a);d.needsUpdate=!0;c=new(b("SocialVRThreeJS").MeshBasicMaterial)({map:d,transparent:!0});return c};c.$18=function(){var a,c=new((a=b("SocialVRThreeJS")).Geometry)();c.vertices.push(new a.Vector3(-.01,.01,0),new a.Vector3(.01,.01,0),new a.Vector3(.01,.01,-1),new a.Vector3(-.01,.01,-1),new a.Vector3(-.01,-.01,0),new a.Vector3(.01,-.01,0),new a.Vector3(.01,-.01,-1),new a.Vector3(-.01,-.01,-1));c.faces.push(new a.Face3(0,1,3),new a.Face3(1,2,3),new a.Face3(1,5,2),new a.Face3(5,6,2),new a.Face3(5,4,6),new a.Face3(4,7,6),new a.Face3(4,0,7),new a.Face3(0,3,7));var d=[new a.Vector2(0,1),new a.Vector2(0,0),new a.Vector2(1,0),new a.Vector2(1,1)];c.faceVertexUvs[0][0]=[d[0],d[1],d[3]];c.faceVertexUvs[0][1]=[d[1],d[2],d[3]];c.faceVertexUvs[0][2]=[d[0],d[1],d[3]];c.faceVertexUvs[0][3]=[d[1],d[2],d[3]];c.faceVertexUvs[0][4]=[d[0],d[1],d[3]];c.faceVertexUvs[0][5]=[d[1],d[2],d[3]];c.faceVertexUvs[0][6]=[d[0],d[1],d[3]];c.faceVertexUvs[0][7]=[d[1],d[2],d[3]];c.verticesNeedUpdate=!0;c.elementsNeedUpdate=!0;d=new a.Mesh(c,this.$19());c=new a.Object3D();c.add(d);c.scale.fromArray([.5,.5,.5]);this.$14=new a.Object3D();this.$14.add(c)};c.$20=function(a,b,c,d,e){a===void 0&&(a=[0,0,0]);b===void 0&&(b=[0,0,0,0]);if(d)this.$4.position.copy(d),this.$4.updateMatrixWorld(!0),this.$4.getWorldPosition(this.$7),this.$4.setRotationFromQuaternion(c),this.$4.updateMatrixWorld(!0),this.$4.getWorldQuaternion(this.$8),this.$12.copy(this.$7),this.$11.copy(this.$8);else{d=e=="left"?this.$16:this.$15;this.$7.fromArray(a);d.setHeadPosition(this.$7);this.$8.fromArray(b);this.$4.setRotationFromQuaternion(this.$8);this.$4.updateMatrixWorld(!0);this.$4.getWorldQuaternion(this.$8);d.setHeadOrientation(this.$8);this.$4.setRotationFromQuaternion(c);this.$4.updateMatrixWorld(!0);this.$4.getWorldQuaternion(this.$8);d.setControllerOrientation(this.$8);d.update();this.$12.copy(d.getPose().getPosition());this.$11.copy(d.getPose().getOrientation())}};c.isPressed=function(){return this.$13};c.rayCaster=function(){return this.$5};c.show=function(){this.wandModel().visible=!0,this.cursorCircleModel().visible=!0};c.hide=function(){this.wandModel().visible=!1,this.cursorCircleModel().visible=!1};c.update=function(a,b,c,d,e,f){this.$13=e;if(c){this.$2.getWorldPosition(this.$7);e=this.$7.z;this.$20(a,b,c,d,f);this.$14.position.copy(this.$12);this.$14.setRotationFromQuaternion(this.$11);a=Math.abs(this.$12.z-e);this.$6.setFromQuaternion(this.$11,"XYZ");this.$2.position.y=this.$12.y+a*Math.tan(this.$6.x);this.$6.setFromQuaternion(this.$11,"YXZ");this.$2.position.x=this.$12.x-a*Math.tan(this.$6.y);this.$2.getWorldPosition(this.$7);this.$5.set(this.$7,this.$3);this.$13?this.$2.material.color=this.$10:this.$2.material.color=this.$9}};return a}();e.exports=a}),null);
__d("VrStoryHeader",["SocialVRThreeJS","VrHtmlToImageDataURLLoader"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d){var e=this;this.$1=d;this.$5=new Image();this.$6=new Image();this.$9=new Image();this.$2=a;this.$3=c*this.numberOfRows();this.$4=new((d=b("SocialVRThreeJS")).Texture)();this.$4.image=this.$5;this.$4.wrapS=d.RepeatWrapping;this.$4.wrapT=d.RepeatWrapping;this.$4.repeat.x=1;this.$4.repeat.y=1;this.$7=new d.Mesh(new d.PlaneGeometry(this.$2,this.$3,32),new d.MeshBasicMaterial({map:this.$4,transparent:!0,depthWrite:!1,opacity:1}));a=this.$1.owningPictureURI;a!==void 0&&a!==null&&b("VrHtmlToImageDataURLLoader").getInstance().loadPicture(a,this.$9,function(a){e.$8=a,e.$10()});this.$10()}var c=a.prototype;c.model=function(){return this.$7};c.numberOfRows=function(){var a=2;this.$1.message!==null&&(a+=1.5);return a};c.$10=function(){var a=this,c=(this.$3*b("VrHtmlToImageDataURLLoader").WORLD_TO_PIXELS-8)/this.numberOfRows(),d=c-2,e='<div style="height:100%;padding:4px;font-family:Helvetica, Arial, sans-serif;white-space:nowrap;font-size:'+d+"px;line-height:"+c+'px;">';e+='<div style="height: '+c*2+'px; width: 100%;">';e+='<div style="display:block; float: left; width:'+c*2+"px; height:"+c*2+"px;";this.$8!==void 0&&this.$8!==null&&(e+="background-image: url("+this.$8+");");e+='background-size:cover;border-radius:50%;">';e+="</div>";e+='<div style="display:block; width:auto; padding-left: '+(c*2+10)+'px; ">';this.$1.title!==void 0&&this.$1.title!==null&&(e+="<div>"+this.$1.title+"</div>");this.$1.creationTime!==void 0&&this.$1.creationTime!==null&&(e+='<div style="font-size: '+d*.8+'px;">'+this.$1.creationTime+"</div>");e+="</div>";e+="</div>";this.$1.message!==void 0&&this.$1.message!==null&&(e+='<div style="height: '+c/2+'px; width: 100%;"></div>',e+='<div style="text-overflow:ellipsis;overflow:hidden;">'+this.$1.message+"</div>");e+="</div>";b("VrHtmlToImageDataURLLoader").getInstance().loadHtml(e,this.$2,this.$3,this.$6,function(b){a.$5.onload=function(){a.$4.needsUpdate=!0},a.$5.src=b})};return a}();e.exports=a}),null);
__d("VrStoryReactions",["invariant","SocialVRThreeJS","VrHtmlToImageDataURLLoader"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,c,d){var e=this;this.$8={};this.$1=d;this.$5=new Image();this.$6=new Image();this.$2=a;this.$3=c*this.numberOfRows();this.$4=new((d=b("SocialVRThreeJS")).Texture)();this.$4.image=this.$5;this.$4.wrapS=d.RepeatWrapping;this.$4.wrapT=d.RepeatWrapping;this.$4.repeat.x=1;this.$4.repeat.y=1;this.$7=new d.Mesh(new d.PlaneGeometry(this.$2,this.$3,32),new d.MeshBasicMaterial({map:this.$4,transparent:!0,depthWrite:!1,opacity:1}));this.$1.supportedReactions&&(this.$8={},this.$1.supportedReactions.forEach(function(a){a.URI!==void 0&&a.URI!==null&&a.count!==void 0&&a.count!==null&&a.count>0&&e.$9.bind(e,a.URI)()}));this.$10()}var c=a.prototype;c.model=function(){return this.$7};c.numberOfRows=function(){return 1};c.$9=function(a){var c=this,d=new Image();b("VrHtmlToImageDataURLLoader").getInstance().loadPicture(a,d,function(b){c.$8[a]=b,c.$10()})};c.$10=function(){var a=this;this.$1.reactionsText!==void 0&&this.$1.reactionsText!==null||g(0,5802);var c=(this.$3*b("VrHtmlToImageDataURLLoader").WORLD_TO_PIXELS-8)/this.numberOfRows();c=c-2;var d='<div style="height:100%;font-family:Helvetica, Arial, sans-serif; display:flex;flex-direction:row;align-items:center">';if(this.$1.supportedReactions){d+='<div style="padding-right:20px">';var e=3,f=Object.keys(this.$8);for(var h=0;h<f.length&&h<e;h++){var i=f[h];i=this.$8[i];d+='<div style="border:2px solid white;display:inline-block;position:relative;margin-right:-10px;width:'+c+"px; height:"+c+"px;";d+="z-index: "+(f.length-h)+";";d+="background-image: url("+i+");";d+='background-size:cover;border-radius:50%;"></div>'}d+="</div>"}i=this.$1.reactionsText;i!==void 0&&i!==null&&(d+='<div style="font-size: '+c+'px; white-space: nowrap; text-overflow:ellipsis;overflow:hidden;">'+i+"</div>");d+="</div>";b("VrHtmlToImageDataURLLoader").getInstance().loadHtml(d,this.$2,this.$3,this.$6,function(b){a.$5.onload=function(){a.$4.needsUpdate=!0},a.$5.src=b})};return a}();e.exports=a}),null);
__d("VrStory",["invariant","SocialVRThreeJS","ThreeJsHelpers","VrStoryHeader","VrStoryReactions"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a,c,d,e,f,h){this.$1=new(b("SocialVRThreeJS").Object3D)();this.$5=a;this.$6=d;this.$7=e;this.$8=f;d=new(b("SocialVRThreeJS").Vector3)();c.getSize(d);h.header||g(0,4805);this.$2=new(b("VrStoryHeader"))(d.x,this.$8,h.header);e=this.$2.numberOfRows()*this.$8;f=0;this.$3=null;c=h.reactions;c&&c.reactionsText!==null&&(this.$3=new(b("VrStoryReactions"))(d.x,this.$8,c),f=this.$3.numberOfRows()*this.$8);h=d.x+2*this.$6;c=d.y+3*this.$6+e+f+(f>0?this.$6:0);this.$4=d.y;h=new(b("SocialVRThreeJS").Mesh)(b("ThreeJsHelpers").createRoundedCorneredPlane(h,c,this.$7),new(b("SocialVRThreeJS").MeshBasicMaterial)({color:new(b("SocialVRThreeJS").Color)("white"),colorWrite:!0,depthWrite:!1,transparent:!0}));h.renderOrder=0;this.$1.add(h);var i=this.$2.model();i.renderOrder=2;i.position.y=0;i.translateY(c/2-this.$6-e/2);h.add(i);if(this.$3){i=this.$3.model();i.renderOrder=3;h.add(i);i.position.y=0;i.translateY(-c/2+this.$6+f/2)}this.$1.position.copy(a);h=2*this.$6+e-(c-d.y)/2;this.$1.translateY(h)}var c=a.prototype;c.model=function(){return this.$1};c.dispose=function(){b("ThreeJsHelpers").disposeModel(this.$1)};return a}();e.exports=a}),null);
__d("VrStoryUIContainer",["SocialVRThreeJS","ThreeJsHelpers","VrFadeAnimation","VrStory"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.$1=a;this.$4=new((a=b("SocialVRThreeJS")).Object3D)();this.$1.uiScene.add(this.$4);var c=this.$1.frameWidth,d=this.$1.frameHeight;this.$3=new a.Mesh(b("ThreeJsHelpers").createRoundedCorneredPlane(c,d,this.$1.frameBorderRadius),new a.MeshBasicMaterial({stencilWrite:!0,colorWrite:!1,color:new a.Color("blue"),depthWrite:!1}));this.$3.position.fromArray(this.$1.framePosition);this.$1.uiScene.add(this.$3);c=new a.Box3().setFromObject(this.$3);this.$2=new(b("VrStory"))(this.$3.position,c,this.$1.framePadding,this.$1.frameBorderRadius,this.$1.frameRowHeight,this.$1.storyCardProps);this.$4.add(this.$2.model());d=this.$1.fade;if(d){a=b("ThreeJsHelpers").createAnimationGroup(this.$4);this.$5=new(b("VrFadeAnimation"))(a,[{times:d.times,opacities:d.opacities}]);this.$5.start()}else this.$5=null}var c=a.prototype;c.move=function(a){this.$1.uiScene.position.fromArray(a),this.$1.storyScene&&this.$1.storyScene.position.fromArray(a)};c.position=function(){return[this.$1.uiScene.position.x,this.$1.uiScene.position.y,this.$1.uiScene.position.z]};c.addUICompontent=function(a,b,c){this.$4.add(a);var d=this.size(),e=this.$2.model().position.clone();switch(b){case"top":e.y+=d.y/2;break;case"bottom":e.y-=d.y/2;break;case"left":e.x-=d.x/2;break;case"right":e.x+=d.x/2;break}a.position.fromArray(c).add(e)};c.size=function(){var a=new(b("SocialVRThreeJS").Box3)().setFromObject(this.$2.model()),c=new(b("SocialVRThreeJS").Vector3)();a.getSize(c);return c};c.dispose=function(){this.$1.uiScene.remove(this.$4),this.$1.uiScene.remove(this.$3),b("ThreeJsHelpers").disposeModel(this.$4),b("ThreeJsHelpers").disposeModel(this.$3)};c.render=function(a,b){this.$5&&this.$5.isRunning()&&this.$5.update();var c=a.state.buffers.stencil,d=a.state.buffers.depth,e=a.context;this.renderFrameStencil(a,b);this.$1.storyScene&&(c.setFunc(e.EQUAL,1,255),c.setOp(e.KEEP,e.KEEP,e.KEEP),a.render(this.$1.storyScene,b));this.$3.visible=!1;this.$4.visible=!0;c.setFunc(e.NOTEQUAL,1,255);c.setOp(e.KEEP,e.KEEP,e.KEEP);d.setTest(!1);a.render(this.$1.uiScene,b);a.clearStencil();a.clearDepth();c.setTest(!1)};c.renderFrameStencil=function(a,b){var c=a.state.buffers.stencil,d=a.context;this.$3.visible=!0;this.$4.visible=!1;a.clearStencil();c.setTest(!0);c.setFunc(d.ALWAYS,1,255);c.setOp(d.REPLACE,d.REPLACE,d.REPLACE);a.render(this.$1.uiScene,b);a.clearDepth()};return a}();e.exports=a}),null);
__d("VrWorldFade",["invariant","Promise","SocialVRThreeJS","VrFadeAnimation"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){this.$1=a;this.$6=new((a=b("SocialVRThreeJS")).Mesh)(new a.BoxGeometry(5,5,5),new a.MeshBasicMaterial({transparent:!0,colorWrite:!0,depthWrite:!1,opacity:1,color:new a.Color(this.$1.color)}));this.$6.name="fadeMesh";this.$6.material.side=a.BackSide;this.$7=new a.Scene();this.$7.add(this.$6);this.$2=new(b("VrFadeAnimation"))(this.$6,[{times:this.$1.fadeInParams.times,opacities:this.$1.fadeInParams.opacities}]);this.$3=new(b("VrFadeAnimation"))(this.$6,[{times:this.$1.fadeOutParams.times,opacities:this.$1.fadeOutParams.opacities}]);this.$4=null;this.$5=null}var c=a.prototype;c.setFade=function(a){!this.$2.isRunning()&&!this.$3.isRunning()&&(this.$6.material.opacity=a)};c.startFadeIn=function(){var a=this;this.isAnimationRunning()&&g(0,13092);this.$4===null||g(0,13098);var c=new(b("Promise"))(function(b,c){a.$2.start(),a.$4=b});return c};c.stopFadeIn=function(){this.$2.stop(),this.$4&&(this.$4(),this.$4=null)};c.startFadeOut=function(){var a=this;this.isAnimationRunning()&&g(0,13092);this.$5===null||g(0,13099);var c=new(b("Promise"))(function(b,c){a.$3.start(),a.$5=b});return c};c.stopFadeOut=function(){this.$3.stop(),this.$5&&(this.$5(),this.$5=null)};c.isAnimationRunning=function(){return this.$2.isRunning()||this.$3.isRunning()};c.isFadedIn=function(){return this.$6.material.opacity===1};c.onRender=function(a,b){var c=this.$2.isRunning(),d=this.$3.isRunning();c&&this.$2.update();d&&this.$3.update();if(c&&!this.$2.isRunning()){this.$2.stop();this.$6.material.opacity=1;c=this.$4;this.$4=null;c||g(0,13100);c()}if(d&&!this.$3.isRunning()){this.$5||g(0,13101);this.$3.stop();this.$6.material.opacity=0;c=this.$5;this.$5=null;c||g(0,13100);c()}if(this.$6.material.opacity!==0){d=a.gammaOutput;a.gammaOutput=!1;a.render(this.$7,b);a.gammaOutput=d}};return a}();e.exports=a}),null);
__d("Asset3dPhotoVrViewer",["invariant","regeneratorRuntime","Asset3dPhotoVrNavigator","Asset3DVr3ZoomNux","Asset3dVrRoundButtonManager","Asset3dVrStoryFetcher","Asset3dVrViewer","SocialVRThreeJS","VrCursor","VrStoryUIContainer","VrWorldFade","WebVrTimeTracker","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h=1,i=1.3,j=.03,k=.0125,l=[0,0,-1.25],m=.045,n=1.5,o=[0,0,0],p=15922165,q=-.1,r=b("SocialVRThreeJS").Math.degToRad(45),s=.6,t=0,u=.5,v=.666489,w=16777215,x=65280,y=.0125,z=.015,A=.06,B=.022,C=16777215,D=6850196,E=9019820;a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c.disableOutOfViewDetection)||this;d.$Asset3dPhotoVrViewer1=c;d.$Asset3dPhotoVrViewer6=null;d.$Asset3dPhotoVrViewer7=null;d.$Asset3dPhotoVrViewer10=null;d.$Asset3dPhotoVrViewer11=null;d.$Asset3dPhotoVrViewer12=null;d.$Asset3dPhotoVrViewer8=new(b("SocialVRThreeJS").Scene)();d.$Asset3dPhotoVrViewer14=null;d.$Asset3dPhotoVrViewer15=!1;d.$Asset3dPhotoVrViewer18=new(b("WebVrTimeTracker"))();d.$Asset3dPhotoVrViewer17=0;d.$Asset3dPhotoVrViewer5=0;d.$Asset3dPhotoVrViewer19=!1;d.$Asset3dPhotoVrViewer2=!0;d.$Asset3dPhotoVrViewer3=new(b("VrWorldFade"))({color:d.__clearColor.getHex(),fadeInParams:{times:[0,.5],opacities:[0,1]},fadeOutParams:{times:[0,.5],opacities:[1,0]}});d.$Asset3dPhotoVrViewer3.setFade(0);return d}var d=c.prototype;d.$Asset3dPhotoVrViewer20=function(){var a=this.$Asset3dPhotoVrViewer7;a||g(0,12466);var c=.05,d=new(b("Asset3DVr3ZoomNux"))({textureURI:this.$Asset3dPhotoVrViewer1.imageURIs.zoomNux}),e=d.model(),f=d.size();a.addUICompontent(e,"bottom",[0,-f.y/2-c,0]);this.$Asset3dPhotoVrViewer6=d};d.onEnterVr=function(a,c){var d=this;this.$Asset3dPhotoVrViewer16=c;this.$Asset3dPhotoVrViewer19=!1;if(this.__storyProps!=null)this.$Asset3dPhotoVrViewer21(a);else{c=this.__photoID;c!=null||g(0,19973);b("promiseDone")(b("Asset3dVrStoryFetcher").sendPhotoRequest(c,null).then(function(b){d.__storyProps=b.storyProps,d.$Asset3dPhotoVrViewer21(a)}))}};d.$Asset3dPhotoVrViewer21=function(a){this.__navigationProps&&this.__navigationProps.hasNext&&(this.$Asset3dPhotoVrViewer9=new(b("Asset3dPhotoVrNavigator"))(this.__navigationProps)),this.$Asset3dPhotoVrViewer22(a),this.$Asset3dPhotoVrViewer23(),this.$Asset3dPhotoVrViewer19=!0};d.$Asset3dPhotoVrViewer24=function(a){var c=new(b("VrCursor"))({circleColor:w,circlePressedColor:x,circleRadius:y,circleImageURL:this.$Asset3dPhotoVrViewer1.imageURIs.cursor,worldAnchor:this.__vrCameraPositionAnchor,intersectionZPlane:l[2]});a.addUICompontent(c.wandModel(),"bottom",[0,0,0]);a.addUICompontent(c.cursorCircleModel(),"bottom",[0,0,z]);return c};d.$Asset3dPhotoVrViewer23=function(){var a=this;this.$Asset3dPhotoVrViewer18.reset();this.$Asset3dPhotoVrViewer18.startTime();this.__setupScene();var c=this.__storyProps;c||g(0,19974);var d=this.$Asset3dPhotoVrViewer16;d||g(0,13176);d.logOnWebVrStoryStart(this.__photoID,c.isCurrentUserStory,this.feedType());this.$Asset3dPhotoVrViewer17+=1;d=n;if(this.__userData.FB_PHOTO_3D_DATA){var e=this.__userData.FB_PHOTO_3D_DATA.hFov<this.__userData.FB_PHOTO_3D_DATA.vFov,f=e?this.__userData.FB_PHOTO_3D_DATA.vFov:this.__userData.FB_PHOTO_3D_DATA.hFov;if(f!==void 0&&f!==null&&f!==v){var q=-l[2]/2*Math.tan(v/2);f=-l[2]/2*Math.tan(f/2);d=n*q/f}this.$Asset3dPhotoVrViewer2=e}else this.$Asset3dPhotoVrViewer2=!0;this.$Asset3dPhotoVrViewer7==null||g(0,12452);this.$Asset3dPhotoVrViewer7=new(b("VrStoryUIContainer"))({frameWidth:this.$Asset3dPhotoVrViewer2?h:i,frameHeight:this.$Asset3dPhotoVrViewer2?i:h,framePadding:j,frameBorderRadius:k,framePosition:l,frameRowHeight:m,frameClearColor:p,storyScene:this.__scene,storyCardProps:c,uiScene:this.$Asset3dPhotoVrViewer8});if(this.$Asset3dPhotoVrViewer9){this.$Asset3dPhotoVrViewer14=this.$Asset3dPhotoVrViewer9.fetchNextPhoto();q=this.$Asset3dPhotoVrViewer7;q||g(0,12538);this.$Asset3dPhotoVrViewer10=this.$Asset3dPhotoVrViewer24(q);this.$Asset3dPhotoVrViewer11=this.$Asset3dPhotoVrViewer24(q);this.$Asset3dPhotoVrViewer12=this.$Asset3dPhotoVrViewer11;this.$Asset3dPhotoVrViewer13=new(b("Asset3dVrRoundButtonManager"))({buttonProps:{radius:A,textureRadius:B},textureURI:this.$Asset3dPhotoVrViewer1.imageURIs.nextButton,hoveredTextureURI:this.$Asset3dPhotoVrViewer1.imageURIs.nextButtonHovered,clickTextureURI:this.$Asset3dPhotoVrViewer1.imageURIs.nextButtonClicked,color:C,hoverColor:D,clickColor:E,onClick:function(){b("promiseDone")(a.$Asset3dPhotoVrViewer25())}});f=this.$Asset3dPhotoVrViewer13.model();e=new(b("SocialVRThreeJS").Box3)().setFromObject(f);c=new(b("SocialVRThreeJS").Vector3)();e.getSize(c);q.addUICompontent(f,"right",[c.x/2+.05,-c.y/2,0])}this.__model.scale.x=d;this.__model.scale.y=d;this.__model.position.fromArray(o)};d.$Asset3dPhotoVrViewer25=function(){var a,d,e,f,h,i,j,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:a=this.$Asset3dPhotoVrViewer14;if(!(a&&!this.$Asset3dPhotoVrViewer15)){l.next=37;break}this.$Asset3dPhotoVrViewer15=!0;if(this.$Asset3dPhotoVrViewer3.isFadedIn()){l.next=6;break}l.next=6;return b("regeneratorRuntime").awrap(this.$Asset3dPhotoVrViewer3.startFadeIn());case 6:d=this.$Asset3dPhotoVrViewer9;d||g(0,13431);e=this.$Asset3dPhotoVrViewer16;e||g(0,13389);l.prev=10;l.next=13;return b("regeneratorRuntime").awrap(c.$Asset3dPhotoVrViewer26(a,d,e));case 13:f=l.sent;this.$Asset3dPhotoVrViewer27();h=f.userData;i=f.model;h!=null&&i!=null||g(0,19972);this.__storyProps=f.storyProps;this.__userData=h;this.__model=i;this.__photoID=f.photoID;this.$Asset3dPhotoVrViewer23();f.atEndOfFeed&&(j=this.$Asset3dPhotoVrViewer13,j||g(0,13267),j.hide());l.next=26;return b("regeneratorRuntime").awrap(this.$Asset3dPhotoVrViewer3.startFadeOut());case 26:l.next=36;break;case 28:l.prev=28;l.t0=l["catch"](10);l.t0==="FetchNextIdsError"?e.logOnWebVrFetchIDsError():l.t0==="FetchingPastEndOfFeedError"&&e.logOnWebVrPastEndOfFeedError();k=this.$Asset3dPhotoVrViewer13;k||g(0,13267);k.hide();l.next=36;return b("regeneratorRuntime").awrap(this.$Asset3dPhotoVrViewer3.startFadeOut());case 36:this.$Asset3dPhotoVrViewer15=!1;case 37:case"end":return l.stop()}},null,this,[[10,28]])};c.$Asset3dPhotoVrViewer26=function(a,d,e){var f,g;return b("regeneratorRuntime").async(function(h){while(1)switch(h.prev=h.next){case 0:h.prev=0;h.next=3;return b("regeneratorRuntime").awrap(a);case 3:f=h.sent;return h.abrupt("return",f);case 7:h.prev=7;h.t0=h["catch"](0);if(!(h.t0==="FetchStoryError"||h.t0==="LoadGLTFError")){h.next=15;break}h.t0==="FetchStoryError"?e.logOnWebVrFetchStoryError():e.logOnWebVrLoadGLTFError();g=d.fetchNextPhoto();return h.abrupt("return",c.$Asset3dPhotoVrViewer26(g,d,e));case 15:throw h.t0;case 16:case"end":return h.stop()}},null,this,[[0,7]])};d.$Asset3dPhotoVrViewer22=function(a){a.autoClear=!1,a.vr.autoSubmitFrame=!1,a.setClearColor(this.__clearColor,1)};d.onExitVr=function(){this.$Asset3dPhotoVrViewer27(),this.$Asset3dPhotoVrViewer9=null,this.$Asset3dPhotoVrViewer17=0};d.storyCount=function(){return this.$Asset3dPhotoVrViewer17};d.feedType=function(){return this.$Asset3dPhotoVrViewer9&&this.$Asset3dPhotoVrViewer9.feedType()};d.atEndOfFeed=function(){return this.$Asset3dPhotoVrViewer9!=null&&this.$Asset3dPhotoVrViewer9.atEndOfFeed()};d.$Asset3dPhotoVrViewer27=function(){var a=this.$Asset3dPhotoVrViewer18.stopTime();this.$Asset3dPhotoVrViewer18.reset();this.__destroyScene();var b=this.$Asset3dPhotoVrViewer16;b||g(0,13176);b.logOnWebVrStoryEnd(this.__photoID,a,this.__storyProps!=null?this.__storyProps.isCurrentUserStory:!1);b=this.$Asset3dPhotoVrViewer7;b&&(b.dispose(),this.$Asset3dPhotoVrViewer7=null);this.$Asset3dPhotoVrViewer6=null;this.$Asset3dPhotoVrViewer10=null;this.$Asset3dPhotoVrViewer11=null;this.$Asset3dPhotoVrViewer12=null;this.$Asset3dPhotoVrViewer13=null;this.$Asset3dPhotoVrViewer14=null};d.$Asset3dPhotoVrViewer28=function(a){if(a.emulatedPosition){this.$Asset3dPhotoVrViewer6===null&&this.storyCount()===1&&(this.__leftController.isValid()||this.__rightController.isValid())&&this.$Asset3dPhotoVrViewer20();this.$Asset3dPhotoVrViewer6!==void 0&&this.$Asset3dPhotoVrViewer6!==null&&this.$Asset3dPhotoVrViewer6.onRender();a=this.$Asset3dPhotoVrViewer7;a||g(0,12467);this.__vrCamera.getWorldQuaternion(this.__helperQuaternion);this.__helperEuler.setFromQuaternion(this.__helperQuaternion,"YXZ");var b=Math.max(-1,Math.min(1,-this.__helperEuler.y/r));this.__helperEuler.setFromQuaternion(this.__helperQuaternion,"XYZ");var c=Math.max(-1,Math.min(1,this.__helperEuler.x/r)),d=a.position();b=b*q;c=c*q;d=d[2];var e=this.__rightController.axes(),f=this.__leftController.axes();e=e?e[1]:f?f[1]:0;if(e!==0){if(this.$Asset3dPhotoVrViewer4){f=this.$Asset3dPhotoVrViewer4-e;d=Math.max(Math.min(s,f*u+d),t)}this.$Asset3dPhotoVrViewer4=e}else this.$Asset3dPhotoVrViewer4=null;this.$Asset3dPhotoVrViewer5=d;a.move([b,c,d])}};d.$Asset3dPhotoVrViewer29=function(a,b,c){if(b)if(c.isValid()){b.show();var d=c.orientation(),e=c.position(),f=c.hasButtonPressed();c=c.hand();var g,h=[0,0,0];if(a){if(a.transform.orientation){var i=a.transform.orientation;g=[i.x,i.y,i.z,i.w]}if(a.transform.position){i=a.transform.position;h=[i.x,i.y,i.z]}}f&&(this.$Asset3dPhotoVrViewer12=b);h[2]+=this.$Asset3dPhotoVrViewer5;b.update(h,g,d,e,f,c)}else b.hide()};d.$Asset3dPhotoVrViewer30=function(a){this.$Asset3dPhotoVrViewer29(a,this.$Asset3dPhotoVrViewer10,this.__leftController);this.$Asset3dPhotoVrViewer29(a,this.$Asset3dPhotoVrViewer11,this.__rightController);a=this.$Asset3dPhotoVrViewer12;if(a){var b=this.$Asset3dPhotoVrViewer13;b&&b.onRender(a)}};d.render=function(a){if(!this.$Asset3dPhotoVrViewer19){a.clear(!0,!0,!0);this.$Asset3dPhotoVrViewer3.setFade(1);this.$Asset3dPhotoVrViewer3.onRender(a,this.__vrCamera);a.vr.submitFrame();return}this.__render(a);if(!this.__frameData)return;var b=this.__frameData.getViewerPose(a.vr.getReferenceSpace());this.$Asset3dPhotoVrViewer30(b);this.$Asset3dPhotoVrViewer28(b);a.clear(!0,!0,!0);b=this.$Asset3dPhotoVrViewer7;b||g(0,12465);b.render(a,this.__vrCamera);this.$Asset3dPhotoVrViewer3.onRender(a,this.__vrCamera);a.vr.submitFrame()};return c}(b("Asset3dVrViewer"));e.exports=a}),null);
__d("Asset3dVrRenderer",["invariant","Asset3dPhotoVrViewer","SocialVRThreeJS","UserAgent","WebXRManager"],(function(a,b,c,d,e,f,g){"use strict";var h=1.25;a=function(){function a(a){this.$1=a,this.$6={},b("UserAgent").isBrowser("Oculus Browser")&&(this.$4=!0,this.$6={caCorrection:!0,highRefreshRate:!0}),b("WebXRManager").getInstance().addXRSupportListener(this.onXRSupport.bind(this))}var c=a.prototype;c.onXRSupport=function(a){if(a===!0){this.$2||(this.$2=new(b("Asset3dPhotoVrViewer"))(this.$1.photoViewerProps));if(!this.$3){a=new(b("SocialVRThreeJS").WebGLRenderer)({antialias:!0,alpha:!0,preserveDrawingBuffer:!1});a.gammaOutput=!0;a.setPixelRatio(window.devicePixelRatio);b("UserAgent").isBrowser("Oculus Browser")&&a.vr.setScaling(h);this.$3=a}}else this.$3=null};c.$7=function(a){var c=this.$5;c||g(0,13176);c.logOnWebVrStart();var d=this.$2;d||g(0,12515);d.onEnterVr(this.$3,c);this.$3.vr.enabled=!0;a&&this.$3.vr.setSession&&(this.$3.vr.setSession(a),this.$3.vr.setAnimationLoop(function(a,c){b("WebXRManager").getInstance().render(a,c)}))};c.$8=function(a){var b=this.$2;b||g(0,12515);this.$5&&this.$5.logOnWebVrEnd(a,b.storyCount(),b.feedType(),b.atEndOfFeed());this.$5=null;this.$3.vr.enabled=!1;this.$3.clear(!0,!0,!0);b.onExitVr()};c.$9=function(){var a=this.$2;a||g(0,12515);a.render(this.$3)};c.createVrDeviceManagerProps=function(a,c,d,e,f,h,i,j,k){var l=this;c=c.clone(!0);this.$4&&c.traverse(function(a){if(a.isMesh){a=a;if(!a.geometry.isBufferGeometry)return;a=a.material;a.map&&a.map.isTexture&&(a.map.minFilter=b("SocialVRThreeJS").LinearMipMapLinearFilter)}});a=function(a){l.$2||g(0,12516),l.$2.setup(c,d,e,f,h),l.$5=i,l.$7(a),j()};var m=function(a){l.$8(a),k()};a={onVrEnter:a,onVrExit:m,onVrRender:this.$9.bind(this),vrAttributes:this.$6,vrCanvas:this.$3.domElement};return a};c.createVrDeepLinkProps=function(a){var b={onVrDeepLink:function(){a()},vrAttributes:this.$6,vrCanvas:this.$3.domElement};return b};c.domElement=function(){return this.$3.domElement};return a}();e.exports=a}),null);
__d("Photo3dCameraControl",["Asset3dCameraControl","EventListener","Random","SocialVRThreeJS","degToRad","getElementRect","gkx","performanceNow","radToDeg"],(function(a,b,c,d,e,f){"use strict";var g,h=.12,i=.06,j=.925,k=.92,l=.508015513,m=.666488587,n=Object.freeze({h_photo:-.14,v_photo:-.124}),o=Object.freeze({h_photo:-.124,v_photo:-.112}),p=Object.freeze({h_photo:.112,v_photo:.12}),q=Object.freeze({h_photo:.12,v_photo:.112}),r=Object.freeze({h_photo:.7,v_photo:.6}),s=Object.freeze({h_photo:.6,v_photo:.7}),t=Object.freeze({h_photo:.96,v_photo:.8}),u=Object.freeze({h_photo:.8,v_photo:.96}),v=.01,w=1,x=.005,y=.1,z=.001,A=.4,B=.3,C=3e-4,D=6e-4,E=D/1700,F=b("degToRad")(.1),G=b("degToRad")(179.9);a=function(a){babelHelpers.inheritsLoose(c,a);function c(c,d,e,f,g,h){var i;g===void 0&&(g=!1);i=a.call(this,c,d,f,g,h)||this;i.$Photo3dCameraControl1=!1;i.$Photo3dCameraControl2=0;i.$Photo3dCameraControl3=0;i.$Photo3dCameraControl4=0;i.$Photo3dCameraControl5=0;i.$Photo3dCameraControl6=b("Random").random()<.5;i.$Photo3dCameraControl12=0;i.$Photo3dCameraControl13=0;i.$Photo3dCameraControl15=null;i.$Photo3dCameraControl23=function(a){i.setDirty(!0,!0);var b=Math.max(Math.min(x*(a-i.$Photo3dCameraControl16),1),0);i.$Photo3dCameraControl16=a;i.$Photo3dCameraControl2+=b*(i.$Photo3dCameraControl4-i.$Photo3dCameraControl2);i.$Photo3dCameraControl3+=b*(i.$Photo3dCameraControl5-i.$Photo3dCameraControl3);Math.abs(i.$Photo3dCameraControl2-i.$Photo3dCameraControl4)>z||Math.abs(i.$Photo3dCameraControl3-i.$Photo3dCameraControl5)>z?i.$Photo3dCameraControl15=window.requestAnimationFrame(i.$Photo3dCameraControl23):i.$Photo3dCameraControl15=null};i.$Photo3dCameraControl28=function(a){if(!i.__isInAttractMode)return;var b=a-i.$Photo3dCameraControl20;i.$Photo3dCameraControl20=a;a=A-i.$Photo3dCameraControl17;var c=Math.abs(a)<B;i.$Photo3dCameraControl17+=Math.min(C*b,.99)*a;if(c){a=i.$Photo3dCameraControl19+E*b;a<D&&(i.$Photo3dCameraControl19=a);if(i.$Photo3dCameraControl6){i.$Photo3dCameraControl18+=i.$Photo3dCameraControl19*b;while(i.$Photo3dCameraControl18>Math.PI)i.$Photo3dCameraControl18-=2*Math.PI}else{i.$Photo3dCameraControl18-=i.$Photo3dCameraControl19*b;while(i.$Photo3dCameraControl18<-Math.PI)i.$Photo3dCameraControl18+=2*Math.PI}}i.$Photo3dCameraControl2=i.$Photo3dCameraControl17*Math.cos(i.$Photo3dCameraControl18);i.$Photo3dCameraControl3=i.$Photo3dCameraControl17*Math.sin(i.$Photo3dCameraControl18);i.setDirty(!0,!1);i.__renderingControl.update();i.__attractModeAnimationFrameID=window.requestAnimationFrame(i.$Photo3dCameraControl28)};i.__camera.name="2.5D Photo Camera";e.add(i.__camera);i.$Photo3dCameraControl11=g;return i}var d=c.prototype;d.setupViewportListeners=function(){var a=this;b("EventListener").listen(this.__canvas,"mousemove",function(c){var d=c.clientX;c=c.clientY;var e=b("getElementRect")(a.__canvas);if(d>e.left&&d<e.right&&c>e.top&&c<e.bottom){var f=.5*(e.left+e.right),g=.5*(e.top+e.bottom);a.$Photo3dCameraControl4=2*(d-f)/e.width;a.$Photo3dCameraControl5=-2*(c-g)/e.height;a.$Photo3dCameraControl1=!0;a.$Photo3dCameraControl21();a.__renderingControl.startRenderingLoop()}})};d.resize=function(a,b){this.$Photo3dCameraControl22(a/b),this.setDirty(!0)};d.$Photo3dCameraControl21=function(){this.$Photo3dCameraControl15||(this.$Photo3dCameraControl16=(g||(g=b("performanceNow")))(),this.$Photo3dCameraControl15=window.requestAnimationFrame(this.$Photo3dCameraControl23))};d.modelLoad=function(a,c){c===void 0&&(c=null);this.setDirty(!0);c&&c.FB_PHOTO_3D_DATA?(this.$Photo3dCameraControl12=Math.min(Math.max(c.FB_PHOTO_3D_DATA.hFov,F),G),this.$Photo3dCameraControl13=Math.min(Math.max(c.FB_PHOTO_3D_DATA.vFov,F),G)):(this.$Photo3dCameraControl12=l,this.$Photo3dCameraControl13=m);this.$Photo3dCameraControl14=this.$Photo3dCameraControl12>this.$Photo3dCameraControl13?"h_photo":"v_photo";c=new(b("SocialVRThreeJS").Box3)().setFromObject(a);this.__camera.near=Math.max(-1-c.max.z,v);c.expandByPoint(new(b("SocialVRThreeJS").Vector3)(0,0,y));a=new(b("SocialVRThreeJS").Vector3)();this.__camera.far=c.getSize(a).length();this.__cameraTarget.set(0,0,-w);this.__camera.position.set(0,0,0);this.$Photo3dCameraControl22(this.__aspectRatio)};d.$Photo3dCameraControl22=function(a){var c=Math.tan(this.$Photo3dCameraControl12/2),d=Math.tan(this.$Photo3dCameraControl13/2),e=1;this.__hFov=this.$Photo3dCameraControl12;this.__vFov=this.$Photo3dCameraControl13;c>0&&d>0&&(e=c/d,b("gkx")("935091")&&a>0&&(e<a?(d=c/a,e=c/d,this.__vFov=Math.atan(d)*2):e>a&&(c=d*a,e=c/d,this.__hFov=Math.atan(c)*2)));this.__aspectRatio=e;this.__camera.aspect=this.__aspectRatio;this.__camera.fov=this.$Photo3dCameraControl11?b("radToDeg")(this.__vFov)*k:b("radToDeg")(this.__vFov)*j;this.__camera.updateProjectionMatrix();this.$Photo3dCameraControl7=Math.tan(this.__hFov/2)*w*this.$Photo3dCameraControl24();this.$Photo3dCameraControl8=Math.tan(this.__vFov/2)*w*this.$Photo3dCameraControl25();this.$Photo3dCameraControl9=this.$Photo3dCameraControl26();this.$Photo3dCameraControl10=this.$Photo3dCameraControl27()};d.$Photo3dCameraControl24=function(){return this.$Photo3dCameraControl11?p[this.$Photo3dCameraControl14]:n[this.$Photo3dCameraControl14]};d.$Photo3dCameraControl25=function(){return this.$Photo3dCameraControl11?q[this.$Photo3dCameraControl14]:o[this.$Photo3dCameraControl14]};d.$Photo3dCameraControl26=function(){return this.$Photo3dCameraControl11?t[this.$Photo3dCameraControl14]:r[this.$Photo3dCameraControl14]};d.$Photo3dCameraControl27=function(){return this.$Photo3dCameraControl11?u[this.$Photo3dCameraControl14]:s[this.$Photo3dCameraControl14]};d.update=function(a){if(!this.isDirty())return;var b=this.__vFov*h*(2*a-1),c=(1-2*a)*this.$Photo3dCameraControl8,d=Math.sin(this.$Photo3dCameraControl3*Math.PI*.5),e=Math.sin(this.$Photo3dCameraControl2*Math.PI*.5),f=this.__vFov*i*d,g=this.__hFov*i*e;d=-d*this.$Photo3dCameraControl8;e=-e*this.$Photo3dCameraControl7;a=Math.pow(a+.16,3)/(Math.pow(a+.16,3)+Math.pow(1-(a+.16),3))-.9;f=-(f+b);b=-g;g=w-a*y;this.__cameraTarget.set(-((1-this.$Photo3dCameraControl9)*e),-(this.$Photo3dCameraControl10*c+(1-this.$Photo3dCameraControl10)*d),-w);this.__camera.position.set(0+g*Math.cos(f)*Math.sin(b),0+g*Math.sin(f),-w+g*Math.cos(f)*Math.cos(b));this.__camera.lookAt(this.__cameraTarget);this.__camera.lookAtPosition=this.__cameraTarget};d.__exitAttractMode=function(){a.prototype.__exitAttractMode.call(this),this.$Photo3dCameraControl4=this.$Photo3dCameraControl2,this.$Photo3dCameraControl5=this.$Photo3dCameraControl3};d.__enterAttractMode=function(){a.prototype.__enterAttractMode.call(this);this.$Photo3dCameraControl15!==null&&(window.cancelAnimationFrame(this.$Photo3dCameraControl15),this.$Photo3dCameraControl15=null);var c=this.$Photo3dCameraControl2,d=this.$Photo3dCameraControl3;this.$Photo3dCameraControl17=Math.sqrt(c*c+d*d);this.$Photo3dCameraControl18=Math.atan2(d,c);this.$Photo3dCameraControl19=0;this.$Photo3dCameraControl20=(g||(g=b("performanceNow")))();this.__attractModeAnimationFrameID||(this.__attractModeAnimationFrameID=window.requestAnimationFrame(this.$Photo3dCameraControl28))};return c}(b("Asset3dCameraControl"));e.exports=a}),null);
__d("Asset3dRenderManager",["invariant","Asset3dThreeJsHelpers","Asset3dTurntableCameraControl","Asset3dVrRenderer","FixedSizedSceneRenderer","Photo3dCameraControl","SocialVRThreeJS","ThreeJsHelpers","WebXRManager"],(function(a,b,c,d,e,f,g){"use strict";var h=new(b("FixedSizedSceneRenderer"))();a=function(){function a(a,b,c,d,e,f,g,h,i){this.$6=0,this.$7=0,this.$1=a,this.$2=b,this.$3=c,this.$4=d,this.$8=e,this.$9=f,this.$5=g,this.$11=!0,this.$10=h,this.$12=i}var c=a.prototype;c.onModelLoad=function(a,c,d,e,f){f&&this.$2&&this.$3&&(this.$4.logNetworkLoadEvents(f,this.$2,this.$3),this.$4.logGlbParsingEvents(f)),this.userData=e,this.$6=c,this.$7=d,b("Asset3dThreeJsHelpers").onModelLoad(a),this.model=a,this.$13(),h.isValid()?(this.$14(),this.$15(),this.$16()):(this.$4.logRendererLoadFailedEvents(),this.$10())};c.$13=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.$6,this.canvas.height=this.$7,this.context=this.canvas.getContext("2d")};c.$15=function(){this.scene&&this.canvas||g(0,549),this.cameraControl=this.$1==="photos_3d"?new(b("Photo3dCameraControl"))(this.$6,this.$7,this.scene,this.canvas,this.$5,this.$12):new(b("Asset3dTurntableCameraControl"))(this.$6,this.$7,this.scene,this.canvas,this.$5,this.$12),this.cameraControl.modelLoad(this.model,this.userData)};c.$14=function(){var a=this;this.model||g(0,550);this.scene=new(b("SocialVRThreeJS").Scene)();this.scene.add(this.model);if(this.$17(this.scene))new(b("SocialVRThreeJS").TextureLoader)().load("/images/asset3d/iblenv_b20_02n-30.jpg",function(c){c.mapping=b("SocialVRThreeJS").CubeUVReflectionMapping,c.minFilter=b("SocialVRThreeJS").LinearFilter,c.magFilter=b("SocialVRThreeJS").LinearFilter,a.scene.traverse(function(a){a.material&&a.material.type=="MeshStandardMaterial"&&(a.material.envMap=c,a.material.envMapIntensity=1.5,a.material.needsUpdate=!0)})});else{var c=new(b("SocialVRThreeJS").AmbientLight)(13421772,.5);this.scene.add(c)}};c.$17=function(a){var b=!1;a.traverse(function(a){a=a.material;!b&&a&&a.isMeshStandardMaterial&&!(a.extensions&&a.extensions.KHR_materials_unlit!=null)&&(b=!0)});return b};c.isValid=function(){return this.$11};c.disposeModel=function(){var a=this.model.clone();this.scene&&this.scene.remove(this.model);b("ThreeJsHelpers").disposeModel(this.model);this.model=a;this.scene&&this.scene.add(this.model)};c.$16=function(){this.$8&&(window.asset3dVrRenderer||(this.$9||g(0,551),window.asset3dVrRenderer=new(b("Asset3dVrRenderer"))({canvas2DWidth:this.$6*2,canvas2DHeight:this.$7,photoViewerProps:this.$9})),this.vrRenderer=window.asset3dVrRenderer)};c.destroy=function(){this.cameraControl&&this.cameraControl.destroy(),this.model&&this.disposeModel()};c.renderAsset3D=function(a){a===void 0&&(a=!0);var c=this.context,d=this.cameraControl;h&&h.isValid()&&c&&d&&d.isDirty()&&!b("WebXRManager").getInstance().inVr()&&(a&&d.setDirty(!1),h.render(c,this.scene,d.camera(),{width:this.$6,height:this.$7,pixelRatio:window.devicePixelRatio}))};c.getEl=function(){return this.canvas};c.resize=function(a,b){this.cameraControl.resize(a,b),this.$5||(this.canvas.width=a,this.canvas.height=b),this.cameraControl.setDirty(!0,!0)};return a}();e.exports=a}),null);
__d("Asset3dScrollTracker",["performanceNow"],(function(a,b,c,d,e,f){"use strict";var g,h=60,i=500;a=function(){function a(){this.$1=new Array(i).fill({pos:0,time:0}),this.$2=0,this.$3=0,this.$4=0,this.$5=0,this.$6=0,this.$7=0,this.$8=0}var c=a.prototype;c.$9=function(){this.$4>0&&(this.$5-=this.$1[this.$2].pos,this.$2=(this.$2+1)%i,this.$4-=1)};c.$10=function(a,b){this.$1[this.$3]={pos:a,time:b},this.$5+=a,this.$3=(this.$3+1)%i,this.$4<i?this.$4+=1:(this.$5-=this.$1[this.$2].pos,this.$2=(this.$2+1)%i)};c.onScroll=function(a,c){this.$6=a,c&&(this.$7=a,this.$8=(g||(g=b("performanceNow")))())};c.samplePosition=function(){var a=(g||(g=b("performanceNow")))(),c=Math.max(a-this.$8,0);this.$7=this.$6+(this.$7-this.$6)*Math.exp(-c*.01);this.$8=a;while(this.$4>0&&a-this.$1[this.$2].time>h)this.$9();this.$10(this.$7,a);return this.$5/this.$4};return a}();e.exports=a}),null);
__d("GltfScenePerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:GltfScenePerformanceLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:GltfScenePerformanceLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:GltfScenePerformanceLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setActiveDurationMs=function(a){this.$1.active_duration_ms=a;return this};c.setAsset3dCategory=function(a){this.$1.asset3d_category=a;return this};c.setAsset3dFeedType=function(a){this.$1.asset3d_feed_type=a;return this};c.setAsset3dID=function(a){this.$1.asset3d_id=a;return this};c.setCompressionLevel=function(a){this.$1.compression_level=a;return this};c.setCompressionType=function(a){this.$1.compression_type=a;return this};c.setCurrentStoryID=function(a){this.$1.current_story_id=a;return this};c.setEndOfFeedReached=function(a){this.$1.end_of_feed_reached=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setGltfSceneAvgRenderFrameRate=function(a){this.$1.gltf_scene_avg_render_frame_rate=a;return this};c.setIsCurrentUsersStory=function(a){this.$1.is_current_users_story=a;return this};c.setSceneURL=function(a){this.$1.scene_url=a;return this};c.setStartTimeMs=function(a){this.$1.start_time_ms=a;return this};c.setStoryCount=function(a){this.$1.story_count=a;return this};c.setStoryID=function(a){this.$1.story_id=a;return this};return a}();c={active_duration_ms:!0,asset3d_category:!0,asset3d_feed_type:!0,asset3d_id:!0,compression_level:!0,compression_type:!0,current_story_id:!0,end_of_feed_reached:!0,event:!0,gltf_scene_avg_render_frame_rate:!0,is_current_users_story:!0,scene_url:!0,start_time_ms:!0,story_count:!0,story_id:!0};e.exports=a}),null);
__d("GLTFSceneLoggerUtils",["GltfScenePerformanceTypedLogger"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){this.data={frameCount:0,timeSinceLastFPSLogMs:0,touchPanStartMs:0,fakeGyroStartMs:0},this.$1=a}var c=a.prototype;c.logNetworkLoadEvents=function(a,b,c){this.$2("gltf_scene_network_load_start",{startTimeMs:a.networkLoad.startTimeMs}),this.$2("gltf_scene_network_load_end",{activeDurationMs:a.networkLoad.durationMs,compressor:b,compressionLevel:c})};c.logGpuUploadStart=function(){this.$2("gltf_scene_gpu_upload_start")};c.logGpuUploadEnd=function(a){this.$2("gltf_scene_gpu_upload_end",{activeDurationMs:a})};c.logAverageFrameRate=function(a){this.$2("gltf_scene_avg_render_frame_rate",{averageFrameRate:a})};c.logGlbParsingEvents=function(a){this.$2("gltf_scene_glb_parsing_start",{startTimeMs:a.glbParsing.startTimeMs}),this.$2("gltf_scene_glb_parsing_end",{activeDurationMs:a.glbParsing.durationMs})};c.logRendererLoadFailedEvents=function(){this.$2("gltf_scene_renderer_load_failed")};c.logOnTouchPanEnd=function(a){this.$2("gltf_scene_on_touch_pan_end",{activeDurationMs:a})};c.logOnFakeGyroEnd=function(a){if(a<1e3)return;this.$2("gltf_scene_on_fake_gyro_end_www",{activeDurationMs:a})};c.logOnWebVrRequestEnter=function(){this.$2("gltf_scene_web_request_enter",{})};c.logOnWebVrStart=function(){this.$2("gltf_scene_web_vr_start",{})};c.logOnWebVrEnd=function(a,b,c,d){this.$2("gltf_scene_web_vr_end",{activeDurationMs:a,storyCount:b,feedType:c,endOfFeedReached:d},!0)};c.logOnWebVrStoryStart=function(a,b,c){this.$2("gltf_scene_web_vr_story_start",{currentStoryID:a,isCurrentUsersStory:b,feedType:c})};c.logOnWebVrStoryEnd=function(a,b,c){this.$2("gltf_scene_web_vr_story_end",{activeDurationMs:b,currentStoryID:a,isCurrentUsersStory:c})};c.logOnWebVrFetchIDsError=function(){this.$2("gltf_scene_web_vr_fetch_ids_error")};c.logOnWebVrPastEndOfFeedError=function(){this.$2("gltf_scene_web_vr_past_end_of_feed_error")};c.logOnWebVrFetchStoryError=function(){this.$2("gltf_scene_web_vr_fetch_story_error")};c.logOnWebVrLoadGLTFError=function(){this.$2("gltf_scene_web_vr_load_gltf_error")};c.logViewportSizeError=function(){this.$2("gltf_scene_viewport_size_error")};c.$2=function(a,c,d){c===void 0&&(c={});a=new(b("GltfScenePerformanceTypedLogger"))().setEvent(a).setAsset3dID(this.$1.asset3dID).setAsset3dCategory(this.$1.asset3dCategory).setSceneURL(this.$1.sceneURL).setActiveDurationMs(c.activeDurationMs).setStartTimeMs(c.startTimeMs).setGltfSceneAvgRenderFrameRate(c.averageFrameRate);this.$1.storyTimelineID&&a.setStoryID(this.$1.storyTimelineID);var e=c.storyCount?c.storyCount:1;a.setStoryCount(e);a.setAsset3dFeedType(c.feedType);a.setIsCurrentUsersStory(c.isCurrentUsersStory);e=c.currentStoryID?c.currentStoryID:this.$1.storyTimelineID;a.setCurrentStoryID(e);d?a.logImmediately():a.log()};return a}();e.exports=a}),null);
__d("SphericalMediaMouseOverlay.react",["cx","fbt","CSS","React","ReactDOM","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React"),j=800,k=function(a){return{mouseRoot:"_3bxe _2660"+(a?" _2dz7":""),mouse:"_2661"+(a?" _2dz7":""),mouseRotate:"_2663"+(a?" _2dz7":""),mouseInner:"_2664"+(a?" _2dz7":""),mouseLeftButton:"_2666"+(a?" _2dz7":""),mouseBackground:"_15nj",mouseButtons:"_2665",mouseRightButton:"_2667",mouseBody:"_266m",mouseText:"_2662"}};a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$2=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidUpdate=function(a){var b=this;a.isActive&&!this.props.isActive?this.$2=setTimeout(function(){return b.$3()},j):!this.props.isActive?this.$3():this.props.isActive&&(this.$2!==null&&(clearTimeout(this.$2),this.$2=null),this.$4())};d.componentDidMount=function(){this.props.isActive||this.$3();var a=b("ReactDOM").findDOMNode(this);a instanceof HTMLElement&&(this.$1=a)};d.componentWillUnmount=function(){this.$1=null};d.$3=function(){this.$1&&b("CSS").addClass(this.$1,"_8b2")};d.$4=function(){this.$1&&b("CSS").removeClass(this.$1,"_8b2")};d.render=function(){var a=this.props,c=a.className;a=a.isActive;var d=this.props.copy?this.props.copy:h._("Click and drag to look around");a=k(a);return i.jsxs("div",{className:b("joinClasses")(c,a.mouseRoot),children:[i.jsx("div",{className:a.mouse,children:i.jsx("div",{className:a.mouseRotate,children:i.jsxs("div",{className:a.mouseInner,children:[i.jsx("div",{className:a.mouseBackground}),i.jsxs("div",{className:a.mouseButtons,children:[i.jsx("div",{className:a.mouseLeftButton}),i.jsx("div",{className:a.mouseRightButton})]}),i.jsx("div",{className:a.mouseBody})]})})}),i.jsx("div",{className:a.mouseText,children:d})]})};return c}(i.PureComponent);e.exports=a}),null);
__d("EnterVrButton.react",["ix","cx","fbt","invariant","AbstractButton.react","Image.react","React","SUIBusinessTheme","SUITooltip.react","asset"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";var k=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,c=k.jsx(b("Image.react"),{src:g("556058")}),d="",e="",f;this.props.inVr?(d=k.jsx("div",{className:"_6ydz",children:i._("VR mode on")}),e=i._("Exit VR")):this.props.isLoading?d=k.jsx("div",{className:"_6ydz",children:i._("Loading")}):e=i._("Enter VR");this.props.needsOverlay&&(f=k.jsx("div",{className:"_6yd-"}));d=k.jsxs("div",{children:[f,k.jsxs("div",{className:"_6yd_",children:[d,k.jsx(b("SUITooltip.react"),{ref:function(b){return a.$1=b},theme:b("SUIBusinessTheme"),tooltip:e,tooltipDelay:500,children:k.jsx(b("AbstractButton.react"),{disabled:this.props.isLoading,label:e,labelIsHidden:!0,className:"_6ye0",image:c,onClick:function(){a.props.onClickCallback(),a.__hideToolTip()}})})]})]});return d};d.__hideToolTip=function(){this.$1||j(0,5e3),this.$1.hide()};return c}(k.PureComponent);e.exports=a}),null);
__d("WebVrContainer.react",["cx","invariant","EnterVrButton.react","React","Spotlight.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={inVr:!1,isVrDeviceReady:!1,isClientReady:!1,vrCanvas:null,vrRenderWidth:0,vrRenderHeight:0},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.setDeviceReady=function(a,b,c){this.setState({isVrDeviceReady:a,vrRenderWidth:b,vrRenderHeight:c})};d.setIsClientReady=function(a){this.setState({isClientReady:a})};d.setVrOn=function(a){this.state.inVr||(this.state.vrCanvas===null||h(0,10946),a.parentElement===null||h(0,10947),this.setState({inVr:!0,vrCanvas:a}))};d.setVrOff=function(){if(this.state.inVr){var a=this.$1;a!==null&&a!==void 0||h(0,10943);var b=this.state.vrCanvas;b!==null&&b!==void 0||h(0,10944);b.parentElement===a||h(0,10945);a.removeChild(b);this.setState({inVr:!1,vrCanvas:null})}};d.componentDidUpdate=function(){if(this.state.inVr){var a=this.$1;a!==null&&a!==void 0||h(0,11040);var b=this.state.vrCanvas;b!==null&&b!==void 0||h(0,11039);a.appendChild(b)}};d.render=function(){var a=this,c;if(!this.state.isVrDeviceReady)c=i.jsx("div",{});else{var d=i.jsx(b("EnterVrButton.react"),{onClickCallback:function(){a.state.inVr?a.props.exitVrCallback():a.props.enterVrCallback()},needsOverlay:this.props.needsOverlay,inVr:this.state.inVr,isLoading:!this.state.isClientReady});if(this.state.inVr){var e={width:this.state.vrRenderWidth,maxWidth:"80vw",height:this.state.vrRenderHeight,maxHeight:"90vh",overflow:"hidden",position:"relative"};e=i.jsx(b("Spotlight.react"),{onHide:function(){a.props.exitVrCallback()},shown:this.state.inVr,rootClassName:"_6_ca",children:i.jsxs("div",{className:"_n3",style:e,children:[i.jsx("div",{ref:function(b){return a.$1=b}}),d]})});c=i.jsx("div",{children:e})}else c=i.jsx("div",{children:d})}return c};return c}(i.Component);e.exports=a}),null);
__d("Asset3dFeedViewer.react",["ix","csx","cx","fbt","invariant","Animation","Asset3dComponentContextMenu.react","Asset3dFeedViewerModalContainer.react","Asset3DFullscreenViewContainer.react","Asset3dRenderManager","Asset3dScrollTracker","Asset3DLoaderFactory","Asset3DUtils","CSS","DOM","DOMQuery","EventListener","GLTFSceneLoggerUtils","Image.react","Link.react","React","ReactDOM","ScaledImage.react","SphericalMediaMouseOverlay.react","SubscriptionsHandler","URI","WebVrContainer.react","WebXRManager","asset","getElementRect","gkx","onViewportChanged","promiseDone"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l,m=b("Asset3DLoaderFactory").make("Asset3DLoader"),n=b("React"),o=360,p=.9,q=10,r=20,s=4e3,t=300,u={DISABLED:"0",DEV:"1"},v=j._("Click and drag to look around in 3D"),w=j._("Move your mouse to view the photo in 3D"),x=function(a){a=!!a.composerID||!!a.attribution;return{sphericalOverlay:a?"_1r1y":""}};function y(a){var b=a.fps;b=b===void 0?0:b;return a.isVisible?n.jsxs("ul",{className:"_6a-z",children:[n.jsx("li",{className:"_6a--",children:n.jsxs("span",{children:["AssetID: ",a.asset3dID]})}),n.jsx("li",{className:"_6a--",children:n.jsxs("span",{children:["PostID: ",a.postID||""]})}),n.jsx("li",{className:"_6a--",children:n.jsxs("span",{children:["FPS: ",(b||0).toFixed(2)]})})]}):null}function z(a){var c=a.fallbackImageURI,d=a.showErrorMsg,e=a.width;a=a.height;var f=j._("Your browser does not support 3D");if(c)return n.jsxs("div",{children:[n.jsx(b("ScaledImage.react"),{width:e,height:a,imageSize:{height:a,width:e},src:c}),n.jsx("div",{className:"_3gss",children:f})]});else{d(f);return n.jsx("div",{})}}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isNuxActive:!1,isSceneRendered:!1,isTooltipDisabled:!1,fps:0,debugMode:null,isRenderContextValid:!0,showModal:!1,modalSize:{width:1,height:1}},d.$5=!0,d.$6=null,d.$9=0,d.$10=!1,d.$11=0,d.$12=null,d.$17=null,d.$18=new(b("SubscriptionsHandler"))(),d.$19=!1,d.$26=function(a){var c=b("DOMQuery").find(d.props.initialViewContainer,"._623o");b("CSS").setClass(c,"_3gsr");c=b("DOM").create("div",{className:"_3gss"});b("DOM").setContent(c,a);b("DOM").appendContent(d.props.initialViewContainer,c)},d.$28=function(){d.setState({isRenderContextValid:!1})},d.onRequestAnimationFrame=function(){if(d.$4){var a=d.update();a&&(d.$6=window.requestAnimationFrame(d.onRequestAnimationFrame));d.$19=a}},d.$42=function(){var a=Math.min(d.$11/(t/1e3),60);d.setState({fps:a});d.$11=0;d.$12=window.setTimeout(d.$42,t)},d.$32=function(a){if(!d.$2)return;var c=!0,e=!0,f=b("getElementRect")(d.$2),g=a.top;a=a.bottom;c=f.top>g&&f.top<a||f.bottom>g&&f.bottom<a||g>f.top&&a<f.bottom;e=f.top>g&&f.bottom<a;c&&(d.$43(f),d.$14.cameraControl.setDirty(!0,!0));d.$14.cameraControl.setFullVisibility(e);d.$4!==c&&(d.$4=c,c?d.$38():d.$40());d.$29()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1&&this.$1.setIsClientReady(!0);this.$4=!1;this.$15=this.$20.bind(this);this.$21();this.$22(this.props);if(this.$2){this.$18.addSubscriptions(b("EventListener").listen(this.$2,"contextmenu",function(a){(a.shiftKey||!b("gkx")("678197"))&&a.preventDefault()}));var c=null,d=null;if(this.props.category==="photos_3d"){var e=this.props.postID;c=new(l||(l=b("URI")))("/intern/compphoto/x3d/3dphoto_console").setDomain("our.intern.facebook.com").setProtocol("https").addQueryData({ent_id:e}).toString();d=new l("/intern/compphoto/x3d/"+this.props.asset3dID+"/depth").setDomain("our.intern.facebook.com").setProtocol("https").toString()}if(this.$2 instanceof HTMLElement){e=this.props;var f=e.postID;e=e.asset3dID;e=n.jsx(b("Asset3dComponentContextMenu.react"),{asset3DID:e,postID:f,target:this.$2,fileURL:this.props.glbURI,fallbackImgURL:this.props.originalImageURI,consoleURL:c,depthImageURL:d,onToggleDevPanel:function(){return a.$23()}});b("ReactDOM").render(e,this.$2)}}};d.componentWillUnmount=function(){this.$24()};d.UNSAFE_componentWillReceiveProps=function(a){a.glbURI&&a.glbURI!==this.props.glbURI&&(this.$4=!1,this.$5=!0,this.$24(),this.$22(a),this.$25())};d.$22=function(a){var b=this,c=a.glbURI,d=a.asset3dID,e=a.actorID;a=a.statusID;var f=j._("3D post failed to load");return m.load({uri:c,assetID:d,statusID:a,actorID:e}).then(function(a){a.error?b.$26(f):b.$27(a)},function(a){b.$26(f)})};d.$21=function(){var a=this,c=this.props.vrProps;this.$14=new(b("Asset3dRenderManager"))(this.props.category,this.props.compressor,this.props.compressionLevel,this.$7,!!c,c?c.photoViewerProps:null,this.props.isModal,this.$28,{startRenderingLoop:function(){return a.$29()},update:function(){return a.update()}})};d.$29=function(){this.$19||(this.$19=!0,this.onRequestAnimationFrame())};d.$27=function(a){var c=this,d=this.$2,e=this.props,f=e.storyTimelineID,g=e.width;e=e.height;var h=a.assetID,i=a.uri;if(!i||!d)return;this.$14.onModelLoad(a.scene,g,e,a.userData,a.performanceInfo);this.$7=new(b("GLTFSceneLoggerUtils"))({asset3dID:h,asset3dCategory:this.props.category,sceneURL:i,storyTimelineID:f});this.$10=!1;this.$9=0;this.$16=new(b("Asset3dScrollTracker"))();this.$17=null;if(!d)return;this.$3=this.$14.canvas;d.appendChild(this.$3);this.$18.addSubscriptions(b("EventListener").listen(this.$3,"mousemove",function(a){if(c.$10)return;c.$9+=1;c.$9>r&&(c.$10=!0,c.setState({isNuxActive:!0}),c.$17=window.setTimeout(function(){c.setState({isNuxActive:!1})},s))}),b("EventListener").listen(this.$3,"dblclick",function(a){c.$14.cameraControl.resetCamera()}));(this.props.enableFullscreen&&!this.props.isModal&&this.props.category==="photos_3d"||this.props.category==="composer"&&b("gkx")("693522"))&&(b("EventListener").listen(this.$3,"click",function(a){c.$30()}),b("EventListener").listen(this.$3,"DOM/click",function(a){c.$30()}));g=Date.now();this.$7.logGpuUploadStart();this.$8=.5;this.$31(!1);this.$7.logGpuUploadEnd(Date.now()-g);e=this.$14.getEl();a=this.$14;if(this.props.shouldUpdateFallbackImage&&e&&a){h=b("Asset3DUtils").takeScreenshot(e);b("Asset3DUtils").saveScreenshot(h,this.props.asset3dID,this.props.actorID)}i=b("onViewportChanged")(this.$32);i.scheduleCheck();this.$13=i};d.$30=function(){var a=this.$33();this.setState({modalSize:a,showModal:!0})};d.$24=function(){this.$14&&this.$14.destroy(),this.$6!=null&&(window.cancelAnimationFrame(this.$6),this.$6=null),this.$17&&(window.clearTimeout(this.$17),this.$17=null),this.$18&&this.$18.release(),this.$34(),this.$2&&this.$3&&this.$3.parentNode===this.$2&&this.$2.removeChild(this.$3)};d.$31=function(a){this.$14.cameraControl.update(this.$8);var b=this.$14.cameraControl.isDirty();this.$14.renderAsset3D(a);return b};d.$35=function(){var a=this.$1;a||k(0,10952);var b=this.$14.vrRenderer;b||k(0,10950);a.setVrOn(b.domElement());window.cancelAnimationFrame(this.$6);this.$6=null};d.$36=function(){var a=this.$1;a||k(0,10951);a.setVrOff();this.$14.cameraControl.setDirty(!0,!0);this.$6=window.requestAnimationFrame(this.onRequestAnimationFrame)};d.$37=function(){new(b("Animation"))(this.props.initialViewContainer).to("opacity",0).duration(350).hide().go()};d.$25=function(){new(b("Animation"))(this.props.initialViewContainer).to("opacity",1).duration(0).show().go()};d.$38=function(){if(this.$5){this.props.isModal||this.$37();var a=b("DOMQuery").scry(b("ReactDOM").findDOMNode(this),"._3xkn")[0];a&&new(b("Animation"))(a).to("opacity",1).duration(700).go();this.$5=!1}this.$14.vrRenderer&&b("WebXRManager").getInstance().addXRSupportListener(this.$15);this.state.debugMode===u.DEV&&this.$39();window.requestAnimationFrame(this.onRequestAnimationFrame)};d.$40=function(){this.$14.disposeModel(),this.$14.vrRenderer&&b("WebXRManager").getInstance().removeXRSupportListener(this.$15),this.$34()};d.$20=function(a){var b=this.$1;b||k(0,11095);a?b.setDeviceReady(!0,0,0):b.setDeviceReady(!1,0,0)};d.update=function(){if(this.$4){this.$41();var a=this.$31(!0);this.state.isSceneRendered||this.setState({isSceneRendered:!0});return a}return!1};d.$41=function(){if(this.props.isModal){this.$8=.5;return}var a=this.$16.samplePosition();Math.abs(a-this.$8)>.001&&(this.$8=a,this.$14.cameraControl.setDirty(!0,!1))};d.$33=function(){var a=window.innerWidth||document.documentElement.clientWidth,b=window.innerHeight||document.documentElement.clientHeight,c=this.props.aspectRatio;(!c||c==0)&&(c=this.props.width/this.props.height);a=p*Math.min(a-o-2*q,b*c);b=a/c;return{width:a,height:b}};d.$43=function(a){if(!this.$2)return;var b=window.innerHeight||document.documentElement.clientHeight,c=0;a.height>.5*b?c=a.bottom/(b+a.height):a.top<0?c=.25*a.bottom/a.height:a.bottom>b?c=.75+.25*(a.bottom-b)/a.height:c=.25+.5*a.top/(b-a.height);this.$16.onScroll(c,this.$5);this.$5&&(this.$8=c)};d.$23=function(){var a=this.state.debugMode,b=a===u.DEV?u.DISABLED:u.DEV;a===u.DEV?this.$34():this.$39();this.setState({debugMode:b})};d.$39=function(){this.$12||(this.$12=window.setTimeout(this.$42,t))};d.$34=function(){this.$12&&(window.clearTimeout(this.$12),this.$12=null)};d.render=function(){var a=this,c=this.props.attribution,d=c?function(){var a=c.href,d=c.source,e=c.title;return n.jsx("div",{className:"_3xkn",children:n.jsxs(b("Link.react"),{href:a,target:"_blank",children:[n.jsx(b("Image.react"),{className:"_47ru",src:g("459146")}),n.jsxs("div",{className:"_47rt",children:[n.jsx("div",{className:"_72zk",children:e}),n.jsx("div",{className:"_377g",children:d?d:a})]})]})})}():null,e={overflow:"hidden",position:"relative"};this.props.background&&this.props.background!=="default"&&(e=Object.assign(e,b("Asset3DUtils").getBackgroundStyles(this.props.background,"story")));var f=x(this.props),h={height:this.props.height},i=this.props.postID,j=this.props.vrProps&&i?n.jsx(b("WebVrContainer.react"),{ref:function(b){return a.$1=b},enterVrCallback:function(){a.$7.logOnWebVrRequestEnter();var c=a.props.vrProps;c||k(0,3400);c=a.$14.vrRenderer.createVrDeviceManagerProps(a.props.category,a.$14.model,null,i,c.navigationProps,a.$14.userData,a.$7,a.$35.bind(a),a.$36.bind(a));b("promiseDone")(b("WebXRManager").getInstance().enterVr(c))},exitVrCallback:function(){b("promiseDone")(b("WebXRManager").getInstance().exitVr())},needsOverlay:d===null}):null,l=null;if(this.props.enableFullscreen&&this.state.showModal){var m=this.state.modalSize;this.$14.cameraControl.resize(m.width,m.height);var o=this.$14.cameraControl.camera();this.props.category==="photos_3d"?l=n.jsx(b("Asset3dFeedViewerModalContainer.react"),{scene:this.$14.scene,camera:o,viewportInfo:{width:m.width,height:m.height,pixelRatio:1},asset3DInfo:{horizontalFov:this.$14.cameraControl.getHorizontalFov()||0,verticalFov:this.$14.cameraControl.getVerticalFov()||0},onExit:function(){a.setState({showModal:!1,isSceneRendered:!0}),a.$14.cameraControl.resize(a.props.width,a.props.height),a.$31(!0)},storyID:this.props.storyID}):l=n.jsx(b("Asset3DFullscreenViewContainer.react"),{model:this.$14.scene,cameraPosition:o.position,viewportInfo:{width:m.width,height:m.height,pixelRatio:1},onExit:function(){a.setState({showModal:!1})},storyID:this.props.storyID,backgroundType:this.props.background})}if(this.state.isRenderContextValid){o=this.props.initialViewContainer;o.style.position="absolute";return n.jsxs("div",{children:[l,n.jsxs("div",{style:e,tabIndex:0,children:[n.jsx("div",{style:h,ref:function(b){return a.$2=b}}),n.jsx(b("SphericalMediaMouseOverlay.react"),{className:f.sphericalOverlay,isActive:this.state.isNuxActive,copy:this.props.category==="photos_3d"?w:v}),n.jsx("div",{className:"_34-b",ref:"nuxAnchor"}),d,j,n.jsx(y,{isVisible:this.state.debugMode===u.DEV,fps:this.state.fps,asset3dID:this.props.asset3dID,postID:this.props.postID})]})]})}else{this.props.fallbackImageURI&&this.$37();return n.jsx(z,{width:this.props.width,height:this.props.height,fallbackImageURI:this.props.fallbackImageURI,showErrorMsg:this.$26})}};return c}(n.Component);a.defaultProps={enableFullscreen:!0,storyTimelineID:null,storyID:null,statusID:null,asset3dID:"",postID:"",glbURI:null,compressor:null,compressionLevel:null,attribution:null,width:0,height:0,aspectRatio:0,composerID:null,background:null,shouldUpdateFallbackImage:!1,vrProps:null,fallbackImageURI:null,originalImageURI:null};e.exports=a}),null);