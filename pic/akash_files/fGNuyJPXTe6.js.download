if (self.CavalryLogger) { CavalryLogger.start_js(["m9DNj"]); }

__d("VideoBroadcastTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(){this.$1={}}var c=a.prototype;c.log=function(a){b("GeneratedLoggerUtils").log("logger:VideoBroadcastLoggerConfig",this.$1,b("Banzai").BASIC,a)};c.logVital=function(a){b("GeneratedLoggerUtils").log("logger:VideoBroadcastLoggerConfig",this.$1,b("Banzai").VITAL,a)};c.logImmediately=function(a){b("GeneratedLoggerUtils").log("logger:VideoBroadcastLoggerConfig",this.$1,{signal:!0},a)};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setActionName=function(a){this.$1.action_name=a;return this};c.setApproximateDurationSeconds=function(a){this.$1.approximate_duration_seconds=a;return this};c.setBroadcastEndTime=function(a){this.$1.broadcast_end_time=a;return this};c.setBroadcastEvent=function(a){this.$1.broadcast_event=a;return this};c.setBroadcastMetadataFetchLatencyUs=function(a){this.$1.broadcast_metadata_fetch_latency_us=a;return this};c.setBroadcastStartTime=function(a){this.$1.broadcast_start_time=a;return this};c.setBroadcastStoppedTime=function(a){this.$1.broadcast_stopped_time=a;return this};c.setDeletionKey=function(a){this.$1.deletion_key=a;return this};c.setEncodingRegenInfo=function(a){this.$1.encoding_regen_info=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setEncodingTag=function(a){this.$1.encoding_tag=a;return this};c.setErrorClass=function(a){this.$1.error_class=a;return this};c.setErrorCode=function(a){this.$1.error_code=a;return this};c.setErrorMessage=function(a){this.$1.error_message=a;return this};c.setErrorTrace=function(a){this.$1.error_trace=a;return this};c.setFeedPayload=function(a){this.$1.feed_payload=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setHostNumber=function(a){this.$1.host_number=a;return this};c.setIsGraphqlMutation=function(a){this.$1.is_graphql_mutation=a;return this};c.setMutationDetails=function(a){this.$1.mutation_details=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setNewFbobjVersion=function(a){this.$1.new_fbobj_version=a;return this};c.setNewStatus=function(a){this.$1.new_status=a;return this};c.setNumberOfCrossposts=function(a){this.$1.number_of_crossposts=a;return this};c.setObserverName=function(a){this.$1.observer_name=a;return this};c.setOverrideAppID=function(a){this.$1.override_app_id=a;return this};c.setOverrideAttributionAppID=function(a){this.$1.override_attribution_app_id=a;return this};c.setOverrideVideoBroadcastID=function(a){this.$1.override_video_broadcast_id=a;return this};c.setPreviousFbobjVersion=function(a){this.$1.previous_fbobj_version=a;return this};c.setPreviousStatus=function(a){this.$1.previous_status=a;return this};c.setPublishOrigin=function(a){this.$1.publish_origin=a;return this};c.setReason=function(a){this.$1.reason=a;return this};c.setScheduledStartTime=function(a){this.$1.scheduled_start_time=a;return this};c.setSessionCreationTimeFromBroadcast=function(a){this.$1.session_creation_time_from_broadcast=a;return this};c.setSessionCreationTimeFromLoginService=function(a){this.$1.session_creation_time_from_login_service=a;return this};c.setSessionIDFromBroadcast=function(a){this.$1.session_id_from_broadcast=a;return this};c.setStackTrace=function(a){this.$1.stack_trace=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setStreamCredentialsViewerID=function(a){this.$1.stream_credentials_viewer_id=a;return this};c.setTriggerName=function(a){this.$1.trigger_name=a;return this};c.setUpdateData=function(a){this.$1.update_data=a;return this};c.setVideoAssetID=function(a){this.$1.video_asset_id=a;return this};c.setVideoBroadcast=function(a){this.$1.video_broadcast=a;return this};c.setVideoSegmentNumber=function(a){this.$1.video_segment_number=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={action_name:!0,approximate_duration_seconds:!0,broadcast_end_time:!0,broadcast_event:!0,broadcast_metadata_fetch_latency_us:!0,broadcast_start_time:!0,broadcast_stopped_time:!0,deletion_key:!0,encoding_regen_info:!0,encoding_tag:!0,error_class:!0,error_code:!0,error_message:!0,error_trace:!0,feed_payload:!0,host_number:!0,is_graphql_mutation:!0,mutation_details:!0,new_fbobj_version:!0,new_status:!0,number_of_crossposts:!0,observer_name:!0,override_app_id:!0,override_attribution_app_id:!0,override_video_broadcast_id:!0,previous_fbobj_version:!0,previous_status:!0,publish_origin:!0,reason:!0,scheduled_start_time:!0,session_creation_time_from_broadcast:!0,session_creation_time_from_login_service:!0,session_id_from_broadcast:!0,stack_trace:!0,stream_credentials_viewer_id:!0,trigger_name:!0,update_data:!0,video_asset_id:!0,video_broadcast:!0,video_segment_number:!0};e.exports=a}),null);
__d("LiveVideoBroadcastErrorCreateSubscription.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"LiveVideoMutationErrorSubscribeResponsePayload",kind:"LinkedField",name:"live_video_mutation_error_subscribe",plural:!1,selections:[{alias:null,args:null,concreteType:"LiveVideoError",kind:"LinkedField",name:"live_video_error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"error_code",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"error_message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"error_type",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LiveVideoBroadcastErrorCreateSubscription",selections:b,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LiveVideoBroadcastErrorCreateSubscription",selections:b},params:{id:"2653532621324181",metadata:{subscriptionName:"live_video_mutation_error_subscribe"},name:"LiveVideoBroadcastErrorCreateSubscription",operationKind:"subscription",text:null}}}();e.exports=a}),null);
__d("LiveVideoBroadcastUtilsStreamMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"LiveVideoStreamCreateResponsePayload",kind:"LinkedField",name:"live_video_stream_create",plural:!1,selections:[{alias:null,args:null,concreteType:"LiveVideoInputStream",kind:"LinkedField",name:"input_stream",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:"stream_url",args:[{kind:"Literal",name:"ssl_behavior",value:"NO_SSL"}],kind:"ScalarField",name:"rtmp_ingest_url",storageKey:'rtmp_ingest_url(ssl_behavior:"NO_SSL")'},{alias:"secure_stream_url",args:[{kind:"Literal",name:"ssl_behavior",value:"USE_SSL"}],kind:"ScalarField",name:"rtmp_ingest_url",storageKey:'rtmp_ingest_url(ssl_behavior:"USE_SSL")'}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LiveVideoBroadcastUtilsStreamMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LiveVideoBroadcastUtilsStreamMutation",selections:b},params:{id:"2565147680198528",metadata:{},name:"LiveVideoBroadcastUtilsStreamMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("WebLiveBroadcastDialog",["Arbiter","DOM","PlatformDialog"],(function(a,b,c,d,e,f){a={init:function(a){var c=this;this._dialog=b("PlatformDialog").getInstance();this._form=this._dialog&&this._dialog.getForm();if(!this._form)return;b("Arbiter").subscribe("BroadcastDialog/liveStarted",function(a,d){c._form.appendChild(b("DOM").create("input",{type:"hidden",name:"broadcast_id",value:d.broadcastID})),c._form.submit()});return}};e.exports=a}),null);
__d("LiveVideoBroadcastFunnelLogger",["ComposerXMarauderLogger","FunnelLogger"],(function(a,b,c,d,e,f){"use strict";var g="FACECAST_BROADCASTER_FUNNEL";a=!1;var h={composerID:null,maybeStartAndLaunchLiveComposer:function(a){this.composerID=a,b("FunnelLogger").getFunnelInstance(g)||h._startInternal(h._getSourceSurface(a)),b("FunnelLogger").appendAction(g,"launch_live_composer")},startFromLiveMapAndSelectLiveAttachment:function(){h._startInternal("live_map"),b("FunnelLogger").appendAction(g,"select_live_attachment")},addFunnelTags:function(a){a.forEach(function(a){return b("FunnelLogger").addFunnelTag(g,a)})},fetchedBroadcastID:function(a){b("FunnelLogger").appendAction(g,"fetched_broadcast_id"),b("FunnelLogger").addFunnelTag(g,"broadcast_id:"+a)},endWithFailedBroadcastID:function(){b("FunnelLogger").appendAction(g,"failed.broadcast_id"),b("FunnelLogger").appendAction(g,"failed"),h.end()},uploadStarted:function(){b("FunnelLogger").appendAction(g,"upload_started")},goLiveClicked:function(){b("FunnelLogger").appendAction(g,"go_live_clicked")},goLiveCancelled:function(){b("FunnelLogger").appendAction(g,"go_live_cancelled")},finishClicked:function(){b("FunnelLogger").appendAction(g,"finish_clicked")},endFinishedFromUser:function(){b("FunnelLogger").appendAction(g,"finished.from_user"),b("FunnelLogger").appendAction(g,"finished"),h.end()},endPublishFailed:function(){b("FunnelLogger").appendAction(g,"failed.publish"),b("FunnelLogger").appendAction(g,"failed"),h.end()},requestCameraAccess:function(){b("FunnelLogger").appendAction(g,"request_camera_access")},cameraPermissionDenied:function(){b("FunnelLogger").appendAction(g,"camera_permission_denied")},endCameraNotFound:function(){b("FunnelLogger").appendAction(g,"failed.no_camera"),b("FunnelLogger").appendAction(g,"failed"),h.end()},endMicrophoneNotFound:function(){b("FunnelLogger").appendAction(g,"failed.no_microphone"),b("FunnelLogger").appendAction(g,"failed"),h.end()},endCouldNotStart:function(){b("FunnelLogger").appendAction(g,"failed.could_not_start"),b("FunnelLogger").appendAction(g,"failed"),h.end()},foundCamera:function(){b("FunnelLogger").appendAction(g,"found_camera")},trackEnded:function(){b("FunnelLogger").appendAction(g,"track_ended"),b("FunnelLogger").appendAction(g,"failed")},connectionBroken:function(){b("FunnelLogger").appendAction(g,"connection_broken")},endCopyrightViolation:function(){b("FunnelLogger").appendAction(g,"failed.copyright_violation"),b("FunnelLogger").appendAction(g,"failed"),h.end()},end:function(){b("FunnelLogger").endFunnel(g)},endConnectionFailed:function(){b("FunnelLogger").appendAction(g,"failed.connection_failed"),b("FunnelLogger").appendAction(g,"failed"),h.end()},setInputSource:function(a){b("FunnelLogger").appendAction(g,"set_input_souce_"+a)},setContentTags:function(){b("FunnelLogger").appendAction(g,"set_content_tags")},setBroadcastState:function(a){b("FunnelLogger").appendAction(g,"set_broadcast_state:"+a)},errorCreatingBroadcast:function(){b("FunnelLogger").appendAction(g,"failed.error_creating_broadcast"),b("FunnelLogger").appendAction(g,"failed"),h.end()},errorStartingAPIBroadcast:function(){b("FunnelLogger").appendAction(g,"error_starting_api_broadcast")},endMutationFailed:function(){b("FunnelLogger").appendAction(g,"error_ending_broadcast_mutation")},clickFinishButton:function(){b("FunnelLogger").appendAction(g,"click_finish_button")},updateSourceTag:function(){var a=b("FunnelLogger").getFunnelInstance(g);if(a){a=a.getTags();if(a){a=Object.keys(a);for(var c=0;c<a.length;c++){var d=a[c];if(d.indexOf("source:")!==-1)return}}d=h._getSourceSurface(this.composerID);d&&d!=="unknown"&&b("FunnelLogger").addFunnelTag(g,"source:"+d)}},_getSourceSurface:function(a){a=b("ComposerXMarauderLogger").getInstance(a);return a?a.composerSourceSurface:null},_startInternal:function(a){b("FunnelLogger").startFunnel(g),b("FunnelLogger").setFunnelTimeout(g,86400),a&&b("FunnelLogger").addFunnelTag(g,"source:"+a)}};e.exports=h}),null);
__d("ReactComposerLiveVideoActionType",["keyMirrorRecursive"],(function(a,b,c,d,e,f){e.exports=b("keyMirrorRecursive")({PREVIEW_ERROR:null,PREVIEW_STARTED:null,SET_PREVIOUS_ATTACHMENT:null,SET_TAGGERS_CONFIG:null,SET_SHOW_NUX:null,SET_FUNNEL_TAGS:null},"ReactComposerLiveVideoActionType")}),null);
__d("ReactComposerLiveVideoActionStore",["Bootloader","LiveVideoBroadcastActions","LiveVideoBroadcastDispatcher","LiveVideoBroadcastFunnelLogger","LiveVideoBroadcastUtils","ReactComposerActionStore","ReactComposerLiveVideoActionType"],(function(a,b,c,d,e,f){var g=273465416184080;a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c,d;c=a.call(this,function(){return{}},function(a){switch(a.type){case b("ReactComposerLiveVideoActionType").PREVIEW_STARTED:d&&d.$ReactComposerLiveVideoActionStore1(a);break}})||this;d=babelHelpers.assertThisInitialized(c);return c}var d=c.prototype;d.$ReactComposerLiveVideoActionStore2=function(a,c,d,e,f){b("LiveVideoBroadcastUtils").fetchUIConfig(a,f,c,d,e),b("LiveVideoBroadcastFunnelLogger").fetchedBroadcastID(c)};d.$ReactComposerLiveVideoActionStore1=function(a){a=this.validateAction(a,["actorID","composerID","composerType","config","targetID","isRehearsal"]);var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],i=a[5],j=1,k=this.$ReactComposerLiveVideoActionStore2.bind(this);b("Bootloader").loadModules(["ModernLiveVideoCreateMutation","RelayFBEnvironment","VideoBroadcastInfraType","VideoBroadcastInitialStatus"],function(a,l,m,n){var o=h===c?{privacy:{base_state:"SELF"}}:{to_id:h};a.commit(l,{actorID:c,audience:o,broadcastInfraType:m.RTMP,numHosts:j,overrideAppID:g,videoBroadcastInitialStatus:n.PREVIEW,isRehearsal:i},{onCompleted:function(a){b("Bootloader").loadModules(["LiveVideoBroadcastAPIBroadcastStore"],function(g){b("LiveVideoBroadcastDispatcher").explicitlyRegisterStores([g]);g=a==null?void 0:a.live_video_create;var j=g==null?void 0:g.video_broadcast_id,l=g==null?void 0:g.stream_settings;if(!(g&&j&&l))return;var m=b("LiveVideoBroadcastUtils").getComposerFormData(d,h,f.contextInfo);k(c,j,e,m,h);m=(m=g.video)==null?void 0:m.input_streams;m=m!=null?m.nodes[0].dash_ingest_url:void 0;b("LiveVideoBroadcastActions").apiBroadcastCreated(c,j,{primaryStreamURL:g.rtmp_stream_url||"",primarySecureStreamURL:g.rtmp_secure_stream_url||"",backupStreamURL:(j=g.stream_settings)==null?void 0:j.redundant_stream_urls[0],backupSecureStreamURL:l.redundant_secure_stream_urls[0]||void 0,dashIngestURL:m||void 0},((j=g.video)==null?void 0:j.id)||"",h,((m=g.video)==null?void 0:m.embedded_html)||"","",i,!!l.allow_unsecure_rtmp)},"ReactComposerLiveVideoActionStore")},onError:b("LiveVideoBroadcastUtils").handleCreateBroadcastError})},"ReactComposerLiveVideoActionStore");b("Bootloader").loadModules(["LiveVideoBroadcastAPIBroadcastStore"],function(){},"ReactComposerLiveVideoActionStore")};return c}(b("ReactComposerActionStore"));e.exports=new a()}),null);
__d("ReactComposerLiveVideoAttachmentStore",["ReactComposerLiveVideoActionType","ReactComposerStoreBase"],(function(a,b,c,d,e,f){a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){var c,d;c=a.call(this,function(){return{liveVideoTaggersConfig:{},isPreviewStarted:!1,showLivePreviewButtonNUX:!1,funnelTags:[]}},function(a){switch(a.type){case b("ReactComposerLiveVideoActionType").SET_PREVIOUS_ATTACHMENT:d&&d.$ReactComposerLiveVideoAttachmentStore1(a);break;case b("ReactComposerLiveVideoActionType").SET_TAGGERS_CONFIG:d&&d.$ReactComposerLiveVideoAttachmentStore2(a);break;case b("ReactComposerLiveVideoActionType").PREVIEW_ERROR:d&&d.$ReactComposerLiveVideoAttachmentStore3(a);break;case b("ReactComposerLiveVideoActionType").PREVIEW_STARTED:d&&d.$ReactComposerLiveVideoAttachmentStore4(a);break;case b("ReactComposerLiveVideoActionType").SET_SHOW_NUX:d&&d.$ReactComposerLiveVideoAttachmentStore5(a);break;case b("ReactComposerLiveVideoActionType").SET_FUNNEL_TAGS:d&&d.$ReactComposerLiveVideoAttachmentStore6(a);break}})||this;d=babelHelpers.assertThisInitialized(c);return c}var d=c.prototype;d.getPreviousAttachment=function(a){return this.getComposerData(a).liveVideoPreviousAttachment};d.getTaggersConfig=function(a){return this.getComposerData(a).liveVideoTaggersConfig};d.isPreviewStarted=function(a){return this.getComposerData(a).isPreviewStarted};d.getShowNUX=function(a){return this.getComposerData(a).showLivePreviewButtonNUX};d.getFunnelTags=function(a){return this.getComposerData(a).funnelTags};d.$ReactComposerLiveVideoAttachmentStore1=function(a){var b=this.getComposerData(a.composerID);b.liveVideoPreviousAttachment=a.previousAttachment;this.emitChange(a.composerID)};d.$ReactComposerLiveVideoAttachmentStore2=function(a){var b=this.getComposerData(a.composerID);b.liveVideoTaggersConfig=a.taggersConfig;this.emitChange(a.composerID)};d.$ReactComposerLiveVideoAttachmentStore4=function(a){var b=this.getComposerData(a.composerID);b.isPreviewStarted=!0;this.emitChange(a.composerID)};d.$ReactComposerLiveVideoAttachmentStore3=function(a){var b=this.getComposerData(a.composerID);b.isPreviewStarted=!1;this.emitChange(a.composerID)};d.$ReactComposerLiveVideoAttachmentStore5=function(a){var b=this.getComposerData(a.composerID);b.showLivePreviewButtonNUX=a.showNUX;this.emitChange(a.composerID)};d.$ReactComposerLiveVideoAttachmentStore6=function(a){var b=this.getComposerData(a.composerID);b.funnelTags=a.funnelTags;this.emitChange(a.composerID)};return c}(b("ReactComposerStoreBase"));e.exports=new a()}),null);
__d("ReactComposerLiveVideoActions",["ReactComposerDispatcher","ReactComposerLiveVideoActionType","ReactComposerLiveVideoActionStore","ReactComposerLiveVideoAttachmentStore","setTimeout"],(function(a,b,c,d,e,f){b("ReactComposerLiveVideoActionStore");b("ReactComposerLiveVideoAttachmentStore");a={previewStarted:function(a,c){b("setTimeout")(function(){return b("ReactComposerDispatcher").dispatch({composerID:a,type:b("ReactComposerLiveVideoActionType").PREVIEW_STARTED,actorID:c.actorID,composerType:c.composerType,config:c.config,targetID:c.targetID,isRehearsal:c.isRehearsal})},0)},setPreviousAttachment:function(a,c){a={composerID:a,type:b("ReactComposerLiveVideoActionType").SET_PREVIOUS_ATTACHMENT,previousAttachment:c};b("ReactComposerDispatcher").dispatch(a)},setTaggersConfig:function(a,c){a={composerID:a,type:b("ReactComposerLiveVideoActionType").SET_TAGGERS_CONFIG,taggersConfig:c};b("ReactComposerDispatcher").dispatch(a)},setShowNUX:function(a,c){a={composerID:a,type:b("ReactComposerLiveVideoActionType").SET_SHOW_NUX,showNUX:c};b("ReactComposerDispatcher").dispatch(a)},setFunnelTags:function(a,c){a={composerID:a,type:b("ReactComposerLiveVideoActionType").SET_FUNNEL_TAGS,funnelTags:c};b("ReactComposerDispatcher").dispatch(a)}};e.exports=a}),null);
__d("XLiveVideoBroadcastCreateQuickLoadUIController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/live/broadcast/quick_load_ui/",{container_id:{type:"String"}})}),null);
__d("XLiveVideoBroadcastCreateUIController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live/broadcast/dialog/",{target_id:{type:"Int"},broadcast_id:{type:"Int"},composer_type:{type:"String"},description:{type:"String"},place:{type:"Int"},og_action_type_id:{type:"Int"},og_object_id:{type:"Int"},og_object_str:{type:"String"},og_icon_id:{type:"Int"},with_tags:{type:"FBIDSet"},composertags_sponsors:{type:"FBIDSet"},direct_share_status:{type:"Int"},sponsor_relationship:{type:"Int"}})}),null);
__d("LiveVideoBroadcastUtils",["ix","cx","errorCode","errorDesc","fbt","regeneratorRuntime","Promise","ActorURI","AsyncRequest","Bootloader","CSS","DialogX","DOM","Image.react","LayerDestroyOnHide","LayerHideOnTransition","Link.react","LiveProducerTypedLoggerLite","LiveVideoBroadcastActions","LiveVideoBroadcastAPIActions","LiveVideoBroadcastConstants","LiveVideoBroadcastDispatcher","LiveVideoBroadcastFunnelLogger","LiveVideoBroadcastLiveProducerUtils","React","ReactComposerActions","ReactComposerAttachmentType","ReactComposerLiveVideoActions","ReactComposerLiveVideoAttachmentStore","ReactComposerLoggingName","ReactComposerPostDataUtils","ReactComposerPrefillUtils","ReactComposerTaggerActions","ReactComposerTaggerType","ReactComposerTargetingUtils","ReactDOM","RelayFBEnvironment","RelayModern","Style","URI","VideoBroadcastTypedLogger","VideoPollsTypedLogger","XCometLiveProducerControllerRouteBuilder","XLiveVideoBroadcastCreateQuickLoadUIController","XLiveVideoBroadcastCreateUIController","XUISpinner.react","fbglyph","isBusinessURI","uniqueID","LiveVideoBroadcastUtilsStreamMutation.graphql"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l,m,n=b("LiveProducerTypedLoggerLite").log,o=b("LiveVideoBroadcastLiveProducerUtils").setLiveProducerOptInPreference,p=b("LiveVideoBroadcastLiveProducerUtils").routeToLiveProducer,q=b("LiveVideoBroadcastLiveProducerUtils").shouldRouteToLiveProducer,r=b("React"),s=b("RelayModern").commitMutation;b("RelayModern").graphql;var t=b("LiveVideoBroadcastConstants").BROADCAST_STATE,u=b("LiveVideoBroadcastConstants").INPUT_SOURCE,v=b("LiveVideoBroadcastConstants").CAMERA_STATE,w=3e4;function a(a){var b={};if(!a)return b;for(var a=a.values(),c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;e.type==="ssrc"?b["ssrc_"+e.mediaType]=e:e.type==="VideoBwe"?b.video_bwe=e:e.id&&e.id.indexOf("outbound")!==-1&&(b[e.id]=e)}return b}function x(a,c){b("ReactComposerTaggerActions").setTaggerData(a.composerID,b("ReactComposerLoggingName").STICKER_SPROUT,b("ReactComposerTaggerType").STICKER,null);var d=b("ReactComposerLiveVideoAttachmentStore").getFunnelTags(a.composerID);b("LiveVideoBroadcastFunnelLogger").maybeStartAndLaunchLiveComposer(a.composerID);d&&b("LiveVideoBroadcastFunnelLogger").addFunnelTags(d);y(a,c);b("ReactComposerLiveVideoActions").previewStarted(a.composerID,{actorID:a.actorID,composerType:a.composerType,config:c,targetID:a.targetID,isRehearsal:(d=c.isRehearsal)!=null?d:!1})}function y(a,c){b("Bootloader").loadModules(["LiveVideoBroadcastUIStore","LiveVideoBroadcastBroadcastStore","LiveVideoBroadcastLoggingStore","ReactComposerAudienceActions"],function(b,d,e,f){K.__createDialogImpl(a,c,b,d,e,f)},"LiveVideoBroadcastUtils")}function c(a,c,d,e,f,h){b("LiveVideoBroadcastDispatcher").explicitlyRegisterStores([d,e,f]);e=a.composerID;e&&h.setCollectionIDWithoutLogging(e,null);b("LiveVideoBroadcastActions").initialize({});f=d.get("pendingCleanup");if(f){b("LiveVideoBroadcastActions").finishedCleanup();return}h={fixedTopPosition:42,width:500,xui:!0,addedBehaviors:[b("LayerDestroyOnHide"),b("LayerHideOnTransition")]};e=b("uniqueID")();d=b("DOM").create("div");var i=new(b("DialogX"))(h,d);f=i.getRoot();f!=null&&(b("CSS").addClass(f,"_2k_g"),b("CSS").conditionClass(f,"_72fs",a.composerType==="games_video_streamer_dashboard"));h=function(){i.destroy();var c=a.composerID;c&&b("ReactComposerActions").reset(c)};b("ReactDOM").render(r.jsx("div",{"data-testid":void 0,children:r.jsxs("div",{id:e,children:[r.jsx(b("XUISpinner.react"),{"data-testid":void 0,background:"dark",className:"_275v",size:"large"}),r.jsx(b("Link.react"),{className:"_2k_f",href:"#",onClick:h,children:r.jsx(b("Image.react"),{alt:k._("Close"),src:g("125922")})})]})}),d);b("Style").set(i.getContentRoot(),"width","100%");i.show();f=a.actorID;h=b("XLiveVideoBroadcastCreateQuickLoadUIController").getURIBuilder();d=b("ActorURI").create(h.getURI(),f);new(b("AsyncRequest"))().setURI(d).setData({container_id:e}).setMethod("GET").setReadOnly(!0).setErrorHandler(K.handleCreateBroadcastError).setTimeoutHandler(w,b("LiveVideoBroadcastActions").cleanup).send();h=c.attachmentsConfig[b("ReactComposerAttachmentType").LIVE_VIDEO].streamSettings;f=c.attachmentsConfig[b("ReactComposerAttachmentType").LIVE_VIDEO].gks;b("LiveVideoBroadcastActions").updateBroadcastUIConfig({streamSettings:h,gks:f});b("LiveVideoBroadcastActions").setDialog(i);b("LiveVideoBroadcastActions").setDialogContainerID(e);b("LiveVideoBroadcastActions").setComposerConfig({config:c,contextConfig:a,composerID:a.composerID})}function z(a,c,d,e,f){var g=b("XLiveVideoBroadcastCreateUIController").getURIBuilder();g=b("ActorURI").create(g.getURI(),a);new(b("AsyncRequest"))().setURI(g).setData({target_id:c,broadcast_id:d,container_id:null,composer_type:e,description:f.description,place:f.place,og_action_type_id:f.og_action_type_id,og_object_id:f.og_object_id,og_object_str:f.og_object_str,og_icon_id:f.og_icon_id,with_tags:f.with_tags,composertags_sponsors:f.composertags_sponsors,direct_share_status:f.direct_share_status,sponsor_relationship:f.sponsor_relationship}).setMethod("POST").send()}function d(a){a=a.error;b("LiveVideoBroadcastActions").errorCreatingBroadcast(a);var c;switch(a){case 1404078:c=j._(function(a,b){return a._("You have been temporarily blocked from performing this action.")},{});break;case 1363083:c=j._(function(a,b){return a._("This user cannot create a live video.")},{});break;default:c=k._("Error creating live video");break}alert(c);b("LiveVideoBroadcastActions").cleanup()}function f(a,c,d,e){a=b("ReactComposerPostDataUtils").getPostData({composerID:a,targetID:c,composerConfig:{contextInfo:d}});c={};Object.assign(c,{description:a.xhpc_message,is_explicit_place:a.is_explicit_place,place:a.composertags_place,composertags_sponsors:a.composertags_sponsors,direct_share_status:a.direct_share_status,sponsor_relationship:a.sponsor_relationship});a.object_id.length>0?c.og_object_id=a.object_id[0]:a.object_str.length>0&&(c.og_object_str=a.object_str[0]);a.action_type_id.length>0&&(c.og_action_type_id=a.action_type_id[0]);a.icon_id&&(c.og_icon_id=a.icon_id);a.privacyx&&!e&&(c.privacyx=a.privacyx);a.composertags_with.length>0&&(c.with_tags=a.composertags_with);a.political_district_info&&a.political_district_info.politicalDistrict&&(c.political_district=a.political_district_info.politicalDistrict);a.feed_targeted_data&&(c.targeted_privacy_data=a.feed_targeted_data);a.targeted_privacy_data&&(c.targeted_privacy_data=a.targeted_privacy_data);a.breaking_news_selected&&a.breaking_news_expiration&&(c.breaking_news_expiration=a.breaking_news_expiration);a.charity_id&&(c.charity_id=a.charity_id);a.group_join_target_id&&(c.group_join_target_id=a.group_join_target_id);c.remove_group_join_cta=a.remove_group_join_cta;return c}function h(a,c,d,e){b("LiveVideoBroadcastActions").setDescription({description:a,shortDescription:c}),b("LiveVideoBroadcastActions").setTagList(d),b("LiveVideoBroadcastActions").setPrivacySelector(e)}function i(a){b("LiveVideoBroadcastActions").setAPIBroadcastPrivacySelector(a)}function A(a,c,d,e,f,g,h,i,j,k,l,m,n,o,r,s,w,x,A,B,C,D,E,F,G,H){var I,J,L,M;return b("regeneratorRuntime").async(function(N){while(1)switch(N.prev=N.next){case 0:N.next=2;return b("regeneratorRuntime").awrap(q(a==null?void 0:(I=a.contextConfig)==null?void 0:I.composerType,H));case 2:J=N.sent;if(!(J===!0)){N.next=6;break}p(a==null?void 0:(L=a.contextConfig)==null?void 0:L.targetID,a==null?void 0:(M=a.contextConfig)==null?void 0:M.composerType,d);return N.abrupt("return");case 6:b("Bootloader").loadModules(["LiveVideoBroadcastUIStore","LiveVideoBroadcastBroadcastStore","LiveVideoBroadcastMetadataInputStore","LiveVideoBroadcastAPIBroadcastStore","LiveVideoBroadcastIDStore","ReactComposerStatusActions"],function(p,q,H,I,J,L){b("LiveVideoBroadcastDispatcher").explicitlyRegisterStores([p,q,H,I,J]);G!=null?b("LiveVideoBroadcastActions").initialize({inputSource:G}):b("LiveVideoBroadcastActions").initialize({inputSource:m?u.EDIT_SCHEDULE:u.EDIT});y(a.contextConfig,a.config);p=K.getComposerFormData(a.composerID,a.contextConfig.targetID,a.config.contextInfo);L.setMentionsSource(a.composerID,a.bootstrapData.attachmentData.mentionsSource);b("LiveVideoBroadcastActions").setPeopleTaggerSource(a.bootstrapData.attachmentData.taggersSource.PEOPLE);q={mentionsInput:{textWithEntities:j,focusedOnLoad:!0},taggersData:k};b("ReactComposerPrefillUtils").prefill(a.composerID,q,a.contextConfig.gks);if(l){H=l.sex[0]==="male"?1:l.sex[0]==="female"?2:null;I={gating:babelHelpers["extends"]({},l,{excluded_geo_locations:{cities:l.excluded_cities.map(function(a){return{key:a}}),countries:l.excluded_countries,regions:l.excluded_regions.map(function(a){return{key:a}}),zips:l.excluded_zipcodes.map(function(a){return{key:a}})},genders:H?[H]:void 0})};b("ReactComposerTargetingUtils").setData(a.composerID,I)}z(a.contextConfig.actorID,a.contextConfig.targetID,c,a.contextConfig.composerType,p);b("LiveVideoBroadcastActions").setBroadcastID(c);b("LiveVideoBroadcastActions").setBroadcastState(m?t.PREVIEW:t.LIVE);b("LiveVideoBroadcastActions").updateCameraState(v.BROADCAST);b("LiveVideoBroadcastActions").setVideoID(d);b("LiveVideoBroadcastActions").setStartTime(e);b("LiveVideoBroadcastActions").requestUFI();b("LiveVideoBroadcastActions").setPrivacySelector(f);b("LiveVideoBroadcastActions").setVideoTitle(g);b("LiveVideoBroadcastActions").setGame(h);b("LiveVideoBroadcastActions").setContentTags(i);b("LiveVideoBroadcastActions").updateBroadcastUIConfig({isCrosspost:w,accessToken:D});b("LiveVideoBroadcastActions").apiBroadcastCreated(a.contextConfig.actorID,c,{primaryStreamURL:n||"",primarySecureStreamURL:o||"",backupStreamURL:A||void 0,backupSecureStreamURL:B||void 0},d,a.contextConfig.targetID,x,"",C,E);b("LiveVideoBroadcastActions").setScheduledLiveData(r,s);b("LiveVideoBroadcastAPIActions").setSelectedEncoderType(F)},"LiveVideoBroadcastUtils");case 7:case"end":return N.stop()}},null,this)}function B(a,c,d,e,f){var g,h,i,j,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:l.next=2;return b("regeneratorRuntime").awrap(q(a==null?void 0:(g=a.contextConfig)==null?void 0:g.composerType,f));case 2:h=l.sent;if(!(h===!0)){l.next=6;break}p(a==null?void 0:(i=a.contextConfig)==null?void 0:i.targetID,a==null?void 0:(j=a.contextConfig)==null?void 0:j.composerType,null,{},a==null?void 0:(k=a.contextConfig)==null?void 0:k.toAdditionalProfileId);return l.abrupt("return");case 6:b("Bootloader").loadModules(["LiveVideoBroadcastUIStore","ReactComposerStatusActions","LiveVideoBroadcastMetadataInputStore"],function(f,g,h){b("LiveVideoBroadcastDispatcher").explicitlyRegisterStores([f,h]);b("LiveVideoBroadcastActions").setPeopleTaggerSource(a.bootstrapData.attachmentData.taggersSource.PEOPLE);b("LiveVideoBroadcastActions").setHideInputToggle(!!d);c&&b("LiveVideoBroadcastActions").setInputSource(c);g.setMentionsSource(a.composerID,a.bootstrapData.attachmentData.mentionsSource);a.game&&b("LiveVideoBroadcastActions").setGame(a.game);f={mentionsInput:{textWithEntities:e,focusedOnLoad:!0}};b("ReactComposerPrefillUtils").prefill(a.composerID,f,a.contextConfig.gks);a.isRehearsal&&(a.config.isRehearsal=a.isRehearsal);x(a.contextConfig,a.config)},"LiveVideoBroadcastUtils");case 7:case"end":return l.stop()}},null,this)}function C(a){b("LiveVideoBroadcastActions").setInviteFriendsSuggestions(a)}function D(a){b("Bootloader").loadModules(["LiveVideoBroadcastAPIBroadcastStore","LiveVideoBroadcastBroadcastStore","LiveVideoBroadcastMetadataInputStore","LiveVideoBroadcastUIStore","LiveVideoBroadcastCrosspostStore"],function(c,d,e,f,g){b("LiveVideoBroadcastDispatcher").explicitlyRegisterStores([c,d,e,f,g]),b("LiveVideoBroadcastActions").updateBroadcastUIConfig(a)},"LiveVideoBroadcastUtils")}function E(a,c,d,e,f,g,h,i,j,k,l,m){var n;new(b("VideoBroadcastTypedLogger"))().setOverrideVideoBroadcastID(f).setOverrideAttributionAppID(l).setBroadcastEvent("go_live_dialog_initialize").setMutationDetails({actor_id:a,container_id:d,stream_url:g,secure_stream_url:h,video_id:i,target_id:j,backupStreamURL:(n=m)!=null?n:""}).log();try{b("Bootloader").loadModules(["LiveVideoBroadcastBroadcastStore","LiveVideoBroadcastMetadataInputStore","LiveVideoBroadcastUIStore","ReactComposerStatusActions","LiveVideoBroadcastAPIBroadcastStore","LiveVideoBroadcastCrosspostStore"],function(n,o,p,q,r,s){var t;new(b("VideoBroadcastTypedLogger"))().setOverrideVideoBroadcastID(f).setOverrideAttributionAppID(l).setBroadcastEvent("go_live_dialog_initialize_success").setMutationDetails({actor_id:a,container_id:d,stream_url:g,secure_stream_url:h,video_id:i,target_id:j,backupStreamURL:(t=m)!=null?t:""}).log();b("LiveVideoBroadcastDispatcher").explicitlyRegisterStores([n,o,p,r,s]);b("LiveVideoBroadcastActions").initialize({});b("LiveVideoBroadcastActions").setComposerConfig({config:e.config,contextConfig:e.contextConfig,composerID:e.composerID});b("LiveVideoBroadcastActions").updateBroadcastUIConfig(c);b("LiveVideoBroadcastActions").setPeopleTaggerSource(e.bootstrapData.attachmentData.taggersSource.PEOPLE);t=r.getState().toObject();n=t.isRehearsal;b("LiveVideoBroadcastActions").setHideInputToggle(!0);b("LiveVideoBroadcastActions").setInputSource("API");b("LiveVideoBroadcastActions").apiBroadcastCreated(a,f,{primaryStreamURL:g,primarySecureStreamURL:h,backupStreamURL:m||void 0,backupSecureStreamURL:void 0},i,j,k,l,n,Boolean(c.allowUnsecureRTMP));q.setMentionsSource(e.composerID,e.bootstrapData.attachmentData.mentionsSource);o=b("XLiveVideoBroadcastCreateQuickLoadUIController").getURIBuilder();p=b("ActorURI").create(o.getURI(),a);new(b("AsyncRequest"))().setURI(p).setData({container_id:d}).setMethod("GET").setReadOnly(!0).send()},"LiveVideoBroadcastUtils")}catch(c){new(b("VideoBroadcastTypedLogger"))().setOverrideVideoBroadcastID(f).setOverrideAttributionAppID(l).setBroadcastEvent("go_live_dialog_initialize_failed").setMutationDetails({actor_id:a,container_id:d,stream_url:g,secure_stream_url:h,video_id:i,target_id:j,backupStreamURL:(n=m)!=null?n:""}).setErrorCode(c==null?void 0:c.code).setErrorTrace(c==null?void 0:c.stack).setErrorClass(c==null?void 0:c["class"]).setErrorMessage(c==null?void 0:c.message).log()}}function F(a,c){return new(b("Promise"))(function(d,e){s(b("RelayFBEnvironment"),{mutation:l!==void 0?l:l=b("LiveVideoBroadcastUtilsStreamMutation.graphql"),variables:{input:{broadcast_id:a,actor_id:c}},onCompleted:function(a){return d((a=a.live_video_stream_create)==null?void 0:a.input_stream)},onError:e})})}function G(a,c,d,e){e=e===t.LIVE||e===t.FINISHED;new(b("VideoPollsTypedLogger"))().setEvent("www_live_composer_add_question_tapped").setOwnerID(c==null?d:c).setVideoID(a).setDerivedFieldsInputMap({poll_creation_source:"WWW_LIVE_OPS_COMPOSER"}).setPollCreationType(e?"attached":"detached").log()}function H(a){n({video_id:a.videoID,broadcast_id:a.broadcastID,event:a.event,event_source:"legacy_ui",broadcast_status:a.broadcastStatus})}function I(a){a=new(m||(m=b("URI")))(a).getQualifiedURI();return b("isBusinessURI")(a)?a.setSubdomain("www").toString():a.toString()}function J(a){var c=a.contextConfig,d=a.videoID;a.targetID;a=a.source;if(d==null)return;o("OPT_IN");a=babelHelpers["extends"]({},a!=null?{source:a}:{});if((c==null?void 0:c.composerType)==="games_video_streamer_dashboard"){b("LiveVideoBroadcastActions").hideWarningOnExit();c=babelHelpers["extends"]({videoID:d},a);c=b("XCometLiveProducerControllerRouteBuilder").buildURL(c);c=I(c);(m||(m=b("URI"))).go(c)}else{c=babelHelpers["extends"]({videoID:d},a);d=b("XCometLiveProducerControllerRouteBuilder").buildURL(c);a=I(d);(m||(m=b("URI"))).goURIOnNewWindow(a)}}var K={fetchUIConfig:z,handleCreateBroadcastError:d,reduceWebRTCStats:a,startPreviewUI:x,getComposerFormData:f,updateBroadcastUIState:h,updateApiBroadcastPrivacySelector:i,startEditLiveUIFromServer:A,startPreviewUIFromServer:B,updateInviteFriendsSuggestions:C,updateBroadcastUIConfig:D,__createDialogImpl:c,initializeSocialPlugin:E,createInputStream:F,logEnterPollDraft:G,logProducerEvent:H,navigateToLiveProducer:J};e.exports=K}),null);
__d("LiveControlPanelUnifiedCreateButton.react",["cx","fbt","regeneratorRuntime","ComposerEntryPointRef","LiveControlPanelUtils","LiveVideoBroadcastLiveProducerUtils","React","XUIButton.react","XUISpinner.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=b("LiveVideoBroadcastLiveProducerUtils").routeToLiveProducer,j=b("LiveVideoBroadcastLiveProducerUtils").shouldRouteToLiveProducer,k=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return this.props.isDialogLoading?k.jsx("div",{className:"_5o4o",children:k.jsx(b("XUIButton.react"),{disabled:!0,image:k.jsx(b("XUISpinner.react"),{}),label:h._("Loading"),size:"xlarge"})}):k.jsx("div",{className:"_5o4o",children:k.jsx(b("XUIButton.react"),{"data-testid":void 0,label:h._("Create Live Stream"),size:"xlarge",use:"confirm",onClick:this.$1})})};d.$1=function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return b("regeneratorRuntime").awrap(j(b("ComposerEntryPointRef").LIVE_CONTROL_PANEL));case 2:a=c.sent,a?i(null,b("ComposerEntryPointRef").LIVE_CONTROL_PANEL):b("LiveControlPanelUtils").openDialog();case 4:case"end":return c.stop()}},null,this)};return c}(k.Component);e.exports=a}),null);
__d("LiveVideoBroadcastErrorCreateSubscription",["ChannelManager","RelayModern","RelayRuntime","LiveVideoBroadcastErrorCreateSubscription.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("RelayModern").graphql;var h=b("RelayModern").requestSubscription,i=b("RelayRuntime").ConnectionHandler,j=g!==void 0?g:g=b("LiveVideoBroadcastErrorCreateSubscription.graphql"),k=["LiveVideoBroadcastErrorLogs_errors","LiveVideoBroadcastHealthTray_errors"];b("ChannelManager").startChannelManager();function a(a,b,c){var d={input:b},e=function(a,c){var d=b.video_id;d=a.get(d);if(d==null)return;d=d.getLinkedRecord("input_streams");if(d==null)return;d=d.getLinkedRecords("nodes");if(d==null||d.length<1)return;var e=d[0];if(e==null)return;k.forEach(function(b){var d;b=i.getConnection(e,b);if(b==null)return;d=(d=c.live_video_mutation_error_subscribe)==null?void 0:(d=d.live_video_error)==null?void 0:d.id;if(d==null)return;d=a.get(d);if(d==null)return;var f=parseInt(b.getValue("count"),10);b.setValue(f+1,"count");f=i.createEdge(a,b,d,"LiveVideoErrorsEdge");i.insertEdgeAfter(b,f)})};return h(a,{subscription:j,variables:d,updater:e,onCompleted:c==null?void 0:c.onCompleted,onError:c==null?void 0:c.onError,onNext:c==null?void 0:c.onNext})}e.exports={subscribe:a}}),null);
__d("XLiveComposerPrivacySelectorController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live/broadcast/audienceSelector/",{video_id:{type:"FBID"},target_id:{type:"FBID"}})}),null);
__d("XLiveVideoBroadcastHandleScheduledLiveController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video_broadcast/handle_schedule/",{broadcast_id:{type:"FBID"},schedule_custom_profile_image_focus:{type:"StringToFloatMap"},schedule_feed_background_image_focus:{type:"StringToFloatMap"},planned_start_time:{type:"Int"},enable_manual_mode:{type:"Bool",defaultValue:!1}})}),null);
__d("LiveVideoBroadcastAPIBroadcastStore",["fbt","ActorURI","Arbiter","AsyncRequest","Bootloader","ErrorDialog","FluxMapStore","Form","GraphAPI","LiveVideoBroadcastActions","LiveVideoBroadcastAPIActions","LiveVideoBroadcastBroadcastStore","LiveVideoBroadcastConstants","LiveVideoBroadcastDispatcher","LiveVideoBroadcastErrorCreateSubscription","LiveVideoBroadcastIDStore","LiveVideoBroadcastUIStore","LiveVideoBroadcastUtils","SkywalkerManager","XLiveComposerPrivacySelectorController","XLiveVideoBroadcastHandleScheduledLiveController","immutable","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h=(a=b("LiveVideoBroadcastConstants")).ACTIONS,i=a.ENCODER_TYPE,j=a.INPUT_SOURCE,k=a.STREAM_VALIDATION_STATUS,l=b("LiveVideoBroadcastErrorCreateSubscription").subscribe;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return b("immutable").Map({apiLivePreviewPlaying:!1,areCountriesIncluded:!1,copyrightWhitelistedFBUsers:[],copyrightWhitelistedIGUserNames:[],errorCount:null,is360Video:!1,is360Audio:!1,isContentProtectionEnabled:!1,sphericalConfigSelectorValue:null,isContinuous:!1,isCopyrighted:!1,isEmbeddable:!0,isScheduledManualMode:!1,isUpdateRequestPending:!1,ownershipCountries:[],scheduleStartTime:null,shouldExpireAfterGoLive:!1,shouldShowGraphicContentWarning:!1,showEventLogDialog:!1,selectedInputStreamIndex:0,streamURLs:null,usePersistentStreamKeyByDefault:null,isRehearsal:!1,allowUnsecureRTMP:!1,streamValidationStatus:k.IN_PROGRESS,shouldShowLiveProducerUpsellNux:null})};d.reduce=function(a,c){switch(c.type){case h.START_BROADCAST_SUCCESS:b("Arbiter").inform("BroadcastDialog/liveStarted",{broadcastID:this.get("apiBroadcastID")});break;case h.CLEANUP:a=this.getInitialState();this.$LiveVideoBroadcastAPIBroadcastStore3();break;case h.API_BROADCAST_CREATED:a=a.set("apiBroadcastID",c.id);a=a.set("streamURLs",c.streamURLs);a=a.set("apiVideoID",c.videoID);a=a.set("apiEmbedHTML",c.apiEmbedHTML);a=a.set("apiLivePreviewPlaying",!1);a=a.set("errorCount",0);a=a.set("attributionAppID",c.attributionAppID);a=a.set("isRehearsal",c.isRehearsal);a=a.set("allowUnsecureRTMP",c.allowUnsecureRTMP);this.$LiveVideoBroadcastAPIBroadcastStore4(c.id);this.$LiveVideoBroadcastAPIBroadcastStore5(c.videoID);this.$LiveVideoBroadcastAPIBroadcastStore6(c.actorID,c.videoID,c.targetID);break;case h.BROADCAST_ERROR_RECEIVED:a=a.set("errorCount",this.get("errorCount")+1);break;case h.API_BROADCAST_LIVE_PREVIEW_PLAYING:a=a.set("apiLivePreviewPlaying",c.livePreviewPlaying);break;case h.ADD_INPUT_STREAM:var d=b("LiveVideoBroadcastBroadcastStore").getState().toObject();d=d.actorID;d=b("LiveVideoBroadcastUtils").createInputStream(a.get("apiBroadcastID"),d);b("promiseDone")(d,function(a){b("LiveVideoBroadcastAPIActions").updateBackupInputStream(a.stream_url,a.secure_stream_url)});break;case h.FINISH_BROADCAST_REQUEST:this.$LiveVideoBroadcastAPIBroadcastStore7();break;case h.DELETE_API_REPLAY_VIDEO:this.$LiveVideoBroadcastAPIBroadcastStore8();break;case h.SET_API_BROADCAST_PRIVACY_SELECTOR:a=a.set("apiComposerPrivacySelector",c.apiComposerPrivacySelector);break;case h.SET_TARGET:case h.CLEAR_API_BROADCAST_ID:a=a.set("apiBroadcastID",null);a=a.set("apiLivePreviewPlaying",!1);a=a.set("errorCount",0);a=a.set("usePersistentStreamKeyByDefault",null);a=a.set("isContentProtectionEnabled",!1);break;case h.SET_CONTENT_PROTECTION_ENABLED:a=a.set("isContentProtectionEnabled",c.enabled);a=a.set("apiBroadcastID",null);break;case h.SET_IS_360_VIDEO:a=a.set("is360Video",c.value);a=a.set("is360Audio",!1);a=a.set("sphericalConfigSelectorValue",null);a=a.set("apiBroadcastID",null);break;case h.SET_IS_360_AUDIO:a=a.set("is360Audio",c.value);a=a.set("apiBroadcastID",null);break;case h.SET_SCHEDULED_LIVE_DATA:c.isManualMode!=null&&(a=a.set("isScheduledManualMode",c.isManualMode));c.scheduleStartTime!=null&&(a=a.set("scheduleStartTime",c.scheduleStartTime));break;case h.UPDATE_360_CONFIGURATION:a=a.set("sphericalConfigSelectorValue",c.value);a=a.set("apiBroadcastID",null);break;case h.SET_EMBEDDABLE:a=a.set("isEmbeddable",c.value);break;case h.SCHEDULED_LIVE_REQUEST:this.$LiveVideoBroadcastAPIBroadcastStore9(c.actorID,c.broadcastID,c.plannedStartTime,c.customProfileImage,c.customProfileImageFocus,c.feedBackgroundImage,c.feedBackgroundFocus,c.customAnnouncementThumbnail,c.enableManualMode,c.announcementPostMessage);break;case h.SET_SHOULD_EXPIRE_AFTER_GO_LIVE:a=a.set("shouldExpireAfterGoLive",c.value);break;case h.SET_SHOULD_SHOW_GRAPHIC_CONTENT_WARNING:a=a.set("shouldShowGraphicContentWarning",c.value);break;case h.SET_SHOW_EVENT_LOG_DIALOG:a=a.set("showEventLogDialog",c.value);break;case h.SET_CONTINUOUS:a=a.set("isContinuous",c.value);break;case h.SET_COPYRIGHTED:a=a.set("isCopyrighted",c.value);break;case h.SET_COPYRIGHT_MONITORING_TYPE:a=a.set("copyrightMonitoringType",c.value);break;case h.SET_COPYRIGHT_CONTENT_CATEGORY:a=a.set("selectedCategory",c.value);break;case h.SET_COPYRIGHT_OWNERSHIP_COUNTRIES:a=a.set("areCountriesIncluded",c.areCountriesIncluded);a=a.set("ownershipCountries",c.ownershipCountries);break;case h.SET_COPYRIGHT_RULE_ID:a=a.set("copyrightRuleID",c.value);break;case h.UPDATE_COPYRIGHT_WHITELISTED_FB_USERS:a=a.set("copyrightWhitelistedFBUsers",c.value);break;case h.UPDATE_COPYRIGHT_WHITELISTED_IG_USERNAMES:a=a.set("copyrightWhitelistedIGUserNames",c.value);break;case h.UPDATE_BACKUP_INPUT_STREAM:d=Object.assign({},a.get("streamURLs"));d.backupStreamURL=c.backupStreamURL;d.backupSecureStreamURL=c.backupSecureStreamURL;a=a.set("streamURLs",d);break;case h.API_GO_LIVE_CLICKED:a=a.set("isUpdateRequestPending",!0);break;case h.ERROR_STARTING_API_BROADCAST:a=a.set("isUpdateRequestPending",!1);break;case h.SET_IS_REHEARSAL:a=a.set("isRehearsal",c.value);a=a.set("apiBroadcastID",null);break;case h.UPDATE_UI_CONFIG:if(c.values.copyrightInformation!=null){var f;d=c.values.copyrightInformation;a=a.set("isCopyrighted",(f=d.isCopyrighted)!=null?f:!1).set("copyrightMonitoringType",(f=d.monitoringType)!=null?f:null).set("selectedCategory",(f=d.category)!=null?f:null).set("areCountriesIncluded",(f=d.areCountriesIncluded)!=null?f:!1).set("ownershipCountries",(f=d.ownershipCountries)!=null?f:[]).set("copyrightRuleID",(f=d.matchRuleID)!=null?f:null).set("copyrightWhitelistedFBUsers",(f=d.fbWhitelistedUsers)!=null?f:[]).set("copyrightWhitelistedIGUserNames",(f=d.igWhitelistedUsers)!=null?f:[])}c.values.usePersistentStreamKeyByDefault!=void 0&&(a=a.set("usePersistentStreamKeyByDefault",c.values.usePersistentStreamKeyByDefault));c.values.broadcastType!=void 0&&(a=a.set("isContinuous",c.values.broadcastType===1));c.values.shouldExpireAfterGoLive!=void 0&&(a=a.set("shouldExpireAfterGoLive",c.values.shouldExpireAfterGoLive));c.values.shouldShowGraphicContentWarning!=void 0&&(a=a.set("shouldShowGraphicContentWarning",c.values.shouldShowGraphicContentWarning));c.values.isEmbeddable!=void 0&&(a=a.set("isEmbeddable",c.values.isEmbeddable));a=a.set("shouldShowLiveProducerUpsellNux",c.values.shouldShowLiveProducerUpsellNux===!0);break;case h.SET_SELECTED_ENCODER_TYPE:if(c.encoderType===i.STREAM_KEY){d=b("LiveVideoBroadcastUIStore").getState().toObject();f=d.accessToken;b("GraphAPI")("2.8",e.id).object("live_video",a.get("apiBroadcastID")).post({access_token:f,live_encoders:[]})}break;case h.SET_SELECTED_INPUT_STREAM_INDEX:a=a.set("selectedInputStreamIndex",c.value);break;case h.SET_STREAM_VALIDATION_STATUS:a=a.set("streamValidationStatus",c.value);break;default:break}return a};d.$LiveVideoBroadcastAPIBroadcastStore4=function(a){this.$LiveVideoBroadcastAPIBroadcastStore1&&this.$LiveVideoBroadcastAPIBroadcastStore1.unsubscribe(),this.$LiveVideoBroadcastAPIBroadcastStore1=b("SkywalkerManager").subscribe("video/broadcast/error/"+a,function(){return b("LiveVideoBroadcastAPIActions").broadcastErrorReceived()})};d.$LiveVideoBroadcastAPIBroadcastStore5=function(a){var c=this;this.$LiveVideoBroadcastAPIBroadcastStore3();b("Bootloader").loadModules(["RelayFBEnvironment"],function(d){c.$LiveVideoBroadcastAPIBroadcastStore2=l(d,{video_id:a},{onError:function(){b("LiveVideoBroadcastActions").errorCreatingBroadcastErrorLogSusbscription(),c.$LiveVideoBroadcastAPIBroadcastStore2=null}})},"LiveVideoBroadcastAPIBroadcastStore")};d.$LiveVideoBroadcastAPIBroadcastStore3=function(){if(this.$LiveVideoBroadcastAPIBroadcastStore2==null)return;this.$LiveVideoBroadcastAPIBroadcastStore2.dispose();this.$LiveVideoBroadcastAPIBroadcastStore2=null};d.$LiveVideoBroadcastAPIBroadcastStore9=function(a,c,d,e,f,g,h,i,j,k){k=b("XLiveVideoBroadcastHandleScheduledLiveController").getURIBuilder().getURI();k=b("ActorURI").create(k,a);a={broadcast_id:c,enable_manual_mode:!!j,planned_start_time:d,schedule_custom_profile_image_focus:f,schedule_feed_background_image_focus:h};c=this.$LiveVideoBroadcastAPIBroadcastStore10.bind(this,j);d=b("Form").createFormData(a);e!=null&&d.append("schedule_custom_profile_image",e);i!=null&&d.append("schedule_custom_background_image",i);g!=null&&d.append("schedule_feed_background_image",g);new(b("AsyncRequest"))(k).setAllowCrossOrigin(!1).setMethod("POST").setRawData(d).setErrorHandler(this.$LiveVideoBroadcastAPIBroadcastStore11).setHandler(c).send()};d.$LiveVideoBroadcastAPIBroadcastStore10=function(a){a?(b("LiveVideoBroadcastActions").setScheduledLiveData(!0,null),b("LiveVideoBroadcastActions").scheduledLiveSuccess(!1,!0)):b("LiveVideoBroadcastActions").scheduledLiveSuccess(!0,!1)};d.$LiveVideoBroadcastAPIBroadcastStore11=function(a,c){b("LiveVideoBroadcastActions").scheduledLiveFail(c!=null?c.getResponse():null)};d.$LiveVideoBroadcastAPIBroadcastStore6=function(a,c,d){var e=b("XLiveComposerPrivacySelectorController").getURIBuilder();e=b("ActorURI").create(e.getURI(),a);new(b("AsyncRequest"))().setURI(e).setData({video_id:c,target_id:d}).setMethod("POST").send()};d.$LiveVideoBroadcastAPIBroadcastStore7=function(){var a=b("LiveVideoBroadcastUIStore").getState().toObject();a=a.inputSource;if(a===j.CAMERA)return;b("Bootloader").loadModules(["ModernLiveVideoEndMutation","RelayFBEnvironment"],function(a,c){a.commit(c,{videoID:b("LiveVideoBroadcastIDStore").get("videoID")},{onCompleted:function(){b("LiveVideoBroadcastActions").finishBroadcastSuccess()},onError:function(a){b("LiveVideoBroadcastActions").errorEndBroadcastMutationFail(a),b("ErrorDialog").show(g._("End broadcast error"),g._("Error ending broadcast, please try again"))}})},"LiveVideoBroadcastAPIBroadcastStore")};d.$LiveVideoBroadcastAPIBroadcastStore8=function(){var a=this.get("apiVideoID");a&&b("LiveVideoBroadcastBroadcastStore").deleteVideo(a)};return c}(b("FluxMapStore"));c.__moduleID=e.id;e.exports=new c(b("LiveVideoBroadcastDispatcher"))}),null);
__d("XLiveVideoUpdateBroadcastController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video_broadcast/update/",{broadcast_id:{type:"FBID"},description:{type:"String"},privacyx:{type:"String"},political_district:{type:"String"},targeted_privacy_data:{type:"HackType"},title:{type:"String"},planned_start_time:{type:"Int"},is_continuous:{type:"Bool",defaultValue:!1},is_episode:{type:"Bool",defaultValue:!1},season_id:{type:"FBID"},series_id:{type:"FBID"},playlist_ids:{type:"FBIDVector"},crosspost_page_ids:{type:"FBIDVector"},breaking_news_expiration:{type:"Int"},group_join_target_id:{type:"FBID"},remove_group_join_cta:{type:"Bool",defaultValue:!1},is_commentating_disabled:{type:"Bool",defaultValue:!1},is_isr_enabled:{type:"Bool",defaultValue:!1},language:{type:"String"},thumbnail_uri:{type:"String"},broadcast_playback_mode:{type:"Enum",enumType:1},enable_event_ticket_promotion:{type:"Bool",defaultValue:!1},is_viewerside_clipping_enabled:{type:"Bool",defaultValue:!0},privacy_mutation_token:{type:"String"}})}),null);
__d("LiveVideoBroadcastAfterBootloadUtils",["fbt","ActorURI","AsyncRequest","ComposerVideoPostUtils","ErrorDialog","LiveVideoBroadcastActions","LiveVideoBroadcastAPIActions","LiveVideoBroadcastUtils","ShareDialogAudienceTypes","VideoCopyrightAPI","XLiveVideoUpdateBroadcastController","expectationViolation","nullthrows","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function a(a,c){var d="",e;d;a.audience==b("ShareDialogAudienceTypes").PAGE?(d=a.audienceTargets[0].actorId,e=a.audienceTargets[0].pageId):a.audience==b("ShareDialogAudienceTypes").OWN?(d=c||"",e=c||""):(d=a.actorId?a.actorId:"",e=a.audienceTargets[0]||d);return{actorID:d,targetID:e}}function c(){b("ErrorDialog").show(g._("Broadcast error"),g._("Error starting broadcast, please try again"))}function h(a){var c={};if(a.selectedAttributionTag){var d=b("ComposerVideoPostUtils").getAttributionTagID(a.selectedAttributionTag);c=babelHelpers["extends"]({},c,{app_attribution_tag:d})}if(a.selectedGame){d=b("ComposerVideoPostUtils").getGameID(a.selectedGame);c=babelHelpers["extends"]({},c,{game_id:d})}if(a.selectedGroups){d=b("ComposerVideoPostUtils").getGroupIDs(a.selectedGroups);c=babelHelpers["extends"]({},c,{crossshare_group_ids:d})}if(a.videoTJApp){d=b("ComposerVideoPostUtils").getVideoTJAppID(a.videoTJApp);c=babelHelpers["extends"]({},c,{video_tj_app_id:d})}a.videoTitle&&(c=babelHelpers["extends"]({},c,{title:a.videoTitle}));if(a.contentTags){d=a.contentTags.map(function(a){return a.getUniqueID()});c=babelHelpers["extends"]({},c,{content_tags:d})}if(a.arena){c=babelHelpers["extends"]({},c,{arena_id:(d=a.arena)==null?void 0:d.getUniqueID()})}a.fundraiserGoal&&(c=babelHelpers["extends"]({},c,{fundraiser_goal:a.fundraiserGoal}));a.language&&(c=babelHelpers["extends"]({},c,{language:a.language}));a.thumbnailUpload&&(c=babelHelpers["extends"]({},c,{thumbnail_uri:a.thumbnailUpload.thumbURI}));return c}function d(a,c,d,e,f,g,j,k,l,m,n,o,p){var q=h(l),r=b("LiveVideoBroadcastUtils").getComposerFormData(f.contextConfig.composerID,f.config.targetData.targetID,f.config.contextInfo,p);!k?i(c,e,m,r,q,n,o):b("promiseDone")(b("VideoCopyrightAPI").copyrightVideo(a,b("nullthrows")(j),d,g,"live_video_composer"),function(a){i(c,e,m,r,q,n,o)},function(a){b("LiveVideoBroadcastAPIActions").errorStartingAPIBroadcast("copyright call",a)})}function i(a,c,d,e,f,g,h){c||b("expectationViolation")("cannot update broadcast without a broadcastiD");c=b("XLiveVideoUpdateBroadcastController").getURIBuilder().setFBID("broadcast_id",c).getURI();if(!a){b("expectationViolation")("cannot start broadcast without an actorID");return}c=b("ActorURI").create(c,a);new(b("AsyncRequest"))(c).setData(babelHelpers["extends"]({},d,e,f)).setHandler(g).setErrorHandler(function(a){h(),b("LiveVideoBroadcastActions").serverError(a)}).send()}f={getIDsFromTarget:a,showErrorDialog:c,updateBroadcastRequest:d,getUpdateMetadata:h,sendUpdateRequest:i};e.exports=f}),null);
__d("LiveVideoBroadcastCopyrightUtils",["LiveVideoBroadcastActions","SkywalkerManager"],(function(a,b,c,d,e,f){"use strict";var g=[];a={handleCopyrightEvent:function(a,c){c&&b("LiveVideoBroadcastActions").handleCopyrightEvent(a,c)},endLiveBroadcastWithCopyrightViolation:function(){b("LiveVideoBroadcastActions").setBroadcastEndedWithCopyrightViolation(),b("LiveVideoBroadcastActions").finishBroadcastRequest()},subscribeToCopyrightEvents:function(a){a=b("SkywalkerManager").subscribe("live/www/copyright/"+a,function(a){a=JSON.parse(a.payload);b("LiveVideoBroadcastActions").setCopyrightTriggered(!0);b("LiveVideoBroadcastActions").setCopyrightsViolationDialogState(a.event)});g.push(a)},unsubscribeTokens:function(){for(var a=0;a<g.length;a++){var b=g[a];b.unsubscribe()}}};e.exports=a}),null);
__d("LiveVideoLiveTraceBroadcasterLogger",["CurrentUser","LiveTraceWwwFalcoEvent","UserAgentData"],(function(a,b,c,d,e,f){"use strict";var g="BROADCASTER";a=function(){function a(){}var c=a.prototype;c.logCreateEvent=function(a,c){c={u:b("CurrentUser").getID(),appID:c.toString()};b("UserAgentData").browserName!=null&&(c.browser=b("UserAgentData").browserName);b("UserAgentData").browserFullVersion!=null&&(c.browserVer=b("UserAgentData").browserFullVersion);this.$1("CREATE",a,0,"","INFO",c)};c.logBeginEvent=function(a,b){b={type:b};this.$1("BEGIN",a,0,"","INFO",b)};c.logEndEvent=function(a){var b={};this.$1("END",a,0,"","INFO",b)};c.logErrorEvent=function(a,b){this.$1("ERROR",a,0,"","ERROR",b)};c.$1=function(a,c,d,e,f,h){var i=Date.now();b("LiveTraceWwwFalcoEvent").log(function(){return{stream_id:c,stream_type:0,event_name:a,event_severity:f,event_creation_time:i,source:g,trace_id:d,parent_source:e,metadata:h}})};return a}();e.exports=new a()}),null);
__d("XLiveVideoCheckIsPublishedController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live_video/check_is_published/",{broadcast_id:{type:"FBID",required:!0},end_if_unpublished:{type:"Bool",defaultValue:!1}})}),null);
__d("XLiveVideoCreateBroadcastController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/create_broadcast/create/",{app_id:{type:"Int",defaultValue:1761791807395020},target_id:{type:"FBID",required:!0},enable_content_protection:{type:"Bool",defaultValue:!1},is_360_broadcast:{type:"Bool",defaultValue:!1},is_360_audio_broadcast:{type:"Bool",defaultValue:!1},projection:{type:"Enum",enumType:1},stereoscopic_mode:{type:"Enum",enumType:1},is_rehearsal:{type:"Bool",defaultValue:!1},is_instagram_crosspost_enabled:{type:"Bool",defaultValue:!1},privacy_mutation_token:{type:"String"}})}),null);
__d("XLiveVideoInitCommentsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live_video/init_comments/",{broadcast_id:{type:"FBID",required:!0},target_id:{type:"FBID",required:!0}})}),null);
__d("XLiveVideoPublishBroadcastController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live_video/publish/",{broadcast_id:{type:"FBID"},description:{type:"String"}})}),null);
__d("LiveVideoBroadcastBroadcastStore",["fbt","CollabRTCChromeScreenSharingExtension","Bootloader","DateConsts","ErrorDialog","LiveTraceServiceProvider","LiveVideoBroadcastActions","LiveVideoBroadcastConstants","ActorURI","AsyncRequest","LiveVideoBroadcastDispatcher","FBRTCHangupReason","FluxMapStore","immutable","LiveVideoBroadcastAPIBroadcastStore","LiveVideoBroadcastAfterBootloadUtils","LiveVideoBroadcastCopyrightUtils","LiveVideoBroadcastIDStore","LiveVideoBroadcastUIStore","LiveVideoBroadcastUtils","LiveVideoLiveTraceBroadcasterLogger","RTCCallActions","RTCCallStore","RTCMWProtocolHandler","RTCUtils","UFILiveStreamingComments","ThisControllerNoLongerExists","XLiveVideoCheckIsPublishedController","XLiveVideoCreateBroadcastController","XLiveVideoInitCommentsController","XLiveVideoPublishBroadcastController","LiveStreamingSessionLogServiceProvider","LiveStreamingConfigBuilder","FalcoEventLogWriter","FBWWWLiveStreamingClientBuilder","FBLogger","setTimeout","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";b("CollabRTCChromeScreenSharingExtension");var h=b("LiveVideoBroadcastConstants").ACTIONS,i=b("LiveVideoBroadcastConstants").BROADCAST_STATE,j=b("LiveVideoBroadcastConstants").CAMERA_DIMENSIONS,k=b("LiveVideoBroadcastConstants").CAMERA_STATE,l=b("LiveVideoBroadcastConstants").INPUT_SOURCE,m=273465416184080,n=2e3;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$LiveVideoBroadcastBroadcastStore4=!1,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getInitialState=function(){return b("immutable").Map({recordedChunks:[]})};d.reduce=function(a,c){switch(c.type){case h.INITIALIZE:a=this.saveProps(a,c.value);break;case h.START_BROADCAST_REQUEST:a=a.set("broadcastStartTime",Date.now());var d=this.startBroadcast();!c.blockRequest&&d&&this.sendLiveVideoPublishBroadcastRequest();break;case h.START_BROADCAST_SUCCESS:this.$LiveVideoBroadcastBroadcastStore6();this.$LiveVideoBroadcastBroadcastStore7();break;case h.REQUEST_UFI:this.$LiveVideoBroadcastBroadcastStore6();break;case h.ATTEMPT_RECONNECTION:d=this.get("maxFailureRetries")||0;var e=this.get("failureRetries")||0;this.attemptReconnection(e,d);a=a.set("failureRetries",e+1);break;case h.WEBRTC_CONNECTION_ESTABLISHED:a=a.set("failureRetries",0);break;case h.FINISH_BROADCAST_REQUEST:this.finishBroadcast();break;case h.GET_WEBCAM_STREAM_URL_REQUEST:if(this.$LiveVideoBroadcastBroadcastStore4)break;d=c.config&&c.config.audioInput?c.config.audioInput:a.get("selectedAudioInput");e=c.config&&c.config.videoInput?c.config.videoInput:a.get("selectedVideoInput");var f=a.get("mediaStream");f&&b("RTCUtils").stopMediaStream(f);a=a.set("selectedAudioInput",d);a=a.set("selectedVideoInput",e);this.createWebcamStreamUrl(d,e);break;case h.GET_SCREEN_STREAM_URL_REQUEST:f=c.config&&c.config.audioInput?c.config.audioInput:a.get("selectedAudioInput");a=a.set("selectedAudioInput",f);this.$LiveVideoBroadcastBroadcastStore8(f);break;case h.SCHEDULED_LIVE_SUCCESS:if(!c.shouldCloseDialog)break;case h.CLEANUP:a=this.getInitialState();this.$LiveVideoBroadcastBroadcastStore9();this.$LiveVideoBroadcastBroadcastStore10();break;case h.SET_INPUT_SOURCE:this.$LiveVideoBroadcastBroadcastStore7();break;case h.GET_WEBCAM_STREAM_URL_SUCCESS:a=a.set("selectedVideoInputSource","CAMERA");a=a.set("mediaStream",c.value.mediaStream);break;case h.GET_SCREEN_STREAM_URL_SUCCESS:a=a.set("selectedVideoInputSource","SCREEN");a=a.set("mediaStream",c.value.mediaStream);break;case h.DELETE_REPLAY_VIDEO:this.$LiveVideoBroadcastBroadcastStore11();break;case h.PREPARE_THUMBNAIL_URI:this.prepareThumbnailUri();break;case h.SET_THUMBNAIL_URI:a=a.set("thumbnailUri",c.value);break;case h.ERROR_TIME_OUT_WAITING_FOR_PUBLISH:case h.ERROR_TRACK_ENDED:this.finishBroadcast();break;case h.SET_TARGET:a=a.set("broadcastId",null);a=a.set("actorID",null);a=a.set("targetID",null);this.$LiveVideoBroadcastBroadcastStore12(a,c.value);break;case h.CLEAR_BROADCAST_ID:a=a.set("broadcastId",null);a=a.set("actorID",null);a=a.set("targetID",null);break;case h.SET_BROADCAST_ID:a=a.set("broadcastId",c.value);break;case h.SET_VIDEO_ID:a=a.set("videoId",c.value);break;case h.SET_CONTENT_PROTECTION_ENABLED:case h.SET_IS_360_VIDEO:case h.SET_IS_360_AUDIO:case h.UPDATE_360_CONFIGURATION:case h.SET_IS_REHEARSAL:this.$LiveVideoBroadcastBroadcastStore13();break;case h.UPDATE_UI_CONFIG:c.values.broadcastId&&(a.get("broadcastId")==null&&c.values.broadcastId!=null&&b("LiveVideoLiveTraceBroadcasterLogger").logCreateEvent(c.values.broadcastId,m),a=a.set("broadcastId",c.values.broadcastId));c.values.videoId&&(a=a.set("videoId",c.values.videoId));c.values.viewerID&&(a=a.set("viewerID",c.values.viewerID));c.values.feedbackID&&(a=a.set("feedbackID",c.values.feedbackID));c.values.targetID&&(a=a.set("targetID",c.values.targetID));c.values.actorID&&(a=a.set("actorID",c.values.actorID));c.values.formData&&(a=a.set("formData",c.values.formData));c.values.streamSettings&&(a=a.set("streamSettings",c.values.streamSettings));c.values.maxFailureRetries&&(a=a.set("maxFailureRetries",c.values.maxFailureRetries));c.values.retryTimeoutSeconds&&(a=a.set("retryTimeoutSeconds",c.values.retryTimeoutSeconds));c.values.speedTestConfig&&(a=a.set("speedTestConfig",c.values.speedTestConfig));c.values.webRTCLoggingFreq&&(a=a.set("webRTCLoggingFreq",c.values.webRTCLoggingFreq));c.values.gks&&(a=a.set("vp8",c.values.gks.live_www_broadcasting_vp8_encoding));c.values.accountID&&(a=a.set("accountID",c.values.accountID));c.values.isCrosspost&&(a=a.set("isCrosspost",c.values.isCrosspost));c.values.scheduledLiveCrosspostPayload&&(a=a.set("scheduledLiveCrosspostPayload",c.values.scheduledLiveCrosspostPayload));c.values.dashIngestUri&&(a=a.set("dashIngestUri",c.values.dashIngestUri));c.values.speedTestUri&&(a=a.set("speedTestUri",c.values.speedTestUri));break;default:break}return a};d.saveProps=function(a,b){return a.set("failureRetries",0).set("vp8",b.vp8).set("formData",b.formData)};d.$LiveVideoBroadcastBroadcastStore13=function(){b("LiveVideoBroadcastDispatcher").waitFor([b("LiveVideoBroadcastAPIBroadcastStore").getDispatchToken()]);var a=this.get("actorID"),c=this.get("targetID");a&&c&&this.$LiveVideoBroadcastBroadcastStore14(a,c)};d.$LiveVideoBroadcastBroadcastStore14=function(a,c){var d=this;this.$LiveVideoBroadcastBroadcastStore2&&this.$LiveVideoBroadcastBroadcastStore2.abandon();var e=b("LiveVideoBroadcastAPIBroadcastStore").getState().toObject(),f=e.is360Audio,g=e.is360Video,h=e.isContentProtectionEnabled,i=e.sphericalConfigSelectorValue,j=e.isRehearsal;e="equirectangular";var k="mono";i&&(e=i.getAuxiliaryData().projection,k=i.getAuxiliaryData().stereoMode);i=b("XLiveVideoCreateBroadcastController").getURIBuilder().setInt("app_id",m).setFBID("target_id",String(c)).setBool("enable_content_protection",h).setBool("is_360_broadcast",g).setBool("is_rehearsal",j);g&&(i=i.setBool("is_360_audio_broadcast",f).setEnum("projection",e).setEnum("stereoscopic_mode",k));i=i.getURI();i=b("ActorURI").create(i,a);this.$LiveVideoBroadcastBroadcastStore2=new(b("AsyncRequest"))(i).setData({video_broadcast_infra_type:"RTMP"}).setHandler(function(e){d.$LiveVideoBroadcastBroadcastStore2=null,b("LiveVideoBroadcastActions").apiBroadcastCreated(a||"",e.payload.id,{primaryStreamURL:e.payload.stream_url,primarySecureStreamURL:e.payload.secure_stream_url,backupStreamURL:e.payload.backup_stream_url,backupSecureStreamURL:e.payload.backup_secure_stream_url},e.payload.video_id,c||"",e.payload.embed_html,"",j===!0,e.payload.allow_unsecure_rtmp)}).setMethod("POST");this.$LiveVideoBroadcastBroadcastStore2.send()};d.$LiveVideoBroadcastBroadcastStore12=function(a,c){var d=this;c=b("LiveVideoBroadcastAfterBootloadUtils").getIDsFromTarget(c,a.get("accountID"));var e=c.actorID,f=c.targetID;a=a.set("actorID",e);a=a.set("targetID",f);c=3e4;this.$LiveVideoBroadcastBroadcastStore1&&this.$LiveVideoBroadcastBroadcastStore1.abandon();var g=b("XLiveVideoCreateBroadcastController").getURIBuilder().setFBID("target_id",f).getURI();g=b("ActorURI").create(g,e);this.$LiveVideoBroadcastBroadcastStore1=new(b("AsyncRequest"))(g).setHandler(function(a){d.$LiveVideoBroadcastBroadcastStore1=null;var c=b("LiveVideoBroadcastUIStore").get("composerConfig");if(!c){b("LiveVideoBroadcastUtils").handleCreateBroadcastError({error:"No broadcast config"});return}var g=b("LiveVideoBroadcastUtils").getComposerFormData(c.contextConfig.composerID,f,c.config.contextInfo);b("LiveVideoBroadcastUtils").fetchUIConfig(e,f,a.payload.id,c.contextConfig.composerType,g)}).setErrorHandler(b("LiveVideoBroadcastUtils").handleCreateBroadcastError).setMethod("POST").setTimeoutHandler(c,b("LiveVideoBroadcastUtils").handleCreateBroadcastError);this.$LiveVideoBroadcastBroadcastStore1.send();this.$LiveVideoBroadcastBroadcastStore14(e,f);return a};d.$LiveVideoBroadcastBroadcastStore15=function(a){var c=a.getAudioTracks();if(c.length===0){b("RTCUtils").stopMediaStream(a);b("LiveVideoBroadcastActions").updateCameraState(k.MICROPHONE_NOT_FOUND);return!1}if(c[0].readyState==="ended"){b("setTimeout")(function(){return b("LiveVideoBroadcastActions").readyStateEnded()},0);return!1}c=a.getVideoTracks();if(c.length===0){b("RTCUtils").stopMediaStream(a);b("LiveVideoBroadcastActions").updateCameraState(k.CAMERA_NOT_FOUND);return!1}if(c[0].readyState==="ended"){b("setTimeout")(function(){return b("LiveVideoBroadcastActions").readyStateEnded()},0);return!1}return!0};d.$LiveVideoBroadcastBroadcastStore8=function(a){var c=this,d=function(a){if(!c.$LiveVideoBroadcastBroadcastStore15(a))return;b("RTCCallActions").removeAllLocalStreams(!0);b("RTCCallActions").removeAllLocalScreenStreams(!0);b("RTCCallActions").addLocalScreenStream(a);b("LiveVideoBroadcastActions").getScreenStreamUrlSuccess({mediaStream:a});b("LiveVideoBroadcastActions").updateCameraState(k.BROADCAST);a=a.getVideoTracks();a[0].addEventListener("ended",function(){var a=b("LiveVideoBroadcastUIStore").getState().toObject();a=a.broadcastState;a===i.LIVE?c.finishBroadcast():b("LiveVideoBroadcastActions").getWebcamStreamUrlRequest()});c.$LiveVideoBroadcastBroadcastStore3=a[0].getSettings().height};a=this.$LiveVideoBroadcastBroadcastStore16(a);var e={audio:a,video:!1},f=b("RTCCallStore").getState().localUser.getScreenStream();if(f)return b("RTCUtils").getUserMedia(e).then(function(a){for(var b=f.getAudioTracks(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;f.removeTrack(e)}f.addTrack(a.getAudioTracks()[0]);return f})["catch"](function(a){b("LiveVideoBroadcastActions").errorMediaValidation(a,!0)});a={audio:!1,video:{frameRate:{ideal:5,max:15},height:{exact:1080},mediaSource:"screen",width:{max:1920}}};var g=this.$LiveVideoBroadcastBroadcastStore17();g&&(a={audio:!1,video:{frameRate:{ideal:30,max:30},height:{min:480,ideal:720,max:1080},mediaSource:"screen",width:{min:640,ideal:1280,max:1920}}});return b("RTCUtils").getUserScreenMedia(a,"live_broadcast").then(function(a){return b("RTCUtils").getUserMedia(e).then(function(b){a.addTrack(b.getAudioTracks()[0]);return a})}).then(d)["catch"](function(a){b("LiveVideoBroadcastActions").errorMediaValidation(a,!0)})};d.createWebcamStreamUrl=function(a,c){var d=this;this.$LiveVideoBroadcastBroadcastStore4=!0;var e={width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080},aspectRatio:{ideal:j.SIXTEEN_NINE},frameRate:{ideal:30,max:30}};a=this.$LiveVideoBroadcastBroadcastStore16(a);var f=this.$LiveVideoBroadcastBroadcastStore17(),g=this.get("streamSettings");f&&!(g==null?void 0:g.isLiveCommentating)?b("qex")._("1290807")?e={frameRate:30,height:720,aspectRatio:j.SIXTEEN_NINE}:e={frameRate:{ideal:30,max:30},width:{min:320,ideal:1280,max:1280},height:{min:240,ideal:720,max:720},aspectRatio:{ideal:j.SIXTEEN_NINE}}:g&&g.simpleConstaints?e={height:{ideal:368},aspectRatio:{ideal:j.SIXTEEN_NINE}}:!f&&g&&g.firefoxSimpleConstraints?e={height:720,aspectRatio:j.SIXTEEN_NINE}:(g==null?void 0:g.isLiveCommentating)&&(e={width:{min:480,ideal:720,max:1080},height:{min:480,ideal:720,max:1080},aspectRatio:{ideal:j.ONE_ONE}});c&&(e=babelHelpers["extends"]({},e,{deviceId:{exact:c}}));f={audio:a,video:e};g=function(a){d.$LiveVideoBroadcastBroadcastStore4=!1;var c=b("LiveVideoBroadcastUIStore").get("shouldBeClosed");if(c){b("RTCUtils").stopMediaStream(a);return}if(!d.$LiveVideoBroadcastBroadcastStore15(a))return;b("RTCCallActions").removeAllLocalStreams(!0);b("RTCCallActions").removeAllLocalScreenStreams(!0);b("RTCCallActions").addLocalStream(a);b("LiveVideoBroadcastActions").getWebcamStreamUrlSuccess({mediaStream:a});b("LiveVideoBroadcastActions").updateCameraState(k.BROADCAST);c=a.getVideoTracks();c[0].addEventListener("ended",function(){var a=b("LiveVideoBroadcastUIStore").getState().toObject();a=a.broadcastState;a===i.LIVE&&b("LiveVideoBroadcastActions").errorTrackEnded()});d.$LiveVideoBroadcastBroadcastStore3=c[0].getSettings().height};return this.$LiveVideoBroadcastBroadcastStore18(f).then(g)["catch"](function(a){d.$LiveVideoBroadcastBroadcastStore4=!1;b("LiveVideoBroadcastActions").errorMediaValidation(a,!0);var c=a.name==="NotAllowedError"||a.name==="PermissionDismissedError";c=c?k.CAMERA_NOT_ALLOWED:k.CAMERA_NOT_FOUND;b("LiveVideoBroadcastActions").updateCameraState(c,a)})};d.$LiveVideoBroadcastBroadcastStore16=function(a){var b={autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2,deviceId:a},c=this.$LiveVideoBroadcastBroadcastStore17(),d=this.get("streamSettings");!c&&d&&d.simpleConstaints&&(b={deviceId:a});return b};d.$LiveVideoBroadcastBroadcastStore18=function(a){return b("RTCUtils").getUserMedia(a)};d.$LiveVideoBroadcastBroadcastStore9=function(){var a=this.get("mediaStream");a&&b("RTCUtils").stopMediaStream(a)};d.$LiveVideoBroadcastBroadcastStore10=function(){var a=this.get("videoId");if(!a)return;b("UFILiveStreamingComments").stop(a)};d.$LiveVideoBroadcastBroadcastStore17=function(){return!!b("qex")._("1241427")||b("gkx")("944030")};d.startBroadcast=function(){var a=this.get("streamSettings");if(!(a==null?void 0:a.isLiveCommentating)&&this.$LiveVideoBroadcastBroadcastStore17())return this.$LiveVideoBroadcastBroadcastStore19();else return this.$LiveVideoBroadcastBroadcastStore20()};d.$LiveVideoBroadcastBroadcastStore19=function(){var a=this.get("broadcastId");if(a==null){this.$LiveVideoBroadcastBroadcastStore21("Missing broadcastID");return!1}var c=this.get("dashIngestUri");if(c==null){this.$LiveVideoBroadcastBroadcastStore21("Missing dashIngestUri");return!1}var d=this.get("speedTestUri");if(d==null){this.$LiveVideoBroadcastBroadcastStore21("Missing speedTestUri");return!1}var e=this.get("mediaStream");if(e==null){this.$LiveVideoBroadcastBroadcastStore21("Missing mediaStream");return!1}if(!this.$LiveVideoBroadcastBroadcastStore15(e)){this.$LiveVideoBroadcastBroadcastStore21("MediaStream is invalid");return!1}a=new(b("LiveStreamingConfigBuilder"))(a).populateFromQE().setDashIngestUrl(c).setSpeedTestUrl(d).build();c=new(b("FalcoEventLogWriter"))();d=new(b("LiveStreamingSessionLogServiceProvider"))();var f=new(b("LiveTraceServiceProvider"))();this.$LiveVideoBroadcastBroadcastStore5=new(b("FBWWWLiveStreamingClientBuilder"))(a).setSessionCallbacks({onStarted:function(){},onStopped:this.$LiveVideoBroadcastBroadcastStore22.bind(this),onError:function(a){b("FBLogger")("www_livestreaming").warn(a.toString()),b("LiveVideoBroadcastActions").errorWWWSDKClientError()}}).setMediaStream(e).addService(c).addServiceProvider(d).addServiceProvider(f).build();this.$LiveVideoBroadcastBroadcastStore5.start();return!0};d.$LiveVideoBroadcastBroadcastStore20=function(){var a=this,c=this.get("broadcastId");if(c==null){this.$LiveVideoBroadcastBroadcastStore21("Missing broadcastID");return!1}var d=this.get("mediaStream");if(d==null){this.$LiveVideoBroadcastBroadcastStore21("Missing mediaStream");return!1}if(!this.$LiveVideoBroadcastBroadcastStore15(d)){this.$LiveVideoBroadcastBroadcastStore21("MediaStream is invalid");return!1}b("LiveVideoLiveTraceBroadcasterLogger").logBeginEvent(c,"rtc");d=this.get("streamSettings");var e=this.get("vp8")?{video:"VP8/90000"}:{video:"H264/90000"};b("RTCCallActions").addListener("onIceConnectionStateChange",function(a){a==="disconnected"?b("LiveVideoBroadcastActions").errorConnectionBroken():a==="connected"?b("LiveVideoBroadcastActions").webRTCConnectionEstablished():b("LiveVideoBroadcastActions").iceConnectionStateChanged(a),a==="failed"&&b("LiveVideoBroadcastActions").attemptReconnection()});var f={};d&&(f={"H264/90000":{"x-google-start-bitrate":d.initialBitrate},"opus/48000/2":{minaveragebitrate:d.minAudioBitrate,maxaveragebitrate:d.maxAudioBitrate},"VP8/90000":d.maxVideoBitrate?{"x-google-max-bitrate":d.maxVideoBitrate}:{}});var g=b("RTCCallStore").getState();g=g.localUser;g=[].concat(g.streams.toArray(),g.screenStreams.toArray());var h=void 0;d&&d.firefoxSimpleConstraints&&(h=function(b){var c=a.$LiveVideoBroadcastBroadcastStore3?a.$LiveVideoBroadcastBroadcastStore3/360:1;b.setParameters(babelHelpers["extends"]({},b.getParameters(),{encodings:[{maxBitrate:1e6,scaleResolutionDownBy:c}]}))});d=new(b("RTCMWProtocolHandler"))(null,!0);d.startCall([],g,"LIVE:"+c,{addStreamCallback:h,callTrigger:"live_video",formatParameters:f,preferredCodecs:e});b("LiveVideoBroadcastCopyrightUtils").subscribeToCopyrightEvents(c);d=Math.max(b("LiveVideoBroadcastConstants").PUBLISH_FAILURE_TIMEOUT_S-5,0);b("setTimeout")(function(){return a.$LiveVideoBroadcastBroadcastStore23()},d*b("DateConsts").MS_PER_SEC);return!0};d.$LiveVideoBroadcastBroadcastStore21=function(a){b("setTimeout")(function(){return b("LiveVideoBroadcastActions").errorBroadcastCouldNotStart(a)},0)};d.sendLiveVideoPublishBroadcastRequest=function(){var a=this.get("broadcastId");a=b("XLiveVideoPublishBroadcastController").getURIBuilder().setFBID("broadcast_id",a);a=b("ActorURI").create(a.getURI(),this.get("actorID"));var c=this.get("formData"),d=b("LiveVideoBroadcastUIStore").getState().toObject();d=d.composerConfig;if(d){d=b("LiveVideoBroadcastUtils").getComposerFormData(d.contextConfig.composerID,d.contextConfig.targetID,d.config.contextInfo);for(var e in c)d[e]!==null&&(c[e]=d[e])}new(b("AsyncRequest"))().setURI(a).setData(c).setHandler(function(){return b("LiveVideoBroadcastActions").startLiveBroadcastSuccess()}).setErrorHandler(function(a){return b("LiveVideoBroadcastActions").errorBroadcastCouldNotStart((a=a.getErrorDescriptionString())!=null?a:"Error starting broadcast")}).send()};d.attemptReconnection=function(a,c){var d=b("LiveVideoBroadcastUIStore").getState().toObject(),e=d.connectionBroken;d=d.broadcastState;if(a<c&&d===i.LIVE&&e){a=this.get("broadcastId");if(a!=null){c=new(b("RTCMWProtocolHandler"))();c.iceRestart("LIVE:"+a,b("RTCCallStore").getState().callInfo.serverInfoData)}b("setTimeout")(function(){return b("LiveVideoBroadcastActions").attemptReconnection()},(this.get("retryTimeoutSeconds")||b("LiveVideoBroadcastConstants").DEFAULT_RETRY_TIMEOUT_SECONDS)*1e3)}else e&&b("setTimeout")(function(){return b("LiveVideoBroadcastActions").errorConnectionFailed()},1)};d.$LiveVideoBroadcastBroadcastStore23=function(a){var c=this,d=this.get("broadcastId")||"";a=a?b("LiveVideoBroadcastConstants").PUBLISH_FAILURE_TIMEOUT_S*1.5:b("LiveVideoBroadcastConstants").PUBLISH_FAILURE_TIMEOUT_S;var e=this.getCurrentBroadcastTime()>a;a=b("XLiveVideoCheckIsPublishedController").getURIBuilder().setFBID("broadcast_id",d).setBool("end_if_unpublished",e).getURI();var f=function(a,d){var f=b("LiveVideoBroadcastUIStore").getState().toObject();f=f.broadcastState;if(f===i.FINISHED)return;f=a.payload;f.is_published||(e?b("LiveVideoBroadcastActions").errorTimeOutWaitingForPublish("CLIENT"):b("setTimeout")(function(){c.$LiveVideoBroadcastBroadcastStore23(d)},n))};new(b("AsyncRequest"))().setURI(a).setHandler(function(a){return f(a,!1)}).setErrorHandler(function(a){return f(a,!0)}).send()};d.$LiveVideoBroadcastBroadcastStore6=function(){var a=b("LiveVideoBroadcastIDStore").get("broadcastID"),c=this.get("targetID");if(!a||!c){b("setTimeout")(function(){return b("LiveVideoBroadcastActions").requestUFI()},n);return}a=b("XLiveVideoInitCommentsController").getURIBuilder().setFBID("broadcast_id",a).setFBID("target_id",c);c=b("ActorURI").create(a.getURI(),this.get("actorID"));a=function(a){a=a.payload;if(!a.success){b("setTimeout")(function(){return b("LiveVideoBroadcastActions").requestUFI()},n);return}b("LiveVideoBroadcastActions").updateBroadcastUIConfig({feedbackID:a.feedbackID})};new(b("AsyncRequest"))().setURI(c).setHandler(a).setErrorHandler(a).send()};d.$LiveVideoBroadcastBroadcastStore7=function(){var a=b("LiveVideoBroadcastUIStore").getState().toObject();a=a.inputSource;a!==l.CAMERA&&this.$LiveVideoBroadcastBroadcastStore9()};d.$LiveVideoBroadcastBroadcastStore22=function(){var a=this.get("videoId");b("Bootloader").loadModules(["ModernLiveVideoEndMutation","RelayFBEnvironment"],function(c,d){var e=this;c.commit(d,{videoID:a},{onCompleted:function(){b("LiveVideoBroadcastActions").finishBroadcastSuccess()},onError:function(a){b("LiveVideoBroadcastActions").errorEndBroadcastMutationFail(a),e.$LiveVideoBroadcastBroadcastStore24()}})},"LiveVideoBroadcastBroadcastStore")};d.finishBroadcast=function(){var a=b("LiveVideoBroadcastUIStore").getState().toObject();a=a.inputSource;if(a!==l.CAMERA)return;var c=this.get("broadcastId"),d=this.get("videoId");if(c==null||d==null){this.$LiveVideoBroadcastBroadcastStore24();b("setTimeout")(function(){return b("LiveVideoBroadcastActions").errorEndBroadcastMutationFail("No broadcast ID")},0);return}this.$LiveVideoBroadcastBroadcastStore17()&&this.$LiveVideoBroadcastBroadcastStore5?this.$LiveVideoBroadcastBroadcastStore5.stop():(b("setTimeout")(function(){return b("RTCCallActions").removeAllLocalStreams(!0)},0),b("setTimeout")(function(){b("RTCMWProtocolHandler").endCall("LIVE:"+c,b("RTCCallStore").getState().callInfo.serverInfoData,b("FBRTCHangupReason").HANGUP_CALL,"User ending live stream"),b("Bootloader").loadModules(["ModernLiveVideoEndMutation","RelayFBEnvironment"],function(a,c){var e=this;a.commit(c,{videoID:d},{onCompleted:function(){b("LiveVideoBroadcastActions").finishBroadcastSuccess()},onError:function(a){b("LiveVideoBroadcastActions").errorEndBroadcastMutationFail(a),e.$LiveVideoBroadcastBroadcastStore24()}})},"LiveVideoBroadcastBroadcastStore")},1e3*3));a=this.get("recorder");var e=this.get("recordedChunks");if(a&&e){a.stop();a=new Blob(e,{type:"video/webm"});e=URL.createObjectURL(a);a=document.createElement("a");document.body&&(document.body.appendChild(a),a.style.cssText="display: none",a.href=e,a.download="test.webm",a.click(),window.URL.revokeObjectURL(e))}};d.$LiveVideoBroadcastBroadcastStore11=function(){var a=this.get("videoId");a&&this.deleteVideo(a)};d.deleteVideo=function(a){new(b("AsyncRequest"))().setURI("/ajax/video/actions/delete/").setData({fbid:a,redirect:!1}).setHandler(function(a){}).send()};d.prepareThumbnailUri=function(){var a=b("ThisControllerNoLongerExists").__DEADURI__("5g1c01ti");new(b("AsyncRequest"))().setURI(a).setMethod("POST").setHandler(function(a){return b("LiveVideoBroadcastActions").setThumbnailUri(a.getPayload())}).send()};d.getCurrentBroadcastTime=function(){var a=this.get("broadcastStartTime");return typeof a==="number"?Math.floor((Date.now()-a)/1e3):0};d.$LiveVideoBroadcastBroadcastStore24=function(){b("ErrorDialog").show(g._("End broadcast error"),g._("Error ending broadcast, please try again"))};return c}(b("FluxMapStore"));a.__moduleID=e.id;e.exports=new a(b("LiveVideoBroadcastDispatcher"))}),null);
__d("LiveVideoBroadcastIDStore",["FluxDerivedStore","LiveVideoBroadcastAPIBroadcastStore","LiveVideoBroadcastBroadcastStore","LiveVideoBroadcastDispatcher","LiveVideoBroadcastUIStore"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__getStores=function(){return[b("LiveVideoBroadcastAPIBroadcastStore"),b("LiveVideoBroadcastBroadcastStore"),b("LiveVideoBroadcastUIStore")]};d.__getData=function(a){a=b("LiveVideoBroadcastUIStore").get("inputSource");var c=b("LiveVideoBroadcastAPIBroadcastStore").getState().toObject(),d=c.apiBroadcastID;c=c.apiVideoID;var e=b("LiveVideoBroadcastBroadcastStore").getState().toObject();return{inputSource:a,apiBroadcastID:d,apiVideoID:c,cameraBroadcastID:e.broadcastId,cameraVideoID:e.videoId}};d.__computeResult=function(a,b){if(b.inputSource==="CAMERA"||b.inputSource==="EDIT")switch(a){case"broadcastID":return b.cameraBroadcastID;case"videoID":return b.cameraVideoID}if(b.inputSource==="API"||b.inputSource==="VIDEO_GAME"||b.inputSource==="EDIT_SCHEDULE")switch(a){case"broadcastID":return b.apiBroadcastID;case"videoID":return b.apiVideoID}return null};return c}(b("FluxDerivedStore"));a.__moduleID=e.id;e.exports=new a(b("LiveVideoBroadcastDispatcher"))}),null);
__d("XLiveVideoBroadcastMaybeLaunchEndScreenSurveyController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ajax/live/broadcast/end_screen_survey/",{broadcast_id:{type:"FBID",required:!0}})}),null);
__d("LiveVideoBroadcastUIStore",["fbt","AsyncRequest","ComposerVideoShowsActions","ComposerVideoShowsDispatcher","ComposerVideoShowsStore","ErrorDialog","FluxMapStore","LiveVideoBroadcastAfterBootloadUtils","LiveVideoBroadcastBroadcastStore","LiveVideoBroadcastConstants","LiveVideoBroadcastDispatcher","ReactComposerActions","ReactComposerAttachmentActions","ReactComposerAttachmentType","ReactComposerFundraiserAttachmentActions","ReactComposerLoggingName","ReactComposerTaggerActions","ReactComposerTaggerType","ReactDOM","VideoBroadcastFlowTypes","XLiveVideoBroadcastMaybeLaunchEndScreenSurveyController","ge","gkx","immutable","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";var h=b("VideoBroadcastFlowTypes").BroadcastPlaybackMode,i=(a=b("LiveVideoBroadcastConstants")).ACTIONS,j=a.BROADCAST_STATE,k=a.CAMERA_STATE,l=a.INPUT_SOURCE,m=a.ENCODER_TYPE,n=a.RHC_TAB_TYPE;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return b("immutable").Map({broadcastCouldNotStart:!1,broadcastCouldNotPublish:!1,broadcastState:j.PREVIEW,cameraState:k.CHECK_CAMERA_ACCESS,canSeeCopyrightOption:!1,canSeeDisturbingOptions:!1,countdownTime:null,connectionBroken:!1,connectionFailed:!1,dialog:null,dialogContainerID:null,composerConfig:null,isIsrEnabled:!1,broadcastPlaybackMode:h.NORMAL_LATENCY,isOnline:!0,isUpdateRequestPending:!1,showNUX:!1,showReplay:!1,startTime:0,wasEverOffline:!1,ufiConfig:{},ufiMarkup:null,isDescriptionExpanded:!1,warnOnExit:!0,tagList:null,pendingCleanup:!1,peopleTaggerSource:null,inputSource:l.CAMERA,isScheduledLiveRequestPending:!1,showSaveChangesDialog:!1,showJoinGroupCTA:!1,sponsorEnabled:!1,sponsorConfig:null,isDialogLoading:!1,hideInputToggle:!1,shouldBeClosed:!0,canEndLiveVideo:!1,canEnableLiveCoverVideo:!1,isLiveCoverVideoEnabled:!1,selectedEncoderType:m.STREAM_KEY,selectedRHCTab:n.POST,isRewindEnabled:!1,canEnableRewind:!1,commentModes:[],isFundraiserSelected:!1,enableWasLivePollVoting:!1,canSeeWasLiveVotingToggle:!1,hasCreatedPollRecently:!1,videoPollWWWPlacement:"top_right",rightsManagerVersion:null,enableEventTicketPromotion:!1,showArenaTypeahead:!1,showStarsTagger:!1,isViewerSideClippingEnabled:!1,canEnableViewerSideClipping:!1})};d.reduce=function(a,c){switch(c.type){case i.SHOW_REPLAY:a=a.set("showReplay",!0);break;case i.SET_UPDATE_REQUEST_PENDING:a=a.set("isUpdateRequestPending",c.value);break;case i.UPDATE_CAMERA_STATE:a=a.set("cameraState",c.value);break;case i.UPDATE_COUNTDOWN:a=a.set("countdownTime",c.value);break;case i.FINISH_COUNT_DOWN:a=a.set("startTime",Date.now());a=a.set("broadcastState",j.READY_TO_LIVE);a=a.set("countdownTime",null);break;case i.API_GO_LIVE_CLICKED:a=a.set("startTime",Date.now());break;case i.START_BROADCAST_SUCCESS:a=a.set("broadcastState",j.LIVE);a=a.set("countdownTime",null);a=this.$LiveVideoBroadcastUIStore1(a);break;case i.START_LIVE_COUNTDOWN:a=a.set("countdownTime",b("LiveVideoBroadcastConstants").COUNTDOWN_START_TIME);break;case i.CANCEL_LIVE_COUNTDOWN:a=a.set("countdownTime",null);break;case i.FINISH_BROADCAST_REQUEST:a=a.set("broadcastState",j.FINISHING);break;case i.FINISH_BROADCAST_SUCCESS:a=a.set("broadcastState",j.FINISHED);a=a.set("showReplay",!0);var d=b("LiveVideoBroadcastBroadcastStore").get("broadcastId");d=b("XLiveVideoBroadcastMaybeLaunchEndScreenSurveyController").getURIBuilder().setFBID("broadcast_id",d).getURI();new(b("AsyncRequest"))().setURI(d).setMethod("GET").setReadOnly(!0).send();break;case i.API_BROADCAST_STOPPED:a=a.set("broadcastState",j.FINISHED);a=a.set("showReplay",!0);break;case i.ERROR_CONNECTION_BROKEN:a=a.set("connectionBroken",!0);break;case i.ERROR_CONNECTION_FAILED:a=a.set("connectionFailed",!0);break;case i.WEBRTC_CONNECTION_ESTABLISHED:a=a.set("connectionBroken",!1);break;case i.ERROR_BROADCAST_COULD_NOT_START:a=a.set("broadcastCouldNotStart",!0);break;case i.ERROR_BROADCAST_PUBLISH_FAIL:case i.ERROR_TIME_OUT_WAITING_FOR_PUBLISH:case i.ERROR_MWS_BAD_AUDIO_OR_VIDEO_DATA:case i.ERROR_RTC_CLIENT_ERROR:case i.ERROR_WWWSDK_CLIENT_ERROR:case i.ERROR_TRACK_ENDED:a=a.set("broadcastCouldNotPublish",!0);a=a.set("broadcastState",j.FINISHED);break;case i.ACCEPT_ERROR_BROADCAST_COULD_NOT_START:a=a.set("broadcastCouldNotStart",!1);break;case i.ERROR_STARTING_API_BROADCAST:b("LiveVideoBroadcastAfterBootloadUtils").showErrorDialog();break;case i.NETWORK_OFFLINE:a=a.set("isOnline",!1);a=a.set("wasEverOffline",!0);break;case i.NETWORK_ONLINE:a=a.set("isOnline",!0);break;case i.SET_SHOW_NUX:a=a.set("showNUX",c.value);break;case i.SETUP_UFI:a.get("broadcastState")===j.LIVE&&(a=a.set("ufiConfig",c.ufiConfig),a=a.set("ufiMarkup",c.ufiMarkup));break;case i.SET_DIALOG:a=a.set("dialog",c.value);break;case i.SET_DIALOG_CONTAINER_ID:a=a.set("dialogContainerID",c.value);break;case i.SET_COMPOSER_CONFIG:a=a.set("composerConfig",c.value);break;case i.SET_DESCRIPTION_EXPANDED:a=a.set("isDescriptionExpanded",c.value);break;case i.INITIALIZE:a=a.set("shouldBeClosed",!1);c.value&&c.value.inputSource!=null&&(a=a.set("inputSource",c.value.inputSource));break;case i.CLEANUP:a=this.getInitialState();a=a.set("warnOnExit",!1);a=a.set("pendingCleanup",!0);a=this.$LiveVideoBroadcastUIStore2(a);break;case i.FINISHED_CLEANUP:a=a.set("pendingCleanup",!1);break;case i.SCHEDULED_LIVE_SUCCESS:c.shouldCloseDialog?(a=this.getInitialState(),a=a.set("warnOnExit",!1),a=this.$LiveVideoBroadcastUIStore2(a,!0)):a=a.set("isScheduledLiveRequestPending",!1);break;case i.PREPARE_BROADCAST_FOR_SCHEDULED_LIVE:case i.SCHEDULED_LIVE_REQUEST:a=a.set("isScheduledLiveRequestPending",!0);break;case i.SCHEDULED_LIVE_FAIL:a=a.set("isScheduledLiveRequestPending",!1);this.$LiveVideoBroadcastUIStore3();break;case i.SET_DESCRIPTION:a=a.set("description",c.value.description);a=a.set("shortDescription",c.value.shortDescription);break;case i.SET_TAG_LIST:a=a.set("tagList",c.value);break;case i.SET_PRIVACY_SELECTOR:a=a.set("privacySelector",c.value);break;case i.SET_PEOPLE_TAGGER_SOURCE:a=a.set("peopleTaggerSource",c.value);break;case i.SET_IS_FUNDRAISER_SELECTED:a=a.set("isFundraiserSelected",c.value);break;case i.SET_TARGET:case i.CLEAR_BROADCAST_ID:a=a.set("allowBroadcastRehearsal",!1);a=a.set("composerPrivacySelector",null);a=a.set("profilePicUri",null);a=a.set("sponsorEnabled",!1);a=a.set("targetingEnabled",!1);a=a.set("canEnableRewind",!1);a=a.set("isRewindEnabled",!1);a=a.set("canEnableViewerSideClipping",!1);a=a.set("isViewerSideClippingEnabled",!1);a=a.set("showJoinGroupCTA",!1);a=a.set("showStarsTagger",!1);a=this.$LiveVideoBroadcastUIStore4(a,!1);break;case i.UPDATE_UI_CONFIG:c.values.encoders&&(a=a.set("encoders",c.values.encoders));c.values.composerPrivacySelector&&(a=a.set("composerPrivacySelector",c.values.composerPrivacySelector));c.values.shareMode&&(a=a.set("shareMode",c.values.shareMode));c.values.description&&(a=a.set("description",c.values.description));c.values.shortDescription&&(a=a.set("shortDescription",c.values.shortDescription));c.values.showNUX&&(a=a.set("showNUX",c.values.showNUX));c.values.tagList&&(a=a.set("tagList",c.values.tagList));a=a.set("hasCreatedPollRecently",c.values.hasCreatedPollRecently===!0);c.values.privacySelector&&(a=a.set("privacySelector",c.values.privacySelector));c.values.profileLink&&(a=a.set("profileLink",c.values.profileLink));if(c.values.gks){a=a.set("gks",c.values.gks);d=((d=c.values.gks)==null?void 0:d.live_rewind_option_in_composer)===!0;a=a.set("canEnableRewind",d);d&&c.values.isRewindEnabled!=void 0&&(a=a.set("isRewindEnabled",c.values.isRewindEnabled));d=((d=c.values.gks)==null?void 0:d.can_enable_viewerside_clipping)===!0;a=a.set("canEnableViewerSideClipping",d);d&&c.values.isViewerSideClippingEnabled!=void 0&&(a=a.set("isViewerSideClippingEnabled",c.values.isViewerSideClippingEnabled));d=((d=c.values.gks)==null?void 0:d.allow_broadcast_rehearsal)===!0;a=a.set("allowBroadcastRehearsal",d)}c.values.commentModes&&(a=a.set("commentModes",c.values.commentModes));c.values.targetSelectorProps&&(a=a.set("targetSelectorProps",c.values.targetSelectorProps));c.values.profilePicUri&&(a=a.set("profilePicUri",c.values.profilePicUri));c.values.accessToken&&(a=a.set("accessToken",c.values.accessToken));c.values.timezoneString&&(a=a.set("timezoneString",c.values.timezoneString));c.values.cameraEmbedHTML!==void 0&&(a=a.set("cameraEmbedHTML",c.values.cameraEmbedHTML));c.values.targetingEnabled!==void 0&&(a=a.set("targetingEnabled",c.values.targetingEnabled));c.values.fundraiserEnabled!==void 0&&(a=this.$LiveVideoBroadcastUIStore4(a,Boolean(c.values.fundraiserEnabled)));c.values.canSeeDisturbingOptions!==void 0&&(a=a.set("canSeeDisturbingOptions",c.values.canSeeDisturbingOptions));c.values.sponsorEnabled!==void 0&&(a=a.set("sponsorEnabled",c.values.sponsorEnabled));c.values.sponsorConfig&&(a=a.set("sponsorConfig",c.values.sponsorConfig));c.values.showJoinGroupCTA!==void 0&&(a=a.set("showJoinGroupCTA",c.values.showJoinGroupCTA));c.values.showStarsTagger!==void 0&&(a=a.set("showStarsTagger",c.values.showStarsTagger));c.values.canSeeCopyrightOption!==void 0&&(a=a.set("canSeeCopyrightOption",c.values.canSeeCopyrightOption));c.values.rightsManagerVersion!==void 0&&(a=a.set("rightsManagerVersion",c.values.rightsManagerVersion));if(c.values.targetID&&c.values.targetID!==b("LiveVideoBroadcastBroadcastStore").get("targetID")){if(c.values.isShowPage){b("ComposerVideoShowsDispatcher").explicitlyRegisterStore(b("ComposerVideoShowsStore"));d=this.get("composerConfig");var e=d&&d.composerID;e&&b("setTimeout")(function(){return b("ComposerVideoShowsActions").initialize(e,"live_broadcast",!1)},0)}a=a.set("episodeData",null)}if(c.values.episodeData!=void 0){var f=c.values.episodeData;a=a.set("episodeData",f);b("ComposerVideoShowsDispatcher").explicitlyRegisterStore(b("ComposerVideoShowsStore"));d=this.get("composerConfig");var g=d&&d.composerID;g&&b("setTimeout")(function(){b("ComposerVideoShowsActions").initialize(g,"live_broadcast",!0),b("ComposerVideoShowsActions").loadEpisodeData(g,f)},0)}c.values.isShowPage!==void 0&&(a=a.set("isShowPage",c.values.isShowPage));c.values.canEndLiveVideo!=void 0&&(a=a.set("canEndLiveVideo",c.values.canEndLiveVideo));d=c.values.pageLiveCoverVideoData;d&&(a=a.set("isLiveCoverVideoEnabled",d.isLiveCoverVideoEnabled),a=a.set("canEnableLiveCoverVideo",d.canEnableLiveCoverVideo));c.values.hasGamingContext&&(a=a.set("hasGamingContext",c.values.hasGamingContext),a.get("inputSource")===l.API&&(a=a.set("inputSource",l.VIDEO_GAME)));c.values.showArenaTypeahead&&(a=a.set("showArenaTypeahead",c.values.showArenaTypeahead));c.values.enableEventTicketPromotion!=null&&(a=a.set("enableEventTicketPromotion",c.values.enableEventTicketPromotion));break;case i.SET_INPUT_SOURCE:a=a.set("inputSource",c.source);break;case i.SET_DIALOG_LOADING:a=a.set("isDialogLoading",c.value);break;case i.SET_EPISODE_DATA:a=a.set("episodeData",c.episodeData);break;case i.SET_HIDE_INPUT_TOGGLE:a=a.set("hideInputToggle",c.hideInputToggle);break;case i.SET_BROADCAST_STATE:a=a.set("broadcastState",c.broadcastState);break;case i.SET_START_TIME:a=a.set("startTime",c.startTime);break;case i.SET_LIVE_COVER_VIDEO_ENABLED:a=a.set("isLiveCoverVideoEnabled",c.value);break;case i.SET_SELECTED_ENCODER_TYPE:a=a.set("selectedEncoderType",c.encoderType);c.encoderType===m.PAIRED_ENCODER&&(a=a.set("selectedRHCTab",n.SETTINGS));break;case i.SET_SELECTED_RHC_TAB:a=a.set("selectedRHCTab",c.selectedTab);break;case i.SET_REWIND_ENABLED:a=a.set("isRewindEnabled",c.enabled);break;case i.SET_VIEWERSIDE_CLIPPING_ENABLED:a=a.set("isViewerSideClippingEnabled",c.enabled);break;case i.SET_SHOW_SAVE_CHANGES_DIALOG:a=a.set("showSaveChangesDialog",c.value);break;case i.SET_COMMENT_MODES:a=a.set("commentModes",c.value);break;case i.ENABLE_WAS_LIVE_POLL_VOTING:a=a.set("enableWasLivePollVoting",c.enabled);break;case i.SET_SHOW_WAS_LIVE_VOTING_TOGGLE:a=a.set("canSeeWasLiveVotingToggle",c.shouldShow);break;case i.CHANGE_VIDEO_POLL_WWW_PLACEMENT:a=a.set("videoPollWWWPlacement",c.placement);break;case i.SET_ISR_ENABLED:a=a.set("isIsrEnabled",c.value);break;case i.SET_BROADCAST_PLAYBACK_MODE:a=a.set("broadcastPlaybackMode",c.value);break;case i.SET_ENABLE_EVENT_TICKET_PROMOTION:a=a.set("enableEventTicketPromotion",c.value);break;case i.HIDE_WARNING_ON_EXIT:a=a.set("warnOnExit",!1);break;default:break}return a};d.$LiveVideoBroadcastUIStore3=function(){b("ErrorDialog").show(g._("Broadcast error"),g._("Error scheduling broadcast, please try again"))};d.$LiveVideoBroadcastUIStore5=function(){var a=this.get("composerConfig");a=a&&a.composerID;a&&(b("ReactComposerTaggerActions").setTaggerData(a,b("ReactComposerLoggingName").FUNDRAISER_SPROUT,b("ReactComposerTaggerType").FUNDRAISER,{}),b("ReactComposerFundraiserAttachmentActions").setMarkup(a,null))};d.$LiveVideoBroadcastUIStore4=function(a,b){a=a.set("fundraiserEnabled",b);b||this.$LiveVideoBroadcastUIStore5();return a};d.$LiveVideoBroadcastUIStore2=function(a,c){var d=this.get("dialog");if(d){var e=b("ge")(this.get("dialogContainerID"));e&&b("ReactDOM").unmountComponentAtNode(e);d.destroy();a=a.set("pendingCleanup",!1)}else window.close();e=this.get("composerConfig");d=this.get("broadcastState");e=e&&e.composerID;e&&(c||d!==j.PREVIEW&&d!==j.READY_TO_LIVE?b("ReactComposerActions").reset(e):b("ReactComposerAttachmentActions").selectAttachment(e,b("ReactComposerAttachmentType").STATUS));return a};d.$LiveVideoBroadcastUIStore1=function(a){if(b("gkx")("1176856")){var c=this.get("composerConfig");c=c&&c.composerID;c&&b("ReactComposerActions").postSucceeded(c)}return a};return c}(b("FluxMapStore"));c.__moduleID=e.id;e.exports=new c(b("LiveVideoBroadcastDispatcher"))}),null);
__d("LiveControlPanelUnifiedCreateButtonContainer.react",["FluxContainer","LiveControlPanelUnifiedCreateButton.react","LiveVideoBroadcastDispatcher","LiveVideoBroadcastUIStore","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;b("LiveVideoBroadcastDispatcher").explicitlyRegisterStores([b("LiveVideoBroadcastUIStore")]);return c}c.getStores=function(){return[b("LiveVideoBroadcastUIStore")]};c.calculateState=function(){var a=b("LiveVideoBroadcastUIStore").getState().toObject();a=a.isDialogLoading;return{isDialogLoading:a}};var d=c.prototype;d.render=function(){return g.jsx(b("LiveControlPanelUnifiedCreateButton.react"),{isDialogLoading:this.state.isDialogLoading})};return c}(g.Component);e.exports=b("FluxContainer").create(a)}),null);
__d("LiveControlPanelUnifiedCreateButtonServerCallable.react",["LiveControlPanelUnifiedCreateButtonContainer.react","React"],(function(a,b,c,d,e,f){"use strict";var g=b("React");a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return g.jsx(b("LiveControlPanelUnifiedCreateButtonContainer.react"),{})};return c}(g.Component);e.exports=a}),null);
__d("XLiveVideoBroadcastRefreshCrosspostingSettingsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/live/broadcast/refresh_crossposting_settings/",{broadcast_id:{type:"Int"},selected_ids:{type:"FBIDVector"}})}),null);
__d("LiveVideoBroadcastCrosspostStore",["ActorURI","AsyncRequest","FluxMapStore","LiveVideoBroadcastBroadcastStore","LiveVideoBroadcastConstants","LiveVideoBroadcastDispatcher","XLiveVideoBroadcastRefreshCrosspostingSettingsController","immutable"],(function(a,b,c,d,e,f){"use strict";var g=b("LiveVideoBroadcastConstants").ACTIONS;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return b("immutable").Map({crosspostingConfig:b("immutable").OrderedMap(),initialCrosspostingConfig:b("immutable").OrderedMap(),shouldShowCrosspostingNux:!1})};d.reduce=function(a,c){switch(c.type){case g.UPDATE_UI_CONFIG:var d=c.values,e=d.canEditShowAndParent;d=d.shouldShowCrosspostingNux;var f=c.values.crosspostingConfig;if(f!==void 0){var h=b("immutable").OrderedMap().withMutations(function(a){f.forEach(function(c){return a.set(c.id,b("immutable").Map(c))})});h=this.$LiveVideoBroadcastCrosspostStore1(h);a=a.set("canEditShowAndParent",e);a=a.set("crosspostingConfig",h);a=a.set("initialCrosspostingConfig",h);d!=void 0&&(a=a.set("shouldShowCrosspostingNux",d))}break;case g.SET_SHOULD_CROSSPOST_TO_PAGE:var i=c.pageId,j=c.shouldCrosspost;a=a.update("crosspostingConfig",function(a){return a.update(i,function(a){return a.set("allow",j)})});break;case g.SET_SHOULD_CROSSPOST_TO_ALL_PAGES:var k=c.shouldCrosspost;a=a.update("crosspostingConfig",function(a){return a.map(function(a){return a.set("allow",k)})});break;case g.RESORT_CROSSPOST_CONFIGS:a=a.update("crosspostingConfig",this.$LiveVideoBroadcastCrosspostStore1);break;case g.START_BROADCAST_SUCCESS:e=this.get("crosspostingConfig");if(!e)break;h=Array.from(e.filter(function(a){return a.get("allow",!1)}).keys());a=a.set("crosspostingConfig",b("immutable").OrderedMap());new(b("AsyncRequest"))().setURI(b("ActorURI").create(b("XLiveVideoBroadcastRefreshCrosspostingSettingsController").getURIBuilder().setInt("broadcast_id",b("LiveVideoBroadcastBroadcastStore").get("broadcastId")).setFBIDVector("selected_ids",h).getURI(),b("LiveVideoBroadcastBroadcastStore").get("actorID")||"")).send();break}return a};d.$LiveVideoBroadcastCrosspostStore1=function(a){return a.sort(function(a,b){var c=a.get("type")==="business",d=b.get("type")==="business";if(c===d){d=a.get("allow",!1);a=b.get("allow",!1);if(d===a)return 0;else if(d)return-1;else return 1}else if(c)return-1;else return 1})};d.convertCrosspostingConfig=function(a){return Array.from(a.map(function(a){return{id:a.get("id",""),name:a.get("name",""),allow:a.get("allow",!1),type:a.get("type",""),profile_pic_uri:a.get("profile_pic_uri",null),can_create_post:a.get("can_create_post",!1)}}).values())};d.shouldShareWithOwningBusiness=function(){var a=this.get("crosspostingConfig");return a==null?!1:a.some(function(a){return a.get("allow",!1)&&a.get("type")==="business"})};d.getSelectedCrosspostPagesCount=function(){var a=this.get("crosspostingConfig");return a==null?0:a.count(function(a){return a.get("allow",!1)})};d.hasRemovedCrosspostPages=function(){var a=this.get("initialCrosspostingConfig"),c=this.get("crosspostingConfig");if(a===c)return!1;else if(a==null)return!1;else if(c==null)return!0;return a.some(function(a,d){return a.get("allow")===!0&&c.get(d,b("immutable").Map()).get("allow")===!1})};return c}(b("FluxMapStore"));a.__moduleID=e.id;e.exports=new a(b("LiveVideoBroadcastDispatcher"))}),null);
__d("LiveVideoBroadcastMetadataInputStore",["FluxMapStore","LiveVideoBroadcastConstants","LiveVideoBroadcastDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";var g=b("LiveVideoBroadcastConstants").ACTIONS;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return b("immutable").Map({arena:null,contentTags:[],fundraiserGoal:null,language:null,videoTitle:null,selectedGame:null,selectedGroups:b("immutable").List(),thumbnailUpload:null,videoTJApp:null})};d.reduce=function(a,c){switch(c.type){case g.SET_INPUT_SOURCE:break;case g.SET_CONTENT_TAGS:a=a.set("contentTags",c.value);break;case g.SET_VIDEO_TITLE:a=a.set("videoTitle",c.value);break;case g.SET_GAME:a=a.set("selectedGame",c.value);break;case g.SET_ARENA:var d=c.value;a=a.set("arena",d);if(d!=null){d=d.getAuxiliaryData().game;d!=null&&(a=a.set("selectedGame",d))}break;case g.SET_LANGUAGE:a=a.set("language",c.value);break;case g.SET_VIDEO_TJ_APP:a=a.set("videoTJApp",c.value);break;case g.SET_GROUPS:a=a.set("selectedGroups",c.value);break;case g.SET_FUNDRAISER_GOAL:a=a.set("fundraiserGoal",c.value);break;case g.SET_THUMBNAIL_UPLOAD:a=a.set("thumbnailUpload",c.value);break;case g.CLEANUP:a=a.set("arena",null);a=a.set("contentTags",[]);a=a.set("videoTitle",null);a=a.set("selectedGame",null);a=a.set("selectedGroups",b("immutable").List());a=a.set("videoTJApp",null);a=a.set("fundraiserGoal",null);a=a.set("language",null);a=a.set("thumbnailUpload",null);break;case g.UPDATE_METADATA_CONFIG:a=a.set("contentTags",c.config.contentTags);a=a.set("videoTitle",c.config.videoTitle);a=a.set("selectedGame",c.config.selectedGame);a=a.set("selectedGroups",c.config.selectedGroups);a=a.set("videoTJApp",c.config.videoTJApp);a=a.set("fundraiserGoal",c.config.fundraiserGoal);a=a.set("language",c.config.language);a=a.set("thumbnailUpload",c.config.thumbnailUpload);break;case g.SET_TARGET:a=a.set("selectedGroups",b("immutable").List());break;case g.UPDATE_UI_CONFIG:c.values.previousGame&&(a=a.set("selectedGame",c.values.previousGame));c.values.previousLanguage&&(a=a.set("language",c.values.previousLanguage));break}return a};return c}(b("FluxMapStore"));a.__moduleID=e.id;e.exports=new a(b("LiveVideoBroadcastDispatcher"))}),null);
__d("LiveVideoBroadcastDialogUtils",["ActorURI","AsyncRequest","LiveVideoBroadcastActions","LiveVideoBroadcastDispatcher","ReactComposerStatusActions","VideoBroadcastTypedLogger","XLiveVideoBroadcastCreateQuickLoadUIController","LiveVideoBroadcastBroadcastStore","LiveVideoBroadcastAPIBroadcastStore","LiveVideoBroadcastMetadataInputStore","LiveVideoBroadcastUIStore","LiveVideoBroadcastCrosspostStore"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i,j,k,l,m){var n;new(b("VideoBroadcastTypedLogger"))().setOverrideVideoBroadcastID(f).setOverrideAttributionAppID(l).setBroadcastEvent("go_live_dialog_initialize_without_bootloader").setMutationDetails({actor_id:a,container_id:d,stream_url:g,secure_stream_url:h,video_id:i,target_id:j,backupStreamURL:(n=m)!=null?n:""}).log();try{b("LiveVideoBroadcastDispatcher").explicitlyRegisterStores([b("LiveVideoBroadcastBroadcastStore"),b("LiveVideoBroadcastAPIBroadcastStore"),b("LiveVideoBroadcastMetadataInputStore"),b("LiveVideoBroadcastUIStore"),b("LiveVideoBroadcastAPIBroadcastStore"),b("LiveVideoBroadcastCrosspostStore")]);(n=b("LiveVideoBroadcastActions")).initialize({});n.setComposerConfig({config:e.config,contextConfig:e.contextConfig,composerID:e.composerID});n.updateBroadcastUIConfig(c);n.setPeopleTaggerSource(e.bootstrapData.attachmentData.taggersSource.PEOPLE);n.setHideInputToggle(!0);n.setInputSource("API");n.apiBroadcastCreated(a,f,{primaryStreamURL:g,primarySecureStreamURL:h,backupStreamURL:(n=m)!=null?n:void 0,backupSecureStreamURL:void 0},i,j,k,l,!1,Boolean(c.allowUnsecureRTMP));b("ReactComposerStatusActions").setMentionsSource(e.composerID,e.bootstrapData.attachmentData.mentionsSource);n=b("XLiveVideoBroadcastCreateQuickLoadUIController").getURIBuilder();k=b("ActorURI").create(n.getURI(),a);new(b("AsyncRequest"))().setURI(k).setData({container_id:d}).setMethod("GET").setReadOnly(!0).send()}catch(e){new(b("VideoBroadcastTypedLogger"))().setOverrideVideoBroadcastID(f).setOverrideAttributionAppID(l).setBroadcastEvent("go_live_dialog_initialize_failed").setMutationDetails({actor_id:a,container_id:d,stream_url:g,secure_stream_url:h,video_id:i,target_id:j,backupStreamURL:(c=m)!=null?c:""}).setErrorCode(e==null?void 0:e.code).setErrorTrace(e==null?void 0:e.stack).setErrorClass(e==null?void 0:e["class"]).setErrorMessage(e==null?void 0:e.message).log()}}e.exports={initializeSocialPluginWithoutBootloader:a}}),null);